(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerpolicy&&(s.referrerPolicy=i.referrerpolicy),i.crossorigin==="use-credentials"?s.credentials="include":i.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();var D1=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function b1(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function x1(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function r(){if(this instanceof r){var i=[null];i.push.apply(i,arguments);var s=Function.bind.apply(e,i);return new s}return e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var i=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return t[r]}})}),n}var lf={},pL={get exports(){return lf},set exports(t){lf=t}},Sp={},Vt={},mL={get exports(){return Vt},set exports(t){Vt=t}},Ae={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ah=Symbol.for("react.element"),gL=Symbol.for("react.portal"),yL=Symbol.for("react.fragment"),vL=Symbol.for("react.strict_mode"),_L=Symbol.for("react.profiler"),wL=Symbol.for("react.provider"),IL=Symbol.for("react.context"),EL=Symbol.for("react.forward_ref"),SL=Symbol.for("react.suspense"),TL=Symbol.for("react.memo"),kL=Symbol.for("react.lazy"),JI=Symbol.iterator;function CL(t){return t===null||typeof t!="object"?null:(t=JI&&t[JI]||t["@@iterator"],typeof t=="function"?t:null)}var A1={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},R1=Object.assign,O1={};function Fl(t,e,n){this.props=t,this.context=e,this.refs=O1,this.updater=n||A1}Fl.prototype.isReactComponent={};Fl.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Fl.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function P1(){}P1.prototype=Fl.prototype;function a_(t,e,n){this.props=t,this.context=e,this.refs=O1,this.updater=n||A1}var l_=a_.prototype=new P1;l_.constructor=a_;R1(l_,Fl.prototype);l_.isPureReactComponent=!0;var ZI=Array.isArray,M1=Object.prototype.hasOwnProperty,u_={current:null},L1={key:!0,ref:!0,__self:!0,__source:!0};function F1(t,e,n){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)M1.call(e,r)&&!L1.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var u=Array(a),c=0;c<a;c++)u[c]=arguments[c+2];i.children=u}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:ah,type:t,key:s,ref:o,props:i,_owner:u_.current}}function NL(t,e){return{$$typeof:ah,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function c_(t){return typeof t=="object"&&t!==null&&t.$$typeof===ah}function DL(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var eE=/\/+/g;function fg(t,e){return typeof t=="object"&&t!==null&&t.key!=null?DL(""+t.key):e.toString(36)}function Ud(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case ah:case gL:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+fg(o,0):r,ZI(i)?(n="",t!=null&&(n=t.replace(eE,"$&/")+"/"),Ud(i,e,n,"",function(c){return c})):i!=null&&(c_(i)&&(i=NL(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(eE,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",ZI(t))for(var a=0;a<t.length;a++){s=t[a];var u=r+fg(s,a);o+=Ud(s,e,n,u,i)}else if(u=CL(t),typeof u=="function")for(t=u.call(t),a=0;!(s=t.next()).done;)s=s.value,u=r+fg(s,a++),o+=Ud(s,e,n,u,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function ad(t,e,n){if(t==null)return t;var r=[],i=0;return Ud(t,r,"","",function(s){return e.call(n,s,i++)}),r}function bL(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Wn={current:null},Vd={transition:null},xL={ReactCurrentDispatcher:Wn,ReactCurrentBatchConfig:Vd,ReactCurrentOwner:u_};Ae.Children={map:ad,forEach:function(t,e,n){ad(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return ad(t,function(){e++}),e},toArray:function(t){return ad(t,function(e){return e})||[]},only:function(t){if(!c_(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Ae.Component=Fl;Ae.Fragment=yL;Ae.Profiler=_L;Ae.PureComponent=a_;Ae.StrictMode=vL;Ae.Suspense=SL;Ae.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=xL;Ae.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=R1({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=u_.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(u in e)M1.call(e,u)&&!L1.hasOwnProperty(u)&&(r[u]=e[u]===void 0&&a!==void 0?a[u]:e[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){a=Array(u);for(var c=0;c<u;c++)a[c]=arguments[c+2];r.children=a}return{$$typeof:ah,type:t.type,key:i,ref:s,props:r,_owner:o}};Ae.createContext=function(t){return t={$$typeof:IL,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:wL,_context:t},t.Consumer=t};Ae.createElement=F1;Ae.createFactory=function(t){var e=F1.bind(null,t);return e.type=t,e};Ae.createRef=function(){return{current:null}};Ae.forwardRef=function(t){return{$$typeof:EL,render:t}};Ae.isValidElement=c_;Ae.lazy=function(t){return{$$typeof:kL,_payload:{_status:-1,_result:t},_init:bL}};Ae.memo=function(t,e){return{$$typeof:TL,type:t,compare:e===void 0?null:e}};Ae.startTransition=function(t){var e=Vd.transition;Vd.transition={};try{t()}finally{Vd.transition=e}};Ae.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};Ae.useCallback=function(t,e){return Wn.current.useCallback(t,e)};Ae.useContext=function(t){return Wn.current.useContext(t)};Ae.useDebugValue=function(){};Ae.useDeferredValue=function(t){return Wn.current.useDeferredValue(t)};Ae.useEffect=function(t,e){return Wn.current.useEffect(t,e)};Ae.useId=function(){return Wn.current.useId()};Ae.useImperativeHandle=function(t,e,n){return Wn.current.useImperativeHandle(t,e,n)};Ae.useInsertionEffect=function(t,e){return Wn.current.useInsertionEffect(t,e)};Ae.useLayoutEffect=function(t,e){return Wn.current.useLayoutEffect(t,e)};Ae.useMemo=function(t,e){return Wn.current.useMemo(t,e)};Ae.useReducer=function(t,e,n){return Wn.current.useReducer(t,e,n)};Ae.useRef=function(t){return Wn.current.useRef(t)};Ae.useState=function(t){return Wn.current.useState(t)};Ae.useSyncExternalStore=function(t,e,n){return Wn.current.useSyncExternalStore(t,e,n)};Ae.useTransition=function(){return Wn.current.useTransition()};Ae.version="18.2.0";(function(t){t.exports=Ae})(mL);const AL=b1(Vt);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var RL=Vt,OL=Symbol.for("react.element"),PL=Symbol.for("react.fragment"),ML=Object.prototype.hasOwnProperty,LL=RL.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,FL={key:!0,ref:!0,__self:!0,__source:!0};function U1(t,e,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)ML.call(e,r)&&!FL.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:OL,type:t,key:s,ref:o,props:i,_owner:LL.current}}Sp.Fragment=PL;Sp.jsx=U1;Sp.jsxs=U1;(function(t){t.exports=Sp})(pL);const Cn=lf.jsx,ns=lf.jsxs;var fy={},py={},UL={get exports(){return py},set exports(t){py=t}},yr={},my={},VL={get exports(){return my},set exports(t){my=t}},V1={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e($,Q){var J=$.length;$.push(Q);e:for(;0<J;){var me=J-1>>>1,_e=$[me];if(0<i(_e,Q))$[me]=Q,$[J]=_e,J=me;else break e}}function n($){return $.length===0?null:$[0]}function r($){if($.length===0)return null;var Q=$[0],J=$.pop();if(J!==Q){$[0]=J;e:for(var me=0,_e=$.length,Ze=_e>>>1;me<Ze;){var Le=2*(me+1)-1,Z=$[Le],ot=Le+1,Ft=$[ot];if(0>i(Z,J))ot<_e&&0>i(Ft,Z)?($[me]=Ft,$[ot]=J,me=ot):($[me]=Z,$[Le]=J,me=Le);else if(ot<_e&&0>i(Ft,J))$[me]=Ft,$[ot]=J,me=ot;else break e}}return Q}function i($,Q){var J=$.sortIndex-Q.sortIndex;return J!==0?J:$.id-Q.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var u=[],c=[],d=1,f=null,g=3,v=!1,w=!1,T=!1,C=typeof setTimeout=="function"?setTimeout:null,I=typeof clearTimeout=="function"?clearTimeout:null,_=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function E($){for(var Q=n(c);Q!==null;){if(Q.callback===null)r(c);else if(Q.startTime<=$)r(c),Q.sortIndex=Q.expirationTime,e(u,Q);else break;Q=n(c)}}function b($){if(T=!1,E($),!w)if(n(u)!==null)w=!0,W(O);else{var Q=n(c);Q!==null&&re(b,Q.startTime-$)}}function O($,Q){w=!1,T&&(T=!1,I(z),z=-1),v=!0;var J=g;try{for(E(Q),f=n(u);f!==null&&(!(f.expirationTime>Q)||$&&!xt());){var me=f.callback;if(typeof me=="function"){f.callback=null,g=f.priorityLevel;var _e=me(f.expirationTime<=Q);Q=t.unstable_now(),typeof _e=="function"?f.callback=_e:f===n(u)&&r(u),E(Q)}else r(u);f=n(u)}if(f!==null)var Ze=!0;else{var Le=n(c);Le!==null&&re(b,Le.startTime-Q),Ze=!1}return Ze}finally{f=null,g=J,v=!1}}var P=!1,L=null,z=-1,Te=5,ae=-1;function xt(){return!(t.unstable_now()-ae<Te)}function ke(){if(L!==null){var $=t.unstable_now();ae=$;var Q=!0;try{Q=L(!0,$)}finally{Q?K():(P=!1,L=null)}}else P=!1}var K;if(typeof _=="function")K=function(){_(ke)};else if(typeof MessageChannel<"u"){var he=new MessageChannel,q=he.port2;he.port1.onmessage=ke,K=function(){q.postMessage(null)}}else K=function(){C(ke,0)};function W($){L=$,P||(P=!0,K())}function re($,Q){z=C(function(){$(t.unstable_now())},Q)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function($){$.callback=null},t.unstable_continueExecution=function(){w||v||(w=!0,W(O))},t.unstable_forceFrameRate=function($){0>$||125<$?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Te=0<$?Math.floor(1e3/$):5},t.unstable_getCurrentPriorityLevel=function(){return g},t.unstable_getFirstCallbackNode=function(){return n(u)},t.unstable_next=function($){switch(g){case 1:case 2:case 3:var Q=3;break;default:Q=g}var J=g;g=Q;try{return $()}finally{g=J}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function($,Q){switch($){case 1:case 2:case 3:case 4:case 5:break;default:$=3}var J=g;g=$;try{return Q()}finally{g=J}},t.unstable_scheduleCallback=function($,Q,J){var me=t.unstable_now();switch(typeof J=="object"&&J!==null?(J=J.delay,J=typeof J=="number"&&0<J?me+J:me):J=me,$){case 1:var _e=-1;break;case 2:_e=250;break;case 5:_e=1073741823;break;case 4:_e=1e4;break;default:_e=5e3}return _e=J+_e,$={id:d++,callback:Q,priorityLevel:$,startTime:J,expirationTime:_e,sortIndex:-1},J>me?($.sortIndex=J,e(c,$),n(u)===null&&$===n(c)&&(T?(I(z),z=-1):T=!0,re(b,J-me))):($.sortIndex=_e,e(u,$),w||v||(w=!0,W(O))),$},t.unstable_shouldYield=xt,t.unstable_wrapCallback=function($){var Q=g;return function(){var J=g;g=Q;try{return $.apply(this,arguments)}finally{g=J}}}})(V1);(function(t){t.exports=V1})(VL);/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $1=Vt,pr=my;function U(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var B1=new Set,mc={};function ia(t,e){ul(t,e),ul(t+"Capture",e)}function ul(t,e){for(mc[t]=e,t=0;t<e.length;t++)B1.add(e[t])}var Ri=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),gy=Object.prototype.hasOwnProperty,$L=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,tE={},nE={};function BL(t){return gy.call(nE,t)?!0:gy.call(tE,t)?!1:$L.test(t)?nE[t]=!0:(tE[t]=!0,!1)}function WL(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function jL(t,e,n,r){if(e===null||typeof e>"u"||WL(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function jn(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var gn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){gn[t]=new jn(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];gn[e]=new jn(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){gn[t]=new jn(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){gn[t]=new jn(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){gn[t]=new jn(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){gn[t]=new jn(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){gn[t]=new jn(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){gn[t]=new jn(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){gn[t]=new jn(t,5,!1,t.toLowerCase(),null,!1,!1)});var h_=/[\-:]([a-z])/g;function d_(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(h_,d_);gn[e]=new jn(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(h_,d_);gn[e]=new jn(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(h_,d_);gn[e]=new jn(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){gn[t]=new jn(t,1,!1,t.toLowerCase(),null,!1,!1)});gn.xlinkHref=new jn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){gn[t]=new jn(t,1,!1,t.toLowerCase(),null,!0,!0)});function f_(t,e,n,r){var i=gn.hasOwnProperty(e)?gn[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(jL(e,n,i,r)&&(n=null),r||i===null?BL(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var $i=$1.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ld=Symbol.for("react.element"),Pa=Symbol.for("react.portal"),Ma=Symbol.for("react.fragment"),p_=Symbol.for("react.strict_mode"),yy=Symbol.for("react.profiler"),W1=Symbol.for("react.provider"),j1=Symbol.for("react.context"),m_=Symbol.for("react.forward_ref"),vy=Symbol.for("react.suspense"),_y=Symbol.for("react.suspense_list"),g_=Symbol.for("react.memo"),as=Symbol.for("react.lazy"),z1=Symbol.for("react.offscreen"),rE=Symbol.iterator;function yu(t){return t===null||typeof t!="object"?null:(t=rE&&t[rE]||t["@@iterator"],typeof t=="function"?t:null)}var vt=Object.assign,pg;function Lu(t){if(pg===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);pg=e&&e[1]||""}return`
`+pg+t}var mg=!1;function gg(t,e){if(!t||mg)return"";mg=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var i=c.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var u=`
`+i[o].replace(" at new "," at ");return t.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",t.displayName)),u}while(1<=o&&0<=a);break}}}finally{mg=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Lu(t):""}function zL(t){switch(t.tag){case 5:return Lu(t.type);case 16:return Lu("Lazy");case 13:return Lu("Suspense");case 19:return Lu("SuspenseList");case 0:case 2:case 15:return t=gg(t.type,!1),t;case 11:return t=gg(t.type.render,!1),t;case 1:return t=gg(t.type,!0),t;default:return""}}function wy(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Ma:return"Fragment";case Pa:return"Portal";case yy:return"Profiler";case p_:return"StrictMode";case vy:return"Suspense";case _y:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case j1:return(t.displayName||"Context")+".Consumer";case W1:return(t._context.displayName||"Context")+".Provider";case m_:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case g_:return e=t.displayName||null,e!==null?e:wy(t.type)||"Memo";case as:e=t._payload,t=t._init;try{return wy(t(e))}catch{}}return null}function qL(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return wy(e);case 8:return e===p_?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Rs(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function q1(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function GL(t){var e=q1(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function ud(t){t._valueTracker||(t._valueTracker=GL(t))}function G1(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=q1(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function uf(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Iy(t,e){var n=e.checked;return vt({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function iE(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Rs(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function H1(t,e){e=e.checked,e!=null&&f_(t,"checked",e,!1)}function Ey(t,e){H1(t,e);var n=Rs(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Sy(t,e.type,n):e.hasOwnProperty("defaultValue")&&Sy(t,e.type,Rs(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function sE(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Sy(t,e,n){(e!=="number"||uf(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Fu=Array.isArray;function Qa(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Rs(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function Ty(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(U(91));return vt({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function oE(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(U(92));if(Fu(n)){if(1<n.length)throw Error(U(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Rs(n)}}function Y1(t,e){var n=Rs(e.value),r=Rs(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function aE(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function K1(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ky(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?K1(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var cd,Q1=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(cd=cd||document.createElement("div"),cd.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=cd.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function gc(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Hu={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},HL=["Webkit","ms","Moz","O"];Object.keys(Hu).forEach(function(t){HL.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Hu[e]=Hu[t]})});function X1(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Hu.hasOwnProperty(t)&&Hu[t]?(""+e).trim():e+"px"}function J1(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=X1(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var YL=vt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Cy(t,e){if(e){if(YL[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(U(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(U(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(U(61))}if(e.style!=null&&typeof e.style!="object")throw Error(U(62))}}function Ny(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Dy=null;function y_(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var by=null,Xa=null,Ja=null;function lE(t){if(t=ch(t)){if(typeof by!="function")throw Error(U(280));var e=t.stateNode;e&&(e=Dp(e),by(t.stateNode,t.type,e))}}function Z1(t){Xa?Ja?Ja.push(t):Ja=[t]:Xa=t}function ek(){if(Xa){var t=Xa,e=Ja;if(Ja=Xa=null,lE(t),e)for(t=0;t<e.length;t++)lE(e[t])}}function tk(t,e){return t(e)}function nk(){}var yg=!1;function rk(t,e,n){if(yg)return t(e,n);yg=!0;try{return tk(t,e,n)}finally{yg=!1,(Xa!==null||Ja!==null)&&(nk(),ek())}}function yc(t,e){var n=t.stateNode;if(n===null)return null;var r=Dp(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(U(231,e,typeof n));return n}var xy=!1;if(Ri)try{var vu={};Object.defineProperty(vu,"passive",{get:function(){xy=!0}}),window.addEventListener("test",vu,vu),window.removeEventListener("test",vu,vu)}catch{xy=!1}function KL(t,e,n,r,i,s,o,a,u){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(d){this.onError(d)}}var Yu=!1,cf=null,hf=!1,Ay=null,QL={onError:function(t){Yu=!0,cf=t}};function XL(t,e,n,r,i,s,o,a,u){Yu=!1,cf=null,KL.apply(QL,arguments)}function JL(t,e,n,r,i,s,o,a,u){if(XL.apply(this,arguments),Yu){if(Yu){var c=cf;Yu=!1,cf=null}else throw Error(U(198));hf||(hf=!0,Ay=c)}}function sa(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function ik(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function uE(t){if(sa(t)!==t)throw Error(U(188))}function ZL(t){var e=t.alternate;if(!e){if(e=sa(t),e===null)throw Error(U(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return uE(i),t;if(s===r)return uE(i),e;s=s.sibling}throw Error(U(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o)throw Error(U(189))}}if(n.alternate!==r)throw Error(U(190))}if(n.tag!==3)throw Error(U(188));return n.stateNode.current===n?t:e}function sk(t){return t=ZL(t),t!==null?ok(t):null}function ok(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=ok(t);if(e!==null)return e;t=t.sibling}return null}var ak=pr.unstable_scheduleCallback,cE=pr.unstable_cancelCallback,eF=pr.unstable_shouldYield,tF=pr.unstable_requestPaint,At=pr.unstable_now,nF=pr.unstable_getCurrentPriorityLevel,v_=pr.unstable_ImmediatePriority,lk=pr.unstable_UserBlockingPriority,df=pr.unstable_NormalPriority,rF=pr.unstable_LowPriority,uk=pr.unstable_IdlePriority,Tp=null,ti=null;function iF(t){if(ti&&typeof ti.onCommitFiberRoot=="function")try{ti.onCommitFiberRoot(Tp,t,void 0,(t.current.flags&128)===128)}catch{}}var Vr=Math.clz32?Math.clz32:aF,sF=Math.log,oF=Math.LN2;function aF(t){return t>>>=0,t===0?32:31-(sF(t)/oF|0)|0}var hd=64,dd=4194304;function Uu(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function ff(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~i;a!==0?r=Uu(a):(s&=o,s!==0&&(r=Uu(s)))}else o=n&~i,o!==0?r=Uu(o):s!==0&&(r=Uu(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Vr(e),i=1<<n,r|=t[n],e&=~i;return r}function lF(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function uF(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-Vr(s),a=1<<o,u=i[o];u===-1?(!(a&n)||a&r)&&(i[o]=lF(a,e)):u<=e&&(t.expiredLanes|=a),s&=~a}}function Ry(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function ck(){var t=hd;return hd<<=1,!(hd&4194240)&&(hd=64),t}function vg(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function lh(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Vr(e),t[e]=n}function cF(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-Vr(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function __(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Vr(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var je=0;function hk(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var dk,w_,fk,pk,mk,Oy=!1,fd=[],vs=null,_s=null,ws=null,vc=new Map,_c=new Map,us=[],hF="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function hE(t,e){switch(t){case"focusin":case"focusout":vs=null;break;case"dragenter":case"dragleave":_s=null;break;case"mouseover":case"mouseout":ws=null;break;case"pointerover":case"pointerout":vc.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":_c.delete(e.pointerId)}}function _u(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=ch(e),e!==null&&w_(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function dF(t,e,n,r,i){switch(e){case"focusin":return vs=_u(vs,t,e,n,r,i),!0;case"dragenter":return _s=_u(_s,t,e,n,r,i),!0;case"mouseover":return ws=_u(ws,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return vc.set(s,_u(vc.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,_c.set(s,_u(_c.get(s)||null,t,e,n,r,i)),!0}return!1}function gk(t){var e=Eo(t.target);if(e!==null){var n=sa(e);if(n!==null){if(e=n.tag,e===13){if(e=ik(n),e!==null){t.blockedOn=e,mk(t.priority,function(){fk(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function $d(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Py(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Dy=r,n.target.dispatchEvent(r),Dy=null}else return e=ch(n),e!==null&&w_(e),t.blockedOn=n,!1;e.shift()}return!0}function dE(t,e,n){$d(t)&&n.delete(e)}function fF(){Oy=!1,vs!==null&&$d(vs)&&(vs=null),_s!==null&&$d(_s)&&(_s=null),ws!==null&&$d(ws)&&(ws=null),vc.forEach(dE),_c.forEach(dE)}function wu(t,e){t.blockedOn===e&&(t.blockedOn=null,Oy||(Oy=!0,pr.unstable_scheduleCallback(pr.unstable_NormalPriority,fF)))}function wc(t){function e(i){return wu(i,t)}if(0<fd.length){wu(fd[0],t);for(var n=1;n<fd.length;n++){var r=fd[n];r.blockedOn===t&&(r.blockedOn=null)}}for(vs!==null&&wu(vs,t),_s!==null&&wu(_s,t),ws!==null&&wu(ws,t),vc.forEach(e),_c.forEach(e),n=0;n<us.length;n++)r=us[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<us.length&&(n=us[0],n.blockedOn===null);)gk(n),n.blockedOn===null&&us.shift()}var Za=$i.ReactCurrentBatchConfig,pf=!0;function pF(t,e,n,r){var i=je,s=Za.transition;Za.transition=null;try{je=1,I_(t,e,n,r)}finally{je=i,Za.transition=s}}function mF(t,e,n,r){var i=je,s=Za.transition;Za.transition=null;try{je=4,I_(t,e,n,r)}finally{je=i,Za.transition=s}}function I_(t,e,n,r){if(pf){var i=Py(t,e,n,r);if(i===null)Dg(t,e,r,mf,n),hE(t,r);else if(dF(i,t,e,n,r))r.stopPropagation();else if(hE(t,r),e&4&&-1<hF.indexOf(t)){for(;i!==null;){var s=ch(i);if(s!==null&&dk(s),s=Py(t,e,n,r),s===null&&Dg(t,e,r,mf,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else Dg(t,e,r,null,n)}}var mf=null;function Py(t,e,n,r){if(mf=null,t=y_(r),t=Eo(t),t!==null)if(e=sa(t),e===null)t=null;else if(n=e.tag,n===13){if(t=ik(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return mf=t,null}function yk(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(nF()){case v_:return 1;case lk:return 4;case df:case rF:return 16;case uk:return 536870912;default:return 16}default:return 16}}var fs=null,E_=null,Bd=null;function vk(){if(Bd)return Bd;var t,e=E_,n=e.length,r,i="value"in fs?fs.value:fs.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[s-r];r++);return Bd=i.slice(t,1<r?1-r:void 0)}function Wd(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function pd(){return!0}function fE(){return!1}function vr(t){function e(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?pd:fE,this.isPropagationStopped=fE,this}return vt(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=pd)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=pd)},persist:function(){},isPersistent:pd}),e}var Ul={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},S_=vr(Ul),uh=vt({},Ul,{view:0,detail:0}),gF=vr(uh),_g,wg,Iu,kp=vt({},uh,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:T_,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Iu&&(Iu&&t.type==="mousemove"?(_g=t.screenX-Iu.screenX,wg=t.screenY-Iu.screenY):wg=_g=0,Iu=t),_g)},movementY:function(t){return"movementY"in t?t.movementY:wg}}),pE=vr(kp),yF=vt({},kp,{dataTransfer:0}),vF=vr(yF),_F=vt({},uh,{relatedTarget:0}),Ig=vr(_F),wF=vt({},Ul,{animationName:0,elapsedTime:0,pseudoElement:0}),IF=vr(wF),EF=vt({},Ul,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),SF=vr(EF),TF=vt({},Ul,{data:0}),mE=vr(TF),kF={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},CF={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},NF={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function DF(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=NF[t])?!!e[t]:!1}function T_(){return DF}var bF=vt({},uh,{key:function(t){if(t.key){var e=kF[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Wd(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?CF[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:T_,charCode:function(t){return t.type==="keypress"?Wd(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Wd(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),xF=vr(bF),AF=vt({},kp,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),gE=vr(AF),RF=vt({},uh,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:T_}),OF=vr(RF),PF=vt({},Ul,{propertyName:0,elapsedTime:0,pseudoElement:0}),MF=vr(PF),LF=vt({},kp,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),FF=vr(LF),UF=[9,13,27,32],k_=Ri&&"CompositionEvent"in window,Ku=null;Ri&&"documentMode"in document&&(Ku=document.documentMode);var VF=Ri&&"TextEvent"in window&&!Ku,_k=Ri&&(!k_||Ku&&8<Ku&&11>=Ku),yE=String.fromCharCode(32),vE=!1;function wk(t,e){switch(t){case"keyup":return UF.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ik(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var La=!1;function $F(t,e){switch(t){case"compositionend":return Ik(e);case"keypress":return e.which!==32?null:(vE=!0,yE);case"textInput":return t=e.data,t===yE&&vE?null:t;default:return null}}function BF(t,e){if(La)return t==="compositionend"||!k_&&wk(t,e)?(t=vk(),Bd=E_=fs=null,La=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return _k&&e.locale!=="ko"?null:e.data;default:return null}}var WF={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function _E(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!WF[t.type]:e==="textarea"}function Ek(t,e,n,r){Z1(r),e=gf(e,"onChange"),0<e.length&&(n=new S_("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Qu=null,Ic=null;function jF(t){Ok(t,0)}function Cp(t){var e=Va(t);if(G1(e))return t}function zF(t,e){if(t==="change")return e}var Sk=!1;if(Ri){var Eg;if(Ri){var Sg="oninput"in document;if(!Sg){var wE=document.createElement("div");wE.setAttribute("oninput","return;"),Sg=typeof wE.oninput=="function"}Eg=Sg}else Eg=!1;Sk=Eg&&(!document.documentMode||9<document.documentMode)}function IE(){Qu&&(Qu.detachEvent("onpropertychange",Tk),Ic=Qu=null)}function Tk(t){if(t.propertyName==="value"&&Cp(Ic)){var e=[];Ek(e,Ic,t,y_(t)),rk(jF,e)}}function qF(t,e,n){t==="focusin"?(IE(),Qu=e,Ic=n,Qu.attachEvent("onpropertychange",Tk)):t==="focusout"&&IE()}function GF(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Cp(Ic)}function HF(t,e){if(t==="click")return Cp(e)}function YF(t,e){if(t==="input"||t==="change")return Cp(e)}function KF(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var jr=typeof Object.is=="function"?Object.is:KF;function Ec(t,e){if(jr(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!gy.call(e,i)||!jr(t[i],e[i]))return!1}return!0}function EE(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function SE(t,e){var n=EE(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=EE(n)}}function kk(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?kk(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Ck(){for(var t=window,e=uf();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=uf(t.document)}return e}function C_(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function QF(t){var e=Ck(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&kk(n.ownerDocument.documentElement,n)){if(r!==null&&C_(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=SE(n,s);var o=SE(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var XF=Ri&&"documentMode"in document&&11>=document.documentMode,Fa=null,My=null,Xu=null,Ly=!1;function TE(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Ly||Fa==null||Fa!==uf(r)||(r=Fa,"selectionStart"in r&&C_(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Xu&&Ec(Xu,r)||(Xu=r,r=gf(My,"onSelect"),0<r.length&&(e=new S_("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Fa)))}function md(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Ua={animationend:md("Animation","AnimationEnd"),animationiteration:md("Animation","AnimationIteration"),animationstart:md("Animation","AnimationStart"),transitionend:md("Transition","TransitionEnd")},Tg={},Nk={};Ri&&(Nk=document.createElement("div").style,"AnimationEvent"in window||(delete Ua.animationend.animation,delete Ua.animationiteration.animation,delete Ua.animationstart.animation),"TransitionEvent"in window||delete Ua.transitionend.transition);function Np(t){if(Tg[t])return Tg[t];if(!Ua[t])return t;var e=Ua[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in Nk)return Tg[t]=e[n];return t}var Dk=Np("animationend"),bk=Np("animationiteration"),xk=Np("animationstart"),Ak=Np("transitionend"),Rk=new Map,kE="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function qs(t,e){Rk.set(t,e),ia(e,[t])}for(var kg=0;kg<kE.length;kg++){var Cg=kE[kg],JF=Cg.toLowerCase(),ZF=Cg[0].toUpperCase()+Cg.slice(1);qs(JF,"on"+ZF)}qs(Dk,"onAnimationEnd");qs(bk,"onAnimationIteration");qs(xk,"onAnimationStart");qs("dblclick","onDoubleClick");qs("focusin","onFocus");qs("focusout","onBlur");qs(Ak,"onTransitionEnd");ul("onMouseEnter",["mouseout","mouseover"]);ul("onMouseLeave",["mouseout","mouseover"]);ul("onPointerEnter",["pointerout","pointerover"]);ul("onPointerLeave",["pointerout","pointerover"]);ia("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));ia("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));ia("onBeforeInput",["compositionend","keypress","textInput","paste"]);ia("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));ia("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));ia("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Vu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),eU=new Set("cancel close invalid load scroll toggle".split(" ").concat(Vu));function CE(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,JL(r,e,void 0,t),t.currentTarget=null}function Ok(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],u=a.instance,c=a.currentTarget;if(a=a.listener,u!==s&&i.isPropagationStopped())break e;CE(i,a,c),s=u}else for(o=0;o<r.length;o++){if(a=r[o],u=a.instance,c=a.currentTarget,a=a.listener,u!==s&&i.isPropagationStopped())break e;CE(i,a,c),s=u}}}if(hf)throw t=Ay,hf=!1,Ay=null,t}function rt(t,e){var n=e[By];n===void 0&&(n=e[By]=new Set);var r=t+"__bubble";n.has(r)||(Pk(e,t,2,!1),n.add(r))}function Ng(t,e,n){var r=0;e&&(r|=4),Pk(n,t,r,e)}var gd="_reactListening"+Math.random().toString(36).slice(2);function Sc(t){if(!t[gd]){t[gd]=!0,B1.forEach(function(n){n!=="selectionchange"&&(eU.has(n)||Ng(n,!1,t),Ng(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[gd]||(e[gd]=!0,Ng("selectionchange",!1,e))}}function Pk(t,e,n,r){switch(yk(e)){case 1:var i=pF;break;case 4:i=mF;break;default:i=I_}n=i.bind(null,e,n,t),i=void 0,!xy||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function Dg(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var u=o.tag;if((u===3||u===4)&&(u=o.stateNode.containerInfo,u===i||u.nodeType===8&&u.parentNode===i))return;o=o.return}for(;a!==null;){if(o=Eo(a),o===null)return;if(u=o.tag,u===5||u===6){r=s=o;continue e}a=a.parentNode}}r=r.return}rk(function(){var c=s,d=y_(n),f=[];e:{var g=Rk.get(t);if(g!==void 0){var v=S_,w=t;switch(t){case"keypress":if(Wd(n)===0)break e;case"keydown":case"keyup":v=xF;break;case"focusin":w="focus",v=Ig;break;case"focusout":w="blur",v=Ig;break;case"beforeblur":case"afterblur":v=Ig;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":v=pE;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":v=vF;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":v=OF;break;case Dk:case bk:case xk:v=IF;break;case Ak:v=MF;break;case"scroll":v=gF;break;case"wheel":v=FF;break;case"copy":case"cut":case"paste":v=SF;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":v=gE}var T=(e&4)!==0,C=!T&&t==="scroll",I=T?g!==null?g+"Capture":null:g;T=[];for(var _=c,E;_!==null;){E=_;var b=E.stateNode;if(E.tag===5&&b!==null&&(E=b,I!==null&&(b=yc(_,I),b!=null&&T.push(Tc(_,b,E)))),C)break;_=_.return}0<T.length&&(g=new v(g,w,null,n,d),f.push({event:g,listeners:T}))}}if(!(e&7)){e:{if(g=t==="mouseover"||t==="pointerover",v=t==="mouseout"||t==="pointerout",g&&n!==Dy&&(w=n.relatedTarget||n.fromElement)&&(Eo(w)||w[Oi]))break e;if((v||g)&&(g=d.window===d?d:(g=d.ownerDocument)?g.defaultView||g.parentWindow:window,v?(w=n.relatedTarget||n.toElement,v=c,w=w?Eo(w):null,w!==null&&(C=sa(w),w!==C||w.tag!==5&&w.tag!==6)&&(w=null)):(v=null,w=c),v!==w)){if(T=pE,b="onMouseLeave",I="onMouseEnter",_="mouse",(t==="pointerout"||t==="pointerover")&&(T=gE,b="onPointerLeave",I="onPointerEnter",_="pointer"),C=v==null?g:Va(v),E=w==null?g:Va(w),g=new T(b,_+"leave",v,n,d),g.target=C,g.relatedTarget=E,b=null,Eo(d)===c&&(T=new T(I,_+"enter",w,n,d),T.target=E,T.relatedTarget=C,b=T),C=b,v&&w)t:{for(T=v,I=w,_=0,E=T;E;E=Na(E))_++;for(E=0,b=I;b;b=Na(b))E++;for(;0<_-E;)T=Na(T),_--;for(;0<E-_;)I=Na(I),E--;for(;_--;){if(T===I||I!==null&&T===I.alternate)break t;T=Na(T),I=Na(I)}T=null}else T=null;v!==null&&NE(f,g,v,T,!1),w!==null&&C!==null&&NE(f,C,w,T,!0)}}e:{if(g=c?Va(c):window,v=g.nodeName&&g.nodeName.toLowerCase(),v==="select"||v==="input"&&g.type==="file")var O=zF;else if(_E(g))if(Sk)O=YF;else{O=GF;var P=qF}else(v=g.nodeName)&&v.toLowerCase()==="input"&&(g.type==="checkbox"||g.type==="radio")&&(O=HF);if(O&&(O=O(t,c))){Ek(f,O,n,d);break e}P&&P(t,g,c),t==="focusout"&&(P=g._wrapperState)&&P.controlled&&g.type==="number"&&Sy(g,"number",g.value)}switch(P=c?Va(c):window,t){case"focusin":(_E(P)||P.contentEditable==="true")&&(Fa=P,My=c,Xu=null);break;case"focusout":Xu=My=Fa=null;break;case"mousedown":Ly=!0;break;case"contextmenu":case"mouseup":case"dragend":Ly=!1,TE(f,n,d);break;case"selectionchange":if(XF)break;case"keydown":case"keyup":TE(f,n,d)}var L;if(k_)e:{switch(t){case"compositionstart":var z="onCompositionStart";break e;case"compositionend":z="onCompositionEnd";break e;case"compositionupdate":z="onCompositionUpdate";break e}z=void 0}else La?wk(t,n)&&(z="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(z="onCompositionStart");z&&(_k&&n.locale!=="ko"&&(La||z!=="onCompositionStart"?z==="onCompositionEnd"&&La&&(L=vk()):(fs=d,E_="value"in fs?fs.value:fs.textContent,La=!0)),P=gf(c,z),0<P.length&&(z=new mE(z,t,null,n,d),f.push({event:z,listeners:P}),L?z.data=L:(L=Ik(n),L!==null&&(z.data=L)))),(L=VF?$F(t,n):BF(t,n))&&(c=gf(c,"onBeforeInput"),0<c.length&&(d=new mE("onBeforeInput","beforeinput",null,n,d),f.push({event:d,listeners:c}),d.data=L))}Ok(f,e)})}function Tc(t,e,n){return{instance:t,listener:e,currentTarget:n}}function gf(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=yc(t,n),s!=null&&r.unshift(Tc(t,s,i)),s=yc(t,e),s!=null&&r.push(Tc(t,s,i))),t=t.return}return r}function Na(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function NE(t,e,n,r,i){for(var s=e._reactName,o=[];n!==null&&n!==r;){var a=n,u=a.alternate,c=a.stateNode;if(u!==null&&u===r)break;a.tag===5&&c!==null&&(a=c,i?(u=yc(n,s),u!=null&&o.unshift(Tc(n,u,a))):i||(u=yc(n,s),u!=null&&o.push(Tc(n,u,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var tU=/\r\n?/g,nU=/\u0000|\uFFFD/g;function DE(t){return(typeof t=="string"?t:""+t).replace(tU,`
`).replace(nU,"")}function yd(t,e,n){if(e=DE(e),DE(t)!==e&&n)throw Error(U(425))}function yf(){}var Fy=null,Uy=null;function Vy(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var $y=typeof setTimeout=="function"?setTimeout:void 0,rU=typeof clearTimeout=="function"?clearTimeout:void 0,bE=typeof Promise=="function"?Promise:void 0,iU=typeof queueMicrotask=="function"?queueMicrotask:typeof bE<"u"?function(t){return bE.resolve(null).then(t).catch(sU)}:$y;function sU(t){setTimeout(function(){throw t})}function bg(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),wc(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);wc(e)}function Is(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function xE(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Vl=Math.random().toString(36).slice(2),Qr="__reactFiber$"+Vl,kc="__reactProps$"+Vl,Oi="__reactContainer$"+Vl,By="__reactEvents$"+Vl,oU="__reactListeners$"+Vl,aU="__reactHandles$"+Vl;function Eo(t){var e=t[Qr];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Oi]||n[Qr]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=xE(t);t!==null;){if(n=t[Qr])return n;t=xE(t)}return e}t=n,n=t.parentNode}return null}function ch(t){return t=t[Qr]||t[Oi],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Va(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(U(33))}function Dp(t){return t[kc]||null}var Wy=[],$a=-1;function Gs(t){return{current:t}}function st(t){0>$a||(t.current=Wy[$a],Wy[$a]=null,$a--)}function Xe(t,e){$a++,Wy[$a]=t.current,t.current=e}var Os={},xn=Gs(Os),nr=Gs(!1),Lo=Os;function cl(t,e){var n=t.type.contextTypes;if(!n)return Os;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function rr(t){return t=t.childContextTypes,t!=null}function vf(){st(nr),st(xn)}function AE(t,e,n){if(xn.current!==Os)throw Error(U(168));Xe(xn,e),Xe(nr,n)}function Mk(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(U(108,qL(t)||"Unknown",i));return vt({},n,r)}function _f(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Os,Lo=xn.current,Xe(xn,t),Xe(nr,nr.current),!0}function RE(t,e,n){var r=t.stateNode;if(!r)throw Error(U(169));n?(t=Mk(t,e,Lo),r.__reactInternalMemoizedMergedChildContext=t,st(nr),st(xn),Xe(xn,t)):st(nr),Xe(nr,n)}var vi=null,bp=!1,xg=!1;function Lk(t){vi===null?vi=[t]:vi.push(t)}function lU(t){bp=!0,Lk(t)}function Hs(){if(!xg&&vi!==null){xg=!0;var t=0,e=je;try{var n=vi;for(je=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}vi=null,bp=!1}catch(i){throw vi!==null&&(vi=vi.slice(t+1)),ak(v_,Hs),i}finally{je=e,xg=!1}}return null}var Ba=[],Wa=0,wf=null,If=0,Ir=[],Er=0,Fo=null,Si=1,Ti="";function fo(t,e){Ba[Wa++]=If,Ba[Wa++]=wf,wf=t,If=e}function Fk(t,e,n){Ir[Er++]=Si,Ir[Er++]=Ti,Ir[Er++]=Fo,Fo=t;var r=Si;t=Ti;var i=32-Vr(r)-1;r&=~(1<<i),n+=1;var s=32-Vr(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Si=1<<32-Vr(e)+i|n<<i|r,Ti=s+t}else Si=1<<s|n<<i|r,Ti=t}function N_(t){t.return!==null&&(fo(t,1),Fk(t,1,0))}function D_(t){for(;t===wf;)wf=Ba[--Wa],Ba[Wa]=null,If=Ba[--Wa],Ba[Wa]=null;for(;t===Fo;)Fo=Ir[--Er],Ir[Er]=null,Ti=Ir[--Er],Ir[Er]=null,Si=Ir[--Er],Ir[Er]=null}var dr=null,hr=null,ht=!1,Mr=null;function Uk(t,e){var n=Sr(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function OE(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,dr=t,hr=Is(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,dr=t,hr=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Fo!==null?{id:Si,overflow:Ti}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Sr(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,dr=t,hr=null,!0):!1;default:return!1}}function jy(t){return(t.mode&1)!==0&&(t.flags&128)===0}function zy(t){if(ht){var e=hr;if(e){var n=e;if(!OE(t,e)){if(jy(t))throw Error(U(418));e=Is(n.nextSibling);var r=dr;e&&OE(t,e)?Uk(r,n):(t.flags=t.flags&-4097|2,ht=!1,dr=t)}}else{if(jy(t))throw Error(U(418));t.flags=t.flags&-4097|2,ht=!1,dr=t}}}function PE(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;dr=t}function vd(t){if(t!==dr)return!1;if(!ht)return PE(t),ht=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Vy(t.type,t.memoizedProps)),e&&(e=hr)){if(jy(t))throw Vk(),Error(U(418));for(;e;)Uk(t,e),e=Is(e.nextSibling)}if(PE(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(U(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){hr=Is(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}hr=null}}else hr=dr?Is(t.stateNode.nextSibling):null;return!0}function Vk(){for(var t=hr;t;)t=Is(t.nextSibling)}function hl(){hr=dr=null,ht=!1}function b_(t){Mr===null?Mr=[t]:Mr.push(t)}var uU=$i.ReactCurrentBatchConfig;function Or(t,e){if(t&&t.defaultProps){e=vt({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}var Ef=Gs(null),Sf=null,ja=null,x_=null;function A_(){x_=ja=Sf=null}function R_(t){var e=Ef.current;st(Ef),t._currentValue=e}function qy(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function el(t,e){Sf=t,x_=ja=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Xn=!0),t.firstContext=null)}function Nr(t){var e=t._currentValue;if(x_!==t)if(t={context:t,memoizedValue:e,next:null},ja===null){if(Sf===null)throw Error(U(308));ja=t,Sf.dependencies={lanes:0,firstContext:t}}else ja=ja.next=t;return e}var So=null;function O_(t){So===null?So=[t]:So.push(t)}function $k(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,O_(e)):(n.next=i.next,i.next=n),e.interleaved=n,Pi(t,r)}function Pi(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var ls=!1;function P_(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Bk(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function bi(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Es(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,Ue&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,Pi(t,n)}return i=r.interleaved,i===null?(e.next=e,O_(r)):(e.next=i.next,i.next=e),r.interleaved=e,Pi(t,n)}function jd(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,__(t,n)}}function ME(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Tf(t,e,n,r){var i=t.updateQueue;ls=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var u=a,c=u.next;u.next=null,o===null?s=c:o.next=c,o=u;var d=t.alternate;d!==null&&(d=d.updateQueue,a=d.lastBaseUpdate,a!==o&&(a===null?d.firstBaseUpdate=c:a.next=c,d.lastBaseUpdate=u))}if(s!==null){var f=i.baseState;o=0,d=c=u=null,a=s;do{var g=a.lane,v=a.eventTime;if((r&g)===g){d!==null&&(d=d.next={eventTime:v,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var w=t,T=a;switch(g=e,v=n,T.tag){case 1:if(w=T.payload,typeof w=="function"){f=w.call(v,f,g);break e}f=w;break e;case 3:w.flags=w.flags&-65537|128;case 0:if(w=T.payload,g=typeof w=="function"?w.call(v,f,g):w,g==null)break e;f=vt({},f,g);break e;case 2:ls=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,g=i.effects,g===null?i.effects=[a]:g.push(a))}else v={eventTime:v,lane:g,tag:a.tag,payload:a.payload,callback:a.callback,next:null},d===null?(c=d=v,u=f):d=d.next=v,o|=g;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;g=a,a=g.next,g.next=null,i.lastBaseUpdate=g,i.shared.pending=null}}while(1);if(d===null&&(u=f),i.baseState=u,i.firstBaseUpdate=c,i.lastBaseUpdate=d,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);Vo|=o,t.lanes=o,t.memoizedState=f}}function LE(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(U(191,i));i.call(r)}}}var Wk=new $1.Component().refs;function Gy(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:vt({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var xp={isMounted:function(t){return(t=t._reactInternals)?sa(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Un(),i=Ts(t),s=bi(r,i);s.payload=e,n!=null&&(s.callback=n),e=Es(t,s,i),e!==null&&($r(e,t,i,r),jd(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Un(),i=Ts(t),s=bi(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=Es(t,s,i),e!==null&&($r(e,t,i,r),jd(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Un(),r=Ts(t),i=bi(n,r);i.tag=2,e!=null&&(i.callback=e),e=Es(t,i,r),e!==null&&($r(e,t,r,n),jd(e,t,r))}};function FE(t,e,n,r,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!Ec(n,r)||!Ec(i,s):!0}function jk(t,e,n){var r=!1,i=Os,s=e.contextType;return typeof s=="object"&&s!==null?s=Nr(s):(i=rr(e)?Lo:xn.current,r=e.contextTypes,s=(r=r!=null)?cl(t,i):Os),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=xp,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function UE(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&xp.enqueueReplaceState(e,e.state,null)}function Hy(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs=Wk,P_(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=Nr(s):(s=rr(e)?Lo:xn.current,i.context=cl(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(Gy(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&xp.enqueueReplaceState(i,i.state,null),Tf(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function Eu(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(U(309));var r=n.stateNode}if(!r)throw Error(U(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=i.refs;a===Wk&&(a=i.refs={}),o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(U(284));if(!n._owner)throw Error(U(290,t))}return t}function _d(t,e){throw t=Object.prototype.toString.call(e),Error(U(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function VE(t){var e=t._init;return e(t._payload)}function zk(t){function e(I,_){if(t){var E=I.deletions;E===null?(I.deletions=[_],I.flags|=16):E.push(_)}}function n(I,_){if(!t)return null;for(;_!==null;)e(I,_),_=_.sibling;return null}function r(I,_){for(I=new Map;_!==null;)_.key!==null?I.set(_.key,_):I.set(_.index,_),_=_.sibling;return I}function i(I,_){return I=ks(I,_),I.index=0,I.sibling=null,I}function s(I,_,E){return I.index=E,t?(E=I.alternate,E!==null?(E=E.index,E<_?(I.flags|=2,_):E):(I.flags|=2,_)):(I.flags|=1048576,_)}function o(I){return t&&I.alternate===null&&(I.flags|=2),I}function a(I,_,E,b){return _===null||_.tag!==6?(_=Fg(E,I.mode,b),_.return=I,_):(_=i(_,E),_.return=I,_)}function u(I,_,E,b){var O=E.type;return O===Ma?d(I,_,E.props.children,b,E.key):_!==null&&(_.elementType===O||typeof O=="object"&&O!==null&&O.$$typeof===as&&VE(O)===_.type)?(b=i(_,E.props),b.ref=Eu(I,_,E),b.return=I,b):(b=Kd(E.type,E.key,E.props,null,I.mode,b),b.ref=Eu(I,_,E),b.return=I,b)}function c(I,_,E,b){return _===null||_.tag!==4||_.stateNode.containerInfo!==E.containerInfo||_.stateNode.implementation!==E.implementation?(_=Ug(E,I.mode,b),_.return=I,_):(_=i(_,E.children||[]),_.return=I,_)}function d(I,_,E,b,O){return _===null||_.tag!==7?(_=xo(E,I.mode,b,O),_.return=I,_):(_=i(_,E),_.return=I,_)}function f(I,_,E){if(typeof _=="string"&&_!==""||typeof _=="number")return _=Fg(""+_,I.mode,E),_.return=I,_;if(typeof _=="object"&&_!==null){switch(_.$$typeof){case ld:return E=Kd(_.type,_.key,_.props,null,I.mode,E),E.ref=Eu(I,null,_),E.return=I,E;case Pa:return _=Ug(_,I.mode,E),_.return=I,_;case as:var b=_._init;return f(I,b(_._payload),E)}if(Fu(_)||yu(_))return _=xo(_,I.mode,E,null),_.return=I,_;_d(I,_)}return null}function g(I,_,E,b){var O=_!==null?_.key:null;if(typeof E=="string"&&E!==""||typeof E=="number")return O!==null?null:a(I,_,""+E,b);if(typeof E=="object"&&E!==null){switch(E.$$typeof){case ld:return E.key===O?u(I,_,E,b):null;case Pa:return E.key===O?c(I,_,E,b):null;case as:return O=E._init,g(I,_,O(E._payload),b)}if(Fu(E)||yu(E))return O!==null?null:d(I,_,E,b,null);_d(I,E)}return null}function v(I,_,E,b,O){if(typeof b=="string"&&b!==""||typeof b=="number")return I=I.get(E)||null,a(_,I,""+b,O);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case ld:return I=I.get(b.key===null?E:b.key)||null,u(_,I,b,O);case Pa:return I=I.get(b.key===null?E:b.key)||null,c(_,I,b,O);case as:var P=b._init;return v(I,_,E,P(b._payload),O)}if(Fu(b)||yu(b))return I=I.get(E)||null,d(_,I,b,O,null);_d(_,b)}return null}function w(I,_,E,b){for(var O=null,P=null,L=_,z=_=0,Te=null;L!==null&&z<E.length;z++){L.index>z?(Te=L,L=null):Te=L.sibling;var ae=g(I,L,E[z],b);if(ae===null){L===null&&(L=Te);break}t&&L&&ae.alternate===null&&e(I,L),_=s(ae,_,z),P===null?O=ae:P.sibling=ae,P=ae,L=Te}if(z===E.length)return n(I,L),ht&&fo(I,z),O;if(L===null){for(;z<E.length;z++)L=f(I,E[z],b),L!==null&&(_=s(L,_,z),P===null?O=L:P.sibling=L,P=L);return ht&&fo(I,z),O}for(L=r(I,L);z<E.length;z++)Te=v(L,I,z,E[z],b),Te!==null&&(t&&Te.alternate!==null&&L.delete(Te.key===null?z:Te.key),_=s(Te,_,z),P===null?O=Te:P.sibling=Te,P=Te);return t&&L.forEach(function(xt){return e(I,xt)}),ht&&fo(I,z),O}function T(I,_,E,b){var O=yu(E);if(typeof O!="function")throw Error(U(150));if(E=O.call(E),E==null)throw Error(U(151));for(var P=O=null,L=_,z=_=0,Te=null,ae=E.next();L!==null&&!ae.done;z++,ae=E.next()){L.index>z?(Te=L,L=null):Te=L.sibling;var xt=g(I,L,ae.value,b);if(xt===null){L===null&&(L=Te);break}t&&L&&xt.alternate===null&&e(I,L),_=s(xt,_,z),P===null?O=xt:P.sibling=xt,P=xt,L=Te}if(ae.done)return n(I,L),ht&&fo(I,z),O;if(L===null){for(;!ae.done;z++,ae=E.next())ae=f(I,ae.value,b),ae!==null&&(_=s(ae,_,z),P===null?O=ae:P.sibling=ae,P=ae);return ht&&fo(I,z),O}for(L=r(I,L);!ae.done;z++,ae=E.next())ae=v(L,I,z,ae.value,b),ae!==null&&(t&&ae.alternate!==null&&L.delete(ae.key===null?z:ae.key),_=s(ae,_,z),P===null?O=ae:P.sibling=ae,P=ae);return t&&L.forEach(function(ke){return e(I,ke)}),ht&&fo(I,z),O}function C(I,_,E,b){if(typeof E=="object"&&E!==null&&E.type===Ma&&E.key===null&&(E=E.props.children),typeof E=="object"&&E!==null){switch(E.$$typeof){case ld:e:{for(var O=E.key,P=_;P!==null;){if(P.key===O){if(O=E.type,O===Ma){if(P.tag===7){n(I,P.sibling),_=i(P,E.props.children),_.return=I,I=_;break e}}else if(P.elementType===O||typeof O=="object"&&O!==null&&O.$$typeof===as&&VE(O)===P.type){n(I,P.sibling),_=i(P,E.props),_.ref=Eu(I,P,E),_.return=I,I=_;break e}n(I,P);break}else e(I,P);P=P.sibling}E.type===Ma?(_=xo(E.props.children,I.mode,b,E.key),_.return=I,I=_):(b=Kd(E.type,E.key,E.props,null,I.mode,b),b.ref=Eu(I,_,E),b.return=I,I=b)}return o(I);case Pa:e:{for(P=E.key;_!==null;){if(_.key===P)if(_.tag===4&&_.stateNode.containerInfo===E.containerInfo&&_.stateNode.implementation===E.implementation){n(I,_.sibling),_=i(_,E.children||[]),_.return=I,I=_;break e}else{n(I,_);break}else e(I,_);_=_.sibling}_=Ug(E,I.mode,b),_.return=I,I=_}return o(I);case as:return P=E._init,C(I,_,P(E._payload),b)}if(Fu(E))return w(I,_,E,b);if(yu(E))return T(I,_,E,b);_d(I,E)}return typeof E=="string"&&E!==""||typeof E=="number"?(E=""+E,_!==null&&_.tag===6?(n(I,_.sibling),_=i(_,E),_.return=I,I=_):(n(I,_),_=Fg(E,I.mode,b),_.return=I,I=_),o(I)):n(I,_)}return C}var dl=zk(!0),qk=zk(!1),hh={},ni=Gs(hh),Cc=Gs(hh),Nc=Gs(hh);function To(t){if(t===hh)throw Error(U(174));return t}function M_(t,e){switch(Xe(Nc,e),Xe(Cc,t),Xe(ni,hh),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:ky(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=ky(e,t)}st(ni),Xe(ni,e)}function fl(){st(ni),st(Cc),st(Nc)}function Gk(t){To(Nc.current);var e=To(ni.current),n=ky(e,t.type);e!==n&&(Xe(Cc,t),Xe(ni,n))}function L_(t){Cc.current===t&&(st(ni),st(Cc))}var gt=Gs(0);function kf(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Ag=[];function F_(){for(var t=0;t<Ag.length;t++)Ag[t]._workInProgressVersionPrimary=null;Ag.length=0}var zd=$i.ReactCurrentDispatcher,Rg=$i.ReactCurrentBatchConfig,Uo=0,yt=null,$t=null,en=null,Cf=!1,Ju=!1,Dc=0,cU=0;function Tn(){throw Error(U(321))}function U_(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!jr(t[n],e[n]))return!1;return!0}function V_(t,e,n,r,i,s){if(Uo=s,yt=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,zd.current=t===null||t.memoizedState===null?pU:mU,t=n(r,i),Ju){s=0;do{if(Ju=!1,Dc=0,25<=s)throw Error(U(301));s+=1,en=$t=null,e.updateQueue=null,zd.current=gU,t=n(r,i)}while(Ju)}if(zd.current=Nf,e=$t!==null&&$t.next!==null,Uo=0,en=$t=yt=null,Cf=!1,e)throw Error(U(300));return t}function $_(){var t=Dc!==0;return Dc=0,t}function Kr(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return en===null?yt.memoizedState=en=t:en=en.next=t,en}function Dr(){if($t===null){var t=yt.alternate;t=t!==null?t.memoizedState:null}else t=$t.next;var e=en===null?yt.memoizedState:en.next;if(e!==null)en=e,$t=t;else{if(t===null)throw Error(U(310));$t=t,t={memoizedState:$t.memoizedState,baseState:$t.baseState,baseQueue:$t.baseQueue,queue:$t.queue,next:null},en===null?yt.memoizedState=en=t:en=en.next=t}return en}function bc(t,e){return typeof e=="function"?e(t):e}function Og(t){var e=Dr(),n=e.queue;if(n===null)throw Error(U(311));n.lastRenderedReducer=t;var r=$t,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,u=null,c=s;do{var d=c.lane;if((Uo&d)===d)u!==null&&(u=u.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var f={lane:d,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};u===null?(a=u=f,o=r):u=u.next=f,yt.lanes|=d,Vo|=d}c=c.next}while(c!==null&&c!==s);u===null?o=r:u.next=a,jr(r,e.memoizedState)||(Xn=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=u,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,yt.lanes|=s,Vo|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Pg(t){var e=Dr(),n=e.queue;if(n===null)throw Error(U(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);jr(s,e.memoizedState)||(Xn=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function Hk(){}function Yk(t,e){var n=yt,r=Dr(),i=e(),s=!jr(r.memoizedState,i);if(s&&(r.memoizedState=i,Xn=!0),r=r.queue,B_(Xk.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||en!==null&&en.memoizedState.tag&1){if(n.flags|=2048,xc(9,Qk.bind(null,n,r,i,e),void 0,null),rn===null)throw Error(U(349));Uo&30||Kk(n,e,i)}return i}function Kk(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=yt.updateQueue,e===null?(e={lastEffect:null,stores:null},yt.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function Qk(t,e,n,r){e.value=n,e.getSnapshot=r,Jk(e)&&Zk(t)}function Xk(t,e,n){return n(function(){Jk(e)&&Zk(t)})}function Jk(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!jr(t,n)}catch{return!0}}function Zk(t){var e=Pi(t,1);e!==null&&$r(e,t,1,-1)}function $E(t){var e=Kr();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:bc,lastRenderedState:t},e.queue=t,t=t.dispatch=fU.bind(null,yt,t),[e.memoizedState,t]}function xc(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=yt.updateQueue,e===null?(e={lastEffect:null,stores:null},yt.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function eC(){return Dr().memoizedState}function qd(t,e,n,r){var i=Kr();yt.flags|=t,i.memoizedState=xc(1|e,n,void 0,r===void 0?null:r)}function Ap(t,e,n,r){var i=Dr();r=r===void 0?null:r;var s=void 0;if($t!==null){var o=$t.memoizedState;if(s=o.destroy,r!==null&&U_(r,o.deps)){i.memoizedState=xc(e,n,s,r);return}}yt.flags|=t,i.memoizedState=xc(1|e,n,s,r)}function BE(t,e){return qd(8390656,8,t,e)}function B_(t,e){return Ap(2048,8,t,e)}function tC(t,e){return Ap(4,2,t,e)}function nC(t,e){return Ap(4,4,t,e)}function rC(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function iC(t,e,n){return n=n!=null?n.concat([t]):null,Ap(4,4,rC.bind(null,e,t),n)}function W_(){}function sC(t,e){var n=Dr();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&U_(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function oC(t,e){var n=Dr();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&U_(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function aC(t,e,n){return Uo&21?(jr(n,e)||(n=ck(),yt.lanes|=n,Vo|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Xn=!0),t.memoizedState=n)}function hU(t,e){var n=je;je=n!==0&&4>n?n:4,t(!0);var r=Rg.transition;Rg.transition={};try{t(!1),e()}finally{je=n,Rg.transition=r}}function lC(){return Dr().memoizedState}function dU(t,e,n){var r=Ts(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},uC(t))cC(e,n);else if(n=$k(t,e,n,r),n!==null){var i=Un();$r(n,t,r,i),hC(n,e,r)}}function fU(t,e,n){var r=Ts(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(uC(t))cC(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,jr(a,o)){var u=e.interleaved;u===null?(i.next=i,O_(e)):(i.next=u.next,u.next=i),e.interleaved=i;return}}catch{}finally{}n=$k(t,e,i,r),n!==null&&(i=Un(),$r(n,t,r,i),hC(n,e,r))}}function uC(t){var e=t.alternate;return t===yt||e!==null&&e===yt}function cC(t,e){Ju=Cf=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function hC(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,__(t,n)}}var Nf={readContext:Nr,useCallback:Tn,useContext:Tn,useEffect:Tn,useImperativeHandle:Tn,useInsertionEffect:Tn,useLayoutEffect:Tn,useMemo:Tn,useReducer:Tn,useRef:Tn,useState:Tn,useDebugValue:Tn,useDeferredValue:Tn,useTransition:Tn,useMutableSource:Tn,useSyncExternalStore:Tn,useId:Tn,unstable_isNewReconciler:!1},pU={readContext:Nr,useCallback:function(t,e){return Kr().memoizedState=[t,e===void 0?null:e],t},useContext:Nr,useEffect:BE,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,qd(4194308,4,rC.bind(null,e,t),n)},useLayoutEffect:function(t,e){return qd(4194308,4,t,e)},useInsertionEffect:function(t,e){return qd(4,2,t,e)},useMemo:function(t,e){var n=Kr();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Kr();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=dU.bind(null,yt,t),[r.memoizedState,t]},useRef:function(t){var e=Kr();return t={current:t},e.memoizedState=t},useState:$E,useDebugValue:W_,useDeferredValue:function(t){return Kr().memoizedState=t},useTransition:function(){var t=$E(!1),e=t[0];return t=hU.bind(null,t[1]),Kr().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=yt,i=Kr();if(ht){if(n===void 0)throw Error(U(407));n=n()}else{if(n=e(),rn===null)throw Error(U(349));Uo&30||Kk(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,BE(Xk.bind(null,r,s,t),[t]),r.flags|=2048,xc(9,Qk.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=Kr(),e=rn.identifierPrefix;if(ht){var n=Ti,r=Si;n=(r&~(1<<32-Vr(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Dc++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=cU++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},mU={readContext:Nr,useCallback:sC,useContext:Nr,useEffect:B_,useImperativeHandle:iC,useInsertionEffect:tC,useLayoutEffect:nC,useMemo:oC,useReducer:Og,useRef:eC,useState:function(){return Og(bc)},useDebugValue:W_,useDeferredValue:function(t){var e=Dr();return aC(e,$t.memoizedState,t)},useTransition:function(){var t=Og(bc)[0],e=Dr().memoizedState;return[t,e]},useMutableSource:Hk,useSyncExternalStore:Yk,useId:lC,unstable_isNewReconciler:!1},gU={readContext:Nr,useCallback:sC,useContext:Nr,useEffect:B_,useImperativeHandle:iC,useInsertionEffect:tC,useLayoutEffect:nC,useMemo:oC,useReducer:Pg,useRef:eC,useState:function(){return Pg(bc)},useDebugValue:W_,useDeferredValue:function(t){var e=Dr();return $t===null?e.memoizedState=t:aC(e,$t.memoizedState,t)},useTransition:function(){var t=Pg(bc)[0],e=Dr().memoizedState;return[t,e]},useMutableSource:Hk,useSyncExternalStore:Yk,useId:lC,unstable_isNewReconciler:!1};function pl(t,e){try{var n="",r=e;do n+=zL(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function Mg(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Yy(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var yU=typeof WeakMap=="function"?WeakMap:Map;function dC(t,e,n){n=bi(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){bf||(bf=!0,iv=r),Yy(t,e)},n}function fC(t,e,n){n=bi(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){Yy(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){Yy(t,e),typeof r!="function"&&(Ss===null?Ss=new Set([this]):Ss.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function WE(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new yU;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=AU.bind(null,t,e,n),e.then(t,t))}function jE(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function zE(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=bi(-1,1),e.tag=2,Es(n,e,1))),n.lanes|=1),t)}var vU=$i.ReactCurrentOwner,Xn=!1;function Mn(t,e,n,r){e.child=t===null?qk(e,null,n,r):dl(e,t.child,n,r)}function qE(t,e,n,r,i){n=n.render;var s=e.ref;return el(e,i),r=V_(t,e,n,r,s,i),n=$_(),t!==null&&!Xn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Mi(t,e,i)):(ht&&n&&N_(e),e.flags|=1,Mn(t,e,r,i),e.child)}function GE(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!Q_(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,pC(t,e,s,r,i)):(t=Kd(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:Ec,n(o,r)&&t.ref===e.ref)return Mi(t,e,i)}return e.flags|=1,t=ks(s,r),t.ref=e.ref,t.return=e,e.child=t}function pC(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(Ec(s,r)&&t.ref===e.ref)if(Xn=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(Xn=!0);else return e.lanes=t.lanes,Mi(t,e,i)}return Ky(t,e,n,r,i)}function mC(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Xe(qa,cr),cr|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Xe(qa,cr),cr|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,Xe(qa,cr),cr|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,Xe(qa,cr),cr|=r;return Mn(t,e,i,n),e.child}function gC(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Ky(t,e,n,r,i){var s=rr(n)?Lo:xn.current;return s=cl(e,s),el(e,i),n=V_(t,e,n,r,s,i),r=$_(),t!==null&&!Xn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Mi(t,e,i)):(ht&&r&&N_(e),e.flags|=1,Mn(t,e,n,i),e.child)}function HE(t,e,n,r,i){if(rr(n)){var s=!0;_f(e)}else s=!1;if(el(e,i),e.stateNode===null)Gd(t,e),jk(e,n,r),Hy(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var u=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=Nr(c):(c=rr(n)?Lo:xn.current,c=cl(e,c));var d=n.getDerivedStateFromProps,f=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function";f||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||u!==c)&&UE(e,o,r,c),ls=!1;var g=e.memoizedState;o.state=g,Tf(e,r,o,i),u=e.memoizedState,a!==r||g!==u||nr.current||ls?(typeof d=="function"&&(Gy(e,n,d,r),u=e.memoizedState),(a=ls||FE(e,n,a,r,g,u,c))?(f||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=u),o.props=r,o.state=u,o.context=c,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,Bk(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:Or(e.type,a),o.props=c,f=e.pendingProps,g=o.context,u=n.contextType,typeof u=="object"&&u!==null?u=Nr(u):(u=rr(n)?Lo:xn.current,u=cl(e,u));var v=n.getDerivedStateFromProps;(d=typeof v=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==f||g!==u)&&UE(e,o,r,u),ls=!1,g=e.memoizedState,o.state=g,Tf(e,r,o,i);var w=e.memoizedState;a!==f||g!==w||nr.current||ls?(typeof v=="function"&&(Gy(e,n,v,r),w=e.memoizedState),(c=ls||FE(e,n,c,r,g,w,u)||!1)?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,w,u),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,w,u)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=w),o.props=r,o.state=w,o.context=u,r=c):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),r=!1)}return Qy(t,e,n,r,s,i)}function Qy(t,e,n,r,i,s){gC(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&RE(e,n,!1),Mi(t,e,s);r=e.stateNode,vU.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=dl(e,t.child,null,s),e.child=dl(e,null,a,s)):Mn(t,e,a,s),e.memoizedState=r.state,i&&RE(e,n,!0),e.child}function yC(t){var e=t.stateNode;e.pendingContext?AE(t,e.pendingContext,e.pendingContext!==e.context):e.context&&AE(t,e.context,!1),M_(t,e.containerInfo)}function YE(t,e,n,r,i){return hl(),b_(i),e.flags|=256,Mn(t,e,n,r),e.child}var Xy={dehydrated:null,treeContext:null,retryLane:0};function Jy(t){return{baseLanes:t,cachePool:null,transitions:null}}function vC(t,e,n){var r=e.pendingProps,i=gt.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(i&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),Xe(gt,i&1),t===null)return zy(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=Pp(o,r,0,null),t=xo(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=Jy(n),e.memoizedState=Xy,t):j_(e,o));if(i=t.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return _U(t,e,o,r,a,i,n);if(s){s=r.fallback,o=e.mode,i=t.child,a=i.sibling;var u={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=u,e.deletions=null):(r=ks(i,u),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=ks(a,s):(s=xo(s,o,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=t.child.memoizedState,o=o===null?Jy(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=Xy,r}return s=t.child,t=s.sibling,r=ks(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function j_(t,e){return e=Pp({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function wd(t,e,n,r){return r!==null&&b_(r),dl(e,t.child,null,n),t=j_(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function _U(t,e,n,r,i,s,o){if(n)return e.flags&256?(e.flags&=-257,r=Mg(Error(U(422))),wd(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=Pp({mode:"visible",children:r.children},i,0,null),s=xo(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&dl(e,t.child,null,o),e.child.memoizedState=Jy(o),e.memoizedState=Xy,s);if(!(e.mode&1))return wd(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(U(419)),r=Mg(s,r,void 0),wd(t,e,o,r)}if(a=(o&t.childLanes)!==0,Xn||a){if(r=rn,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,Pi(t,i),$r(r,t,i,-1))}return K_(),r=Mg(Error(U(421))),wd(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=RU.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,hr=Is(i.nextSibling),dr=e,ht=!0,Mr=null,t!==null&&(Ir[Er++]=Si,Ir[Er++]=Ti,Ir[Er++]=Fo,Si=t.id,Ti=t.overflow,Fo=e),e=j_(e,r.children),e.flags|=4096,e)}function KE(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),qy(t.return,e,n)}function Lg(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function _C(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(Mn(t,e,r.children,n),r=gt.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&KE(t,n,e);else if(t.tag===19)KE(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Xe(gt,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&kf(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),Lg(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&kf(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}Lg(e,!0,n,null,s);break;case"together":Lg(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Gd(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Mi(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Vo|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(U(153));if(e.child!==null){for(t=e.child,n=ks(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=ks(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function wU(t,e,n){switch(e.tag){case 3:yC(e),hl();break;case 5:Gk(e);break;case 1:rr(e.type)&&_f(e);break;case 4:M_(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;Xe(Ef,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Xe(gt,gt.current&1),e.flags|=128,null):n&e.child.childLanes?vC(t,e,n):(Xe(gt,gt.current&1),t=Mi(t,e,n),t!==null?t.sibling:null);Xe(gt,gt.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return _C(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Xe(gt,gt.current),r)break;return null;case 22:case 23:return e.lanes=0,mC(t,e,n)}return Mi(t,e,n)}var wC,Zy,IC,EC;wC=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Zy=function(){};IC=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,To(ni.current);var s=null;switch(n){case"input":i=Iy(t,i),r=Iy(t,r),s=[];break;case"select":i=vt({},i,{value:void 0}),r=vt({},r,{value:void 0}),s=[];break;case"textarea":i=Ty(t,i),r=Ty(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=yf)}Cy(n,r);var o;n=null;for(c in i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&i[c]!=null)if(c==="style"){var a=i[c];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(mc.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in r){var u=r[c];if(a=i!=null?i[c]:void 0,r.hasOwnProperty(c)&&u!==a&&(u!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in u)u.hasOwnProperty(o)&&a[o]!==u[o]&&(n||(n={}),n[o]=u[o])}else n||(s||(s=[]),s.push(c,n)),n=u;else c==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,a=a?a.__html:void 0,u!=null&&a!==u&&(s=s||[]).push(c,u)):c==="children"?typeof u!="string"&&typeof u!="number"||(s=s||[]).push(c,""+u):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(mc.hasOwnProperty(c)?(u!=null&&c==="onScroll"&&rt("scroll",t),s||a===u||(s=[])):(s=s||[]).push(c,u))}n&&(s=s||[]).push("style",n);var c=s;(e.updateQueue=c)&&(e.flags|=4)}};EC=function(t,e,n,r){n!==r&&(e.flags|=4)};function Su(t,e){if(!ht)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function kn(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function IU(t,e,n){var r=e.pendingProps;switch(D_(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return kn(e),null;case 1:return rr(e.type)&&vf(),kn(e),null;case 3:return r=e.stateNode,fl(),st(nr),st(xn),F_(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(vd(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Mr!==null&&(av(Mr),Mr=null))),Zy(t,e),kn(e),null;case 5:L_(e);var i=To(Nc.current);if(n=e.type,t!==null&&e.stateNode!=null)IC(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(U(166));return kn(e),null}if(t=To(ni.current),vd(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[Qr]=e,r[kc]=s,t=(e.mode&1)!==0,n){case"dialog":rt("cancel",r),rt("close",r);break;case"iframe":case"object":case"embed":rt("load",r);break;case"video":case"audio":for(i=0;i<Vu.length;i++)rt(Vu[i],r);break;case"source":rt("error",r);break;case"img":case"image":case"link":rt("error",r),rt("load",r);break;case"details":rt("toggle",r);break;case"input":iE(r,s),rt("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},rt("invalid",r);break;case"textarea":oE(r,s),rt("invalid",r)}Cy(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&yd(r.textContent,a,t),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&yd(r.textContent,a,t),i=["children",""+a]):mc.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&rt("scroll",r)}switch(n){case"input":ud(r),sE(r,s,!0);break;case"textarea":ud(r),aE(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=yf)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=K1(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[Qr]=e,t[kc]=r,wC(t,e,!1,!1),e.stateNode=t;e:{switch(o=Ny(n,r),n){case"dialog":rt("cancel",t),rt("close",t),i=r;break;case"iframe":case"object":case"embed":rt("load",t),i=r;break;case"video":case"audio":for(i=0;i<Vu.length;i++)rt(Vu[i],t);i=r;break;case"source":rt("error",t),i=r;break;case"img":case"image":case"link":rt("error",t),rt("load",t),i=r;break;case"details":rt("toggle",t),i=r;break;case"input":iE(t,r),i=Iy(t,r),rt("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=vt({},r,{value:void 0}),rt("invalid",t);break;case"textarea":oE(t,r),i=Ty(t,r),rt("invalid",t);break;default:i=r}Cy(n,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var u=a[s];s==="style"?J1(t,u):s==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&Q1(t,u)):s==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&gc(t,u):typeof u=="number"&&gc(t,""+u):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(mc.hasOwnProperty(s)?u!=null&&s==="onScroll"&&rt("scroll",t):u!=null&&f_(t,s,u,o))}switch(n){case"input":ud(t),sE(t,r,!1);break;case"textarea":ud(t),aE(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Rs(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?Qa(t,!!r.multiple,s,!1):r.defaultValue!=null&&Qa(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=yf)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return kn(e),null;case 6:if(t&&e.stateNode!=null)EC(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(U(166));if(n=To(Nc.current),To(ni.current),vd(e)){if(r=e.stateNode,n=e.memoizedProps,r[Qr]=e,(s=r.nodeValue!==n)&&(t=dr,t!==null))switch(t.tag){case 3:yd(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&yd(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Qr]=e,e.stateNode=r}return kn(e),null;case 13:if(st(gt),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(ht&&hr!==null&&e.mode&1&&!(e.flags&128))Vk(),hl(),e.flags|=98560,s=!1;else if(s=vd(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(U(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(U(317));s[Qr]=e}else hl(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;kn(e),s=!1}else Mr!==null&&(av(Mr),Mr=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||gt.current&1?qt===0&&(qt=3):K_())),e.updateQueue!==null&&(e.flags|=4),kn(e),null);case 4:return fl(),Zy(t,e),t===null&&Sc(e.stateNode.containerInfo),kn(e),null;case 10:return R_(e.type._context),kn(e),null;case 17:return rr(e.type)&&vf(),kn(e),null;case 19:if(st(gt),s=e.memoizedState,s===null)return kn(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)Su(s,!1);else{if(qt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=kf(t),o!==null){for(e.flags|=128,Su(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Xe(gt,gt.current&1|2),e.child}t=t.sibling}s.tail!==null&&At()>ml&&(e.flags|=128,r=!0,Su(s,!1),e.lanes=4194304)}else{if(!r)if(t=kf(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Su(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!ht)return kn(e),null}else 2*At()-s.renderingStartTime>ml&&n!==1073741824&&(e.flags|=128,r=!0,Su(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=At(),e.sibling=null,n=gt.current,Xe(gt,r?n&1|2:n&1),e):(kn(e),null);case 22:case 23:return Y_(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?cr&1073741824&&(kn(e),e.subtreeFlags&6&&(e.flags|=8192)):kn(e),null;case 24:return null;case 25:return null}throw Error(U(156,e.tag))}function EU(t,e){switch(D_(e),e.tag){case 1:return rr(e.type)&&vf(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return fl(),st(nr),st(xn),F_(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return L_(e),null;case 13:if(st(gt),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(U(340));hl()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return st(gt),null;case 4:return fl(),null;case 10:return R_(e.type._context),null;case 22:case 23:return Y_(),null;case 24:return null;default:return null}}var Id=!1,Nn=!1,SU=typeof WeakSet=="function"?WeakSet:Set,ne=null;function za(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){It(t,e,r)}else n.current=null}function ev(t,e,n){try{n()}catch(r){It(t,e,r)}}var QE=!1;function TU(t,e){if(Fy=pf,t=Ck(),C_(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,u=-1,c=0,d=0,f=t,g=null;t:for(;;){for(var v;f!==n||i!==0&&f.nodeType!==3||(a=o+i),f!==s||r!==0&&f.nodeType!==3||(u=o+r),f.nodeType===3&&(o+=f.nodeValue.length),(v=f.firstChild)!==null;)g=f,f=v;for(;;){if(f===t)break t;if(g===n&&++c===i&&(a=o),g===s&&++d===r&&(u=o),(v=f.nextSibling)!==null)break;f=g,g=f.parentNode}f=v}n=a===-1||u===-1?null:{start:a,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(Uy={focusedElem:t,selectionRange:n},pf=!1,ne=e;ne!==null;)if(e=ne,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,ne=t;else for(;ne!==null;){e=ne;try{var w=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(w!==null){var T=w.memoizedProps,C=w.memoizedState,I=e.stateNode,_=I.getSnapshotBeforeUpdate(e.elementType===e.type?T:Or(e.type,T),C);I.__reactInternalSnapshotBeforeUpdate=_}break;case 3:var E=e.stateNode.containerInfo;E.nodeType===1?E.textContent="":E.nodeType===9&&E.documentElement&&E.removeChild(E.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(U(163))}}catch(b){It(e,e.return,b)}if(t=e.sibling,t!==null){t.return=e.return,ne=t;break}ne=e.return}return w=QE,QE=!1,w}function Zu(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&ev(e,n,s)}i=i.next}while(i!==r)}}function Rp(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function tv(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function SC(t){var e=t.alternate;e!==null&&(t.alternate=null,SC(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Qr],delete e[kc],delete e[By],delete e[oU],delete e[aU])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function TC(t){return t.tag===5||t.tag===3||t.tag===4}function XE(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||TC(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function nv(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=yf));else if(r!==4&&(t=t.child,t!==null))for(nv(t,e,n),t=t.sibling;t!==null;)nv(t,e,n),t=t.sibling}function rv(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(rv(t,e,n),t=t.sibling;t!==null;)rv(t,e,n),t=t.sibling}var cn=null,Pr=!1;function rs(t,e,n){for(n=n.child;n!==null;)kC(t,e,n),n=n.sibling}function kC(t,e,n){if(ti&&typeof ti.onCommitFiberUnmount=="function")try{ti.onCommitFiberUnmount(Tp,n)}catch{}switch(n.tag){case 5:Nn||za(n,e);case 6:var r=cn,i=Pr;cn=null,rs(t,e,n),cn=r,Pr=i,cn!==null&&(Pr?(t=cn,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):cn.removeChild(n.stateNode));break;case 18:cn!==null&&(Pr?(t=cn,n=n.stateNode,t.nodeType===8?bg(t.parentNode,n):t.nodeType===1&&bg(t,n),wc(t)):bg(cn,n.stateNode));break;case 4:r=cn,i=Pr,cn=n.stateNode.containerInfo,Pr=!0,rs(t,e,n),cn=r,Pr=i;break;case 0:case 11:case 14:case 15:if(!Nn&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&ev(n,e,o),i=i.next}while(i!==r)}rs(t,e,n);break;case 1:if(!Nn&&(za(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){It(n,e,a)}rs(t,e,n);break;case 21:rs(t,e,n);break;case 22:n.mode&1?(Nn=(r=Nn)||n.memoizedState!==null,rs(t,e,n),Nn=r):rs(t,e,n);break;default:rs(t,e,n)}}function JE(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new SU),e.forEach(function(r){var i=OU.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function Rr(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:cn=a.stateNode,Pr=!1;break e;case 3:cn=a.stateNode.containerInfo,Pr=!0;break e;case 4:cn=a.stateNode.containerInfo,Pr=!0;break e}a=a.return}if(cn===null)throw Error(U(160));kC(s,o,i),cn=null,Pr=!1;var u=i.alternate;u!==null&&(u.return=null),i.return=null}catch(c){It(i,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)CC(e,t),e=e.sibling}function CC(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Rr(e,t),Yr(t),r&4){try{Zu(3,t,t.return),Rp(3,t)}catch(T){It(t,t.return,T)}try{Zu(5,t,t.return)}catch(T){It(t,t.return,T)}}break;case 1:Rr(e,t),Yr(t),r&512&&n!==null&&za(n,n.return);break;case 5:if(Rr(e,t),Yr(t),r&512&&n!==null&&za(n,n.return),t.flags&32){var i=t.stateNode;try{gc(i,"")}catch(T){It(t,t.return,T)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,a=t.type,u=t.updateQueue;if(t.updateQueue=null,u!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&H1(i,s),Ny(a,o);var c=Ny(a,s);for(o=0;o<u.length;o+=2){var d=u[o],f=u[o+1];d==="style"?J1(i,f):d==="dangerouslySetInnerHTML"?Q1(i,f):d==="children"?gc(i,f):f_(i,d,f,c)}switch(a){case"input":Ey(i,s);break;case"textarea":Y1(i,s);break;case"select":var g=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var v=s.value;v!=null?Qa(i,!!s.multiple,v,!1):g!==!!s.multiple&&(s.defaultValue!=null?Qa(i,!!s.multiple,s.defaultValue,!0):Qa(i,!!s.multiple,s.multiple?[]:"",!1))}i[kc]=s}catch(T){It(t,t.return,T)}}break;case 6:if(Rr(e,t),Yr(t),r&4){if(t.stateNode===null)throw Error(U(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(T){It(t,t.return,T)}}break;case 3:if(Rr(e,t),Yr(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{wc(e.containerInfo)}catch(T){It(t,t.return,T)}break;case 4:Rr(e,t),Yr(t);break;case 13:Rr(e,t),Yr(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(G_=At())),r&4&&JE(t);break;case 22:if(d=n!==null&&n.memoizedState!==null,t.mode&1?(Nn=(c=Nn)||d,Rr(e,t),Nn=c):Rr(e,t),Yr(t),r&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!d&&t.mode&1)for(ne=t,d=t.child;d!==null;){for(f=ne=d;ne!==null;){switch(g=ne,v=g.child,g.tag){case 0:case 11:case 14:case 15:Zu(4,g,g.return);break;case 1:za(g,g.return);var w=g.stateNode;if(typeof w.componentWillUnmount=="function"){r=g,n=g.return;try{e=r,w.props=e.memoizedProps,w.state=e.memoizedState,w.componentWillUnmount()}catch(T){It(r,n,T)}}break;case 5:za(g,g.return);break;case 22:if(g.memoizedState!==null){eS(f);continue}}v!==null?(v.return=g,ne=v):eS(f)}d=d.sibling}e:for(d=null,f=t;;){if(f.tag===5){if(d===null){d=f;try{i=f.stateNode,c?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=f.stateNode,u=f.memoizedProps.style,o=u!=null&&u.hasOwnProperty("display")?u.display:null,a.style.display=X1("display",o))}catch(T){It(t,t.return,T)}}}else if(f.tag===6){if(d===null)try{f.stateNode.nodeValue=c?"":f.memoizedProps}catch(T){It(t,t.return,T)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===t)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===t)break e;for(;f.sibling===null;){if(f.return===null||f.return===t)break e;d===f&&(d=null),f=f.return}d===f&&(d=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:Rr(e,t),Yr(t),r&4&&JE(t);break;case 21:break;default:Rr(e,t),Yr(t)}}function Yr(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(TC(n)){var r=n;break e}n=n.return}throw Error(U(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(gc(i,""),r.flags&=-33);var s=XE(t);rv(t,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=XE(t);nv(t,a,o);break;default:throw Error(U(161))}}catch(u){It(t,t.return,u)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function kU(t,e,n){ne=t,NC(t)}function NC(t,e,n){for(var r=(t.mode&1)!==0;ne!==null;){var i=ne,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||Id;if(!o){var a=i.alternate,u=a!==null&&a.memoizedState!==null||Nn;a=Id;var c=Nn;if(Id=o,(Nn=u)&&!c)for(ne=i;ne!==null;)o=ne,u=o.child,o.tag===22&&o.memoizedState!==null?tS(i):u!==null?(u.return=o,ne=u):tS(i);for(;s!==null;)ne=s,NC(s),s=s.sibling;ne=i,Id=a,Nn=c}ZE(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,ne=s):ZE(t)}}function ZE(t){for(;ne!==null;){var e=ne;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Nn||Rp(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Nn)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:Or(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&LE(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}LE(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var d=c.memoizedState;if(d!==null){var f=d.dehydrated;f!==null&&wc(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(U(163))}Nn||e.flags&512&&tv(e)}catch(g){It(e,e.return,g)}}if(e===t){ne=null;break}if(n=e.sibling,n!==null){n.return=e.return,ne=n;break}ne=e.return}}function eS(t){for(;ne!==null;){var e=ne;if(e===t){ne=null;break}var n=e.sibling;if(n!==null){n.return=e.return,ne=n;break}ne=e.return}}function tS(t){for(;ne!==null;){var e=ne;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Rp(4,e)}catch(u){It(e,n,u)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(u){It(e,i,u)}}var s=e.return;try{tv(e)}catch(u){It(e,s,u)}break;case 5:var o=e.return;try{tv(e)}catch(u){It(e,o,u)}}}catch(u){It(e,e.return,u)}if(e===t){ne=null;break}var a=e.sibling;if(a!==null){a.return=e.return,ne=a;break}ne=e.return}}var CU=Math.ceil,Df=$i.ReactCurrentDispatcher,z_=$i.ReactCurrentOwner,kr=$i.ReactCurrentBatchConfig,Ue=0,rn=null,Lt=null,pn=0,cr=0,qa=Gs(0),qt=0,Ac=null,Vo=0,Op=0,q_=0,ec=null,Qn=null,G_=0,ml=1/0,yi=null,bf=!1,iv=null,Ss=null,Ed=!1,ps=null,xf=0,tc=0,sv=null,Hd=-1,Yd=0;function Un(){return Ue&6?At():Hd!==-1?Hd:Hd=At()}function Ts(t){return t.mode&1?Ue&2&&pn!==0?pn&-pn:uU.transition!==null?(Yd===0&&(Yd=ck()),Yd):(t=je,t!==0||(t=window.event,t=t===void 0?16:yk(t.type)),t):1}function $r(t,e,n,r){if(50<tc)throw tc=0,sv=null,Error(U(185));lh(t,n,r),(!(Ue&2)||t!==rn)&&(t===rn&&(!(Ue&2)&&(Op|=n),qt===4&&cs(t,pn)),ir(t,r),n===1&&Ue===0&&!(e.mode&1)&&(ml=At()+500,bp&&Hs()))}function ir(t,e){var n=t.callbackNode;uF(t,e);var r=ff(t,t===rn?pn:0);if(r===0)n!==null&&cE(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&cE(n),e===1)t.tag===0?lU(nS.bind(null,t)):Lk(nS.bind(null,t)),iU(function(){!(Ue&6)&&Hs()}),n=null;else{switch(hk(r)){case 1:n=v_;break;case 4:n=lk;break;case 16:n=df;break;case 536870912:n=uk;break;default:n=df}n=MC(n,DC.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function DC(t,e){if(Hd=-1,Yd=0,Ue&6)throw Error(U(327));var n=t.callbackNode;if(tl()&&t.callbackNode!==n)return null;var r=ff(t,t===rn?pn:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Af(t,r);else{e=r;var i=Ue;Ue|=2;var s=xC();(rn!==t||pn!==e)&&(yi=null,ml=At()+500,bo(t,e));do try{bU();break}catch(a){bC(t,a)}while(1);A_(),Df.current=s,Ue=i,Lt!==null?e=0:(rn=null,pn=0,e=qt)}if(e!==0){if(e===2&&(i=Ry(t),i!==0&&(r=i,e=ov(t,i))),e===1)throw n=Ac,bo(t,0),cs(t,r),ir(t,At()),n;if(e===6)cs(t,r);else{if(i=t.current.alternate,!(r&30)&&!NU(i)&&(e=Af(t,r),e===2&&(s=Ry(t),s!==0&&(r=s,e=ov(t,s))),e===1))throw n=Ac,bo(t,0),cs(t,r),ir(t,At()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(U(345));case 2:po(t,Qn,yi);break;case 3:if(cs(t,r),(r&130023424)===r&&(e=G_+500-At(),10<e)){if(ff(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){Un(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=$y(po.bind(null,t,Qn,yi),e);break}po(t,Qn,yi);break;case 4:if(cs(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-Vr(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=At()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*CU(r/1960))-r,10<r){t.timeoutHandle=$y(po.bind(null,t,Qn,yi),r);break}po(t,Qn,yi);break;case 5:po(t,Qn,yi);break;default:throw Error(U(329))}}}return ir(t,At()),t.callbackNode===n?DC.bind(null,t):null}function ov(t,e){var n=ec;return t.current.memoizedState.isDehydrated&&(bo(t,e).flags|=256),t=Af(t,e),t!==2&&(e=Qn,Qn=n,e!==null&&av(e)),t}function av(t){Qn===null?Qn=t:Qn.push.apply(Qn,t)}function NU(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!jr(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function cs(t,e){for(e&=~q_,e&=~Op,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Vr(e),r=1<<n;t[n]=-1,e&=~r}}function nS(t){if(Ue&6)throw Error(U(327));tl();var e=ff(t,0);if(!(e&1))return ir(t,At()),null;var n=Af(t,e);if(t.tag!==0&&n===2){var r=Ry(t);r!==0&&(e=r,n=ov(t,r))}if(n===1)throw n=Ac,bo(t,0),cs(t,e),ir(t,At()),n;if(n===6)throw Error(U(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,po(t,Qn,yi),ir(t,At()),null}function H_(t,e){var n=Ue;Ue|=1;try{return t(e)}finally{Ue=n,Ue===0&&(ml=At()+500,bp&&Hs())}}function $o(t){ps!==null&&ps.tag===0&&!(Ue&6)&&tl();var e=Ue;Ue|=1;var n=kr.transition,r=je;try{if(kr.transition=null,je=1,t)return t()}finally{je=r,kr.transition=n,Ue=e,!(Ue&6)&&Hs()}}function Y_(){cr=qa.current,st(qa)}function bo(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,rU(n)),Lt!==null)for(n=Lt.return;n!==null;){var r=n;switch(D_(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&vf();break;case 3:fl(),st(nr),st(xn),F_();break;case 5:L_(r);break;case 4:fl();break;case 13:st(gt);break;case 19:st(gt);break;case 10:R_(r.type._context);break;case 22:case 23:Y_()}n=n.return}if(rn=t,Lt=t=ks(t.current,null),pn=cr=e,qt=0,Ac=null,q_=Op=Vo=0,Qn=ec=null,So!==null){for(e=0;e<So.length;e++)if(n=So[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}So=null}return t}function bC(t,e){do{var n=Lt;try{if(A_(),zd.current=Nf,Cf){for(var r=yt.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}Cf=!1}if(Uo=0,en=$t=yt=null,Ju=!1,Dc=0,z_.current=null,n===null||n.return===null){qt=1,Ac=e,Lt=null;break}e:{var s=t,o=n.return,a=n,u=e;if(e=pn,a.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var c=u,d=a,f=d.tag;if(!(d.mode&1)&&(f===0||f===11||f===15)){var g=d.alternate;g?(d.updateQueue=g.updateQueue,d.memoizedState=g.memoizedState,d.lanes=g.lanes):(d.updateQueue=null,d.memoizedState=null)}var v=jE(o);if(v!==null){v.flags&=-257,zE(v,o,a,s,e),v.mode&1&&WE(s,c,e),e=v,u=c;var w=e.updateQueue;if(w===null){var T=new Set;T.add(u),e.updateQueue=T}else w.add(u);break e}else{if(!(e&1)){WE(s,c,e),K_();break e}u=Error(U(426))}}else if(ht&&a.mode&1){var C=jE(o);if(C!==null){!(C.flags&65536)&&(C.flags|=256),zE(C,o,a,s,e),b_(pl(u,a));break e}}s=u=pl(u,a),qt!==4&&(qt=2),ec===null?ec=[s]:ec.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var I=dC(s,u,e);ME(s,I);break e;case 1:a=u;var _=s.type,E=s.stateNode;if(!(s.flags&128)&&(typeof _.getDerivedStateFromError=="function"||E!==null&&typeof E.componentDidCatch=="function"&&(Ss===null||!Ss.has(E)))){s.flags|=65536,e&=-e,s.lanes|=e;var b=fC(s,a,e);ME(s,b);break e}}s=s.return}while(s!==null)}RC(n)}catch(O){e=O,Lt===n&&n!==null&&(Lt=n=n.return);continue}break}while(1)}function xC(){var t=Df.current;return Df.current=Nf,t===null?Nf:t}function K_(){(qt===0||qt===3||qt===2)&&(qt=4),rn===null||!(Vo&268435455)&&!(Op&268435455)||cs(rn,pn)}function Af(t,e){var n=Ue;Ue|=2;var r=xC();(rn!==t||pn!==e)&&(yi=null,bo(t,e));do try{DU();break}catch(i){bC(t,i)}while(1);if(A_(),Ue=n,Df.current=r,Lt!==null)throw Error(U(261));return rn=null,pn=0,qt}function DU(){for(;Lt!==null;)AC(Lt)}function bU(){for(;Lt!==null&&!eF();)AC(Lt)}function AC(t){var e=PC(t.alternate,t,cr);t.memoizedProps=t.pendingProps,e===null?RC(t):Lt=e,z_.current=null}function RC(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=EU(n,e),n!==null){n.flags&=32767,Lt=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{qt=6,Lt=null;return}}else if(n=IU(n,e,cr),n!==null){Lt=n;return}if(e=e.sibling,e!==null){Lt=e;return}Lt=e=t}while(e!==null);qt===0&&(qt=5)}function po(t,e,n){var r=je,i=kr.transition;try{kr.transition=null,je=1,xU(t,e,n,r)}finally{kr.transition=i,je=r}return null}function xU(t,e,n,r){do tl();while(ps!==null);if(Ue&6)throw Error(U(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(U(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(cF(t,s),t===rn&&(Lt=rn=null,pn=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Ed||(Ed=!0,MC(df,function(){return tl(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=kr.transition,kr.transition=null;var o=je;je=1;var a=Ue;Ue|=4,z_.current=null,TU(t,n),CC(n,t),QF(Uy),pf=!!Fy,Uy=Fy=null,t.current=n,kU(n),tF(),Ue=a,je=o,kr.transition=s}else t.current=n;if(Ed&&(Ed=!1,ps=t,xf=i),s=t.pendingLanes,s===0&&(Ss=null),iF(n.stateNode),ir(t,At()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(bf)throw bf=!1,t=iv,iv=null,t;return xf&1&&t.tag!==0&&tl(),s=t.pendingLanes,s&1?t===sv?tc++:(tc=0,sv=t):tc=0,Hs(),null}function tl(){if(ps!==null){var t=hk(xf),e=kr.transition,n=je;try{if(kr.transition=null,je=16>t?16:t,ps===null)var r=!1;else{if(t=ps,ps=null,xf=0,Ue&6)throw Error(U(331));var i=Ue;for(Ue|=4,ne=t.current;ne!==null;){var s=ne,o=s.child;if(ne.flags&16){var a=s.deletions;if(a!==null){for(var u=0;u<a.length;u++){var c=a[u];for(ne=c;ne!==null;){var d=ne;switch(d.tag){case 0:case 11:case 15:Zu(8,d,s)}var f=d.child;if(f!==null)f.return=d,ne=f;else for(;ne!==null;){d=ne;var g=d.sibling,v=d.return;if(SC(d),d===c){ne=null;break}if(g!==null){g.return=v,ne=g;break}ne=v}}}var w=s.alternate;if(w!==null){var T=w.child;if(T!==null){w.child=null;do{var C=T.sibling;T.sibling=null,T=C}while(T!==null)}}ne=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,ne=o;else e:for(;ne!==null;){if(s=ne,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Zu(9,s,s.return)}var I=s.sibling;if(I!==null){I.return=s.return,ne=I;break e}ne=s.return}}var _=t.current;for(ne=_;ne!==null;){o=ne;var E=o.child;if(o.subtreeFlags&2064&&E!==null)E.return=o,ne=E;else e:for(o=_;ne!==null;){if(a=ne,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Rp(9,a)}}catch(O){It(a,a.return,O)}if(a===o){ne=null;break e}var b=a.sibling;if(b!==null){b.return=a.return,ne=b;break e}ne=a.return}}if(Ue=i,Hs(),ti&&typeof ti.onPostCommitFiberRoot=="function")try{ti.onPostCommitFiberRoot(Tp,t)}catch{}r=!0}return r}finally{je=n,kr.transition=e}}return!1}function rS(t,e,n){e=pl(n,e),e=dC(t,e,1),t=Es(t,e,1),e=Un(),t!==null&&(lh(t,1,e),ir(t,e))}function It(t,e,n){if(t.tag===3)rS(t,t,n);else for(;e!==null;){if(e.tag===3){rS(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Ss===null||!Ss.has(r))){t=pl(n,t),t=fC(e,t,1),e=Es(e,t,1),t=Un(),e!==null&&(lh(e,1,t),ir(e,t));break}}e=e.return}}function AU(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Un(),t.pingedLanes|=t.suspendedLanes&n,rn===t&&(pn&n)===n&&(qt===4||qt===3&&(pn&130023424)===pn&&500>At()-G_?bo(t,0):q_|=n),ir(t,e)}function OC(t,e){e===0&&(t.mode&1?(e=dd,dd<<=1,!(dd&130023424)&&(dd=4194304)):e=1);var n=Un();t=Pi(t,e),t!==null&&(lh(t,e,n),ir(t,n))}function RU(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),OC(t,n)}function OU(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(U(314))}r!==null&&r.delete(e),OC(t,n)}var PC;PC=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||nr.current)Xn=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Xn=!1,wU(t,e,n);Xn=!!(t.flags&131072)}else Xn=!1,ht&&e.flags&1048576&&Fk(e,If,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Gd(t,e),t=e.pendingProps;var i=cl(e,xn.current);el(e,n),i=V_(null,e,r,t,i,n);var s=$_();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,rr(r)?(s=!0,_f(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,P_(e),i.updater=xp,e.stateNode=i,i._reactInternals=e,Hy(e,r,t,n),e=Qy(null,e,r,!0,s,n)):(e.tag=0,ht&&s&&N_(e),Mn(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Gd(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=MU(r),t=Or(r,t),i){case 0:e=Ky(null,e,r,t,n);break e;case 1:e=HE(null,e,r,t,n);break e;case 11:e=qE(null,e,r,t,n);break e;case 14:e=GE(null,e,r,Or(r.type,t),n);break e}throw Error(U(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Or(r,i),Ky(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Or(r,i),HE(t,e,r,i,n);case 3:e:{if(yC(e),t===null)throw Error(U(387));r=e.pendingProps,s=e.memoizedState,i=s.element,Bk(t,e),Tf(e,r,null,n);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=pl(Error(U(423)),e),e=YE(t,e,r,n,i);break e}else if(r!==i){i=pl(Error(U(424)),e),e=YE(t,e,r,n,i);break e}else for(hr=Is(e.stateNode.containerInfo.firstChild),dr=e,ht=!0,Mr=null,n=qk(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(hl(),r===i){e=Mi(t,e,n);break e}Mn(t,e,r,n)}e=e.child}return e;case 5:return Gk(e),t===null&&zy(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,Vy(r,i)?o=null:s!==null&&Vy(r,s)&&(e.flags|=32),gC(t,e),Mn(t,e,o,n),e.child;case 6:return t===null&&zy(e),null;case 13:return vC(t,e,n);case 4:return M_(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=dl(e,null,r,n):Mn(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Or(r,i),qE(t,e,r,i,n);case 7:return Mn(t,e,e.pendingProps,n),e.child;case 8:return Mn(t,e,e.pendingProps.children,n),e.child;case 12:return Mn(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,Xe(Ef,r._currentValue),r._currentValue=o,s!==null)if(jr(s.value,o)){if(s.children===i.children&&!nr.current){e=Mi(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var u=a.firstContext;u!==null;){if(u.context===r){if(s.tag===1){u=bi(-1,n&-n),u.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var d=c.pending;d===null?u.next=u:(u.next=d.next,d.next=u),c.pending=u}}s.lanes|=n,u=s.alternate,u!==null&&(u.lanes|=n),qy(s.return,n,e),a.lanes|=n;break}u=u.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(U(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),qy(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}Mn(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,el(e,n),i=Nr(i),r=r(i),e.flags|=1,Mn(t,e,r,n),e.child;case 14:return r=e.type,i=Or(r,e.pendingProps),i=Or(r.type,i),GE(t,e,r,i,n);case 15:return pC(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Or(r,i),Gd(t,e),e.tag=1,rr(r)?(t=!0,_f(e)):t=!1,el(e,n),jk(e,r,i),Hy(e,r,i,n),Qy(null,e,r,!0,t,n);case 19:return _C(t,e,n);case 22:return mC(t,e,n)}throw Error(U(156,e.tag))};function MC(t,e){return ak(t,e)}function PU(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Sr(t,e,n,r){return new PU(t,e,n,r)}function Q_(t){return t=t.prototype,!(!t||!t.isReactComponent)}function MU(t){if(typeof t=="function")return Q_(t)?1:0;if(t!=null){if(t=t.$$typeof,t===m_)return 11;if(t===g_)return 14}return 2}function ks(t,e){var n=t.alternate;return n===null?(n=Sr(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Kd(t,e,n,r,i,s){var o=2;if(r=t,typeof t=="function")Q_(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Ma:return xo(n.children,i,s,e);case p_:o=8,i|=8;break;case yy:return t=Sr(12,n,e,i|2),t.elementType=yy,t.lanes=s,t;case vy:return t=Sr(13,n,e,i),t.elementType=vy,t.lanes=s,t;case _y:return t=Sr(19,n,e,i),t.elementType=_y,t.lanes=s,t;case z1:return Pp(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case W1:o=10;break e;case j1:o=9;break e;case m_:o=11;break e;case g_:o=14;break e;case as:o=16,r=null;break e}throw Error(U(130,t==null?t:typeof t,""))}return e=Sr(o,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function xo(t,e,n,r){return t=Sr(7,t,r,e),t.lanes=n,t}function Pp(t,e,n,r){return t=Sr(22,t,r,e),t.elementType=z1,t.lanes=n,t.stateNode={isHidden:!1},t}function Fg(t,e,n){return t=Sr(6,t,null,e),t.lanes=n,t}function Ug(t,e,n){return e=Sr(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function LU(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=vg(0),this.expirationTimes=vg(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=vg(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function X_(t,e,n,r,i,s,o,a,u){return t=new LU(t,e,n,a,u),e===1?(e=1,s===!0&&(e|=8)):e=0,s=Sr(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},P_(s),t}function FU(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Pa,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function LC(t){if(!t)return Os;t=t._reactInternals;e:{if(sa(t)!==t||t.tag!==1)throw Error(U(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(rr(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(U(171))}if(t.tag===1){var n=t.type;if(rr(n))return Mk(t,n,e)}return e}function FC(t,e,n,r,i,s,o,a,u){return t=X_(n,r,!0,t,i,s,o,a,u),t.context=LC(null),n=t.current,r=Un(),i=Ts(n),s=bi(r,i),s.callback=e??null,Es(n,s,i),t.current.lanes=i,lh(t,i,r),ir(t,r),t}function Mp(t,e,n,r){var i=e.current,s=Un(),o=Ts(i);return n=LC(n),e.context===null?e.context=n:e.pendingContext=n,e=bi(s,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Es(i,e,o),t!==null&&($r(t,i,o,s),jd(t,i,o)),o}function Rf(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function iS(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function J_(t,e){iS(t,e),(t=t.alternate)&&iS(t,e)}function UU(){return null}var UC=typeof reportError=="function"?reportError:function(t){console.error(t)};function Z_(t){this._internalRoot=t}Lp.prototype.render=Z_.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(U(409));Mp(t,e,null,null)};Lp.prototype.unmount=Z_.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;$o(function(){Mp(null,t,null,null)}),e[Oi]=null}};function Lp(t){this._internalRoot=t}Lp.prototype.unstable_scheduleHydration=function(t){if(t){var e=pk();t={blockedOn:null,target:t,priority:e};for(var n=0;n<us.length&&e!==0&&e<us[n].priority;n++);us.splice(n,0,t),n===0&&gk(t)}};function ew(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Fp(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function sS(){}function VU(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var c=Rf(o);s.call(c)}}var o=FC(e,r,t,0,null,!1,!1,"",sS);return t._reactRootContainer=o,t[Oi]=o.current,Sc(t.nodeType===8?t.parentNode:t),$o(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var c=Rf(u);a.call(c)}}var u=X_(t,0,!1,null,null,!1,!1,"",sS);return t._reactRootContainer=u,t[Oi]=u.current,Sc(t.nodeType===8?t.parentNode:t),$o(function(){Mp(e,u,n,r)}),u}function Up(t,e,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var u=Rf(o);a.call(u)}}Mp(e,o,t,i)}else o=VU(n,e,t,i,r);return Rf(o)}dk=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Uu(e.pendingLanes);n!==0&&(__(e,n|1),ir(e,At()),!(Ue&6)&&(ml=At()+500,Hs()))}break;case 13:$o(function(){var r=Pi(t,1);if(r!==null){var i=Un();$r(r,t,1,i)}}),J_(t,1)}};w_=function(t){if(t.tag===13){var e=Pi(t,134217728);if(e!==null){var n=Un();$r(e,t,134217728,n)}J_(t,134217728)}};fk=function(t){if(t.tag===13){var e=Ts(t),n=Pi(t,e);if(n!==null){var r=Un();$r(n,t,e,r)}J_(t,e)}};pk=function(){return je};mk=function(t,e){var n=je;try{return je=t,e()}finally{je=n}};by=function(t,e,n){switch(e){case"input":if(Ey(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=Dp(r);if(!i)throw Error(U(90));G1(r),Ey(r,i)}}}break;case"textarea":Y1(t,n);break;case"select":e=n.value,e!=null&&Qa(t,!!n.multiple,e,!1)}};tk=H_;nk=$o;var $U={usingClientEntryPoint:!1,Events:[ch,Va,Dp,Z1,ek,H_]},Tu={findFiberByHostInstance:Eo,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},BU={bundleType:Tu.bundleType,version:Tu.version,rendererPackageName:Tu.rendererPackageName,rendererConfig:Tu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:$i.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=sk(t),t===null?null:t.stateNode},findFiberByHostInstance:Tu.findFiberByHostInstance||UU,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Sd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Sd.isDisabled&&Sd.supportsFiber)try{Tp=Sd.inject(BU),ti=Sd}catch{}}yr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=$U;yr.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!ew(e))throw Error(U(200));return FU(t,e,null,n)};yr.createRoot=function(t,e){if(!ew(t))throw Error(U(299));var n=!1,r="",i=UC;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=X_(t,1,!1,null,null,n,!1,r,i),t[Oi]=e.current,Sc(t.nodeType===8?t.parentNode:t),new Z_(e)};yr.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(U(188)):(t=Object.keys(t).join(","),Error(U(268,t)));return t=sk(e),t=t===null?null:t.stateNode,t};yr.flushSync=function(t){return $o(t)};yr.hydrate=function(t,e,n){if(!Fp(e))throw Error(U(200));return Up(null,t,e,!0,n)};yr.hydrateRoot=function(t,e,n){if(!ew(t))throw Error(U(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=UC;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=FC(e,null,t,1,n??null,i,!1,s,o),t[Oi]=e.current,Sc(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new Lp(e)};yr.render=function(t,e,n){if(!Fp(e))throw Error(U(200));return Up(null,t,e,!1,n)};yr.unmountComponentAtNode=function(t){if(!Fp(t))throw Error(U(40));return t._reactRootContainer?($o(function(){Up(null,null,t,!1,function(){t._reactRootContainer=null,t[Oi]=null})}),!0):!1};yr.unstable_batchedUpdates=H_;yr.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Fp(n))throw Error(U(200));if(t==null||t._reactInternals===void 0)throw Error(U(38));return Up(t,e,n,!1,r)};yr.version="18.2.0-next-9e3b772b8-20220608";(function(t){function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(n){console.error(n)}}e(),t.exports=yr})(UL);var oS=py;fy.createRoot=oS.createRoot,fy.hydrateRoot=oS.hydrateRoot;const VC=Vt.createContext(null),WU=({children:t})=>{let e=null;return navigator.userAgent.indexOf("Firefox")>-1?e=200:navigator.userAgent.indexOf("Chrome")>-1?e=60:navigator.userAgent.indexOf("Safari")>-1&&(e=160),Cn(VC.Provider,{value:{brightness:e},children:t})};var lv={},jU={get exports(){return lv},set exports(t){lv=t}};function zU(t){throw new Error('Could not dynamically require "'+t+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Of={},qU={get exports(){return Of},set exports(t){Of=t}},aS;function GU(){return aS||(aS=1,function(t,e){(function(n,r){t.exports=r()})(D1,function(){var n;function r(){return n.apply(null,arguments)}function i(l){n=l}function s(l){return l instanceof Array||Object.prototype.toString.call(l)==="[object Array]"}function o(l){return l!=null&&Object.prototype.toString.call(l)==="[object Object]"}function a(l,h){return Object.prototype.hasOwnProperty.call(l,h)}function u(l){if(Object.getOwnPropertyNames)return Object.getOwnPropertyNames(l).length===0;var h;for(h in l)if(a(l,h))return!1;return!0}function c(l){return l===void 0}function d(l){return typeof l=="number"||Object.prototype.toString.call(l)==="[object Number]"}function f(l){return l instanceof Date||Object.prototype.toString.call(l)==="[object Date]"}function g(l,h){var p=[],m,y=l.length;for(m=0;m<y;++m)p.push(h(l[m],m));return p}function v(l,h){for(var p in h)a(h,p)&&(l[p]=h[p]);return a(h,"toString")&&(l.toString=h.toString),a(h,"valueOf")&&(l.valueOf=h.valueOf),l}function w(l,h,p,m){return xI(l,h,p,m,!0).utc()}function T(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidEra:null,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],era:null,meridiem:null,rfc2822:!1,weekdayMismatch:!1}}function C(l){return l._pf==null&&(l._pf=T()),l._pf}var I;Array.prototype.some?I=Array.prototype.some:I=function(l){var h=Object(this),p=h.length>>>0,m;for(m=0;m<p;m++)if(m in h&&l.call(this,h[m],m,h))return!0;return!1};function _(l){if(l._isValid==null){var h=C(l),p=I.call(h.parsedDateParts,function(y){return y!=null}),m=!isNaN(l._d.getTime())&&h.overflow<0&&!h.empty&&!h.invalidEra&&!h.invalidMonth&&!h.invalidWeekday&&!h.weekdayMismatch&&!h.nullInput&&!h.invalidFormat&&!h.userInvalidated&&(!h.meridiem||h.meridiem&&p);if(l._strict&&(m=m&&h.charsLeftOver===0&&h.unusedTokens.length===0&&h.bigHour===void 0),Object.isFrozen==null||!Object.isFrozen(l))l._isValid=m;else return m}return l._isValid}function E(l){var h=w(NaN);return l!=null?v(C(h),l):C(h).userInvalidated=!0,h}var b=r.momentProperties=[],O=!1;function P(l,h){var p,m,y,S=b.length;if(c(h._isAMomentObject)||(l._isAMomentObject=h._isAMomentObject),c(h._i)||(l._i=h._i),c(h._f)||(l._f=h._f),c(h._l)||(l._l=h._l),c(h._strict)||(l._strict=h._strict),c(h._tzm)||(l._tzm=h._tzm),c(h._isUTC)||(l._isUTC=h._isUTC),c(h._offset)||(l._offset=h._offset),c(h._pf)||(l._pf=C(h)),c(h._locale)||(l._locale=h._locale),S>0)for(p=0;p<S;p++)m=b[p],y=h[m],c(y)||(l[m]=y);return l}function L(l){P(this,l),this._d=new Date(l._d!=null?l._d.getTime():NaN),this.isValid()||(this._d=new Date(NaN)),O===!1&&(O=!0,r.updateOffset(this),O=!1)}function z(l){return l instanceof L||l!=null&&l._isAMomentObject!=null}function Te(l){r.suppressDeprecationWarnings===!1&&typeof console<"u"&&console.warn&&console.warn("Deprecation warning: "+l)}function ae(l,h){var p=!0;return v(function(){if(r.deprecationHandler!=null&&r.deprecationHandler(null,l),p){var m=[],y,S,A,ue=arguments.length;for(S=0;S<ue;S++){if(y="",typeof arguments[S]=="object"){y+=`
[`+S+"] ";for(A in arguments[0])a(arguments[0],A)&&(y+=A+": "+arguments[0][A]+", ");y=y.slice(0,-2)}else y=arguments[S];m.push(y)}Te(l+`
Arguments: `+Array.prototype.slice.call(m).join("")+`
`+new Error().stack),p=!1}return h.apply(this,arguments)},h)}var xt={};function ke(l,h){r.deprecationHandler!=null&&r.deprecationHandler(l,h),xt[l]||(Te(h),xt[l]=!0)}r.suppressDeprecationWarnings=!1,r.deprecationHandler=null;function K(l){return typeof Function<"u"&&l instanceof Function||Object.prototype.toString.call(l)==="[object Function]"}function he(l){var h,p;for(p in l)a(l,p)&&(h=l[p],K(h)?this[p]=h:this["_"+p]=h);this._config=l,this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)}function q(l,h){var p=v({},l),m;for(m in h)a(h,m)&&(o(l[m])&&o(h[m])?(p[m]={},v(p[m],l[m]),v(p[m],h[m])):h[m]!=null?p[m]=h[m]:delete p[m]);for(m in l)a(l,m)&&!a(h,m)&&o(l[m])&&(p[m]=v({},p[m]));return p}function W(l){l!=null&&this.set(l)}var re;Object.keys?re=Object.keys:re=function(l){var h,p=[];for(h in l)a(l,h)&&p.push(h);return p};var $={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"};function Q(l,h,p){var m=this._calendar[l]||this._calendar.sameElse;return K(m)?m.call(h,p):m}function J(l,h,p){var m=""+Math.abs(l),y=h-m.length,S=l>=0;return(S?p?"+":"":"-")+Math.pow(10,Math.max(0,y)).toString().substr(1)+m}var me=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,_e=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,Ze={},Le={};function Z(l,h,p,m){var y=m;typeof m=="string"&&(y=function(){return this[m]()}),l&&(Le[l]=y),h&&(Le[h[0]]=function(){return J(y.apply(this,arguments),h[1],h[2])}),p&&(Le[p]=function(){return this.localeData().ordinal(y.apply(this,arguments),l)})}function ot(l){return l.match(/\[[\s\S]/)?l.replace(/^\[|\]$/g,""):l.replace(/\\/g,"")}function Ft(l){var h=l.match(me),p,m;for(p=0,m=h.length;p<m;p++)Le[h[p]]?h[p]=Le[h[p]]:h[p]=ot(h[p]);return function(y){var S="",A;for(A=0;A<m;A++)S+=K(h[A])?h[A].call(y,l):h[A];return S}}function _n(l,h){return l.isValid()?(h=_r(h,l.localeData()),Ze[h]=Ze[h]||Ft(h),Ze[h](l)):l.localeData().invalidDate()}function _r(l,h){var p=5;function m(y){return h.longDateFormat(y)||y}for(_e.lastIndex=0;p>=0&&_e.test(l);)l=l.replace(_e,m),_e.lastIndex=0,p-=1;return l}var ma={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"};function ga(l){var h=this._longDateFormat[l],p=this._longDateFormat[l.toUpperCase()];return h||!p?h:(this._longDateFormat[l]=p.match(me).map(function(m){return m==="MMMM"||m==="MM"||m==="DD"||m==="dddd"?m.slice(1):m}).join(""),this._longDateFormat[l])}var zr="Invalid date";function R(){return this._invalidDate}var x="%d",B=/\d{1,2}/;function de(l){return this._ordinal.replace("%d",l)}var fe={future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",w:"a week",ww:"%d weeks",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function Xt(l,h,p,m){var y=this._relativeTime[p];return K(y)?y(l,h,p,m):y.replace(/%d/i,l)}function at(l,h){var p=this._relativeTime[l>0?"future":"past"];return K(p)?p(h):p.replace(/%s/i,h)}var or={};function mt(l,h){var p=l.toLowerCase();or[p]=or[p+"s"]=or[h]=l}function et(l){return typeof l=="string"?or[l]||or[l.toLowerCase()]:void 0}function qr(l){var h={},p,m;for(m in l)a(l,m)&&(p=et(m),p&&(h[p]=l[m]));return h}var An={};function lt(l,h){An[l]=h}function uu(l){var h=[],p;for(p in l)a(l,p)&&h.push({unit:p,priority:An[p]});return h.sort(function(m,y){return m.priority-y.priority}),h}function wn(l){return l%4===0&&l%100!==0||l%400===0}function tt(l){return l<0?Math.ceil(l)||0:Math.floor(l)}function se(l){var h=+l,p=0;return h!==0&&isFinite(h)&&(p=tt(h)),p}function ar(l,h){return function(p){return p!=null?(ro(this,l,p),r.updateOffset(this,h),this):Hn(this,l)}}function Hn(l,h){return l.isValid()?l._d["get"+(l._isUTC?"UTC":"")+h]():NaN}function ro(l,h,p){l.isValid()&&!isNaN(p)&&(h==="FullYear"&&wn(l.year())&&l.month()===1&&l.date()===29?(p=se(p),l._d["set"+(l._isUTC?"UTC":"")+h](p,l.month(),we(p,l.month()))):l._d["set"+(l._isUTC?"UTC":"")+h](p))}function Rn(l){return l=et(l),K(this[l])?this[l]():this}function lr(l,h){if(typeof l=="object"){l=qr(l);var p=uu(l),m,y=p.length;for(m=0;m<y;m++)this[p[m].unit](l[p[m].unit])}else if(l=et(l),K(this[l]))return this[l](h);return this}var Ki=/\d/,ze=/\d\d/,Gr=/\d{3}/,_t=/\d{4}/,In=/[+-]?\d{6}/,Re=/\d\d?/,ui=/\d\d\d\d?/,io=/\d\d\d\d\d\d?/,wr=/\d{1,3}/,so=/\d{1,4}/,ya=/[+-]?\d{1,6}/,Qi=/\d+/,va=/[+-]?\d+/,un=/Z|[+-]\d\d:?\d\d/gi,ci=/Z|[+-]\d\d(?::?\d\d)?/gi,Hm=/[+-]?\d+(\.\d{1,3})?/,oo=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i,ao;ao={};function X(l,h,p){ao[l]=K(h)?h:function(m,y){return m&&p?p:h}}function _a(l,h){return a(ao,l)?ao[l](h._strict,h._locale):new RegExp(Ym(l))}function Ym(l){return On(l.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(h,p,m,y,S){return p||m||y||S}))}function On(l){return l.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}var cu={};function Be(l,h){var p,m=h,y;for(typeof l=="string"&&(l=[l]),d(h)&&(m=function(S,A){A[h]=se(S)}),y=l.length,p=0;p<y;p++)cu[l[p]]=m}function lo(l,h){Be(l,function(p,m,y,S){y._w=y._w||{},h(p,y._w,y,S)})}function Gh(l,h,p){h!=null&&a(cu,l)&&cu[l](h,p._a,p,l)}var Ye=0,Ut=1,ge=2,wt=3,En=4,Yn=5,ur=6,Hh=7,Yh=8;function Km(l,h){return(l%h+h)%h}var k;Array.prototype.indexOf?k=Array.prototype.indexOf:k=function(l){var h;for(h=0;h<this.length;++h)if(this[h]===l)return h;return-1};function we(l,h){if(isNaN(l)||isNaN(h))return NaN;var p=Km(h,12);return l+=(h-p)/12,p===1?wn(l)?29:28:31-p%7%2}Z("M",["MM",2],"Mo",function(){return this.month()+1}),Z("MMM",0,0,function(l){return this.localeData().monthsShort(this,l)}),Z("MMMM",0,0,function(l){return this.localeData().months(this,l)}),mt("month","M"),lt("month",8),X("M",Re),X("MM",Re,ze),X("MMM",function(l,h){return h.monthsShortRegex(l)}),X("MMMM",function(l,h){return h.monthsRegex(l)}),Be(["M","MM"],function(l,h){h[Ut]=se(l)-1}),Be(["MMM","MMMM"],function(l,h,p,m){var y=p._locale.monthsParse(l,m,p._strict);y!=null?h[Ut]=y:C(p).invalidMonth=l});var Ie="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ut="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),Xi=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,Hr=oo,wa=oo;function Ji(l,h){return l?s(this._months)?this._months[l.month()]:this._months[(this._months.isFormat||Xi).test(h)?"format":"standalone"][l.month()]:s(this._months)?this._months:this._months.standalone}function Sn(l,h){return l?s(this._monthsShort)?this._monthsShort[l.month()]:this._monthsShort[Xi.test(h)?"format":"standalone"][l.month()]:s(this._monthsShort)?this._monthsShort:this._monthsShort.standalone}function Ia(l,h,p){var m,y,S,A=l.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],m=0;m<12;++m)S=w([2e3,m]),this._shortMonthsParse[m]=this.monthsShort(S,"").toLocaleLowerCase(),this._longMonthsParse[m]=this.months(S,"").toLocaleLowerCase();return p?h==="MMM"?(y=k.call(this._shortMonthsParse,A),y!==-1?y:null):(y=k.call(this._longMonthsParse,A),y!==-1?y:null):h==="MMM"?(y=k.call(this._shortMonthsParse,A),y!==-1?y:(y=k.call(this._longMonthsParse,A),y!==-1?y:null)):(y=k.call(this._longMonthsParse,A),y!==-1?y:(y=k.call(this._shortMonthsParse,A),y!==-1?y:null))}function Kh(l,h,p){var m,y,S;if(this._monthsParseExact)return Ia.call(this,l,h,p);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),m=0;m<12;m++){if(y=w([2e3,m]),p&&!this._longMonthsParse[m]&&(this._longMonthsParse[m]=new RegExp("^"+this.months(y,"").replace(".","")+"$","i"),this._shortMonthsParse[m]=new RegExp("^"+this.monthsShort(y,"").replace(".","")+"$","i")),!p&&!this._monthsParse[m]&&(S="^"+this.months(y,"")+"|^"+this.monthsShort(y,""),this._monthsParse[m]=new RegExp(S.replace(".",""),"i")),p&&h==="MMMM"&&this._longMonthsParse[m].test(l))return m;if(p&&h==="MMM"&&this._shortMonthsParse[m].test(l))return m;if(!p&&this._monthsParse[m].test(l))return m}}function yI(l,h){var p;if(!l.isValid())return l;if(typeof h=="string"){if(/^\d+$/.test(h))h=se(h);else if(h=l.localeData().monthsParse(h),!d(h))return l}return p=Math.min(l.date(),we(l.year(),h)),l._d["set"+(l._isUTC?"UTC":"")+"Month"](h,p),l}function vI(l){return l!=null?(yI(this,l),r.updateOffset(this,!0),this):Hn(this,"Month")}function KR(){return we(this.year(),this.month())}function QR(l){return this._monthsParseExact?(a(this,"_monthsRegex")||_I.call(this),l?this._monthsShortStrictRegex:this._monthsShortRegex):(a(this,"_monthsShortRegex")||(this._monthsShortRegex=Hr),this._monthsShortStrictRegex&&l?this._monthsShortStrictRegex:this._monthsShortRegex)}function XR(l){return this._monthsParseExact?(a(this,"_monthsRegex")||_I.call(this),l?this._monthsStrictRegex:this._monthsRegex):(a(this,"_monthsRegex")||(this._monthsRegex=wa),this._monthsStrictRegex&&l?this._monthsStrictRegex:this._monthsRegex)}function _I(){function l(A,ue){return ue.length-A.length}var h=[],p=[],m=[],y,S;for(y=0;y<12;y++)S=w([2e3,y]),h.push(this.monthsShort(S,"")),p.push(this.months(S,"")),m.push(this.months(S,"")),m.push(this.monthsShort(S,""));for(h.sort(l),p.sort(l),m.sort(l),y=0;y<12;y++)h[y]=On(h[y]),p[y]=On(p[y]);for(y=0;y<24;y++)m[y]=On(m[y]);this._monthsRegex=new RegExp("^("+m.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+p.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+h.join("|")+")","i")}Z("Y",0,0,function(){var l=this.year();return l<=9999?J(l,4):"+"+l}),Z(0,["YY",2],0,function(){return this.year()%100}),Z(0,["YYYY",4],0,"year"),Z(0,["YYYYY",5],0,"year"),Z(0,["YYYYYY",6,!0],0,"year"),mt("year","y"),lt("year",1),X("Y",va),X("YY",Re,ze),X("YYYY",so,_t),X("YYYYY",ya,In),X("YYYYYY",ya,In),Be(["YYYYY","YYYYYY"],Ye),Be("YYYY",function(l,h){h[Ye]=l.length===2?r.parseTwoDigitYear(l):se(l)}),Be("YY",function(l,h){h[Ye]=r.parseTwoDigitYear(l)}),Be("Y",function(l,h){h[Ye]=parseInt(l,10)});function hu(l){return wn(l)?366:365}r.parseTwoDigitYear=function(l){return se(l)+(se(l)>68?1900:2e3)};var wI=ar("FullYear",!0);function JR(){return wn(this.year())}function ZR(l,h,p,m,y,S,A){var ue;return l<100&&l>=0?(ue=new Date(l+400,h,p,m,y,S,A),isFinite(ue.getFullYear())&&ue.setFullYear(l)):ue=new Date(l,h,p,m,y,S,A),ue}function du(l){var h,p;return l<100&&l>=0?(p=Array.prototype.slice.call(arguments),p[0]=l+400,h=new Date(Date.UTC.apply(null,p)),isFinite(h.getUTCFullYear())&&h.setUTCFullYear(l)):h=new Date(Date.UTC.apply(null,arguments)),h}function Qh(l,h,p){var m=7+h-p,y=(7+du(l,0,m).getUTCDay()-h)%7;return-y+m-1}function II(l,h,p,m,y){var S=(7+p-m)%7,A=Qh(l,m,y),ue=1+7*(h-1)+S+A,Se,qe;return ue<=0?(Se=l-1,qe=hu(Se)+ue):ue>hu(l)?(Se=l+1,qe=ue-hu(l)):(Se=l,qe=ue),{year:Se,dayOfYear:qe}}function fu(l,h,p){var m=Qh(l.year(),h,p),y=Math.floor((l.dayOfYear()-m-1)/7)+1,S,A;return y<1?(A=l.year()-1,S=y+hi(A,h,p)):y>hi(l.year(),h,p)?(S=y-hi(l.year(),h,p),A=l.year()+1):(A=l.year(),S=y),{week:S,year:A}}function hi(l,h,p){var m=Qh(l,h,p),y=Qh(l+1,h,p);return(hu(l)-m+y)/7}Z("w",["ww",2],"wo","week"),Z("W",["WW",2],"Wo","isoWeek"),mt("week","w"),mt("isoWeek","W"),lt("week",5),lt("isoWeek",5),X("w",Re),X("ww",Re,ze),X("W",Re),X("WW",Re,ze),lo(["w","ww","W","WW"],function(l,h,p,m){h[m.substr(0,1)]=se(l)});function eO(l){return fu(l,this._week.dow,this._week.doy).week}var tO={dow:0,doy:6};function nO(){return this._week.dow}function rO(){return this._week.doy}function iO(l){var h=this.localeData().week(this);return l==null?h:this.add((l-h)*7,"d")}function sO(l){var h=fu(this,1,4).week;return l==null?h:this.add((l-h)*7,"d")}Z("d",0,"do","day"),Z("dd",0,0,function(l){return this.localeData().weekdaysMin(this,l)}),Z("ddd",0,0,function(l){return this.localeData().weekdaysShort(this,l)}),Z("dddd",0,0,function(l){return this.localeData().weekdays(this,l)}),Z("e",0,0,"weekday"),Z("E",0,0,"isoWeekday"),mt("day","d"),mt("weekday","e"),mt("isoWeekday","E"),lt("day",11),lt("weekday",11),lt("isoWeekday",11),X("d",Re),X("e",Re),X("E",Re),X("dd",function(l,h){return h.weekdaysMinRegex(l)}),X("ddd",function(l,h){return h.weekdaysShortRegex(l)}),X("dddd",function(l,h){return h.weekdaysRegex(l)}),lo(["dd","ddd","dddd"],function(l,h,p,m){var y=p._locale.weekdaysParse(l,m,p._strict);y!=null?h.d=y:C(p).invalidWeekday=l}),lo(["d","e","E"],function(l,h,p,m){h[m]=se(l)});function oO(l,h){return typeof l!="string"?l:isNaN(l)?(l=h.weekdaysParse(l),typeof l=="number"?l:null):parseInt(l,10)}function aO(l,h){return typeof l=="string"?h.weekdaysParse(l)%7||7:isNaN(l)?null:l}function Qm(l,h){return l.slice(h,7).concat(l.slice(0,h))}var lO="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),EI="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),uO="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),cO=oo,hO=oo,dO=oo;function fO(l,h){var p=s(this._weekdays)?this._weekdays:this._weekdays[l&&l!==!0&&this._weekdays.isFormat.test(h)?"format":"standalone"];return l===!0?Qm(p,this._week.dow):l?p[l.day()]:p}function pO(l){return l===!0?Qm(this._weekdaysShort,this._week.dow):l?this._weekdaysShort[l.day()]:this._weekdaysShort}function mO(l){return l===!0?Qm(this._weekdaysMin,this._week.dow):l?this._weekdaysMin[l.day()]:this._weekdaysMin}function gO(l,h,p){var m,y,S,A=l.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],m=0;m<7;++m)S=w([2e3,1]).day(m),this._minWeekdaysParse[m]=this.weekdaysMin(S,"").toLocaleLowerCase(),this._shortWeekdaysParse[m]=this.weekdaysShort(S,"").toLocaleLowerCase(),this._weekdaysParse[m]=this.weekdays(S,"").toLocaleLowerCase();return p?h==="dddd"?(y=k.call(this._weekdaysParse,A),y!==-1?y:null):h==="ddd"?(y=k.call(this._shortWeekdaysParse,A),y!==-1?y:null):(y=k.call(this._minWeekdaysParse,A),y!==-1?y:null):h==="dddd"?(y=k.call(this._weekdaysParse,A),y!==-1||(y=k.call(this._shortWeekdaysParse,A),y!==-1)?y:(y=k.call(this._minWeekdaysParse,A),y!==-1?y:null)):h==="ddd"?(y=k.call(this._shortWeekdaysParse,A),y!==-1||(y=k.call(this._weekdaysParse,A),y!==-1)?y:(y=k.call(this._minWeekdaysParse,A),y!==-1?y:null)):(y=k.call(this._minWeekdaysParse,A),y!==-1||(y=k.call(this._weekdaysParse,A),y!==-1)?y:(y=k.call(this._shortWeekdaysParse,A),y!==-1?y:null))}function yO(l,h,p){var m,y,S;if(this._weekdaysParseExact)return gO.call(this,l,h,p);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),m=0;m<7;m++){if(y=w([2e3,1]).day(m),p&&!this._fullWeekdaysParse[m]&&(this._fullWeekdaysParse[m]=new RegExp("^"+this.weekdays(y,"").replace(".","\\.?")+"$","i"),this._shortWeekdaysParse[m]=new RegExp("^"+this.weekdaysShort(y,"").replace(".","\\.?")+"$","i"),this._minWeekdaysParse[m]=new RegExp("^"+this.weekdaysMin(y,"").replace(".","\\.?")+"$","i")),this._weekdaysParse[m]||(S="^"+this.weekdays(y,"")+"|^"+this.weekdaysShort(y,"")+"|^"+this.weekdaysMin(y,""),this._weekdaysParse[m]=new RegExp(S.replace(".",""),"i")),p&&h==="dddd"&&this._fullWeekdaysParse[m].test(l))return m;if(p&&h==="ddd"&&this._shortWeekdaysParse[m].test(l))return m;if(p&&h==="dd"&&this._minWeekdaysParse[m].test(l))return m;if(!p&&this._weekdaysParse[m].test(l))return m}}function vO(l){if(!this.isValid())return l!=null?this:NaN;var h=this._isUTC?this._d.getUTCDay():this._d.getDay();return l!=null?(l=oO(l,this.localeData()),this.add(l-h,"d")):h}function _O(l){if(!this.isValid())return l!=null?this:NaN;var h=(this.day()+7-this.localeData()._week.dow)%7;return l==null?h:this.add(l-h,"d")}function wO(l){if(!this.isValid())return l!=null?this:NaN;if(l!=null){var h=aO(l,this.localeData());return this.day(this.day()%7?h:h-7)}else return this.day()||7}function IO(l){return this._weekdaysParseExact?(a(this,"_weekdaysRegex")||Xm.call(this),l?this._weekdaysStrictRegex:this._weekdaysRegex):(a(this,"_weekdaysRegex")||(this._weekdaysRegex=cO),this._weekdaysStrictRegex&&l?this._weekdaysStrictRegex:this._weekdaysRegex)}function EO(l){return this._weekdaysParseExact?(a(this,"_weekdaysRegex")||Xm.call(this),l?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(a(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=hO),this._weekdaysShortStrictRegex&&l?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)}function SO(l){return this._weekdaysParseExact?(a(this,"_weekdaysRegex")||Xm.call(this),l?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(a(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=dO),this._weekdaysMinStrictRegex&&l?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)}function Xm(){function l(Pn,gi){return gi.length-Pn.length}var h=[],p=[],m=[],y=[],S,A,ue,Se,qe;for(S=0;S<7;S++)A=w([2e3,1]).day(S),ue=On(this.weekdaysMin(A,"")),Se=On(this.weekdaysShort(A,"")),qe=On(this.weekdays(A,"")),h.push(ue),p.push(Se),m.push(qe),y.push(ue),y.push(Se),y.push(qe);h.sort(l),p.sort(l),m.sort(l),y.sort(l),this._weekdaysRegex=new RegExp("^("+y.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+m.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+p.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+h.join("|")+")","i")}function Jm(){return this.hours()%12||12}function TO(){return this.hours()||24}Z("H",["HH",2],0,"hour"),Z("h",["hh",2],0,Jm),Z("k",["kk",2],0,TO),Z("hmm",0,0,function(){return""+Jm.apply(this)+J(this.minutes(),2)}),Z("hmmss",0,0,function(){return""+Jm.apply(this)+J(this.minutes(),2)+J(this.seconds(),2)}),Z("Hmm",0,0,function(){return""+this.hours()+J(this.minutes(),2)}),Z("Hmmss",0,0,function(){return""+this.hours()+J(this.minutes(),2)+J(this.seconds(),2)});function SI(l,h){Z(l,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),h)})}SI("a",!0),SI("A",!1),mt("hour","h"),lt("hour",13);function TI(l,h){return h._meridiemParse}X("a",TI),X("A",TI),X("H",Re),X("h",Re),X("k",Re),X("HH",Re,ze),X("hh",Re,ze),X("kk",Re,ze),X("hmm",ui),X("hmmss",io),X("Hmm",ui),X("Hmmss",io),Be(["H","HH"],wt),Be(["k","kk"],function(l,h,p){var m=se(l);h[wt]=m===24?0:m}),Be(["a","A"],function(l,h,p){p._isPm=p._locale.isPM(l),p._meridiem=l}),Be(["h","hh"],function(l,h,p){h[wt]=se(l),C(p).bigHour=!0}),Be("hmm",function(l,h,p){var m=l.length-2;h[wt]=se(l.substr(0,m)),h[En]=se(l.substr(m)),C(p).bigHour=!0}),Be("hmmss",function(l,h,p){var m=l.length-4,y=l.length-2;h[wt]=se(l.substr(0,m)),h[En]=se(l.substr(m,2)),h[Yn]=se(l.substr(y)),C(p).bigHour=!0}),Be("Hmm",function(l,h,p){var m=l.length-2;h[wt]=se(l.substr(0,m)),h[En]=se(l.substr(m))}),Be("Hmmss",function(l,h,p){var m=l.length-4,y=l.length-2;h[wt]=se(l.substr(0,m)),h[En]=se(l.substr(m,2)),h[Yn]=se(l.substr(y))});function kO(l){return(l+"").toLowerCase().charAt(0)==="p"}var CO=/[ap]\.?m?\.?/i,NO=ar("Hours",!0);function DO(l,h,p){return l>11?p?"pm":"PM":p?"am":"AM"}var kI={calendar:$,longDateFormat:ma,invalidDate:zr,ordinal:x,dayOfMonthOrdinalParse:B,relativeTime:fe,months:Ie,monthsShort:ut,week:tO,weekdays:lO,weekdaysMin:uO,weekdaysShort:EI,meridiemParse:CO},ct={},pu={},mu;function bO(l,h){var p,m=Math.min(l.length,h.length);for(p=0;p<m;p+=1)if(l[p]!==h[p])return p;return m}function CI(l){return l&&l.toLowerCase().replace("_","-")}function xO(l){for(var h=0,p,m,y,S;h<l.length;){for(S=CI(l[h]).split("-"),p=S.length,m=CI(l[h+1]),m=m?m.split("-"):null;p>0;){if(y=Xh(S.slice(0,p).join("-")),y)return y;if(m&&m.length>=p&&bO(S,m)>=p-1)break;p--}h++}return mu}function AO(l){return l.match("^[^/\\\\]*$")!=null}function Xh(l){var h=null,p;if(ct[l]===void 0&&t&&t.exports&&AO(l))try{h=mu._abbr,p=zU,p("./locale/"+l),Zi(h)}catch{ct[l]=null}return ct[l]}function Zi(l,h){var p;return l&&(c(h)?p=di(l):p=Zm(l,h),p?mu=p:typeof console<"u"&&console.warn&&console.warn("Locale "+l+" not found. Did you forget to load it?")),mu._abbr}function Zm(l,h){if(h!==null){var p,m=kI;if(h.abbr=l,ct[l]!=null)ke("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),m=ct[l]._config;else if(h.parentLocale!=null)if(ct[h.parentLocale]!=null)m=ct[h.parentLocale]._config;else if(p=Xh(h.parentLocale),p!=null)m=p._config;else return pu[h.parentLocale]||(pu[h.parentLocale]=[]),pu[h.parentLocale].push({name:l,config:h}),null;return ct[l]=new W(q(m,h)),pu[l]&&pu[l].forEach(function(y){Zm(y.name,y.config)}),Zi(l),ct[l]}else return delete ct[l],null}function RO(l,h){if(h!=null){var p,m,y=kI;ct[l]!=null&&ct[l].parentLocale!=null?ct[l].set(q(ct[l]._config,h)):(m=Xh(l),m!=null&&(y=m._config),h=q(y,h),m==null&&(h.abbr=l),p=new W(h),p.parentLocale=ct[l],ct[l]=p),Zi(l)}else ct[l]!=null&&(ct[l].parentLocale!=null?(ct[l]=ct[l].parentLocale,l===Zi()&&Zi(l)):ct[l]!=null&&delete ct[l]);return ct[l]}function di(l){var h;if(l&&l._locale&&l._locale._abbr&&(l=l._locale._abbr),!l)return mu;if(!s(l)){if(h=Xh(l),h)return h;l=[l]}return xO(l)}function OO(){return re(ct)}function eg(l){var h,p=l._a;return p&&C(l).overflow===-2&&(h=p[Ut]<0||p[Ut]>11?Ut:p[ge]<1||p[ge]>we(p[Ye],p[Ut])?ge:p[wt]<0||p[wt]>24||p[wt]===24&&(p[En]!==0||p[Yn]!==0||p[ur]!==0)?wt:p[En]<0||p[En]>59?En:p[Yn]<0||p[Yn]>59?Yn:p[ur]<0||p[ur]>999?ur:-1,C(l)._overflowDayOfYear&&(h<Ye||h>ge)&&(h=ge),C(l)._overflowWeeks&&h===-1&&(h=Hh),C(l)._overflowWeekday&&h===-1&&(h=Yh),C(l).overflow=h),l}var PO=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,MO=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d|))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,LO=/Z|[+-]\d\d(?::?\d\d)?/,Jh=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/],["YYYYMM",/\d{6}/,!1],["YYYY",/\d{4}/,!1]],tg=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],FO=/^\/?Date\((-?\d+)/i,UO=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/,VO={UT:0,GMT:0,EDT:-4*60,EST:-5*60,CDT:-5*60,CST:-6*60,MDT:-6*60,MST:-7*60,PDT:-7*60,PST:-8*60};function NI(l){var h,p,m=l._i,y=PO.exec(m)||MO.exec(m),S,A,ue,Se,qe=Jh.length,Pn=tg.length;if(y){for(C(l).iso=!0,h=0,p=qe;h<p;h++)if(Jh[h][1].exec(y[1])){A=Jh[h][0],S=Jh[h][2]!==!1;break}if(A==null){l._isValid=!1;return}if(y[3]){for(h=0,p=Pn;h<p;h++)if(tg[h][1].exec(y[3])){ue=(y[2]||" ")+tg[h][0];break}if(ue==null){l._isValid=!1;return}}if(!S&&ue!=null){l._isValid=!1;return}if(y[4])if(LO.exec(y[4]))Se="Z";else{l._isValid=!1;return}l._f=A+(ue||"")+(Se||""),rg(l)}else l._isValid=!1}function $O(l,h,p,m,y,S){var A=[BO(l),ut.indexOf(h),parseInt(p,10),parseInt(m,10),parseInt(y,10)];return S&&A.push(parseInt(S,10)),A}function BO(l){var h=parseInt(l,10);return h<=49?2e3+h:h<=999?1900+h:h}function WO(l){return l.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s\s*/,"").replace(/\s\s*$/,"")}function jO(l,h,p){if(l){var m=EI.indexOf(l),y=new Date(h[0],h[1],h[2]).getDay();if(m!==y)return C(p).weekdayMismatch=!0,p._isValid=!1,!1}return!0}function zO(l,h,p){if(l)return VO[l];if(h)return 0;var m=parseInt(p,10),y=m%100,S=(m-y)/100;return S*60+y}function DI(l){var h=UO.exec(WO(l._i)),p;if(h){if(p=$O(h[4],h[3],h[2],h[5],h[6],h[7]),!jO(h[1],p,l))return;l._a=p,l._tzm=zO(h[8],h[9],h[10]),l._d=du.apply(null,l._a),l._d.setUTCMinutes(l._d.getUTCMinutes()-l._tzm),C(l).rfc2822=!0}else l._isValid=!1}function qO(l){var h=FO.exec(l._i);if(h!==null){l._d=new Date(+h[1]);return}if(NI(l),l._isValid===!1)delete l._isValid;else return;if(DI(l),l._isValid===!1)delete l._isValid;else return;l._strict?l._isValid=!1:r.createFromInputFallback(l)}r.createFromInputFallback=ae("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",function(l){l._d=new Date(l._i+(l._useUTC?" UTC":""))});function Ea(l,h,p){return l??h??p}function GO(l){var h=new Date(r.now());return l._useUTC?[h.getUTCFullYear(),h.getUTCMonth(),h.getUTCDate()]:[h.getFullYear(),h.getMonth(),h.getDate()]}function ng(l){var h,p,m=[],y,S,A;if(!l._d){for(y=GO(l),l._w&&l._a[ge]==null&&l._a[Ut]==null&&HO(l),l._dayOfYear!=null&&(A=Ea(l._a[Ye],y[Ye]),(l._dayOfYear>hu(A)||l._dayOfYear===0)&&(C(l)._overflowDayOfYear=!0),p=du(A,0,l._dayOfYear),l._a[Ut]=p.getUTCMonth(),l._a[ge]=p.getUTCDate()),h=0;h<3&&l._a[h]==null;++h)l._a[h]=m[h]=y[h];for(;h<7;h++)l._a[h]=m[h]=l._a[h]==null?h===2?1:0:l._a[h];l._a[wt]===24&&l._a[En]===0&&l._a[Yn]===0&&l._a[ur]===0&&(l._nextDay=!0,l._a[wt]=0),l._d=(l._useUTC?du:ZR).apply(null,m),S=l._useUTC?l._d.getUTCDay():l._d.getDay(),l._tzm!=null&&l._d.setUTCMinutes(l._d.getUTCMinutes()-l._tzm),l._nextDay&&(l._a[wt]=24),l._w&&typeof l._w.d<"u"&&l._w.d!==S&&(C(l).weekdayMismatch=!0)}}function HO(l){var h,p,m,y,S,A,ue,Se,qe;h=l._w,h.GG!=null||h.W!=null||h.E!=null?(S=1,A=4,p=Ea(h.GG,l._a[Ye],fu(nt(),1,4).year),m=Ea(h.W,1),y=Ea(h.E,1),(y<1||y>7)&&(Se=!0)):(S=l._locale._week.dow,A=l._locale._week.doy,qe=fu(nt(),S,A),p=Ea(h.gg,l._a[Ye],qe.year),m=Ea(h.w,qe.week),h.d!=null?(y=h.d,(y<0||y>6)&&(Se=!0)):h.e!=null?(y=h.e+S,(h.e<0||h.e>6)&&(Se=!0)):y=S),m<1||m>hi(p,S,A)?C(l)._overflowWeeks=!0:Se!=null?C(l)._overflowWeekday=!0:(ue=II(p,m,y,S,A),l._a[Ye]=ue.year,l._dayOfYear=ue.dayOfYear)}r.ISO_8601=function(){},r.RFC_2822=function(){};function rg(l){if(l._f===r.ISO_8601){NI(l);return}if(l._f===r.RFC_2822){DI(l);return}l._a=[],C(l).empty=!0;var h=""+l._i,p,m,y,S,A,ue=h.length,Se=0,qe,Pn;for(y=_r(l._f,l._locale).match(me)||[],Pn=y.length,p=0;p<Pn;p++)S=y[p],m=(h.match(_a(S,l))||[])[0],m&&(A=h.substr(0,h.indexOf(m)),A.length>0&&C(l).unusedInput.push(A),h=h.slice(h.indexOf(m)+m.length),Se+=m.length),Le[S]?(m?C(l).empty=!1:C(l).unusedTokens.push(S),Gh(S,m,l)):l._strict&&!m&&C(l).unusedTokens.push(S);C(l).charsLeftOver=ue-Se,h.length>0&&C(l).unusedInput.push(h),l._a[wt]<=12&&C(l).bigHour===!0&&l._a[wt]>0&&(C(l).bigHour=void 0),C(l).parsedDateParts=l._a.slice(0),C(l).meridiem=l._meridiem,l._a[wt]=YO(l._locale,l._a[wt],l._meridiem),qe=C(l).era,qe!==null&&(l._a[Ye]=l._locale.erasConvertYear(qe,l._a[Ye])),ng(l),eg(l)}function YO(l,h,p){var m;return p==null?h:l.meridiemHour!=null?l.meridiemHour(h,p):(l.isPM!=null&&(m=l.isPM(p),m&&h<12&&(h+=12),!m&&h===12&&(h=0)),h)}function KO(l){var h,p,m,y,S,A,ue=!1,Se=l._f.length;if(Se===0){C(l).invalidFormat=!0,l._d=new Date(NaN);return}for(y=0;y<Se;y++)S=0,A=!1,h=P({},l),l._useUTC!=null&&(h._useUTC=l._useUTC),h._f=l._f[y],rg(h),_(h)&&(A=!0),S+=C(h).charsLeftOver,S+=C(h).unusedTokens.length*10,C(h).score=S,ue?S<m&&(m=S,p=h):(m==null||S<m||A)&&(m=S,p=h,A&&(ue=!0));v(l,p||h)}function QO(l){if(!l._d){var h=qr(l._i),p=h.day===void 0?h.date:h.day;l._a=g([h.year,h.month,p,h.hour,h.minute,h.second,h.millisecond],function(m){return m&&parseInt(m,10)}),ng(l)}}function XO(l){var h=new L(eg(bI(l)));return h._nextDay&&(h.add(1,"d"),h._nextDay=void 0),h}function bI(l){var h=l._i,p=l._f;return l._locale=l._locale||di(l._l),h===null||p===void 0&&h===""?E({nullInput:!0}):(typeof h=="string"&&(l._i=h=l._locale.preparse(h)),z(h)?new L(eg(h)):(f(h)?l._d=h:s(p)?KO(l):p?rg(l):JO(l),_(l)||(l._d=null),l))}function JO(l){var h=l._i;c(h)?l._d=new Date(r.now()):f(h)?l._d=new Date(h.valueOf()):typeof h=="string"?qO(l):s(h)?(l._a=g(h.slice(0),function(p){return parseInt(p,10)}),ng(l)):o(h)?QO(l):d(h)?l._d=new Date(h):r.createFromInputFallback(l)}function xI(l,h,p,m,y){var S={};return(h===!0||h===!1)&&(m=h,h=void 0),(p===!0||p===!1)&&(m=p,p=void 0),(o(l)&&u(l)||s(l)&&l.length===0)&&(l=void 0),S._isAMomentObject=!0,S._useUTC=S._isUTC=y,S._l=p,S._i=l,S._f=h,S._strict=m,XO(S)}function nt(l,h,p,m){return xI(l,h,p,m,!1)}var ZO=ae("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var l=nt.apply(null,arguments);return this.isValid()&&l.isValid()?l<this?this:l:E()}),eP=ae("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var l=nt.apply(null,arguments);return this.isValid()&&l.isValid()?l>this?this:l:E()});function AI(l,h){var p,m;if(h.length===1&&s(h[0])&&(h=h[0]),!h.length)return nt();for(p=h[0],m=1;m<h.length;++m)(!h[m].isValid()||h[m][l](p))&&(p=h[m]);return p}function tP(){var l=[].slice.call(arguments,0);return AI("isBefore",l)}function nP(){var l=[].slice.call(arguments,0);return AI("isAfter",l)}var rP=function(){return Date.now?Date.now():+new Date},gu=["year","quarter","month","week","day","hour","minute","second","millisecond"];function iP(l){var h,p=!1,m,y=gu.length;for(h in l)if(a(l,h)&&!(k.call(gu,h)!==-1&&(l[h]==null||!isNaN(l[h]))))return!1;for(m=0;m<y;++m)if(l[gu[m]]){if(p)return!1;parseFloat(l[gu[m]])!==se(l[gu[m]])&&(p=!0)}return!0}function sP(){return this._isValid}function oP(){return Ar(NaN)}function Zh(l){var h=qr(l),p=h.year||0,m=h.quarter||0,y=h.month||0,S=h.week||h.isoWeek||0,A=h.day||0,ue=h.hour||0,Se=h.minute||0,qe=h.second||0,Pn=h.millisecond||0;this._isValid=iP(h),this._milliseconds=+Pn+qe*1e3+Se*6e4+ue*1e3*60*60,this._days=+A+S*7,this._months=+y+m*3+p*12,this._data={},this._locale=di(),this._bubble()}function ed(l){return l instanceof Zh}function ig(l){return l<0?Math.round(-1*l)*-1:Math.round(l)}function aP(l,h,p){var m=Math.min(l.length,h.length),y=Math.abs(l.length-h.length),S=0,A;for(A=0;A<m;A++)(p&&l[A]!==h[A]||!p&&se(l[A])!==se(h[A]))&&S++;return S+y}function RI(l,h){Z(l,0,0,function(){var p=this.utcOffset(),m="+";return p<0&&(p=-p,m="-"),m+J(~~(p/60),2)+h+J(~~p%60,2)})}RI("Z",":"),RI("ZZ",""),X("Z",ci),X("ZZ",ci),Be(["Z","ZZ"],function(l,h,p){p._useUTC=!0,p._tzm=sg(ci,l)});var lP=/([\+\-]|\d\d)/gi;function sg(l,h){var p=(h||"").match(l),m,y,S;return p===null?null:(m=p[p.length-1]||[],y=(m+"").match(lP)||["-",0,0],S=+(y[1]*60)+se(y[2]),S===0?0:y[0]==="+"?S:-S)}function og(l,h){var p,m;return h._isUTC?(p=h.clone(),m=(z(l)||f(l)?l.valueOf():nt(l).valueOf())-p.valueOf(),p._d.setTime(p._d.valueOf()+m),r.updateOffset(p,!1),p):nt(l).local()}function ag(l){return-Math.round(l._d.getTimezoneOffset())}r.updateOffset=function(){};function uP(l,h,p){var m=this._offset||0,y;if(!this.isValid())return l!=null?this:NaN;if(l!=null){if(typeof l=="string"){if(l=sg(ci,l),l===null)return this}else Math.abs(l)<16&&!p&&(l=l*60);return!this._isUTC&&h&&(y=ag(this)),this._offset=l,this._isUTC=!0,y!=null&&this.add(y,"m"),m!==l&&(!h||this._changeInProgress?LI(this,Ar(l-m,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,r.updateOffset(this,!0),this._changeInProgress=null)),this}else return this._isUTC?m:ag(this)}function cP(l,h){return l!=null?(typeof l!="string"&&(l=-l),this.utcOffset(l,h),this):-this.utcOffset()}function hP(l){return this.utcOffset(0,l)}function dP(l){return this._isUTC&&(this.utcOffset(0,l),this._isUTC=!1,l&&this.subtract(ag(this),"m")),this}function fP(){if(this._tzm!=null)this.utcOffset(this._tzm,!1,!0);else if(typeof this._i=="string"){var l=sg(un,this._i);l!=null?this.utcOffset(l):this.utcOffset(0,!0)}return this}function pP(l){return this.isValid()?(l=l?nt(l).utcOffset():0,(this.utcOffset()-l)%60===0):!1}function mP(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function gP(){if(!c(this._isDSTShifted))return this._isDSTShifted;var l={},h;return P(l,this),l=bI(l),l._a?(h=l._isUTC?w(l._a):nt(l._a),this._isDSTShifted=this.isValid()&&aP(l._a,h.toArray())>0):this._isDSTShifted=!1,this._isDSTShifted}function yP(){return this.isValid()?!this._isUTC:!1}function vP(){return this.isValid()?this._isUTC:!1}function OI(){return this.isValid()?this._isUTC&&this._offset===0:!1}var _P=/^(-|\+)?(?:(\d*)[. ])?(\d+):(\d+)(?::(\d+)(\.\d*)?)?$/,wP=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;function Ar(l,h){var p=l,m=null,y,S,A;return ed(l)?p={ms:l._milliseconds,d:l._days,M:l._months}:d(l)||!isNaN(+l)?(p={},h?p[h]=+l:p.milliseconds=+l):(m=_P.exec(l))?(y=m[1]==="-"?-1:1,p={y:0,d:se(m[ge])*y,h:se(m[wt])*y,m:se(m[En])*y,s:se(m[Yn])*y,ms:se(ig(m[ur]*1e3))*y}):(m=wP.exec(l))?(y=m[1]==="-"?-1:1,p={y:uo(m[2],y),M:uo(m[3],y),w:uo(m[4],y),d:uo(m[5],y),h:uo(m[6],y),m:uo(m[7],y),s:uo(m[8],y)}):p==null?p={}:typeof p=="object"&&("from"in p||"to"in p)&&(A=IP(nt(p.from),nt(p.to)),p={},p.ms=A.milliseconds,p.M=A.months),S=new Zh(p),ed(l)&&a(l,"_locale")&&(S._locale=l._locale),ed(l)&&a(l,"_isValid")&&(S._isValid=l._isValid),S}Ar.fn=Zh.prototype,Ar.invalid=oP;function uo(l,h){var p=l&&parseFloat(l.replace(",","."));return(isNaN(p)?0:p)*h}function PI(l,h){var p={};return p.months=h.month()-l.month()+(h.year()-l.year())*12,l.clone().add(p.months,"M").isAfter(h)&&--p.months,p.milliseconds=+h-+l.clone().add(p.months,"M"),p}function IP(l,h){var p;return l.isValid()&&h.isValid()?(h=og(h,l),l.isBefore(h)?p=PI(l,h):(p=PI(h,l),p.milliseconds=-p.milliseconds,p.months=-p.months),p):{milliseconds:0,months:0}}function MI(l,h){return function(p,m){var y,S;return m!==null&&!isNaN(+m)&&(ke(h,"moment()."+h+"(period, number) is deprecated. Please use moment()."+h+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),S=p,p=m,m=S),y=Ar(p,m),LI(this,y,l),this}}function LI(l,h,p,m){var y=h._milliseconds,S=ig(h._days),A=ig(h._months);l.isValid()&&(m=m??!0,A&&yI(l,Hn(l,"Month")+A*p),S&&ro(l,"Date",Hn(l,"Date")+S*p),y&&l._d.setTime(l._d.valueOf()+y*p),m&&r.updateOffset(l,S||A))}var EP=MI(1,"add"),SP=MI(-1,"subtract");function FI(l){return typeof l=="string"||l instanceof String}function TP(l){return z(l)||f(l)||FI(l)||d(l)||CP(l)||kP(l)||l===null||l===void 0}function kP(l){var h=o(l)&&!u(l),p=!1,m=["years","year","y","months","month","M","days","day","d","dates","date","D","hours","hour","h","minutes","minute","m","seconds","second","s","milliseconds","millisecond","ms"],y,S,A=m.length;for(y=0;y<A;y+=1)S=m[y],p=p||a(l,S);return h&&p}function CP(l){var h=s(l),p=!1;return h&&(p=l.filter(function(m){return!d(m)&&FI(l)}).length===0),h&&p}function NP(l){var h=o(l)&&!u(l),p=!1,m=["sameDay","nextDay","lastDay","nextWeek","lastWeek","sameElse"],y,S;for(y=0;y<m.length;y+=1)S=m[y],p=p||a(l,S);return h&&p}function DP(l,h){var p=l.diff(h,"days",!0);return p<-6?"sameElse":p<-1?"lastWeek":p<0?"lastDay":p<1?"sameDay":p<2?"nextDay":p<7?"nextWeek":"sameElse"}function bP(l,h){arguments.length===1&&(arguments[0]?TP(arguments[0])?(l=arguments[0],h=void 0):NP(arguments[0])&&(h=arguments[0],l=void 0):(l=void 0,h=void 0));var p=l||nt(),m=og(p,this).startOf("day"),y=r.calendarFormat(this,m)||"sameElse",S=h&&(K(h[y])?h[y].call(this,p):h[y]);return this.format(S||this.localeData().calendar(y,this,nt(p)))}function xP(){return new L(this)}function AP(l,h){var p=z(l)?l:nt(l);return this.isValid()&&p.isValid()?(h=et(h)||"millisecond",h==="millisecond"?this.valueOf()>p.valueOf():p.valueOf()<this.clone().startOf(h).valueOf()):!1}function RP(l,h){var p=z(l)?l:nt(l);return this.isValid()&&p.isValid()?(h=et(h)||"millisecond",h==="millisecond"?this.valueOf()<p.valueOf():this.clone().endOf(h).valueOf()<p.valueOf()):!1}function OP(l,h,p,m){var y=z(l)?l:nt(l),S=z(h)?h:nt(h);return this.isValid()&&y.isValid()&&S.isValid()?(m=m||"()",(m[0]==="("?this.isAfter(y,p):!this.isBefore(y,p))&&(m[1]===")"?this.isBefore(S,p):!this.isAfter(S,p))):!1}function PP(l,h){var p=z(l)?l:nt(l),m;return this.isValid()&&p.isValid()?(h=et(h)||"millisecond",h==="millisecond"?this.valueOf()===p.valueOf():(m=p.valueOf(),this.clone().startOf(h).valueOf()<=m&&m<=this.clone().endOf(h).valueOf())):!1}function MP(l,h){return this.isSame(l,h)||this.isAfter(l,h)}function LP(l,h){return this.isSame(l,h)||this.isBefore(l,h)}function FP(l,h,p){var m,y,S;if(!this.isValid())return NaN;if(m=og(l,this),!m.isValid())return NaN;switch(y=(m.utcOffset()-this.utcOffset())*6e4,h=et(h),h){case"year":S=td(this,m)/12;break;case"month":S=td(this,m);break;case"quarter":S=td(this,m)/3;break;case"second":S=(this-m)/1e3;break;case"minute":S=(this-m)/6e4;break;case"hour":S=(this-m)/36e5;break;case"day":S=(this-m-y)/864e5;break;case"week":S=(this-m-y)/6048e5;break;default:S=this-m}return p?S:tt(S)}function td(l,h){if(l.date()<h.date())return-td(h,l);var p=(h.year()-l.year())*12+(h.month()-l.month()),m=l.clone().add(p,"months"),y,S;return h-m<0?(y=l.clone().add(p-1,"months"),S=(h-m)/(m-y)):(y=l.clone().add(p+1,"months"),S=(h-m)/(y-m)),-(p+S)||0}r.defaultFormat="YYYY-MM-DDTHH:mm:ssZ",r.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";function UP(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function VP(l){if(!this.isValid())return null;var h=l!==!0,p=h?this.clone().utc():this;return p.year()<0||p.year()>9999?_n(p,h?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ"):K(Date.prototype.toISOString)?h?this.toDate().toISOString():new Date(this.valueOf()+this.utcOffset()*60*1e3).toISOString().replace("Z",_n(p,"Z")):_n(p,h?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")}function $P(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var l="moment",h="",p,m,y,S;return this.isLocal()||(l=this.utcOffset()===0?"moment.utc":"moment.parseZone",h="Z"),p="["+l+'("]',m=0<=this.year()&&this.year()<=9999?"YYYY":"YYYYYY",y="-MM-DD[T]HH:mm:ss.SSS",S=h+'[")]',this.format(p+m+y+S)}function BP(l){l||(l=this.isUtc()?r.defaultFormatUtc:r.defaultFormat);var h=_n(this,l);return this.localeData().postformat(h)}function WP(l,h){return this.isValid()&&(z(l)&&l.isValid()||nt(l).isValid())?Ar({to:this,from:l}).locale(this.locale()).humanize(!h):this.localeData().invalidDate()}function jP(l){return this.from(nt(),l)}function zP(l,h){return this.isValid()&&(z(l)&&l.isValid()||nt(l).isValid())?Ar({from:this,to:l}).locale(this.locale()).humanize(!h):this.localeData().invalidDate()}function qP(l){return this.to(nt(),l)}function UI(l){var h;return l===void 0?this._locale._abbr:(h=di(l),h!=null&&(this._locale=h),this)}var VI=ae("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(l){return l===void 0?this.localeData():this.locale(l)});function $I(){return this._locale}var nd=1e3,Sa=60*nd,rd=60*Sa,BI=(365*400+97)*24*rd;function Ta(l,h){return(l%h+h)%h}function WI(l,h,p){return l<100&&l>=0?new Date(l+400,h,p)-BI:new Date(l,h,p).valueOf()}function jI(l,h,p){return l<100&&l>=0?Date.UTC(l+400,h,p)-BI:Date.UTC(l,h,p)}function GP(l){var h,p;if(l=et(l),l===void 0||l==="millisecond"||!this.isValid())return this;switch(p=this._isUTC?jI:WI,l){case"year":h=p(this.year(),0,1);break;case"quarter":h=p(this.year(),this.month()-this.month()%3,1);break;case"month":h=p(this.year(),this.month(),1);break;case"week":h=p(this.year(),this.month(),this.date()-this.weekday());break;case"isoWeek":h=p(this.year(),this.month(),this.date()-(this.isoWeekday()-1));break;case"day":case"date":h=p(this.year(),this.month(),this.date());break;case"hour":h=this._d.valueOf(),h-=Ta(h+(this._isUTC?0:this.utcOffset()*Sa),rd);break;case"minute":h=this._d.valueOf(),h-=Ta(h,Sa);break;case"second":h=this._d.valueOf(),h-=Ta(h,nd);break}return this._d.setTime(h),r.updateOffset(this,!0),this}function HP(l){var h,p;if(l=et(l),l===void 0||l==="millisecond"||!this.isValid())return this;switch(p=this._isUTC?jI:WI,l){case"year":h=p(this.year()+1,0,1)-1;break;case"quarter":h=p(this.year(),this.month()-this.month()%3+3,1)-1;break;case"month":h=p(this.year(),this.month()+1,1)-1;break;case"week":h=p(this.year(),this.month(),this.date()-this.weekday()+7)-1;break;case"isoWeek":h=p(this.year(),this.month(),this.date()-(this.isoWeekday()-1)+7)-1;break;case"day":case"date":h=p(this.year(),this.month(),this.date()+1)-1;break;case"hour":h=this._d.valueOf(),h+=rd-Ta(h+(this._isUTC?0:this.utcOffset()*Sa),rd)-1;break;case"minute":h=this._d.valueOf(),h+=Sa-Ta(h,Sa)-1;break;case"second":h=this._d.valueOf(),h+=nd-Ta(h,nd)-1;break}return this._d.setTime(h),r.updateOffset(this,!0),this}function YP(){return this._d.valueOf()-(this._offset||0)*6e4}function KP(){return Math.floor(this.valueOf()/1e3)}function QP(){return new Date(this.valueOf())}function XP(){var l=this;return[l.year(),l.month(),l.date(),l.hour(),l.minute(),l.second(),l.millisecond()]}function JP(){var l=this;return{years:l.year(),months:l.month(),date:l.date(),hours:l.hours(),minutes:l.minutes(),seconds:l.seconds(),milliseconds:l.milliseconds()}}function ZP(){return this.isValid()?this.toISOString():null}function eM(){return _(this)}function tM(){return v({},C(this))}function nM(){return C(this).overflow}function rM(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}}Z("N",0,0,"eraAbbr"),Z("NN",0,0,"eraAbbr"),Z("NNN",0,0,"eraAbbr"),Z("NNNN",0,0,"eraName"),Z("NNNNN",0,0,"eraNarrow"),Z("y",["y",1],"yo","eraYear"),Z("y",["yy",2],0,"eraYear"),Z("y",["yyy",3],0,"eraYear"),Z("y",["yyyy",4],0,"eraYear"),X("N",lg),X("NN",lg),X("NNN",lg),X("NNNN",pM),X("NNNNN",mM),Be(["N","NN","NNN","NNNN","NNNNN"],function(l,h,p,m){var y=p._locale.erasParse(l,m,p._strict);y?C(p).era=y:C(p).invalidEra=l}),X("y",Qi),X("yy",Qi),X("yyy",Qi),X("yyyy",Qi),X("yo",gM),Be(["y","yy","yyy","yyyy"],Ye),Be(["yo"],function(l,h,p,m){var y;p._locale._eraYearOrdinalRegex&&(y=l.match(p._locale._eraYearOrdinalRegex)),p._locale.eraYearOrdinalParse?h[Ye]=p._locale.eraYearOrdinalParse(l,y):h[Ye]=parseInt(l,10)});function iM(l,h){var p,m,y,S=this._eras||di("en")._eras;for(p=0,m=S.length;p<m;++p){switch(typeof S[p].since){case"string":y=r(S[p].since).startOf("day"),S[p].since=y.valueOf();break}switch(typeof S[p].until){case"undefined":S[p].until=1/0;break;case"string":y=r(S[p].until).startOf("day").valueOf(),S[p].until=y.valueOf();break}}return S}function sM(l,h,p){var m,y,S=this.eras(),A,ue,Se;for(l=l.toUpperCase(),m=0,y=S.length;m<y;++m)if(A=S[m].name.toUpperCase(),ue=S[m].abbr.toUpperCase(),Se=S[m].narrow.toUpperCase(),p)switch(h){case"N":case"NN":case"NNN":if(ue===l)return S[m];break;case"NNNN":if(A===l)return S[m];break;case"NNNNN":if(Se===l)return S[m];break}else if([A,ue,Se].indexOf(l)>=0)return S[m]}function oM(l,h){var p=l.since<=l.until?1:-1;return h===void 0?r(l.since).year():r(l.since).year()+(h-l.offset)*p}function aM(){var l,h,p,m=this.localeData().eras();for(l=0,h=m.length;l<h;++l)if(p=this.clone().startOf("day").valueOf(),m[l].since<=p&&p<=m[l].until||m[l].until<=p&&p<=m[l].since)return m[l].name;return""}function lM(){var l,h,p,m=this.localeData().eras();for(l=0,h=m.length;l<h;++l)if(p=this.clone().startOf("day").valueOf(),m[l].since<=p&&p<=m[l].until||m[l].until<=p&&p<=m[l].since)return m[l].narrow;return""}function uM(){var l,h,p,m=this.localeData().eras();for(l=0,h=m.length;l<h;++l)if(p=this.clone().startOf("day").valueOf(),m[l].since<=p&&p<=m[l].until||m[l].until<=p&&p<=m[l].since)return m[l].abbr;return""}function cM(){var l,h,p,m,y=this.localeData().eras();for(l=0,h=y.length;l<h;++l)if(p=y[l].since<=y[l].until?1:-1,m=this.clone().startOf("day").valueOf(),y[l].since<=m&&m<=y[l].until||y[l].until<=m&&m<=y[l].since)return(this.year()-r(y[l].since).year())*p+y[l].offset;return this.year()}function hM(l){return a(this,"_erasNameRegex")||ug.call(this),l?this._erasNameRegex:this._erasRegex}function dM(l){return a(this,"_erasAbbrRegex")||ug.call(this),l?this._erasAbbrRegex:this._erasRegex}function fM(l){return a(this,"_erasNarrowRegex")||ug.call(this),l?this._erasNarrowRegex:this._erasRegex}function lg(l,h){return h.erasAbbrRegex(l)}function pM(l,h){return h.erasNameRegex(l)}function mM(l,h){return h.erasNarrowRegex(l)}function gM(l,h){return h._eraYearOrdinalRegex||Qi}function ug(){var l=[],h=[],p=[],m=[],y,S,A=this.eras();for(y=0,S=A.length;y<S;++y)h.push(On(A[y].name)),l.push(On(A[y].abbr)),p.push(On(A[y].narrow)),m.push(On(A[y].name)),m.push(On(A[y].abbr)),m.push(On(A[y].narrow));this._erasRegex=new RegExp("^("+m.join("|")+")","i"),this._erasNameRegex=new RegExp("^("+h.join("|")+")","i"),this._erasAbbrRegex=new RegExp("^("+l.join("|")+")","i"),this._erasNarrowRegex=new RegExp("^("+p.join("|")+")","i")}Z(0,["gg",2],0,function(){return this.weekYear()%100}),Z(0,["GG",2],0,function(){return this.isoWeekYear()%100});function id(l,h){Z(0,[l,l.length],0,h)}id("gggg","weekYear"),id("ggggg","weekYear"),id("GGGG","isoWeekYear"),id("GGGGG","isoWeekYear"),mt("weekYear","gg"),mt("isoWeekYear","GG"),lt("weekYear",1),lt("isoWeekYear",1),X("G",va),X("g",va),X("GG",Re,ze),X("gg",Re,ze),X("GGGG",so,_t),X("gggg",so,_t),X("GGGGG",ya,In),X("ggggg",ya,In),lo(["gggg","ggggg","GGGG","GGGGG"],function(l,h,p,m){h[m.substr(0,2)]=se(l)}),lo(["gg","GG"],function(l,h,p,m){h[m]=r.parseTwoDigitYear(l)});function yM(l){return zI.call(this,l,this.week(),this.weekday(),this.localeData()._week.dow,this.localeData()._week.doy)}function vM(l){return zI.call(this,l,this.isoWeek(),this.isoWeekday(),1,4)}function _M(){return hi(this.year(),1,4)}function wM(){return hi(this.isoWeekYear(),1,4)}function IM(){var l=this.localeData()._week;return hi(this.year(),l.dow,l.doy)}function EM(){var l=this.localeData()._week;return hi(this.weekYear(),l.dow,l.doy)}function zI(l,h,p,m,y){var S;return l==null?fu(this,m,y).year:(S=hi(l,m,y),h>S&&(h=S),SM.call(this,l,h,p,m,y))}function SM(l,h,p,m,y){var S=II(l,h,p,m,y),A=du(S.year,0,S.dayOfYear);return this.year(A.getUTCFullYear()),this.month(A.getUTCMonth()),this.date(A.getUTCDate()),this}Z("Q",0,"Qo","quarter"),mt("quarter","Q"),lt("quarter",7),X("Q",Ki),Be("Q",function(l,h){h[Ut]=(se(l)-1)*3});function TM(l){return l==null?Math.ceil((this.month()+1)/3):this.month((l-1)*3+this.month()%3)}Z("D",["DD",2],"Do","date"),mt("date","D"),lt("date",9),X("D",Re),X("DD",Re,ze),X("Do",function(l,h){return l?h._dayOfMonthOrdinalParse||h._ordinalParse:h._dayOfMonthOrdinalParseLenient}),Be(["D","DD"],ge),Be("Do",function(l,h){h[ge]=se(l.match(Re)[0])});var qI=ar("Date",!0);Z("DDD",["DDDD",3],"DDDo","dayOfYear"),mt("dayOfYear","DDD"),lt("dayOfYear",4),X("DDD",wr),X("DDDD",Gr),Be(["DDD","DDDD"],function(l,h,p){p._dayOfYear=se(l)});function kM(l){var h=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return l==null?h:this.add(l-h,"d")}Z("m",["mm",2],0,"minute"),mt("minute","m"),lt("minute",14),X("m",Re),X("mm",Re,ze),Be(["m","mm"],En);var CM=ar("Minutes",!1);Z("s",["ss",2],0,"second"),mt("second","s"),lt("second",15),X("s",Re),X("ss",Re,ze),Be(["s","ss"],Yn);var NM=ar("Seconds",!1);Z("S",0,0,function(){return~~(this.millisecond()/100)}),Z(0,["SS",2],0,function(){return~~(this.millisecond()/10)}),Z(0,["SSS",3],0,"millisecond"),Z(0,["SSSS",4],0,function(){return this.millisecond()*10}),Z(0,["SSSSS",5],0,function(){return this.millisecond()*100}),Z(0,["SSSSSS",6],0,function(){return this.millisecond()*1e3}),Z(0,["SSSSSSS",7],0,function(){return this.millisecond()*1e4}),Z(0,["SSSSSSSS",8],0,function(){return this.millisecond()*1e5}),Z(0,["SSSSSSSSS",9],0,function(){return this.millisecond()*1e6}),mt("millisecond","ms"),lt("millisecond",16),X("S",wr,Ki),X("SS",wr,ze),X("SSS",wr,Gr);var es,GI;for(es="SSSS";es.length<=9;es+="S")X(es,Qi);function DM(l,h){h[ur]=se(("0."+l)*1e3)}for(es="S";es.length<=9;es+="S")Be(es,DM);GI=ar("Milliseconds",!1),Z("z",0,0,"zoneAbbr"),Z("zz",0,0,"zoneName");function bM(){return this._isUTC?"UTC":""}function xM(){return this._isUTC?"Coordinated Universal Time":""}var V=L.prototype;V.add=EP,V.calendar=bP,V.clone=xP,V.diff=FP,V.endOf=HP,V.format=BP,V.from=WP,V.fromNow=jP,V.to=zP,V.toNow=qP,V.get=Rn,V.invalidAt=nM,V.isAfter=AP,V.isBefore=RP,V.isBetween=OP,V.isSame=PP,V.isSameOrAfter=MP,V.isSameOrBefore=LP,V.isValid=eM,V.lang=VI,V.locale=UI,V.localeData=$I,V.max=eP,V.min=ZO,V.parsingFlags=tM,V.set=lr,V.startOf=GP,V.subtract=SP,V.toArray=XP,V.toObject=JP,V.toDate=QP,V.toISOString=VP,V.inspect=$P,typeof Symbol<"u"&&Symbol.for!=null&&(V[Symbol.for("nodejs.util.inspect.custom")]=function(){return"Moment<"+this.format()+">"}),V.toJSON=ZP,V.toString=UP,V.unix=KP,V.valueOf=YP,V.creationData=rM,V.eraName=aM,V.eraNarrow=lM,V.eraAbbr=uM,V.eraYear=cM,V.year=wI,V.isLeapYear=JR,V.weekYear=yM,V.isoWeekYear=vM,V.quarter=V.quarters=TM,V.month=vI,V.daysInMonth=KR,V.week=V.weeks=iO,V.isoWeek=V.isoWeeks=sO,V.weeksInYear=IM,V.weeksInWeekYear=EM,V.isoWeeksInYear=_M,V.isoWeeksInISOWeekYear=wM,V.date=qI,V.day=V.days=vO,V.weekday=_O,V.isoWeekday=wO,V.dayOfYear=kM,V.hour=V.hours=NO,V.minute=V.minutes=CM,V.second=V.seconds=NM,V.millisecond=V.milliseconds=GI,V.utcOffset=uP,V.utc=hP,V.local=dP,V.parseZone=fP,V.hasAlignedHourOffset=pP,V.isDST=mP,V.isLocal=yP,V.isUtcOffset=vP,V.isUtc=OI,V.isUTC=OI,V.zoneAbbr=bM,V.zoneName=xM,V.dates=ae("dates accessor is deprecated. Use date instead.",qI),V.months=ae("months accessor is deprecated. Use month instead",vI),V.years=ae("years accessor is deprecated. Use year instead",wI),V.zone=ae("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",cP),V.isDSTShifted=ae("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",gP);function AM(l){return nt(l*1e3)}function RM(){return nt.apply(null,arguments).parseZone()}function HI(l){return l}var Ve=W.prototype;Ve.calendar=Q,Ve.longDateFormat=ga,Ve.invalidDate=R,Ve.ordinal=de,Ve.preparse=HI,Ve.postformat=HI,Ve.relativeTime=Xt,Ve.pastFuture=at,Ve.set=he,Ve.eras=iM,Ve.erasParse=sM,Ve.erasConvertYear=oM,Ve.erasAbbrRegex=dM,Ve.erasNameRegex=hM,Ve.erasNarrowRegex=fM,Ve.months=Ji,Ve.monthsShort=Sn,Ve.monthsParse=Kh,Ve.monthsRegex=XR,Ve.monthsShortRegex=QR,Ve.week=eO,Ve.firstDayOfYear=rO,Ve.firstDayOfWeek=nO,Ve.weekdays=fO,Ve.weekdaysMin=mO,Ve.weekdaysShort=pO,Ve.weekdaysParse=yO,Ve.weekdaysRegex=IO,Ve.weekdaysShortRegex=EO,Ve.weekdaysMinRegex=SO,Ve.isPM=kO,Ve.meridiem=DO;function sd(l,h,p,m){var y=di(),S=w().set(m,h);return y[p](S,l)}function YI(l,h,p){if(d(l)&&(h=l,l=void 0),l=l||"",h!=null)return sd(l,h,p,"month");var m,y=[];for(m=0;m<12;m++)y[m]=sd(l,m,p,"month");return y}function cg(l,h,p,m){typeof l=="boolean"?(d(h)&&(p=h,h=void 0),h=h||""):(h=l,p=h,l=!1,d(h)&&(p=h,h=void 0),h=h||"");var y=di(),S=l?y._week.dow:0,A,ue=[];if(p!=null)return sd(h,(p+S)%7,m,"day");for(A=0;A<7;A++)ue[A]=sd(h,(A+S)%7,m,"day");return ue}function OM(l,h){return YI(l,h,"months")}function PM(l,h){return YI(l,h,"monthsShort")}function MM(l,h,p){return cg(l,h,p,"weekdays")}function LM(l,h,p){return cg(l,h,p,"weekdaysShort")}function FM(l,h,p){return cg(l,h,p,"weekdaysMin")}Zi("en",{eras:[{since:"0001-01-01",until:1/0,offset:1,name:"Anno Domini",narrow:"AD",abbr:"AD"},{since:"0000-12-31",until:-1/0,offset:1,name:"Before Christ",narrow:"BC",abbr:"BC"}],dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(l){var h=l%10,p=se(l%100/10)===1?"th":h===1?"st":h===2?"nd":h===3?"rd":"th";return l+p}}),r.lang=ae("moment.lang is deprecated. Use moment.locale instead.",Zi),r.langData=ae("moment.langData is deprecated. Use moment.localeData instead.",di);var fi=Math.abs;function UM(){var l=this._data;return this._milliseconds=fi(this._milliseconds),this._days=fi(this._days),this._months=fi(this._months),l.milliseconds=fi(l.milliseconds),l.seconds=fi(l.seconds),l.minutes=fi(l.minutes),l.hours=fi(l.hours),l.months=fi(l.months),l.years=fi(l.years),this}function KI(l,h,p,m){var y=Ar(h,p);return l._milliseconds+=m*y._milliseconds,l._days+=m*y._days,l._months+=m*y._months,l._bubble()}function VM(l,h){return KI(this,l,h,1)}function $M(l,h){return KI(this,l,h,-1)}function QI(l){return l<0?Math.floor(l):Math.ceil(l)}function BM(){var l=this._milliseconds,h=this._days,p=this._months,m=this._data,y,S,A,ue,Se;return l>=0&&h>=0&&p>=0||l<=0&&h<=0&&p<=0||(l+=QI(hg(p)+h)*864e5,h=0,p=0),m.milliseconds=l%1e3,y=tt(l/1e3),m.seconds=y%60,S=tt(y/60),m.minutes=S%60,A=tt(S/60),m.hours=A%24,h+=tt(A/24),Se=tt(XI(h)),p+=Se,h-=QI(hg(Se)),ue=tt(p/12),p%=12,m.days=h,m.months=p,m.years=ue,this}function XI(l){return l*4800/146097}function hg(l){return l*146097/4800}function WM(l){if(!this.isValid())return NaN;var h,p,m=this._milliseconds;if(l=et(l),l==="month"||l==="quarter"||l==="year")switch(h=this._days+m/864e5,p=this._months+XI(h),l){case"month":return p;case"quarter":return p/3;case"year":return p/12}else switch(h=this._days+Math.round(hg(this._months)),l){case"week":return h/7+m/6048e5;case"day":return h+m/864e5;case"hour":return h*24+m/36e5;case"minute":return h*1440+m/6e4;case"second":return h*86400+m/1e3;case"millisecond":return Math.floor(h*864e5)+m;default:throw new Error("Unknown unit "+l)}}function jM(){return this.isValid()?this._milliseconds+this._days*864e5+this._months%12*2592e6+se(this._months/12)*31536e6:NaN}function pi(l){return function(){return this.as(l)}}var zM=pi("ms"),qM=pi("s"),GM=pi("m"),HM=pi("h"),YM=pi("d"),KM=pi("w"),QM=pi("M"),XM=pi("Q"),JM=pi("y");function ZM(){return Ar(this)}function eL(l){return l=et(l),this.isValid()?this[l+"s"]():NaN}function co(l){return function(){return this.isValid()?this._data[l]:NaN}}var tL=co("milliseconds"),nL=co("seconds"),rL=co("minutes"),iL=co("hours"),sL=co("days"),oL=co("months"),aL=co("years");function lL(){return tt(this.days()/7)}var mi=Math.round,ka={ss:44,s:45,m:45,h:22,d:26,w:null,M:11};function uL(l,h,p,m,y){return y.relativeTime(h||1,!!p,l,m)}function cL(l,h,p,m){var y=Ar(l).abs(),S=mi(y.as("s")),A=mi(y.as("m")),ue=mi(y.as("h")),Se=mi(y.as("d")),qe=mi(y.as("M")),Pn=mi(y.as("w")),gi=mi(y.as("y")),ts=S<=p.ss&&["s",S]||S<p.s&&["ss",S]||A<=1&&["m"]||A<p.m&&["mm",A]||ue<=1&&["h"]||ue<p.h&&["hh",ue]||Se<=1&&["d"]||Se<p.d&&["dd",Se];return p.w!=null&&(ts=ts||Pn<=1&&["w"]||Pn<p.w&&["ww",Pn]),ts=ts||qe<=1&&["M"]||qe<p.M&&["MM",qe]||gi<=1&&["y"]||["yy",gi],ts[2]=h,ts[3]=+l>0,ts[4]=m,uL.apply(null,ts)}function hL(l){return l===void 0?mi:typeof l=="function"?(mi=l,!0):!1}function dL(l,h){return ka[l]===void 0?!1:h===void 0?ka[l]:(ka[l]=h,l==="s"&&(ka.ss=h-1),!0)}function fL(l,h){if(!this.isValid())return this.localeData().invalidDate();var p=!1,m=ka,y,S;return typeof l=="object"&&(h=l,l=!1),typeof l=="boolean"&&(p=l),typeof h=="object"&&(m=Object.assign({},ka,h),h.s!=null&&h.ss==null&&(m.ss=h.s-1)),y=this.localeData(),S=cL(this,!p,m,y),p&&(S=y.pastFuture(+this,S)),y.postformat(S)}var dg=Math.abs;function Ca(l){return(l>0)-(l<0)||+l}function od(){if(!this.isValid())return this.localeData().invalidDate();var l=dg(this._milliseconds)/1e3,h=dg(this._days),p=dg(this._months),m,y,S,A,ue=this.asSeconds(),Se,qe,Pn,gi;return ue?(m=tt(l/60),y=tt(m/60),l%=60,m%=60,S=tt(p/12),p%=12,A=l?l.toFixed(3).replace(/\.?0+$/,""):"",Se=ue<0?"-":"",qe=Ca(this._months)!==Ca(ue)?"-":"",Pn=Ca(this._days)!==Ca(ue)?"-":"",gi=Ca(this._milliseconds)!==Ca(ue)?"-":"",Se+"P"+(S?qe+S+"Y":"")+(p?qe+p+"M":"")+(h?Pn+h+"D":"")+(y||m||l?"T":"")+(y?gi+y+"H":"")+(m?gi+m+"M":"")+(l?gi+A+"S":"")):"P0D"}var Oe=Zh.prototype;Oe.isValid=sP,Oe.abs=UM,Oe.add=VM,Oe.subtract=$M,Oe.as=WM,Oe.asMilliseconds=zM,Oe.asSeconds=qM,Oe.asMinutes=GM,Oe.asHours=HM,Oe.asDays=YM,Oe.asWeeks=KM,Oe.asMonths=QM,Oe.asQuarters=XM,Oe.asYears=JM,Oe.valueOf=jM,Oe._bubble=BM,Oe.clone=ZM,Oe.get=eL,Oe.milliseconds=tL,Oe.seconds=nL,Oe.minutes=rL,Oe.hours=iL,Oe.days=sL,Oe.weeks=lL,Oe.months=oL,Oe.years=aL,Oe.humanize=fL,Oe.toISOString=od,Oe.toString=od,Oe.toJSON=od,Oe.locale=UI,Oe.localeData=$I,Oe.toIsoString=ae("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",od),Oe.lang=VI,Z("X",0,0,"unix"),Z("x",0,0,"valueOf"),X("x",va),X("X",Hm),Be("X",function(l,h,p){p._d=new Date(parseFloat(l)*1e3)}),Be("x",function(l,h,p){p._d=new Date(se(l))});//! moment.js
return r.version="2.29.4",i(nt),r.fn=V,r.min=tP,r.max=nP,r.now=rP,r.utc=w,r.unix=AM,r.months=OM,r.isDate=f,r.locale=Zi,r.invalid=E,r.duration=Ar,r.isMoment=z,r.weekdays=MM,r.parseZone=RM,r.localeData=di,r.isDuration=ed,r.monthsShort=PM,r.weekdaysMin=FM,r.defineLocale=Zm,r.updateLocale=RO,r.locales=OO,r.weekdaysShort=LM,r.normalizeUnits=et,r.relativeTimeRounding=hL,r.relativeTimeThreshold=dL,r.calendarFormat=DP,r.prototype=V,r.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"GGGG-[W]WW",MONTH:"YYYY-MM"},r})}(qU)),Of}(function(t,e){(function(n,r){t.exports=r(GU(),Vt)})(D1,function(n,r){return function(i){var s={};function o(a){if(s[a])return s[a].exports;var u=s[a]={i:a,l:!1,exports:{}};return i[a].call(u.exports,u,u.exports,o),u.l=!0,u.exports}return o.m=i,o.c=s,o.d=function(a,u,c){o.o(a,u)||Object.defineProperty(a,u,{enumerable:!0,get:c})},o.r=function(a){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(a,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(a,"__esModule",{value:!0})},o.t=function(a,u){if(1&u&&(a=o(a)),8&u||4&u&&typeof a=="object"&&a&&a.__esModule)return a;var c=Object.create(null);if(o.r(c),Object.defineProperty(c,"default",{enumerable:!0,value:a}),2&u&&typeof a!="string")for(var d in a)o.d(c,d,function(f){return a[f]}.bind(null,d));return c},o.n=function(a){var u=a&&a.__esModule?function(){return a.default}:function(){return a};return o.d(u,"a",u),u},o.o=function(a,u){return Object.prototype.hasOwnProperty.call(a,u)},o.p="",o(o.s=6)}([function(i,s,o){i.exports=o(3)()},function(i,s){i.exports=n},function(i,s){i.exports=r},function(i,s,o){var a=o(4);function u(){}function c(){}c.resetWarningCache=u,i.exports=function(){function d(v,w,T,C,I,_){if(_!==a){var E=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw E.name="Invariant Violation",E}}function f(){return d}d.isRequired=d;var g={array:d,bool:d,func:d,number:d,object:d,string:d,symbol:d,any:d,arrayOf:f,element:d,elementType:d,instanceOf:f,node:d,objectOf:f,oneOf:f,oneOfType:f,shape:f,exact:f,checkPropTypes:c,resetWarningCache:u};return g.PropTypes=g,g}},function(i,s,o){i.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},function(i,s,o){var a,u,c,d,f;/*! Moment Duration Format v2.2.2
 *  https://github.com/jsmreese/moment-duration-format
 *  Date: 2018-02-16
 *
 *  Duration format plugin function for the Moment.js library
 *  http://momentjs.com/
 *
 *  Copyright 2018 John Madhavan-Reese
 *  Released under the MIT license
 */d=this,f=function(g){var v=!1,w=!1,T=!1,C=!1,I="escape years months weeks days hours minutes seconds milliseconds general".split(" "),_=[{type:"seconds",targets:[{type:"minutes",value:60},{type:"hours",value:3600},{type:"days",value:86400},{type:"weeks",value:604800},{type:"months",value:2678400},{type:"years",value:31536e3}]},{type:"minutes",targets:[{type:"hours",value:60},{type:"days",value:1440},{type:"weeks",value:10080},{type:"months",value:44640},{type:"years",value:525600}]},{type:"hours",targets:[{type:"days",value:24},{type:"weeks",value:168},{type:"months",value:744},{type:"years",value:8760}]},{type:"days",targets:[{type:"weeks",value:7},{type:"months",value:31},{type:"years",value:365}]},{type:"months",targets:[{type:"years",value:12}]}];function E(R,x){return!(x.length>R.length)&&R.indexOf(x)!==-1}function b(R){for(var x="";R;)x+="0",R-=1;return x}function O(R,x){var B=R+"+"+he(_e(x).sort(),function(de){return de+":"+x[de]}).join(",");return O.cache[B]||(O.cache[B]=Intl.NumberFormat(R,x)),O.cache[B]}function P(R,x,B){var de,fe,Xt,at=x.useToLocaleString,or=x.useGrouping,mt=or&&x.grouping.slice(),et=x.maximumSignificantDigits,qr=x.minimumIntegerDigits||1,An=x.fractionDigits||0,lt=x.groupingSeparator,uu=x.decimalSeparator;if(at&&B){var wn,tt={minimumIntegerDigits:qr,useGrouping:or};return An&&(tt.maximumFractionDigits=An,tt.minimumFractionDigits=An),et&&R>0&&(tt.maximumSignificantDigits=et),T?(C||((wn=me({},x)).useGrouping=!1,wn.decimalSeparator=".",R=parseFloat(P(R,wn),10)),O(B,tt).format(R)):(w||((wn=me({},x)).useGrouping=!1,wn.decimalSeparator=".",R=parseFloat(P(R,wn),10)),R.toLocaleString(B,tt))}var se=(et?R.toPrecision(et+1):R.toFixed(An+1)).split("e");Xt=se[1]||"",fe=(se=se[0].split("."))[1]||"";var ar=(de=se[0]||"").length,Hn=fe.length,ro=ar+Hn,Rn=de+fe;(et&&ro===et+1||!et&&Hn===An+1)&&((Rn=function(Gr){for(var _t=Gr.split("").reverse(),In=0,Re=!0;Re&&In<_t.length;)In?_t[In]==="9"?_t[In]="0":(_t[In]=(parseInt(_t[In],10)+1).toString(),Re=!1):(parseInt(_t[In],10)<5&&(Re=!1),_t[In]="0"),In+=1;return Re&&_t.push("1"),_t.reverse().join("")}(Rn)).length===ro+1&&(ar+=1),Hn&&(Rn=Rn.slice(0,-1)),de=Rn.slice(0,ar),fe=Rn.slice(ar)),et&&(fe=fe.replace(/0*$/,""));var lr=parseInt(Xt,10);lr>0?fe.length<=lr?(de+=fe+=b(lr-fe.length),fe=""):(de+=fe.slice(0,lr),fe=fe.slice(lr)):lr<0&&(fe=b(Math.abs(lr)-de.length)+de+fe,de="0"),et||((fe=fe.slice(0,An)).length<An&&(fe+=b(An-fe.length)),de.length<qr&&(de=b(qr-de.length)+de));var Ki,ze="";if(or)for(se=de;se.length;)mt.length&&(Ki=mt.shift()),ze&&(ze=lt+ze),ze=se.slice(-Ki)+ze,se=se.slice(0,-Ki);else ze=de;return fe&&(ze=ze+uu+fe),ze}function L(R,x){return R.label.length>x.label.length?-1:R.label.length<x.label.length?1:0}function z(R,x){var B=[];return K(_e(x),function(de){if(de.slice(0,15)==="_durationLabels"){var fe=de.slice(15).toLowerCase();K(_e(x[de]),function(Xt){Xt.slice(0,1)===R&&B.push({type:fe,key:Xt,label:x[de][Xt]})})}}),B}O.cache={};var Te={durationLabelsStandard:{S:"millisecond",SS:"milliseconds",s:"second",ss:"seconds",m:"minute",mm:"minutes",h:"hour",hh:"hours",d:"day",dd:"days",w:"week",ww:"weeks",M:"month",MM:"months",y:"year",yy:"years"},durationLabelsShort:{S:"msec",SS:"msecs",s:"sec",ss:"secs",m:"min",mm:"mins",h:"hr",hh:"hrs",d:"dy",dd:"dys",w:"wk",ww:"wks",M:"mo",MM:"mos",y:"yr",yy:"yrs"},durationTimeTemplates:{HMS:"h:mm:ss",HM:"h:mm",MS:"m:ss"},durationLabelTypes:[{type:"standard",string:"__"},{type:"short",string:"_"}],durationPluralKey:function(R,x,B){return x===1&&B===null?R:R+R}};function ae(R){return Object.prototype.toString.call(R)==="[object Array]"}function xt(R){return Object.prototype.toString.call(R)==="[object Object]"}function ke(R,x){var B,de=0,fe=R&&R.length||0;for(typeof x!="function"&&(B=x,x=function(Xt){return Xt===B});de<fe;){if(x(R[de]))return R[de];de+=1}}function K(R,x){var B=0,de=R.length;if(R&&de)for(;B<de;){if(x(R[B],B)===!1)return;B+=1}}function he(R,x){var B=0,de=R.length,fe=[];if(!R||!de)return fe;for(;B<de;)fe[B]=x(R[B],B),B+=1;return fe}function q(R,x){return he(R,function(B){return B[x]})}function W(R){var x=[];return K(R,function(B){B&&x.push(B)}),x}function re(R){var x=[];return K(R,function(B){ke(x,B)||x.push(B)}),x}function $(R,x){var B=[];return K(R,function(de){K(x,function(fe){de===fe&&B.push(de)})}),re(B)}function Q(R,x){var B=[];return K(R,function(de,fe){if(!x(de))return B=R.slice(fe),!1}),B}function J(R,x){return Q(R.slice().reverse(),x).reverse()}function me(R,x){for(var B in x)x.hasOwnProperty(B)&&(R[B]=x[B]);return R}function _e(R){var x=[];for(var B in R)R.hasOwnProperty(B)&&x.push(B);return x}function Ze(R,x){var B=0,de=R.length;if(!R||!de)return!1;for(;B<de;){if(x(R[B],B)===!0)return!0;B+=1}return!1}function Le(R){var x=[];return K(R,function(B){x=x.concat(B)}),x}function Z(R){return R(3.55,"en",{useGrouping:!1,minimumIntegerDigits:1,minimumFractionDigits:1,maximumFractionDigits:1})==="3.6"}function ot(R){var x=!0;return!!((x=(x=(x=x&&R(1,"en",{minimumIntegerDigits:1})==="1")&&R(1,"en",{minimumIntegerDigits:2})==="01")&&R(1,"en",{minimumIntegerDigits:3})==="001")&&(x=(x=(x=(x=x&&R(99.99,"en",{maximumFractionDigits:0,minimumFractionDigits:0})==="100")&&R(99.99,"en",{maximumFractionDigits:1,minimumFractionDigits:1})==="100.0")&&R(99.99,"en",{maximumFractionDigits:2,minimumFractionDigits:2})==="99.99")&&R(99.99,"en",{maximumFractionDigits:3,minimumFractionDigits:3})==="99.990")&&(x=(x=(x=(x=(x=x&&R(99.99,"en",{maximumSignificantDigits:1})==="100")&&R(99.99,"en",{maximumSignificantDigits:2})==="100")&&R(99.99,"en",{maximumSignificantDigits:3})==="100")&&R(99.99,"en",{maximumSignificantDigits:4})==="99.99")&&R(99.99,"en",{maximumSignificantDigits:5})==="99.99")&&(x=(x=x&&R(1e3,"en",{useGrouping:!0})==="1,000")&&R(1e3,"en",{useGrouping:!1})==="1000"))}function Ft(){var R,x=[].slice.call(arguments),B={};if(K(x,function(at,or){if(!or){if(!ae(at))throw"Expected array as the first argument to durationsFormat.";R=at}typeof at!="string"&&typeof at!="function"?typeof at!="number"?xt(at)&&me(B,at):B.precision=at:B.template=at}),!R||!R.length)return[];B.returnMomentTypes=!0;var de=he(R,function(at){return at.format(B)}),fe=$(I,re(q(Le(de),"type"))),Xt=B.largest;return Xt&&(fe=fe.slice(0,Xt)),B.returnMomentTypes=!1,B.outputTypes=fe,he(R,function(at){return at.format(B)})}function _n(){var R=[].slice.call(arguments),x=me({},this.format.defaults),B=this.asMilliseconds(),de=this.asMonths();typeof this.isValid=="function"&&this.isValid()===!1&&(B=0,de=0);var fe=B<0,Xt=g.duration(Math.abs(B),"milliseconds"),at=g.duration(Math.abs(de),"months");K(R,function(k){typeof k!="string"&&typeof k!="function"?typeof k!="number"?xt(k)&&me(x,k):x.precision=k:x.template=k});var or={years:"y",months:"M",weeks:"w",days:"d",hours:"h",minutes:"m",seconds:"s",milliseconds:"S"},mt={escape:/\[(.+?)\]/,years:/\*?[Yy]+/,months:/\*?M+/,weeks:/\*?[Ww]+/,days:/\*?[Dd]+/,hours:/\*?[Hh]+/,minutes:/\*?m+/,seconds:/\*?s+/,milliseconds:/\*?S+/,general:/.+?/};x.types=I;var et=function(k){return ke(I,function(we){return mt[we].test(k)})},qr=new RegExp(he(I,function(k){return mt[k].source}).join("|"),"g");x.duration=this;var An=typeof x.template=="function"?x.template.apply(x):x.template,lt=x.outputTypes,uu=x.returnMomentTypes,wn=x.largest,tt=[];lt||(ae(x.stopTrim)&&(x.stopTrim=x.stopTrim.join("")),x.stopTrim&&K(x.stopTrim.match(qr),function(k){var we=et(k);we!=="escape"&&we!=="general"&&tt.push(we)}));var se=g.localeData();se||(se={}),K(_e(Te),function(k){typeof Te[k]!="function"?se["_"+k]||(se["_"+k]=Te[k]):se[k]||(se[k]=Te[k])}),K(_e(se._durationTimeTemplates),function(k){An=An.replace("_"+k+"_",se._durationTimeTemplates[k])});var ar=x.userLocale||g.locale(),Hn=x.useLeftUnits,ro=x.usePlural,Rn=x.precision,lr=x.forceLength,Ki=x.useGrouping,ze=x.trunc,Gr=x.useSignificantDigits&&Rn>0,_t=Gr?x.precision:0,In=_t,Re=x.minValue,ui=!1,io=x.maxValue,wr=!1,so=x.useToLocaleString,ya=x.groupingSeparator,Qi=x.decimalSeparator,va=x.grouping;so=so&&(v||T);var un=x.trim;ae(un)&&(un=un.join(" ")),un===null&&(wn||io||Gr)&&(un="all"),un!==null&&un!==!0&&un!=="left"&&un!=="right"||(un="large"),un===!1&&(un="");var ci=function(k){return k.test(un)},Hm=/large/,oo=/small/,ao=/both/,X=/mid/,_a=/^all|[^sm]all/,Ym=/final/,On=wn>0||Ze([Hm,ao,_a],ci),cu=Ze([oo,ao,_a],ci),Be=Ze([X,_a],ci),lo=Ze([Ym,_a],ci),Gh=he(An.match(qr),function(k,we){var Ie=et(k);return k.slice(0,1)==="*"&&(k=k.slice(1),Ie!=="escape"&&Ie!=="general"&&tt.push(Ie)),{index:we,length:k.length,text:"",token:Ie==="escape"?k.replace(mt.escape,"$1"):k,type:Ie==="escape"||Ie==="general"?null:Ie}}),Ye={index:0,length:0,token:"",text:"",type:null},Ut=[];Hn&&Gh.reverse(),K(Gh,function(k){if(k.type)return(Ye.type||Ye.text)&&Ut.push(Ye),void(Ye=k);Hn?Ye.text=k.token+Ye.text:Ye.text+=k.token}),(Ye.type||Ye.text)&&Ut.push(Ye),Hn&&Ut.reverse();var ge=$(I,re(W(q(Ut,"type"))));if(!ge.length)return q(Ut,"text").join("");ge=he(ge,function(k,we){var Ie,ut=we+1===ge.length,Xi=!we;Ie=k==="years"||k==="months"?at.as(k):Xt.as(k);var Hr=Math.floor(Ie),wa=Ie-Hr,Ji=ke(Ut,function(Sn){return k===Sn.type});return Xi&&io&&Ie>io&&(wr=!0),ut&&Re&&Math.abs(x.duration.as(k))<Re&&(ui=!0),Xi&&lr===null&&Ji.length>1&&(lr=!0),Xt.subtract(Hr,k),at.subtract(Hr,k),{rawValue:Ie,wholeValue:Hr,decimalValue:ut?wa:0,isSmallest:ut,isLargest:Xi,type:k,tokenLength:Ji.length}});var wt=ze?Math.floor:Math.round,En=function(k,we){var Ie=Math.pow(10,we);return wt(k*Ie)/Ie},Yn=!1,ur=!1,Hh=function(k,we){var Ie={useGrouping:Ki,groupingSeparator:ya,decimalSeparator:Qi,grouping:va,useToLocaleString:so};return Gr&&(_t<=0?(k.rawValue=0,k.wholeValue=0,k.decimalValue=0):(Ie.maximumSignificantDigits=_t,k.significantDigits=_t)),wr&&!ur&&(k.isLargest?(k.wholeValue=io,k.decimalValue=0):(k.wholeValue=0,k.decimalValue=0)),ui&&!ur&&(k.isSmallest?(k.wholeValue=Re,k.decimalValue=0):(k.wholeValue=0,k.decimalValue=0)),k.isSmallest||k.significantDigits&&k.significantDigits-k.wholeValue.toString().length<=0?Rn<0?k.value=En(k.wholeValue,Rn):Rn===0?k.value=wt(k.wholeValue+k.decimalValue):Gr?(k.value=ze?En(k.rawValue,_t-k.wholeValue.toString().length):k.rawValue,k.wholeValue&&(_t-=k.wholeValue.toString().length)):(Ie.fractionDigits=Rn,k.value=ze?k.wholeValue+En(k.decimalValue,Rn):k.wholeValue+k.decimalValue):Gr&&k.wholeValue?(k.value=Math.round(En(k.wholeValue,k.significantDigits-k.wholeValue.toString().length)),_t-=k.wholeValue.toString().length):k.value=k.wholeValue,k.tokenLength>1&&(lr||Yn)&&(Ie.minimumIntegerDigits=k.tokenLength,ur&&Ie.maximumSignificantDigits<k.tokenLength&&delete Ie.maximumSignificantDigits),!Yn&&(k.value>0||un===""||ke(tt,k.type)||ke(lt,k.type))&&(Yn=!0),k.formattedValue=P(k.value,Ie,ar),Ie.useGrouping=!1,Ie.decimalSeparator=".",k.formattedValueEn=P(k.value,Ie,"en"),k.tokenLength===2&&k.type==="milliseconds"&&(k.formattedValueMS=P(k.value,{minimumIntegerDigits:3,useGrouping:!1},"en").slice(0,2)),k};if((ge=W(ge=he(ge,Hh))).length>1){var Yh=function(k){return ke(ge,function(we){return we.type===k})},Km=function(k){var we=Yh(k.type);we&&K(k.targets,function(Ie){var ut=Yh(Ie.type);ut&&parseInt(we.formattedValueEn,10)===Ie.value&&(we.rawValue=0,we.wholeValue=0,we.decimalValue=0,ut.rawValue+=1,ut.wholeValue+=1,ut.decimalValue=0,ut.formattedValueEn=ut.wholeValue.toString(),ur=!0)})};K(_,Km)}return ur&&(Yn=!1,_t=In,ge=W(ge=he(ge,Hh))),!lt||wr&&!x.trim?(On&&(ge=Q(ge,function(k){return!k.isSmallest&&!k.wholeValue&&!ke(tt,k.type)})),wn&&ge.length&&(ge=ge.slice(0,wn)),cu&&ge.length>1&&(ge=J(ge,function(k){return!k.wholeValue&&!ke(tt,k.type)&&!k.isLargest})),Be&&(ge=W(ge=he(ge,function(k,we){return we>0&&we<ge.length-1&&!k.wholeValue?null:k}))),!lo||ge.length!==1||ge[0].wholeValue||!ze&&ge[0].isSmallest&&ge[0].rawValue<Re||(ge=[])):ge=W(ge=he(ge,function(k){return ke(lt,function(we){return k.type===we})?k:null})),uu?ge:(K(Ut,function(k){var we=or[k.type],Ie=ke(ge,function(Sn){return Sn.type===k.type});if(we&&Ie){var ut=Ie.formattedValueEn.split(".");ut[0]=parseInt(ut[0],10),ut[1]?ut[1]=parseFloat("0."+ut[1],10):ut[1]=null;var Xi=se.durationPluralKey(we,ut[0],ut[1]),Hr=z(we,se),wa=!1,Ji={};K(se._durationLabelTypes,function(Sn){var Ia=ke(Hr,function(Kh){return Kh.type===Sn.type&&Kh.key===Xi});Ia&&(Ji[Ia.type]=Ia.label,E(k.text,Sn.string)&&(k.text=k.text.replace(Sn.string,Ia.label),wa=!0))}),ro&&!wa&&(Hr.sort(L),K(Hr,function(Sn){return Ji[Sn.type]===Sn.label?!E(k.text,Sn.label)&&void 0:E(k.text,Sn.label)?(k.text=k.text.replace(Sn.label,Ji[Sn.type]),!1):void 0}))}}),(Ut=he(Ut,function(k){if(!k.type)return k.text;var we=ke(ge,function(ut){return ut.type===k.type});if(!we)return"";var Ie="";return Hn&&(Ie+=k.text),(fe&&wr||!fe&&ui)&&(Ie+="< ",wr=!1,ui=!1),(fe&&ui||!fe&&wr)&&(Ie+="> ",wr=!1,ui=!1),fe&&(we.value>0||un===""||ke(tt,we.type)||ke(lt,we.type))&&(Ie+="-",fe=!1),k.type==="milliseconds"&&we.formattedValueMS?Ie+=we.formattedValueMS:Ie+=we.formattedValue,Hn||(Ie+=k.text),Ie})).join("").replace(/(,| |:|\.)*$/,"").replace(/^(,| |:|\.)*/,""))}function _r(){var R=this.duration,x=function(fe){return R._data[fe]},B=ke(this.types,x),de=function(fe,Xt){for(var at=fe.length;at-=1;)if(Xt(fe[at]))return fe[at]}(this.types,x);switch(B){case"milliseconds":return"S __";case"seconds":case"minutes":return"*_MS_";case"hours":return"_HMS_";case"days":if(B===de)return"d __";case"weeks":return B===de?"w __":(this.trim===null&&(this.trim="both"),"w __, d __, h __");case"months":if(B===de)return"M __";case"years":return B===de?"y __":(this.trim===null&&(this.trim="both"),"y __, M __, d __");default:return this.trim===null&&(this.trim="both"),"y __, d __, h __, m __, s __"}}function ma(R){if(!R)throw"Moment Duration Format init cannot find moment instance.";R.duration.format=Ft,R.duration.fn.format=_n,R.duration.fn.format.defaults={trim:null,stopTrim:null,largest:null,maxValue:null,minValue:null,precision:0,trunc:!1,forceLength:null,userLocale:null,usePlural:!0,useLeftUnits:!1,useGrouping:!0,useSignificantDigits:!1,template:_r,useToLocaleString:!0,groupingSeparator:",",decimalSeparator:".",grouping:[3]},R.updateLocale("en",Te)}var ga=function(R,x,B){return R.toLocaleString(x,B)};v=function(){try{0 .toLocaleString("i")}catch(R){return R.name==="RangeError"}return!1}()&&ot(ga),w=v&&Z(ga);var zr=function(R,x,B){if(typeof window<"u"&&window&&window.Intl&&window.Intl.NumberFormat)return window.Intl.NumberFormat(x,B).format(R)};return T=ot(zr),C=T&&Z(zr),ma(g),ma},u=[o(1)],(c=typeof(a=f)=="function"?a.apply(s,u):a)===void 0||(i.exports=c),d&&(d.momentDurationFormatSetup=d.moment?f(d.moment):f)},function(i,s,o){o.r(s),o.d(s,"default",function(){return ke});var a=o(2),u=o.n(a),c=o(0),d=o.n(c),f=o(1),g=o.n(f);o(5);function v(K){return(v=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(he){return typeof he}:function(he){return he&&typeof Symbol=="function"&&he.constructor===Symbol&&he!==Symbol.prototype?"symbol":typeof he})(K)}function w(K,he){var q=Object.keys(K);if(Object.getOwnPropertySymbols){var W=Object.getOwnPropertySymbols(K);he&&(W=W.filter(function(re){return Object.getOwnPropertyDescriptor(K,re).enumerable})),q.push.apply(q,W)}return q}function T(K,he){if(K==null)return{};var q,W,re=function(Q,J){if(Q==null)return{};var me,_e,Ze={},Le=Object.keys(Q);for(_e=0;_e<Le.length;_e++)me=Le[_e],J.indexOf(me)>=0||(Ze[me]=Q[me]);return Ze}(K,he);if(Object.getOwnPropertySymbols){var $=Object.getOwnPropertySymbols(K);for(W=0;W<$.length;W++)q=$[W],he.indexOf(q)>=0||Object.prototype.propertyIsEnumerable.call(K,q)&&(re[q]=K[q])}return re}function C(K,he){for(var q=0;q<he.length;q++){var W=he[q];W.enumerable=W.enumerable||!1,W.configurable=!0,"value"in W&&(W.writable=!0),Object.defineProperty(K,W.key,W)}}function I(K,he,q){return he&&C(K.prototype,he),q&&C(K,q),K}function _(K,he){return(_=Object.setPrototypeOf||function(q,W){return q.__proto__=W,q})(K,he)}function E(K){var he=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}();return function(){var q,W=P(K);if(he){var re=P(this).constructor;q=Reflect.construct(W,arguments,re)}else q=W.apply(this,arguments);return b(this,q)}}function b(K,he){return!he||v(he)!=="object"&&typeof he!="function"?O(K):he}function O(K){if(K===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return K}function P(K){return(P=Object.setPrototypeOf?Object.getPrototypeOf:function(he){return he.__proto__||Object.getPrototypeOf(he)})(K)}function L(K,he,q){return he in K?Object.defineProperty(K,he,{value:q,enumerable:!0,configurable:!0,writable:!0}):K[he]=q,K}var z=[d.a.string,d.a.number,d.a.array,d.a.object],Te=[d.a.string,d.a.array],ae=[d.a.object,d.a.bool],xt=[d.a.string,d.a.bool],ke=function(K){(function(W,re){if(typeof re!="function"&&re!==null)throw new TypeError("Super expression must either be null or a function");W.prototype=Object.create(re&&re.prototype,{constructor:{value:W,writable:!0,configurable:!0}}),re&&_(W,re)})(q,K);var he=E(q);function q(W){var re;return function($,Q){if(!($ instanceof Q))throw new TypeError("Cannot call a class as a function")}(this,q),L(O(re=he.call(this,W)),"setTimer",function(){var $=re.props.interval;re.clearTimer(),q.pooledTimer||$===0||(re.timer=setInterval(function(){re.update(re.props)},$))}),L(O(re),"getTitle",function(){var $=re.props.titleFormat,Q=q.getDatetime(re.props),J=$||q.globalFormat;return Q.format(J)}),L(O(re),"clearTimer",function(){!q.pooledTimer&&re.timer&&(clearInterval(re.timer),re.timer=null),q.pooledTimer&&!re.timer&&q.removePooledElement(O(re))}),q.globalMoment||(q.globalMoment=g.a),re.state={content:""},re.timer=null,re}return I(q,null,[{key:"startPooledTimer",value:function(){var W=arguments.length>0&&arguments[0]!==void 0?arguments[0]:6e4;q.clearPooledTimer(),q.pooledTimer=setInterval(function(){q.pooledElements.forEach(function(re){re.props.interval!==0&&re.update()})},W)}},{key:"clearPooledTimer",value:function(){q.pooledTimer&&(clearInterval(q.pooledTimer),q.pooledTimer=null,q.pooledElements=[])}},{key:"pushPooledElement",value:function(W){W instanceof q?q.pooledElements.indexOf(W)===-1&&q.pooledElements.push(W):console.error("Element not an instance of Moment.")}},{key:"removePooledElement",value:function(W){var re=q.pooledElements.indexOf(W);re!==-1&&q.pooledElements.splice(re,1)}},{key:"getDatetime",value:function(W){var re=W.utc,$=W.unix,Q=W.date,J=W.locale,me=W.parse,_e=W.tz,Ze=W.local;Q=Q||W.children,me=me||q.globalParse,Ze=Ze||q.globalLocal,_e=_e||q.globalTimezone,J=q.globalLocale?q.globalLocale:J||q.globalMoment.locale();var Le=null;return Le=re?q.globalMoment.utc(Q,me,J):$?q.globalMoment(1e3*Q,me,J):q.globalMoment(Q,me,J),_e?Le=Le.tz(_e):Ze&&(Le=Le.local()),Le}},{key:"getContent",value:function(W){var re=W.fromNow,$=W.fromNowDuring,Q=W.from,J=W.add,me=W.subtract,_e=W.toNow,Ze=W.to,Le=W.ago,Z=W.calendar,ot=W.diff,Ft=W.duration,_n=W.durationFromNow,_r=W.unit,ma=W.decimal,ga=W.trim,zr=W.format;zr=zr||q.globalFormat;var R=q.getDatetime(W);J&&R.add(J),me&&R.subtract(me);var x=Boolean($)&&-R.diff(g()())<$,B="";return B=!zr||x||_n||Ft?Q?R.from(Q,Le):re||x?R.fromNow(Le):Ze?R.to(Ze,Le):_e?R.toNow(Le):Z?R.calendar(null,Z):ot?R.diff(ot,_r,ma):Ft?R.diff(Ft):_n?g()().diff(R):R.toString():R.format(zr),(Ft||_n)&&(B=(B=g.a.duration(B)).format(zr,{trim:ga})),B=(q.globalFilter||W.filter)(B)}}]),I(q,[{key:"componentDidMount",value:function(){this.setTimer(),q.pooledTimer&&q.pushPooledElement(this)}},{key:"componentDidUpdate",value:function(W){var re=this.props.interval;W.interval!==re&&this.setTimer()}},{key:"componentWillUnmount",value:function(){this.clearTimer()}},{key:"update",value:function(W){var re=W||this.props,$=re.onChange,Q=q.getContent(re);this.setState({content:Q},function(){$(Q)})}},{key:"render",value:function(){var W,re,$,Q,J=this.props,me=J.withTitle,_e=J.element,Ze=T(J,["withTitle","element"]),Le=this.state.content,Z=(W=Ze,re=q.propTypes,$=Object.keys(re),Q=Object.assign({},W),Object.keys(Q).filter(function(ot){return $.indexOf(ot)!==-1}).forEach(function(ot){return delete Q[ot]}),Q);return me&&(Z.title=this.getTitle()),u.a.createElement(_e||q.globalElement,function(ot){for(var Ft=1;Ft<arguments.length;Ft++){var _n=arguments[Ft]!=null?arguments[Ft]:{};Ft%2?w(Object(_n),!0).forEach(function(_r){L(ot,_r,_n[_r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(ot,Object.getOwnPropertyDescriptors(_n)):w(Object(_n)).forEach(function(_r){Object.defineProperty(ot,_r,Object.getOwnPropertyDescriptor(_n,_r))})}return ot}({dateTime:q.getDatetime(this.props)},Z),Le)}}],[{key:"getDerivedStateFromProps",value:function(W){return{content:q.getContent(W)}}}]),q}(u.a.Component);L(ke,"propTypes",{element:d.a.any,date:d.a.oneOfType(z),parse:d.a.oneOfType(Te),format:d.a.string,add:d.a.object,subtract:d.a.object,ago:d.a.bool,fromNow:d.a.bool,fromNowDuring:d.a.number,from:d.a.oneOfType(z),toNow:d.a.bool,to:d.a.oneOfType(z),calendar:d.a.oneOfType(ae),unix:d.a.bool,utc:d.a.bool,local:d.a.bool,tz:d.a.string,withTitle:d.a.bool,titleFormat:d.a.string,locale:d.a.string,interval:d.a.number,diff:d.a.oneOfType(z),duration:d.a.oneOfType(z),durationFromNow:d.a.bool,trim:d.a.oneOfType(xt),unit:d.a.string,decimal:d.a.bool,filter:d.a.func,onChange:d.a.func}),L(ke,"defaultProps",{element:null,fromNow:!1,toNow:!1,calendar:!1,ago:!1,unix:!1,utc:!1,local:!1,unit:null,withTitle:!1,trim:!1,decimal:!1,titleFormat:"",interval:6e4,filter:function(K){return K},onChange:function(){}}),L(ke,"globalMoment",null),L(ke,"globalLocale",null),L(ke,"globalLocal",null),L(ke,"globalFormat",null),L(ke,"globalParse",null),L(ke,"globalFilter",null),L(ke,"globalElement","time"),L(ke,"globalTimezone",null),L(ke,"pooledElements",[]),L(ke,"pooledTimer",null)}])})})(jU);const HU=b1(lv);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $C={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j=function(t,e){if(!t)throw $l(e)},$l=function(t){return new Error("Firebase Database ("+$C.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BC=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},YU=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[n++],o=t[n++],a=t[n++],u=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{const s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},tw={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],o=i+1<t.length,a=o?t[i+1]:0,u=i+2<t.length,c=u?t[i+2]:0,d=s>>2,f=(s&3)<<4|a>>4;let g=(a&15)<<2|c>>6,v=c&63;u||(v=64,o||(g=64)),r.push(n[d],n[f],n[g],n[v])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(BC(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):YU(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;const c=i<t.length?n[t.charAt(i)]:64;++i;const f=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||a==null||c==null||f==null)throw Error();const g=s<<2|a>>4;if(r.push(g),c!==64){const v=a<<4&240|c>>2;if(r.push(v),f!==64){const w=c<<6&192|f;r.push(w)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},WC=function(t){const e=BC(t);return tw.encodeByteArray(e,!0)},Pf=function(t){return WC(t).replace(/\./g,"")},Mf=function(t){try{return tw.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KU(t){return jC(void 0,t)}function jC(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(const n in e)!e.hasOwnProperty(n)||!QU(n)||(t[n]=jC(t[n],e[n]));return t}function QU(t){return t!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XU(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JU=()=>XU().__FIREBASE_DEFAULTS__,ZU=()=>{if(typeof process>"u"||typeof process.env>"u")return;const t={}.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},e2=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&Mf(t[1]);return e&&JSON.parse(e)},Vp=()=>{try{return JU()||ZU()||e2()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},zC=t=>{var e,n;return(n=(e=Vp())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},qC=t=>{const e=zC(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},t2=()=>{var t;return(t=Vp())===null||t===void 0?void 0:t.config},GC=t=>{var e;return(e=Vp())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dh{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HC(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t),a="";return[Pf(JSON.stringify(n)),Pf(JSON.stringify(o)),a].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ht(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function nw(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ht())}function n2(){var t;const e=(t=Vp())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function r2(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function YC(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function i2(){const t=Ht();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function KC(){return $C.NODE_ADMIN===!0}function s2(){return!n2()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function QC(){try{return typeof indexedDB=="object"}catch{return!1}}function o2(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a2="FirebaseError";class Bi extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=a2,Object.setPrototypeOf(this,Bi.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,fh.prototype.create)}}class fh{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?l2(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new Bi(i,a,r)}}function l2(t,e){return t.replace(u2,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const u2=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rc(t){return JSON.parse(t)}function jt(t){return JSON.stringify(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XC=function(t){let e={},n={},r={},i="";try{const s=t.split(".");e=Rc(Mf(s[0])||""),n=Rc(Mf(s[1])||""),i=s[2],r=n.d||{},delete n.d}catch{}return{header:e,claims:n,data:r,signature:i}},c2=function(t){const e=XC(t),n=e.claims;return!!n&&typeof n=="object"&&n.hasOwnProperty("iat")},h2=function(t){const e=XC(t).claims;return typeof e=="object"&&e.admin===!0};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ai(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function gl(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]}function uv(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Lf(t,e,n){const r={};for(const i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=e.call(n,t[i],i,t));return r}function yl(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],o=e[i];if(lS(s)&&lS(o)){if(!yl(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function lS(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oa(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function $u(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,s]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(s)}}),e}function Bu(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d2{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,n){n||(n=0);const r=this.W_;if(typeof e=="string")for(let f=0;f<16;f++)r[f]=e.charCodeAt(n)<<24|e.charCodeAt(n+1)<<16|e.charCodeAt(n+2)<<8|e.charCodeAt(n+3),n+=4;else for(let f=0;f<16;f++)r[f]=e[n]<<24|e[n+1]<<16|e[n+2]<<8|e[n+3],n+=4;for(let f=16;f<80;f++){const g=r[f-3]^r[f-8]^r[f-14]^r[f-16];r[f]=(g<<1|g>>>31)&4294967295}let i=this.chain_[0],s=this.chain_[1],o=this.chain_[2],a=this.chain_[3],u=this.chain_[4],c,d;for(let f=0;f<80;f++){f<40?f<20?(c=a^s&(o^a),d=1518500249):(c=s^o^a,d=1859775393):f<60?(c=s&o|a&(s|o),d=2400959708):(c=s^o^a,d=3395469782);const g=(i<<5|i>>>27)+c+u+d+r[f]&4294967295;u=a,a=o,o=(s<<30|s>>>2)&4294967295,s=i,i=g}this.chain_[0]=this.chain_[0]+i&4294967295,this.chain_[1]=this.chain_[1]+s&4294967295,this.chain_[2]=this.chain_[2]+o&4294967295,this.chain_[3]=this.chain_[3]+a&4294967295,this.chain_[4]=this.chain_[4]+u&4294967295}update(e,n){if(e==null)return;n===void 0&&(n=e.length);const r=n-this.blockSize;let i=0;const s=this.buf_;let o=this.inbuf_;for(;i<n;){if(o===0)for(;i<=r;)this.compress_(e,i),i+=this.blockSize;if(typeof e=="string"){for(;i<n;)if(s[o]=e.charCodeAt(i),++o,++i,o===this.blockSize){this.compress_(s),o=0;break}}else for(;i<n;)if(s[o]=e[i],++o,++i,o===this.blockSize){this.compress_(s),o=0;break}}this.inbuf_=o,this.total_+=n}digest(){const e=[];let n=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let i=this.blockSize-1;i>=56;i--)this.buf_[i]=n&255,n/=256;this.compress_(this.buf_);let r=0;for(let i=0;i<5;i++)for(let s=24;s>=0;s-=8)e[r]=this.chain_[i]>>s&255,++r;return e}}function f2(t,e){const n=new p2(t,e);return n.subscribe.bind(n)}class p2{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");m2(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=Vg),i.error===void 0&&(i.error=Vg),i.complete===void 0&&(i.complete=Vg);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function m2(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Vg(){}function $p(t,e){return`${t} failed: ${e} argument `}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g2=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);if(i>=55296&&i<=56319){const s=i-55296;r++,j(r<t.length,"Surrogate pair missing trail surrogate.");const o=t.charCodeAt(r)-56320;i=65536+(s<<10)+o}i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):i<65536?(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},Bp=function(t){let e=0;for(let n=0;n<t.length;n++){const r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,n++):e+=3}return e};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function te(t){return t&&t._delegate?t._delegate:t}class Ps{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mo="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y2{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new dh;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(_2(e))try{this.getOrInitializeService({instanceIdentifier:mo})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=mo){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=mo){return this.instances.has(e)}getOptions(e=mo){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:v2(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=mo){return this.component?this.component.multipleInstances?e:mo:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function v2(t){return t===mo?void 0:t}function _2(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w2{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new y2(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Fe;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Fe||(Fe={}));const I2={debug:Fe.DEBUG,verbose:Fe.VERBOSE,info:Fe.INFO,warn:Fe.WARN,error:Fe.ERROR,silent:Fe.SILENT},E2=Fe.INFO,S2={[Fe.DEBUG]:"log",[Fe.VERBOSE]:"log",[Fe.INFO]:"info",[Fe.WARN]:"warn",[Fe.ERROR]:"error"},T2=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=S2[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Wp{constructor(e){this.name=e,this._logLevel=E2,this._logHandler=T2,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Fe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?I2[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Fe.DEBUG,...e),this._logHandler(this,Fe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Fe.VERBOSE,...e),this._logHandler(this,Fe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Fe.INFO,...e),this._logHandler(this,Fe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Fe.WARN,...e),this._logHandler(this,Fe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Fe.ERROR,...e),this._logHandler(this,Fe.ERROR,...e)}}const k2=(t,e)=>e.some(n=>t instanceof n);let uS,cS;function C2(){return uS||(uS=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function N2(){return cS||(cS=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const JC=new WeakMap,cv=new WeakMap,ZC=new WeakMap,$g=new WeakMap,rw=new WeakMap;function D2(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(Cs(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&JC.set(n,t)}).catch(()=>{}),rw.set(e,t),e}function b2(t){if(cv.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});cv.set(t,e)}let hv={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return cv.get(t);if(e==="objectStoreNames")return t.objectStoreNames||ZC.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Cs(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function x2(t){hv=t(hv)}function A2(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Bg(this),e,...n);return ZC.set(r,e.sort?e.sort():[e]),Cs(r)}:N2().includes(t)?function(...e){return t.apply(Bg(this),e),Cs(JC.get(this))}:function(...e){return Cs(t.apply(Bg(this),e))}}function R2(t){return typeof t=="function"?A2(t):(t instanceof IDBTransaction&&b2(t),k2(t,C2())?new Proxy(t,hv):t)}function Cs(t){if(t instanceof IDBRequest)return D2(t);if($g.has(t))return $g.get(t);const e=R2(t);return e!==t&&($g.set(t,e),rw.set(e,t)),e}const Bg=t=>rw.get(t);function O2(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(t,e),a=Cs(o);return r&&o.addEventListener("upgradeneeded",u=>{r(Cs(o.result),u.oldVersion,u.newVersion,Cs(o.transaction))}),n&&o.addEventListener("blocked",()=>n()),a.then(u=>{s&&u.addEventListener("close",()=>s()),i&&u.addEventListener("versionchange",()=>i())}).catch(()=>{}),a}const P2=["get","getKey","getAll","getAllKeys","count"],M2=["put","add","delete","clear"],Wg=new Map;function hS(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Wg.get(e))return Wg.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=M2.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||P2.includes(n)))return;const s=async function(o,...a){const u=this.transaction(o,i?"readwrite":"readonly");let c=u.store;return r&&(c=c.index(a.shift())),(await Promise.all([c[n](...a),i&&u.done]))[0]};return Wg.set(e,s),s}x2(t=>({...t,get:(e,n,r)=>hS(e,n)||t.get(e,n,r),has:(e,n)=>!!hS(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L2{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(F2(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function F2(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const dv="@firebase/app",dS="0.9.3";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bo=new Wp("@firebase/app"),U2="@firebase/app-compat",V2="@firebase/analytics-compat",$2="@firebase/analytics",B2="@firebase/app-check-compat",W2="@firebase/app-check",j2="@firebase/auth",z2="@firebase/auth-compat",q2="@firebase/database",G2="@firebase/database-compat",H2="@firebase/functions",Y2="@firebase/functions-compat",K2="@firebase/installations",Q2="@firebase/installations-compat",X2="@firebase/messaging",J2="@firebase/messaging-compat",Z2="@firebase/performance",eV="@firebase/performance-compat",tV="@firebase/remote-config",nV="@firebase/remote-config-compat",rV="@firebase/storage",iV="@firebase/storage-compat",sV="@firebase/firestore",oV="@firebase/firestore-compat",aV="firebase",lV="9.17.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ff="[DEFAULT]",uV={[dv]:"fire-core",[U2]:"fire-core-compat",[$2]:"fire-analytics",[V2]:"fire-analytics-compat",[W2]:"fire-app-check",[B2]:"fire-app-check-compat",[j2]:"fire-auth",[z2]:"fire-auth-compat",[q2]:"fire-rtdb",[G2]:"fire-rtdb-compat",[H2]:"fire-fn",[Y2]:"fire-fn-compat",[K2]:"fire-iid",[Q2]:"fire-iid-compat",[X2]:"fire-fcm",[J2]:"fire-fcm-compat",[Z2]:"fire-perf",[eV]:"fire-perf-compat",[tV]:"fire-rc",[nV]:"fire-rc-compat",[rV]:"fire-gcs",[iV]:"fire-gcs-compat",[sV]:"fire-fst",[oV]:"fire-fst-compat","fire-js":"fire-js",[aV]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uf=new Map,fv=new Map;function cV(t,e){try{t.container.addComponent(e)}catch(n){Bo.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Wo(t){const e=t.name;if(fv.has(e))return Bo.debug(`There were multiple attempts to register component ${e}.`),!1;fv.set(e,t);for(const n of Uf.values())cV(n,t);return!0}function Bl(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function hV(t,e,n=Ff){Bl(t,e).clearInstance(n)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dV={["no-app"]:"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",["bad-app-name"]:"Illegal App name: '{$appName}",["duplicate-app"]:"Firebase App named '{$appName}' already exists with different options or config",["app-deleted"]:"Firebase App named '{$appName}' already deleted",["no-options"]:"Need to provide options, when not being deployed to hosting via source.",["invalid-app-argument"]:"firebase.{$appName}() takes either no argument or a Firebase App instance.",["invalid-log-argument"]:"First argument to `onLog` must be null or a function.",["idb-open"]:"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.",["idb-get"]:"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.",["idb-set"]:"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.",["idb-delete"]:"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."},Ns=new fh("app","Firebase",dV);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fV{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Ps("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ns.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wl=lV;function eN(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:Ff,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw Ns.create("bad-app-name",{appName:String(i)});if(n||(n=t2()),!n)throw Ns.create("no-options");const s=Uf.get(i);if(s){if(yl(n,s.options)&&yl(r,s.config))return s;throw Ns.create("duplicate-app",{appName:i})}const o=new w2(i);for(const u of fv.values())o.addComponent(u);const a=new fV(n,r,o);return Uf.set(i,a),a}function iw(t=Ff){const e=Uf.get(t);if(!e&&t===Ff)return eN();if(!e)throw Ns.create("no-app",{appName:t});return e}function ri(t,e,n){var r;let i=(r=uV[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const a=[`Unable to register library "${i}" with version "${e}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Bo.warn(a.join(" "));return}Wo(new Ps(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pV="firebase-heartbeat-database",mV=1,Oc="firebase-heartbeat-store";let jg=null;function tN(){return jg||(jg=O2(pV,mV,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(Oc)}}}).catch(t=>{throw Ns.create("idb-open",{originalErrorMessage:t.message})})),jg}async function gV(t){try{return(await tN()).transaction(Oc).objectStore(Oc).get(nN(t))}catch(e){if(e instanceof Bi)Bo.warn(e.message);else{const n=Ns.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Bo.warn(n.message)}}}async function fS(t,e){try{const r=(await tN()).transaction(Oc,"readwrite");return await r.objectStore(Oc).put(e,nN(t)),r.done}catch(n){if(n instanceof Bi)Bo.warn(n.message);else{const r=Ns.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Bo.warn(r.message)}}}function nN(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yV=1024,vV=30*24*60*60*1e3;class _V{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new IV(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=pS();if(this._heartbeatsCache===null&&(this._heartbeatsCache=await this._heartbeatsCachePromise),!(this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(i=>i.date===r)))return this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(i=>{const s=new Date(i.date).valueOf();return Date.now()-s<=vV}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache===null||this._heartbeatsCache.heartbeats.length===0)return"";const e=pS(),{heartbeatsToSend:n,unsentEntries:r}=wV(this._heartbeatsCache.heartbeats),i=Pf(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}}function pS(){return new Date().toISOString().substring(0,10)}function wV(t,e=yV){const n=[];let r=t.slice();for(const i of t){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),mS(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),mS(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class IV{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return QC()?o2().then(()=>!0).catch(()=>!1):!1}async read(){return await this._canUseIndexedDBPromise?await gV(this.app)||{heartbeats:[]}:{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return fS(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return fS(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function mS(t){return Pf(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EV(t){Wo(new Ps("platform-logger",e=>new L2(e),"PRIVATE")),Wo(new Ps("heartbeat",e=>new _V(e),"PRIVATE")),ri(dv,dS,t),ri(dv,dS,"esm2017"),ri("fire-js","")}EV("");var SV="firebase",TV="9.17.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ri(SV,TV,"app");function sw(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kV={PHONE:"phone"},CV={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},NV={EMAIL_LINK:"emailLink",EMAIL_PASSWORD:"password",FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PHONE:"phone",TWITTER:"twitter.com"},DV={LINK:"link",REAUTHENTICATE:"reauthenticate",SIGN_IN:"signIn"},bV={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xV(){return{["admin-restricted-operation"]:"This operation is restricted to administrators only.",["argument-error"]:"",["app-not-authorized"]:"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.",["app-not-installed"]:"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.",["captcha-check-failed"]:"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.",["code-expired"]:"The SMS code has expired. Please re-send the verification code to try again.",["cordova-not-ready"]:"Cordova framework is not ready.",["cors-unsupported"]:"This browser is not supported.",["credential-already-in-use"]:"This credential is already associated with a different user account.",["custom-token-mismatch"]:"The custom token corresponds to a different audience.",["requires-recent-login"]:"This operation is sensitive and requires recent authentication. Log in again before retrying this request.",["dependent-sdk-initialized-before-auth"]:"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.",["dynamic-link-not-activated"]:"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.",["email-change-needs-verification"]:"Multi-factor users must always have a verified email.",["email-already-in-use"]:"The email address is already in use by another account.",["emulator-config-failed"]:'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',["expired-action-code"]:"The action code has expired.",["cancelled-popup-request"]:"This operation has been cancelled due to another conflicting popup being opened.",["internal-error"]:"An internal AuthError has occurred.",["invalid-app-credential"]:"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.",["invalid-app-id"]:"The mobile app identifier is not registed for the current project.",["invalid-user-token"]:"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.",["invalid-auth-event"]:"An internal AuthError has occurred.",["invalid-verification-code"]:"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.",["invalid-continue-uri"]:"The continue URL provided in the request is invalid.",["invalid-cordova-configuration"]:"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.",["invalid-custom-token"]:"The custom token format is incorrect. Please check the documentation.",["invalid-dynamic-link-domain"]:"The provided dynamic link domain is not configured or authorized for the current project.",["invalid-email"]:"The email address is badly formatted.",["invalid-emulator-scheme"]:"Emulator URL must start with a valid scheme (http:// or https://).",["invalid-api-key"]:"Your API key is invalid, please check you have copied it correctly.",["invalid-cert-hash"]:"The SHA-1 certificate hash provided is invalid.",["invalid-credential"]:"The supplied auth credential is malformed or has expired.",["invalid-message-payload"]:"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.",["invalid-multi-factor-session"]:"The request does not contain a valid proof of first factor successful sign-in.",["invalid-oauth-provider"]:"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.",["invalid-oauth-client-id"]:"The OAuth client ID provided is either invalid or does not match the specified API key.",["unauthorized-domain"]:"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.",["invalid-action-code"]:"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.",["wrong-password"]:"The password is invalid or the user does not have a password.",["invalid-persistence-type"]:"The specified persistence type is invalid. It can only be local, session or none.",["invalid-phone-number"]:"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].",["invalid-provider-id"]:"The specified provider ID is invalid.",["invalid-recipient-email"]:"The email corresponding to this action failed to send as the provided recipient email address is invalid.",["invalid-sender"]:"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.",["invalid-verification-id"]:"The verification ID used to create the phone auth credential is invalid.",["invalid-tenant-id"]:"The Auth instance's tenant ID is invalid.",["login-blocked"]:"Login blocked by user-provided method: {$originalMessage}",["missing-android-pkg-name"]:"An Android Package Name must be provided if the Android App is required to be installed.",["auth-domain-config-required"]:"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.",["missing-app-credential"]:"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.",["missing-verification-code"]:"The phone auth credential was created with an empty SMS verification code.",["missing-continue-uri"]:"A continue URL must be provided in the request.",["missing-iframe-start"]:"An internal AuthError has occurred.",["missing-ios-bundle-id"]:"An iOS Bundle ID must be provided if an App Store ID is provided.",["missing-or-invalid-nonce"]:"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.",["missing-multi-factor-info"]:"No second factor identifier is provided.",["missing-multi-factor-session"]:"The request is missing proof of first factor successful sign-in.",["missing-phone-number"]:"To send verification codes, provide a phone number for the recipient.",["missing-verification-id"]:"The phone auth credential was created with an empty verification ID.",["app-deleted"]:"This instance of FirebaseApp has been deleted.",["multi-factor-info-not-found"]:"The user does not have a second factor matching the identifier provided.",["multi-factor-auth-required"]:"Proof of ownership of a second factor is required to complete sign-in.",["account-exists-with-different-credential"]:"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.",["network-request-failed"]:"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.",["no-auth-event"]:"An internal AuthError has occurred.",["no-such-provider"]:"User was not linked to an account with the given provider.",["null-user"]:"A null user object was provided as the argument for an operation which requires a non-null user object.",["operation-not-allowed"]:"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.",["operation-not-supported-in-this-environment"]:'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',["popup-blocked"]:"Unable to establish a connection with the popup. It may have been blocked by the browser.",["popup-closed-by-user"]:"The popup has been closed by the user before finalizing the operation.",["provider-already-linked"]:"User can only be linked to one identity for the given provider.",["quota-exceeded"]:"The project's quota for this operation has been exceeded.",["redirect-cancelled-by-user"]:"The redirect operation has been cancelled by the user before finalizing.",["redirect-operation-pending"]:"A redirect sign-in operation is already pending.",["rejected-credential"]:"The request contains malformed or mismatching credentials.",["second-factor-already-in-use"]:"The second factor is already enrolled on this account.",["maximum-second-factor-count-exceeded"]:"The maximum allowed number of second factors on a user has been exceeded.",["tenant-id-mismatch"]:"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.",["user-token-expired"]:"The user's credential is no longer valid. The user must sign in again.",["too-many-requests"]:"We have blocked all requests from this device due to unusual activity. Try again later.",["unauthorized-continue-uri"]:"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.",["unsupported-first-factor"]:"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.",["unsupported-persistence-type"]:"The current environment does not support the specified persistence type.",["unsupported-tenant-operation"]:"This operation is not supported in a multi-tenant context.",["unverified-email"]:"The operation requires a verified email.",["user-cancelled"]:"The user did not grant your application the permissions it requested.",["user-not-found"]:"There is no user record corresponding to this identifier. The user may have been deleted.",["user-disabled"]:"The user account has been disabled by an administrator.",["user-mismatch"]:"The supplied credentials do not correspond to the previously signed in user.",["user-signed-out"]:"",["weak-password"]:"The password must be 6 characters long or more.",["web-storage-unsupported"]:"This browser is not supported or 3rd party cookies and data may be disabled.",["already-initialized"]:"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}}function rN(){return{["dependent-sdk-initialized-before-auth"]:"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const AV=xV,iN=rN,sN=new fh("auth","Firebase",rN()),RV={ADMIN_ONLY_OPERATION:"auth/admin-restricted-operation",ARGUMENT_ERROR:"auth/argument-error",APP_NOT_AUTHORIZED:"auth/app-not-authorized",APP_NOT_INSTALLED:"auth/app-not-installed",CAPTCHA_CHECK_FAILED:"auth/captcha-check-failed",CODE_EXPIRED:"auth/code-expired",CORDOVA_NOT_READY:"auth/cordova-not-ready",CORS_UNSUPPORTED:"auth/cors-unsupported",CREDENTIAL_ALREADY_IN_USE:"auth/credential-already-in-use",CREDENTIAL_MISMATCH:"auth/custom-token-mismatch",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"auth/requires-recent-login",DEPENDENT_SDK_INIT_BEFORE_AUTH:"auth/dependent-sdk-initialized-before-auth",DYNAMIC_LINK_NOT_ACTIVATED:"auth/dynamic-link-not-activated",EMAIL_CHANGE_NEEDS_VERIFICATION:"auth/email-change-needs-verification",EMAIL_EXISTS:"auth/email-already-in-use",EMULATOR_CONFIG_FAILED:"auth/emulator-config-failed",EXPIRED_OOB_CODE:"auth/expired-action-code",EXPIRED_POPUP_REQUEST:"auth/cancelled-popup-request",INTERNAL_ERROR:"auth/internal-error",INVALID_API_KEY:"auth/invalid-api-key",INVALID_APP_CREDENTIAL:"auth/invalid-app-credential",INVALID_APP_ID:"auth/invalid-app-id",INVALID_AUTH:"auth/invalid-user-token",INVALID_AUTH_EVENT:"auth/invalid-auth-event",INVALID_CERT_HASH:"auth/invalid-cert-hash",INVALID_CODE:"auth/invalid-verification-code",INVALID_CONTINUE_URI:"auth/invalid-continue-uri",INVALID_CORDOVA_CONFIGURATION:"auth/invalid-cordova-configuration",INVALID_CUSTOM_TOKEN:"auth/invalid-custom-token",INVALID_DYNAMIC_LINK_DOMAIN:"auth/invalid-dynamic-link-domain",INVALID_EMAIL:"auth/invalid-email",INVALID_EMULATOR_SCHEME:"auth/invalid-emulator-scheme",INVALID_IDP_RESPONSE:"auth/invalid-credential",INVALID_MESSAGE_PAYLOAD:"auth/invalid-message-payload",INVALID_MFA_SESSION:"auth/invalid-multi-factor-session",INVALID_OAUTH_CLIENT_ID:"auth/invalid-oauth-client-id",INVALID_OAUTH_PROVIDER:"auth/invalid-oauth-provider",INVALID_OOB_CODE:"auth/invalid-action-code",INVALID_ORIGIN:"auth/unauthorized-domain",INVALID_PASSWORD:"auth/wrong-password",INVALID_PERSISTENCE:"auth/invalid-persistence-type",INVALID_PHONE_NUMBER:"auth/invalid-phone-number",INVALID_PROVIDER_ID:"auth/invalid-provider-id",INVALID_RECIPIENT_EMAIL:"auth/invalid-recipient-email",INVALID_SENDER:"auth/invalid-sender",INVALID_SESSION_INFO:"auth/invalid-verification-id",INVALID_TENANT_ID:"auth/invalid-tenant-id",MFA_INFO_NOT_FOUND:"auth/multi-factor-info-not-found",MFA_REQUIRED:"auth/multi-factor-auth-required",MISSING_ANDROID_PACKAGE_NAME:"auth/missing-android-pkg-name",MISSING_APP_CREDENTIAL:"auth/missing-app-credential",MISSING_AUTH_DOMAIN:"auth/auth-domain-config-required",MISSING_CODE:"auth/missing-verification-code",MISSING_CONTINUE_URI:"auth/missing-continue-uri",MISSING_IFRAME_START:"auth/missing-iframe-start",MISSING_IOS_BUNDLE_ID:"auth/missing-ios-bundle-id",MISSING_OR_INVALID_NONCE:"auth/missing-or-invalid-nonce",MISSING_MFA_INFO:"auth/missing-multi-factor-info",MISSING_MFA_SESSION:"auth/missing-multi-factor-session",MISSING_PHONE_NUMBER:"auth/missing-phone-number",MISSING_SESSION_INFO:"auth/missing-verification-id",MODULE_DESTROYED:"auth/app-deleted",NEED_CONFIRMATION:"auth/account-exists-with-different-credential",NETWORK_REQUEST_FAILED:"auth/network-request-failed",NULL_USER:"auth/null-user",NO_AUTH_EVENT:"auth/no-auth-event",NO_SUCH_PROVIDER:"auth/no-such-provider",OPERATION_NOT_ALLOWED:"auth/operation-not-allowed",OPERATION_NOT_SUPPORTED:"auth/operation-not-supported-in-this-environment",POPUP_BLOCKED:"auth/popup-blocked",POPUP_CLOSED_BY_USER:"auth/popup-closed-by-user",PROVIDER_ALREADY_LINKED:"auth/provider-already-linked",QUOTA_EXCEEDED:"auth/quota-exceeded",REDIRECT_CANCELLED_BY_USER:"auth/redirect-cancelled-by-user",REDIRECT_OPERATION_PENDING:"auth/redirect-operation-pending",REJECTED_CREDENTIAL:"auth/rejected-credential",SECOND_FACTOR_ALREADY_ENROLLED:"auth/second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"auth/maximum-second-factor-count-exceeded",TENANT_ID_MISMATCH:"auth/tenant-id-mismatch",TIMEOUT:"auth/timeout",TOKEN_EXPIRED:"auth/user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"auth/too-many-requests",UNAUTHORIZED_DOMAIN:"auth/unauthorized-continue-uri",UNSUPPORTED_FIRST_FACTOR:"auth/unsupported-first-factor",UNSUPPORTED_PERSISTENCE:"auth/unsupported-persistence-type",UNSUPPORTED_TENANT_OPERATION:"auth/unsupported-tenant-operation",UNVERIFIED_EMAIL:"auth/unverified-email",USER_CANCELLED:"auth/user-cancelled",USER_DELETED:"auth/user-not-found",USER_DISABLED:"auth/user-disabled",USER_MISMATCH:"auth/user-mismatch",USER_SIGNED_OUT:"auth/user-signed-out",WEAK_PASSWORD:"auth/weak-password",WEB_STORAGE_UNSUPPORTED:"auth/web-storage-unsupported",ALREADY_INITIALIZED:"auth/already-initialized"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gS=new Wp("@firebase/auth");function Qd(t,...e){gS.logLevel<=Fe.ERROR&&gS.error(`Auth (${Wl}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sr(t,...e){throw ow(t,...e)}function fr(t,...e){return ow(t,...e)}function oN(t,e,n){const r=Object.assign(Object.assign({},iN()),{[e]:n});return new fh("auth","Firebase",r).create(e,{appName:t.name})}function jl(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&sr(t,"argument-error"),oN(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function ow(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return sN.create(t,...e)}function G(t,e,...n){if(!t)throw ow(e,...n)}function Jr(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Qd(e),new Error(e)}function Li(t,e){t||Jr(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yS=new Map;function ki(t){Li(t instanceof Function,"Expected a class definition");let e=yS.get(t);return e?(Li(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,yS.set(t,e),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aN(t,e){const n=Bl(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),s=n.getOptions();if(yl(s,e??{}))return i;sr(i,"already-initialized")}return n.initialize({options:e})}function OV(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(ki);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pc(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function aw(){return vS()==="http:"||vS()==="https:"}function vS(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PV(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(aw()||r2()||"connection"in navigator)?navigator.onLine:!0}function MV(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ph{constructor(e,n){this.shortDelay=e,this.longDelay=n,Li(n>e,"Short delay should be less than long delay!"),this.isMobile=nw()||YC()}get(){return PV()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lw(t,e){Li(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lN{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;Jr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;Jr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;Jr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LV={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FV=new ph(3e4,6e4);function Qt(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function an(t,e,n,r,i={}){return uN(t,i,async()=>{let s={},o={};r&&(e==="GET"?o=r:s={body:JSON.stringify(r)});const a=oa(Object.assign({key:t.config.apiKey},o)).slice(1),u=await t._getAdditionalHeaders();return u["Content-Type"]="application/json",t.languageCode&&(u["X-Firebase-Locale"]=t.languageCode),lN.fetch()(cN(t,t.config.apiHost,n,a),Object.assign({method:e,headers:u,referrerPolicy:"no-referrer"},s))})}async function uN(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},LV),e);try{const i=new UV(t),s=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw Wu(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const a=s.ok?o.errorMessage:o.error.message,[u,c]=a.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw Wu(t,"credential-already-in-use",o);if(u==="EMAIL_EXISTS")throw Wu(t,"email-already-in-use",o);if(u==="USER_DISABLED")throw Wu(t,"user-disabled",o);const d=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw oN(t,d,c);sr(t,d)}}catch(i){if(i instanceof Bi)throw i;sr(t,"network-request-failed")}}async function Wi(t,e,n,r,i={}){const s=await an(t,e,n,r,i);return"mfaPendingCredential"in s&&sr(t,"multi-factor-auth-required",{_serverResponse:s}),s}function cN(t,e,n,r){const i=`${e}${n}?${r}`;return t.config.emulator?lw(t.config,i):`${t.config.apiScheme}://${i}`}class UV{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(fr(this.auth,"network-request-failed")),FV.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Wu(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=fr(t,e,r);return i.customData._tokenResponse=n,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function VV(t,e){return an(t,"POST","/v1/accounts:delete",e)}async function $V(t,e){return an(t,"POST","/v1/accounts:update",e)}async function BV(t,e){return an(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nc(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WV(t,e=!1){return te(t).getIdToken(e)}async function hN(t,e=!1){const n=te(t),r=await n.getIdToken(e),i=jp(r);G(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:nc(zg(i.auth_time)),issuedAtTime:nc(zg(i.iat)),expirationTime:nc(zg(i.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function zg(t){return Number(t)*1e3}function jp(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Qd("JWT malformed, contained fewer than 3 sections"),null;try{const i=Mf(n);return i?JSON.parse(i):(Qd("Failed to decode base64 JWT payload"),null)}catch(i){return Qd("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function jV(t){const e=jp(t);return G(e,"internal-error"),G(typeof e.exp<"u","internal-error"),G(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Fi(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Bi&&zV(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function zV({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qV{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dN{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=nc(this.lastLoginAt),this.creationTime=nc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Mc(t){var e;const n=t.auth,r=await t.getIdToken(),i=await Fi(t,BV(n,{idToken:r}));G(i==null?void 0:i.users.length,n,"internal-error");const s=i.users[0];t._notifyReloadListener(s);const o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?HV(s.providerUserInfo):[],a=GV(t.providerData,o),u=t.isAnonymous,c=!(t.email&&s.passwordHash)&&!(a!=null&&a.length),d=u?c:!1,f={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new dN(s.createdAt,s.lastLoginAt),isAnonymous:d};Object.assign(t,f)}async function fN(t){const e=te(t);await Mc(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function GV(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function HV(t){return t.map(e=>{var{providerId:n}=e,r=sw(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function YV(t,e){const n=await uN(t,{},async()=>{const r=oa({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,o=cN(t,i,"/v1/token",`key=${s}`),a=await t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",lN.fetch()(o,{method:"POST",headers:a,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lc{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){G(e.idToken,"internal-error"),G(typeof e.idToken<"u","internal-error"),G(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):jV(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}async getToken(e,n=!1){return G(!this.accessToken||this.refreshToken,e,"user-token-expired"),!n&&this.accessToken&&!this.isExpired?this.accessToken:this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:s}=await YV(e,n);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new Lc;return r&&(G(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(G(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(G(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Lc,this.toJSON())}_performRefresh(){return Jr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function is(t,e){G(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Ao{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,s=sw(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new qV(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new dN(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await Fi(this,this.stsTokenManager.getToken(this.auth,e));return G(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return hN(this,e)}reload(){return fN(this)}_assign(e){this!==e&&(G(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){return new Ao(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(e){G(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Mc(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){const e=await this.getIdToken();return await Fi(this,VV(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,s,o,a,u,c,d;const f=(r=n.displayName)!==null&&r!==void 0?r:void 0,g=(i=n.email)!==null&&i!==void 0?i:void 0,v=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,w=(o=n.photoURL)!==null&&o!==void 0?o:void 0,T=(a=n.tenantId)!==null&&a!==void 0?a:void 0,C=(u=n._redirectEventId)!==null&&u!==void 0?u:void 0,I=(c=n.createdAt)!==null&&c!==void 0?c:void 0,_=(d=n.lastLoginAt)!==null&&d!==void 0?d:void 0,{uid:E,emailVerified:b,isAnonymous:O,providerData:P,stsTokenManager:L}=n;G(E&&L,e,"internal-error");const z=Lc.fromJSON(this.name,L);G(typeof E=="string",e,"internal-error"),is(f,e.name),is(g,e.name),G(typeof b=="boolean",e,"internal-error"),G(typeof O=="boolean",e,"internal-error"),is(v,e.name),is(w,e.name),is(T,e.name),is(C,e.name),is(I,e.name),is(_,e.name);const Te=new Ao({uid:E,auth:e,email:g,emailVerified:b,displayName:f,isAnonymous:O,photoURL:w,phoneNumber:v,tenantId:T,stsTokenManager:z,createdAt:I,lastLoginAt:_});return P&&Array.isArray(P)&&(Te.providerData=P.map(ae=>Object.assign({},ae))),C&&(Te._redirectEventId=C),Te}static async _fromIdTokenResponse(e,n,r=!1){const i=new Lc;i.updateFromServerResponse(n);const s=new Ao({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await Mc(s),s}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pN{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}pN.type="NONE";const pv=pN;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xd(t,e,n){return`firebase:${t}:${e}:${n}`}class nl{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=Xd(this.userKey,i.apiKey,s),this.fullPersistenceKey=Xd("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Ao._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new nl(ki(pv),e,r);const i=(await Promise.all(n.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let s=i[0]||ki(pv);const o=Xd(r,e.config.apiKey,e.name);let a=null;for(const c of n)try{const d=await c._get(o);if(d){const f=Ao._fromJSON(e,d);c!==s&&(a=f),s=c;break}}catch{}const u=i.filter(c=>c._shouldAllowMigration);return!s._shouldAllowMigration||!u.length?new nl(s,e,r):(s=u[0],a&&await s._set(o,a.toJSON()),await Promise.all(n.map(async c=>{if(c!==s)try{await c._remove(o)}catch{}})),new nl(s,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _S(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(yN(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(mN(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(_N(e))return"Blackberry";if(wN(e))return"Webos";if(uw(e))return"Safari";if((e.includes("chrome/")||gN(e))&&!e.includes("edge/"))return"Chrome";if(vN(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function mN(t=Ht()){return/firefox\//i.test(t)}function uw(t=Ht()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function gN(t=Ht()){return/crios\//i.test(t)}function yN(t=Ht()){return/iemobile/i.test(t)}function vN(t=Ht()){return/android/i.test(t)}function _N(t=Ht()){return/blackberry/i.test(t)}function wN(t=Ht()){return/webos/i.test(t)}function zp(t=Ht()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function KV(t=Ht()){var e;return zp(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function QV(){return i2()&&document.documentMode===10}function IN(t=Ht()){return zp(t)||vN(t)||wN(t)||_N(t)||/windows phone/i.test(t)||yN(t)}function XV(){try{return!!(window&&window!==window.top)}catch{return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EN(t,e=[]){let n;switch(t){case"Browser":n=_S(Ht());break;case"Worker":n=`${_S(Ht())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Wl}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JV{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=s=>new Promise((o,a)=>{try{const u=e(s);o(u)}catch(u){a(u)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZV{constructor(e,n,r){this.app=e,this.heartbeatServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new wS(this),this.idTokenSubscription=new wS(this),this.beforeStateQueue=new JV(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=sN,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=ki(n)),this._initializationPromise=this.queue(async()=>{var r,i;if(!this._deleted&&(this.persistenceManager=await nl.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUser(e){var n;const r=await this.assertedPersistence.getCurrentUser();let i=r,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=i==null?void 0:i._redirectEventId,u=await this.tryRedirectSignIn(e);(!o||o===a)&&(u!=null&&u.user)&&(i=u.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return G(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Mc(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=MV()}async _delete(){this._deleted=!0}async updateCurrentUser(e){const n=e?te(e):null;return n&&G(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&G(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0)}setPersistence(e){return this.queue(async()=>{await this.assertedPersistence.setPersistence(ki(e))})}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new fh("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&ki(e)||this._popupRedirectResolver;G(n,this,"argument-error"),this.redirectPersistenceManager=await nl.create(this,[ki(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n),o=this._isInitialized?Promise.resolve():this._initializationPromise;return G(o,this,"internal-error"),o.then(()=>s(this.currentUser)),typeof n=="function"?e.addObserver(n,r,i):e.addObserver(n)}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return G(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=EN(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={["X-Client-Version"]:this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());return r&&(n["X-Firebase-Client"]=r),n}}function zn(t){return te(t)}class wS{constructor(e){this.auth=e,this.observer=null,this.addObserver=f2(n=>this.observer=n)}get next(){return G(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function SN(t,e,n){const r=zn(t);G(r._canInitEmulator,r,"emulator-config-failed"),G(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!!(n!=null&&n.disableWarnings),s=TN(e),{host:o,port:a}=e$(e),u=a===null?"":`:${a}`;r.config.emulator={url:`${s}//${o}${u}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||t$()}function TN(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function e$(t){const e=TN(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:IS(r.substr(s.length+1))}}else{const[s,o]=r.split(":");return{host:s,port:IS(o)}}}function IS(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function t$(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zl{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Jr("not implemented")}_getIdTokenResponse(e){return Jr("not implemented")}_linkToIdToken(e,n){return Jr("not implemented")}_getReauthenticationResolver(e){return Jr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kN(t,e){return an(t,"POST","/v1/accounts:resetPassword",Qt(t,e))}async function CN(t,e){return an(t,"POST","/v1/accounts:update",e)}async function n$(t,e){return an(t,"POST","/v1/accounts:update",Qt(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function r$(t,e){return Wi(t,"POST","/v1/accounts:signInWithPassword",Qt(t,e))}async function qp(t,e){return an(t,"POST","/v1/accounts:sendOobCode",Qt(t,e))}async function i$(t,e){return qp(t,e)}async function s$(t,e){return qp(t,e)}async function o$(t,e){return qp(t,e)}async function a$(t,e){return qp(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function l$(t,e){return Wi(t,"POST","/v1/accounts:signInWithEmailLink",Qt(t,e))}async function u$(t,e){return Wi(t,"POST","/v1/accounts:signInWithEmailLink",Qt(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vl extends zl{constructor(e,n,r,i=null){super("password",r),this._email=e,this._password=n,this._tenantId=i}static _fromEmailAndPassword(e,n){return new vl(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new vl(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":return r$(e,{returnSecureToken:!0,email:this._email,password:this._password});case"emailLink":return l$(e,{email:this._email,oobCode:this._password});default:sr(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":return CN(e,{idToken:n,returnSecureToken:!0,email:this._email,password:this._password});case"emailLink":return u$(e,{idToken:n,email:this._email,oobCode:this._password});default:sr(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xi(t,e){return Wi(t,"POST","/v1/accounts:signInWithIdp",Qt(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c$="http://localhost";class si extends zl{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new si(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):sr("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=n,s=sw(n,["providerId","signInMethod"]);if(!r||!i)return null;const o=new si(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return xi(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,xi(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,xi(e,n)}buildRequest(){const e={requestUri:c$,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=oa(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function h$(t,e){return an(t,"POST","/v1/accounts:sendVerificationCode",Qt(t,e))}async function d$(t,e){return Wi(t,"POST","/v1/accounts:signInWithPhoneNumber",Qt(t,e))}async function f$(t,e){const n=await Wi(t,"POST","/v1/accounts:signInWithPhoneNumber",Qt(t,e));if(n.temporaryProof)throw Wu(t,"account-exists-with-different-credential",n);return n}const p$={USER_NOT_FOUND:"user-not-found"};async function m$(t,e){const n=Object.assign(Object.assign({},e),{operation:"REAUTH"});return Wi(t,"POST","/v1/accounts:signInWithPhoneNumber",Qt(t,n),p$)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ds extends zl{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,n){return new Ds({verificationId:e,verificationCode:n})}static _fromTokenResponse(e,n){return new Ds({phoneNumber:e,temporaryProof:n})}_getIdTokenResponse(e){return d$(e,this._makeVerificationRequest())}_linkToIdToken(e,n){return f$(e,Object.assign({idToken:n},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return m$(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:n,verificationId:r,verificationCode:i}=this.params;return e&&n?{temporaryProof:e,phoneNumber:n}:{sessionInfo:r,code:i}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){typeof e=="string"&&(e=JSON.parse(e));const{verificationId:n,verificationCode:r,phoneNumber:i,temporaryProof:s}=e;return!r&&!n&&!i&&!s?null:new Ds({verificationId:n,verificationCode:r,phoneNumber:i,temporaryProof:s})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g$(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function y$(t){const e=$u(Bu(t)).link,n=e?$u(Bu(e)).deep_link_id:null,r=$u(Bu(t)).deep_link_id;return(r?$u(Bu(r)).link:null)||r||n||e||t}class ql{constructor(e){var n,r,i,s,o,a;const u=$u(Bu(e)),c=(n=u.apiKey)!==null&&n!==void 0?n:null,d=(r=u.oobCode)!==null&&r!==void 0?r:null,f=g$((i=u.mode)!==null&&i!==void 0?i:null);G(c&&d&&f,"argument-error"),this.apiKey=c,this.operation=f,this.code=d,this.continueUrl=(s=u.continueUrl)!==null&&s!==void 0?s:null,this.languageCode=(o=u.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(a=u.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){const n=y$(e);try{return new ql(n)}catch{return null}}}function v$(t){return ql.parseLink(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ys{constructor(){this.providerId=Ys.PROVIDER_ID}static credential(e,n){return vl._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=ql.parseLink(n);return G(r,"argument-error"),vl._fromEmailAndCode(e,r.code,r.tenantId)}}Ys.PROVIDER_ID="password";Ys.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Ys.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ji{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gl extends ji{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class rc extends Gl{static credentialFromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;return G("providerId"in n&&"signInMethod"in n,"argument-error"),si._fromParams(n)}credential(e){return this._credential(Object.assign(Object.assign({},e),{nonce:e.rawNonce}))}_credential(e){return G(e.idToken||e.accessToken,"argument-error"),si._fromParams(Object.assign(Object.assign({},e),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(e){return rc.oauthCredentialFromTaggedObject(e)}static credentialFromError(e){return rc.oauthCredentialFromTaggedObject(e.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r,oauthTokenSecret:i,pendingToken:s,nonce:o,providerId:a}=e;if(!r&&!i&&!n&&!s||!a)return null;try{return new rc(a)._credential({idToken:n,accessToken:r,nonce:o,pendingToken:s})}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _i extends Gl{constructor(){super("facebook.com")}static credential(e){return si._fromParams({providerId:_i.PROVIDER_ID,signInMethod:_i.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return _i.credentialFromTaggedObject(e)}static credentialFromError(e){return _i.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return _i.credential(e.oauthAccessToken)}catch{return null}}}_i.FACEBOOK_SIGN_IN_METHOD="facebook.com";_i.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wi extends Gl{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return si._fromParams({providerId:wi.PROVIDER_ID,signInMethod:wi.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return wi.credentialFromTaggedObject(e)}static credentialFromError(e){return wi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return wi.credential(n,r)}catch{return null}}}wi.GOOGLE_SIGN_IN_METHOD="google.com";wi.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ii extends Gl{constructor(){super("github.com")}static credential(e){return si._fromParams({providerId:Ii.PROVIDER_ID,signInMethod:Ii.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ii.credentialFromTaggedObject(e)}static credentialFromError(e){return Ii.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ii.credential(e.oauthAccessToken)}catch{return null}}}Ii.GITHUB_SIGN_IN_METHOD="github.com";Ii.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _$="http://localhost";class Fc extends zl{constructor(e,n){super(e,e),this.pendingToken=n}_getIdTokenResponse(e){const n=this.buildRequest();return xi(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,xi(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,xi(e,n)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i,pendingToken:s}=n;return!r||!i||!s||r!==i?null:new Fc(r,s)}static _create(e,n){return new Fc(e,n)}buildRequest(){return{requestUri:_$,returnSecureToken:!0,pendingToken:this.pendingToken}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w$="saml.";class Vf extends ji{constructor(e){G(e.startsWith(w$),"argument-error"),super(e)}static credentialFromResult(e){return Vf.samlCredentialFromTaggedObject(e)}static credentialFromError(e){return Vf.samlCredentialFromTaggedObject(e.customData||{})}static credentialFromJSON(e){const n=Fc.fromJSON(e);return G(n,"argument-error"),n}static samlCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{pendingToken:n,providerId:r}=e;if(!n||!r)return null;try{return Fc._create(r,n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ei extends Gl{constructor(){super("twitter.com")}static credential(e,n){return si._fromParams({providerId:Ei.PROVIDER_ID,signInMethod:Ei.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Ei.credentialFromTaggedObject(e)}static credentialFromError(e){return Ei.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Ei.credential(n,r)}catch{return null}}}Ei.TWITTER_SIGN_IN_METHOD="twitter.com";Ei.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function NN(t,e){return Wi(t,"POST","/v1/accounts:signUp",Qt(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class br{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const s=await Ao._fromIdTokenResponse(e,r,i),o=ES(r);return new br({user:s,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=ES(r);return new br({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function ES(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function DN(t){var e;const n=zn(t);if(await n._initializationPromise,!((e=n.currentUser)===null||e===void 0)&&e.isAnonymous)return new br({user:n.currentUser,providerId:null,operationType:"signIn"});const r=await NN(n,{returnSecureToken:!0}),i=await br._fromIdTokenResponse(n,"signIn",r,!0);return await n._updateCurrentUser(i.user),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $f extends Bi{constructor(e,n,r,i){var s;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,$f.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new $f(e,n,r,i)}}function bN(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?$f._fromErrorAndOperation(t,s,e,r):s})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xN(t){return new Set(t.map(({providerId:e})=>e).filter(e=>!!e))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function I$(t,e){const n=te(t);await Gp(!0,n,e);const{providerUserInfo:r}=await $V(n.auth,{idToken:await n.getIdToken(),deleteProvider:[e]}),i=xN(r||[]);return n.providerData=n.providerData.filter(s=>i.has(s.providerId)),i.has("phone")||(n.phoneNumber=null),await n.auth._persistUserIfCurrent(n),n}async function cw(t,e,n=!1){const r=await Fi(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return br._forOperation(t,"link",r)}async function Gp(t,e,n){await Mc(e);const r=xN(e.providerData),i=t===!1?"provider-already-linked":"no-such-provider";G(r.has(n)===t,e.auth,i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function AN(t,e,n=!1){const{auth:r}=t,i="reauthenticate";try{const s=await Fi(t,bN(r,i,e,t),n);G(s.idToken,r,"internal-error");const o=jp(s.idToken);G(o,r,"internal-error");const{sub:a}=o;return G(t.uid===a,r,"user-mismatch"),br._forOperation(t,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&sr(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function RN(t,e,n=!1){const r="signIn",i=await bN(t,r,e),s=await br._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(s.user),s}async function Hp(t,e){return RN(zn(t),e)}async function ON(t,e){const n=te(t);return await Gp(!1,n,e.providerId),cw(n,e)}async function PN(t,e){return AN(te(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function E$(t,e){return Wi(t,"POST","/v1/accounts:signInWithCustomToken",Qt(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function S$(t,e){const n=zn(t),r=await E$(n,{token:e,returnSecureToken:!0}),i=await br._fromIdTokenResponse(n,"signIn",r);return await n._updateCurrentUser(i.user),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yp{constructor(e,n){this.factorId=e,this.uid=n.mfaEnrollmentId,this.enrollmentTime=new Date(n.enrolledAt).toUTCString(),this.displayName=n.displayName}static _fromServerResponse(e,n){return"phoneInfo"in n?hw._fromServerResponse(e,n):sr(e,"internal-error")}}class hw extends Yp{constructor(e){super("phone",e),this.phoneNumber=e.phoneInfo}static _fromServerResponse(e,n){return new hw(n)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kp(t,e,n){var r;G(((r=n.url)===null||r===void 0?void 0:r.length)>0,t,"invalid-continue-uri"),G(typeof n.dynamicLinkDomain>"u"||n.dynamicLinkDomain.length>0,t,"invalid-dynamic-link-domain"),e.continueUrl=n.url,e.dynamicLinkDomain=n.dynamicLinkDomain,e.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(G(n.iOS.bundleId.length>0,t,"missing-ios-bundle-id"),e.iOSBundleId=n.iOS.bundleId),n.android&&(G(n.android.packageName.length>0,t,"missing-android-pkg-name"),e.androidInstallApp=n.android.installApp,e.androidMinimumVersionCode=n.android.minimumVersion,e.androidPackageName=n.android.packageName)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function T$(t,e,n){const r=te(t),i={requestType:"PASSWORD_RESET",email:e};n&&Kp(r,i,n),await s$(r,i)}async function k$(t,e,n){await kN(te(t),{oobCode:e,newPassword:n})}async function C$(t,e){await n$(te(t),{oobCode:e})}async function MN(t,e){const n=te(t),r=await kN(n,{oobCode:e}),i=r.requestType;switch(G(i,n,"internal-error"),i){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":G(r.newEmail,n,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":G(r.mfaInfo,n,"internal-error");default:G(r.email,n,"internal-error")}let s=null;return r.mfaInfo&&(s=Yp._fromServerResponse(zn(n),r.mfaInfo)),{data:{email:(r.requestType==="VERIFY_AND_CHANGE_EMAIL"?r.newEmail:r.email)||null,previousEmail:(r.requestType==="VERIFY_AND_CHANGE_EMAIL"?r.email:r.newEmail)||null,multiFactorInfo:s},operation:i}}async function N$(t,e){const{data:n}=await MN(te(t),e);return n.email}async function D$(t,e,n){const r=zn(t),i=await NN(r,{returnSecureToken:!0,email:e,password:n}),s=await br._fromIdTokenResponse(r,"signIn",i);return await r._updateCurrentUser(s.user),s}function b$(t,e,n){return Hp(te(t),Ys.credential(e,n))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function x$(t,e,n){const r=te(t),i={requestType:"EMAIL_SIGNIN",email:e};G(n.handleCodeInApp,r,"argument-error"),n&&Kp(r,i,n),await o$(r,i)}function A$(t,e){const n=ql.parseLink(e);return(n==null?void 0:n.operation)==="EMAIL_SIGNIN"}async function R$(t,e,n){const r=te(t),i=Ys.credentialWithLink(e,n||Pc());return G(i._tenantId===(r.tenantId||null),r,"tenant-id-mismatch"),Hp(r,i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function O$(t,e){return an(t,"POST","/v1/accounts:createAuthUri",Qt(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function P$(t,e){const n=aw()?Pc():"http://localhost",r={identifier:e,continueUri:n},{signinMethods:i}=await O$(te(t),r);return i||[]}async function M$(t,e){const n=te(t),i={requestType:"VERIFY_EMAIL",idToken:await t.getIdToken()};e&&Kp(n.auth,i,e);const{email:s}=await i$(n.auth,i);s!==t.email&&await t.reload()}async function L$(t,e,n){const r=te(t),s={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:await t.getIdToken(),newEmail:e};n&&Kp(r.auth,s,n);const{email:o}=await a$(r.auth,s);o!==t.email&&await t.reload()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function F$(t,e){return an(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function U$(t,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const r=te(t),s={idToken:await r.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},o=await Fi(r,F$(r.auth,s));r.displayName=o.displayName||null,r.photoURL=o.photoUrl||null;const a=r.providerData.find(({providerId:u})=>u==="password");a&&(a.displayName=r.displayName,a.photoURL=r.photoURL),await r._updateTokensIfNecessary(o)}function V$(t,e){return LN(te(t),e,null)}function $$(t,e){return LN(te(t),null,e)}async function LN(t,e,n){const{auth:r}=t,s={idToken:await t.getIdToken(),returnSecureToken:!0};e&&(s.email=e),n&&(s.password=n);const o=await Fi(t,CN(r,s));await t._updateTokensIfNecessary(o,!0)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function B$(t){var e,n;if(!t)return null;const{providerId:r}=t,i=t.rawUserInfo?JSON.parse(t.rawUserInfo):{},s=t.isNewUser||t.kind==="identitytoolkit#SignupNewUserResponse";if(!r&&(t!=null&&t.idToken)){const o=(n=(e=jp(t.idToken))===null||e===void 0?void 0:e.firebase)===null||n===void 0?void 0:n.sign_in_provider;if(o){const a=o!=="anonymous"&&o!=="custom"?o:null;return new rl(s,a)}}if(!r)return null;switch(r){case"facebook.com":return new W$(s,i);case"github.com":return new j$(s,i);case"google.com":return new z$(s,i);case"twitter.com":return new q$(s,i,t.screenName||null);case"custom":case"anonymous":return new rl(s,null);default:return new rl(s,r,i)}}class rl{constructor(e,n,r={}){this.isNewUser=e,this.providerId=n,this.profile=r}}class FN extends rl{constructor(e,n,r,i){super(e,n,r),this.username=i}}class W$ extends rl{constructor(e,n){super(e,"facebook.com",n)}}class j$ extends FN{constructor(e,n){super(e,"github.com",n,typeof(n==null?void 0:n.login)=="string"?n==null?void 0:n.login:null)}}class z$ extends rl{constructor(e,n){super(e,"google.com",n)}}class q$ extends FN{constructor(e,n,r){super(e,"twitter.com",n,r)}}function G$(t){const{user:e,_tokenResponse:n}=t;return e.isAnonymous&&!n?{providerId:null,isNewUser:!1,profile:null}:B$(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H$(t,e){return te(t).setPersistence(e)}function UN(t,e,n,r){return te(t).onIdTokenChanged(e,n,r)}function VN(t,e,n){return te(t).beforeAuthStateChanged(e,n)}function Y$(t,e,n,r){return te(t).onAuthStateChanged(e,n,r)}function K$(t){te(t).useDeviceLanguage()}function Q$(t,e){return te(t).updateCurrentUser(e)}function X$(t){return te(t).signOut()}async function J$(t){return te(t).delete()}class ko{constructor(e,n,r){this.type=e,this.credential=n,this.auth=r}static _fromIdtoken(e,n){return new ko("enroll",e,n)}static _fromMfaPendingCredential(e){return new ko("signin",e)}toJSON(){return{multiFactorSession:{[this.type==="enroll"?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(e){var n,r;if(e!=null&&e.multiFactorSession){if(!((n=e.multiFactorSession)===null||n===void 0)&&n.pendingCredential)return ko._fromMfaPendingCredential(e.multiFactorSession.pendingCredential);if(!((r=e.multiFactorSession)===null||r===void 0)&&r.idToken)return ko._fromIdtoken(e.multiFactorSession.idToken)}return null}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dw{constructor(e,n,r){this.session=e,this.hints=n,this.signInResolver=r}static _fromError(e,n){const r=zn(e),i=n.customData._serverResponse,s=(i.mfaInfo||[]).map(a=>Yp._fromServerResponse(r,a));G(i.mfaPendingCredential,r,"internal-error");const o=ko._fromMfaPendingCredential(i.mfaPendingCredential);return new dw(o,s,async a=>{const u=await a._process(r,o);delete i.mfaInfo,delete i.mfaPendingCredential;const c=Object.assign(Object.assign({},i),{idToken:u.idToken,refreshToken:u.refreshToken});switch(n.operationType){case"signIn":const d=await br._fromIdTokenResponse(r,n.operationType,c);return await r._updateCurrentUser(d.user),d;case"reauthenticate":return G(n.user,r,"internal-error"),br._forOperation(n.user,n.operationType,c);default:sr(r,"internal-error")}})}async resolveSignIn(e){const n=e;return this.signInResolver(n)}}function Z$(t,e){var n;const r=te(t),i=e;return G(e.customData.operationType,r,"argument-error"),G((n=i.customData._serverResponse)===null||n===void 0?void 0:n.mfaPendingCredential,r,"argument-error"),dw._fromError(r,i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eB(t,e){return an(t,"POST","/v2/accounts/mfaEnrollment:start",Qt(t,e))}function tB(t,e){return an(t,"POST","/v2/accounts/mfaEnrollment:finalize",Qt(t,e))}function nB(t,e){return an(t,"POST","/v2/accounts/mfaEnrollment:withdraw",Qt(t,e))}class fw{constructor(e){this.user=e,this.enrolledFactors=[],e._onReload(n=>{n.mfaInfo&&(this.enrolledFactors=n.mfaInfo.map(r=>Yp._fromServerResponse(e.auth,r)))})}static _fromUser(e){return new fw(e)}async getSession(){return ko._fromIdtoken(await this.user.getIdToken(),this.user.auth)}async enroll(e,n){const r=e,i=await this.getSession(),s=await Fi(this.user,r._process(this.user.auth,i,n));return await this.user._updateTokensIfNecessary(s),this.user.reload()}async unenroll(e){const n=typeof e=="string"?e:e.uid,r=await this.user.getIdToken();try{const i=await Fi(this.user,nB(this.user.auth,{idToken:r,mfaEnrollmentId:n}));this.enrolledFactors=this.enrolledFactors.filter(({uid:s})=>s!==n),await this.user._updateTokensIfNecessary(i),await this.user.reload()}catch(i){throw i}}}const qg=new WeakMap;function rB(t){const e=te(t);return qg.has(e)||qg.set(e,fw._fromUser(e)),qg.get(e)}const Bf="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $N{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Bf,"1"),this.storage.removeItem(Bf),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iB(){const t=Ht();return uw(t)||zp(t)}const sB=1e3,oB=10;class BN extends $N{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=iB()&&XV(),this.fallbackToPolling=IN(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,u)=>{this.notifyListeners(o,u)});return}const r=e.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const o=this.storage.getItem(r);if(e.newValue!==o)e.newValue!==null?this.storage.setItem(r,e.newValue):this.storage.removeItem(r);else if(this.localCache[r]===e.newValue&&!n)return}const i=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},s=this.storage.getItem(r);QV()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,oB):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},sB)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}BN.type="LOCAL";const WN=BN;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jN extends $N{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}jN.type="SESSION";const pw=jN;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aB(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qp{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new Qp(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:s}=n.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const a=Array.from(o).map(async c=>c(n.origin,s)),u=await aB(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:u})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Qp.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xp(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lB{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,u)=>{const c=Xp("",20);i.port1.start();const d=setTimeout(()=>{u(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(f){const g=f;if(g.data.eventId===c)switch(g.data.status){case"ack":clearTimeout(d),s=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(g.data.response);break;default:clearTimeout(d),clearTimeout(s),u(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:c,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bt(){return window}function uB(t){Bt().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mw(){return typeof Bt().WorkerGlobalScope<"u"&&typeof Bt().importScripts=="function"}async function cB(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function hB(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function dB(){return mw()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zN="firebaseLocalStorageDb",fB=1,Wf="firebaseLocalStorage",qN="fbase_key";class mh{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Jp(t,e){return t.transaction([Wf],e?"readwrite":"readonly").objectStore(Wf)}function pB(){const t=indexedDB.deleteDatabase(zN);return new mh(t).toPromise()}function mv(){const t=indexedDB.open(zN,fB);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Wf,{keyPath:qN})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Wf)?e(r):(r.close(),await pB(),e(await mv()))})})}async function SS(t,e,n){const r=Jp(t,!0).put({[qN]:e,value:n});return new mh(r).toPromise()}async function mB(t,e){const n=Jp(t,!1).get(e),r=await new mh(n).toPromise();return r===void 0?null:r.value}function TS(t,e){const n=Jp(t,!0).delete(e);return new mh(n).toPromise()}const gB=800,yB=3;class GN{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await mv(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>yB)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return mw()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Qp._getInstance(dB()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await cB(),!this.activeServiceWorker)return;this.sender=new lB(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||hB()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await mv();return await SS(e,Bf,"1"),await TS(e,Bf),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>SS(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>mB(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>TS(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const s=Jp(i,!1).getAll();return new mh(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;for(const{fbase_key:i,value:s}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),gB)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}GN.type="LOCAL";const HN=GN;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vB(t,e){return an(t,"POST","/v2/accounts/mfaSignIn:start",Qt(t,e))}function _B(t,e){return an(t,"POST","/v2/accounts/mfaSignIn:finalize",Qt(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wB(t){return(await an(t,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IB(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}function YN(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const s=fr("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",IB().appendChild(r)})}function KN(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EB=500,SB=6e4,Td=1e12;class TB{constructor(e){this.auth=e,this.counter=Td,this._widgets=new Map}render(e,n){const r=this.counter;return this._widgets.set(r,new kB(e,this.auth.name,n||{})),this.counter++,r}reset(e){var n;const r=e||Td;(n=this._widgets.get(r))===null||n===void 0||n.delete(),this._widgets.delete(r)}getResponse(e){var n;const r=e||Td;return((n=this._widgets.get(r))===null||n===void 0?void 0:n.getResponse())||""}async execute(e){var n;const r=e||Td;return(n=this._widgets.get(r))===null||n===void 0||n.execute(),""}}class kB{constructor(e,n,r){this.params=r,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const i=typeof e=="string"?document.getElementById(e):e;G(i,"argument-error",{appName:n}),this.container=i,this.isVisible=this.params.size!=="invisible",this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=CB(50);const{callback:e,"expired-callback":n}=this.params;if(e)try{e(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,n)try{n()}catch{}this.isVisible&&this.execute()},SB)},EB))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}function CB(t){const e=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let r=0;r<t;r++)e.push(n.charAt(Math.floor(Math.random()*n.length)));return e.join("")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gg=KN("rcb"),NB=new ph(3e4,6e4),DB="https://www.google.com/recaptcha/api.js?";class bB{constructor(){var e;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!(!((e=Bt().grecaptcha)===null||e===void 0)&&e.render)}load(e,n=""){return G(xB(n),e,"argument-error"),this.shouldResolveImmediately(n)?Promise.resolve(Bt().grecaptcha):new Promise((r,i)=>{const s=Bt().setTimeout(()=>{i(fr(e,"network-request-failed"))},NB.get());Bt()[Gg]=()=>{Bt().clearTimeout(s),delete Bt()[Gg];const a=Bt().grecaptcha;if(!a){i(fr(e,"internal-error"));return}const u=a.render;a.render=(c,d)=>{const f=u(c,d);return this.counter++,f},this.hostLanguage=n,r(a)};const o=`${DB}?${oa({onload:Gg,render:"explicit",hl:n})}`;YN(o).catch(()=>{clearTimeout(s),i(fr(e,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(e){var n;return!!(!((n=Bt().grecaptcha)===null||n===void 0)&&n.render)&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}function xB(t){return t.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(t)}class AB{async load(e){return new TB(e)}clearedOneInstance(){}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QN="recaptcha",RB={theme:"light",type:"image"};class OB{constructor(e,n=Object.assign({},RB),r){this.parameters=n,this.type=QN,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=zn(r),this.isInvisible=this.parameters.size==="invisible",G(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const i=typeof e=="string"?document.getElementById(e):e;G(i,this.auth,"argument-error"),this.container=i,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new AB:new bB,this.validateStartingState()}async verify(){this.assertNotDestroyed();const e=await this.render(),n=this.getAssertedRecaptcha(),r=n.getResponse(e);return r||new Promise(i=>{const s=o=>{o&&(this.tokenChangeListeners.delete(s),i(o))};this.tokenChangeListeners.add(s),this.isInvisible&&n.execute(e)})}render(){try{this.assertNotDestroyed()}catch(e){return Promise.reject(e)}return this.renderPromise?this.renderPromise:(this.renderPromise=this.makeRenderPromise().catch(e=>{throw this.renderPromise=null,e}),this.renderPromise)}_reset(){this.assertNotDestroyed(),this.widgetId!==null&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(e=>{this.container.removeChild(e)})}validateStartingState(){G(!this.parameters.sitekey,this.auth,"argument-error"),G(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),G(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(e){return n=>{if(this.tokenChangeListeners.forEach(r=>r(n)),typeof e=="function")e(n);else if(typeof e=="string"){const r=Bt()[e];typeof r=="function"&&r(n)}}}assertNotDestroyed(){G(!this.destroyed,this.auth,"internal-error")}async makeRenderPromise(){if(await this.init(),!this.widgetId){let e=this.container;if(!this.isInvisible){const n=document.createElement("div");e.appendChild(n),e=n}this.widgetId=this.getAssertedRecaptcha().render(e,this.parameters)}return this.widgetId}async init(){G(aw()&&!mw(),this.auth,"internal-error"),await PB(),this.recaptcha=await this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);const e=await wB(this.auth);G(e,this.auth,"internal-error"),this.parameters.sitekey=e}getAssertedRecaptcha(){return G(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}function PB(){let t=null;return new Promise(e=>{if(document.readyState==="complete"){e();return}t=()=>e(),window.addEventListener("load",t)}).catch(e=>{throw t&&window.removeEventListener("load",t),e})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gw{constructor(e,n){this.verificationId=e,this.onConfirmation=n}confirm(e){const n=Ds._fromVerification(this.verificationId,e);return this.onConfirmation(n)}}async function MB(t,e,n){const r=zn(t),i=await Zp(r,e,te(n));return new gw(i,s=>Hp(r,s))}async function LB(t,e,n){const r=te(t);await Gp(!1,r,"phone");const i=await Zp(r.auth,e,te(n));return new gw(i,s=>ON(r,s))}async function FB(t,e,n){const r=te(t),i=await Zp(r.auth,e,te(n));return new gw(i,s=>PN(r,s))}async function Zp(t,e,n){var r;const i=await n.verify();try{G(typeof i=="string",t,"argument-error"),G(n.type===QN,t,"argument-error");let s;if(typeof e=="string"?s={phoneNumber:e}:s=e,"session"in s){const o=s.session;if("phoneNumber"in s)return G(o.type==="enroll",t,"internal-error"),(await eB(t,{idToken:o.credential,phoneEnrollmentInfo:{phoneNumber:s.phoneNumber,recaptchaToken:i}})).phoneSessionInfo.sessionInfo;{G(o.type==="signin",t,"internal-error");const a=((r=s.multiFactorHint)===null||r===void 0?void 0:r.uid)||s.multiFactorUid;return G(a,t,"missing-multi-factor-info"),(await vB(t,{mfaPendingCredential:o.credential,mfaEnrollmentId:a,phoneSignInInfo:{recaptchaToken:i}})).phoneResponseInfo.sessionInfo}}else{const{sessionInfo:o}=await h$(t,{phoneNumber:s.phoneNumber,recaptchaToken:i});return o}}finally{n._reset()}}async function UB(t,e){await cw(te(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ro{constructor(e){this.providerId=Ro.PROVIDER_ID,this.auth=zn(e)}verifyPhoneNumber(e,n){return Zp(this.auth,e,te(n))}static credential(e,n){return Ds._fromVerification(e,n)}static credentialFromResult(e){const n=e;return Ro.credentialFromTaggedObject(n)}static credentialFromError(e){return Ro.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{phoneNumber:n,temporaryProof:r}=e;return n&&r?Ds._fromTokenResponse(n,r):null}}Ro.PROVIDER_ID="phone";Ro.PHONE_SIGN_IN_METHOD="phone";/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aa(t,e){return e?ki(e):(G(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yw extends zl{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return xi(e,this._buildIdpRequest())}_linkToIdToken(e,n){return xi(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return xi(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function VB(t){return RN(t.auth,new yw(t),t.bypassAuthState)}function $B(t){const{auth:e,user:n}=t;return G(n,e,"internal-error"),AN(n,new yw(t),t.bypassAuthState)}async function BB(t){const{auth:e,user:n}=t;return G(n,e,"internal-error"),cw(n,new yw(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XN{constructor(e,n,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}const u={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(u))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return VB;case"linkViaPopup":case"linkViaRedirect":return BB;case"reauthViaPopup":case"reauthViaRedirect":return $B;default:sr(this.auth,"internal-error")}}resolve(e){Li(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Li(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WB=new ph(2e3,1e4);async function jB(t,e,n){const r=zn(t);jl(t,e,ji);const i=aa(r,n);return new Ci(r,"signInViaPopup",e,i).executeNotNull()}async function zB(t,e,n){const r=te(t);jl(r.auth,e,ji);const i=aa(r.auth,n);return new Ci(r.auth,"reauthViaPopup",e,i,r).executeNotNull()}async function qB(t,e,n){const r=te(t);jl(r.auth,e,ji);const i=aa(r.auth,n);return new Ci(r.auth,"linkViaPopup",e,i,r).executeNotNull()}class Ci extends XN{constructor(e,n,r,i,s){super(e,n,i,s),this.provider=r,this.authWindow=null,this.pollId=null,Ci.currentPopupAction&&Ci.currentPopupAction.cancel(),Ci.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return G(e,this.auth,"internal-error"),e}async onExecution(){Li(this.filter.length===1,"Popup operations only handle one event");const e=Xp();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(fr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(fr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ci.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(fr(this.auth,"popup-closed-by-user"))},2e3);return}this.pollId=window.setTimeout(e,WB.get())};e()}}Ci.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GB="pendingRedirect",Jd=new Map;class HB extends XN{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Jd.get(this.auth._key());if(!e){try{const r=await YB(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Jd.set(this.auth._key(),e)}return this.bypassAuthState||Jd.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function YB(t,e){const n=ZN(e),r=JN(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}async function vw(t,e){return JN(t)._set(ZN(e),"true")}function KB(t,e){Jd.set(t._key(),e)}function JN(t){return ki(t._redirectPersistence)}function ZN(t){return Xd(GB,t.config.apiKey,t.name)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QB(t,e,n){return XB(t,e,n)}async function XB(t,e,n){const r=zn(t);jl(t,e,ji),await r._initializationPromise;const i=aa(r,n);return await vw(i,r),i._openRedirect(r,e,"signInViaRedirect")}function JB(t,e,n){return ZB(t,e,n)}async function ZB(t,e,n){const r=te(t);jl(r.auth,e,ji),await r.auth._initializationPromise;const i=aa(r.auth,n);await vw(i,r.auth);const s=await tD(r);return i._openRedirect(r.auth,e,"reauthViaRedirect",s)}function eW(t,e,n){return tW(t,e,n)}async function tW(t,e,n){const r=te(t);jl(r.auth,e,ji),await r.auth._initializationPromise;const i=aa(r.auth,n);await Gp(!1,r,e.providerId),await vw(i,r.auth);const s=await tD(r);return i._openRedirect(r.auth,e,"linkViaRedirect",s)}async function nW(t,e){return await zn(t)._initializationPromise,eD(t,e,!1)}async function eD(t,e,n=!1){const r=zn(t),i=aa(r,e),o=await new HB(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}async function tD(t){const e=Xp(`${t.uid}:::`);return t._redirectEventId=e,await t.auth._setRedirectUser(t),await t.auth._persistUserIfCurrent(t),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rW=10*60*1e3;class iW{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!sW(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!nD(e)){const i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(fr(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=rW&&this.cachedEventUids.clear(),this.cachedEventUids.has(kS(e))}saveEventToCache(e){this.cachedEventUids.add(kS(e)),this.lastProcessedEventTime=Date.now()}}function kS(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function nD({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function sW(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return nD(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oW(t,e={}){return an(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aW=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,lW=/^https?/;async function uW(t){if(t.config.emulator)return;const{authorizedDomains:e}=await oW(t);for(const n of e)try{if(cW(n))return}catch{}sr(t,"unauthorized-domain")}function cW(t){const e=Pc(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!lW.test(n))return!1;if(aW.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hW=new ph(3e4,6e4);function CS(){const t=Bt().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function dW(t){return new Promise((e,n)=>{var r,i,s;function o(){CS(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{CS(),n(fr(t,"network-request-failed"))},timeout:hW.get()})}if(!((i=(r=Bt().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=Bt().gapi)===null||s===void 0)&&s.load)o();else{const a=KN("iframefcb");return Bt()[a]=()=>{gapi.load?o():n(fr(t,"network-request-failed"))},YN(`https://apis.google.com/js/api.js?onload=${a}`).catch(u=>n(u))}}).catch(e=>{throw Zd=null,e})}let Zd=null;function fW(t){return Zd=Zd||dW(t),Zd}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pW=new ph(5e3,15e3),mW="__/auth/iframe",gW="emulator/auth/iframe",yW={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},vW=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function _W(t){const e=t.config;G(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?lw(e,gW):`https://${t.config.authDomain}/${mW}`,r={apiKey:e.apiKey,appName:t.name,v:Wl},i=vW.get(t.config.apiHost);i&&(r.eid=i);const s=t._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${oa(r).slice(1)}`}async function wW(t){const e=await fW(t),n=Bt().gapi;return G(n,t,"internal-error"),e.open({where:document.body,url:_W(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:yW,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const o=fr(t,"network-request-failed"),a=Bt().setTimeout(()=>{s(o)},pW.get());function u(){Bt().clearTimeout(a),i(r)}r.ping(u).then(u,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IW={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},EW=500,SW=600,TW="_blank",kW="http://localhost";class NS{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function CW(t,e,n,r=EW,i=SW){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const u=Object.assign(Object.assign({},IW),{width:r.toString(),height:i.toString(),top:s,left:o}),c=Ht().toLowerCase();n&&(a=gN(c)?TW:n),mN(c)&&(e=e||kW,u.scrollbars="yes");const d=Object.entries(u).reduce((g,[v,w])=>`${g}${v}=${w},`,"");if(KV(c)&&a!=="_self")return NW(e||"",a),new NS(null);const f=window.open(e||"",a,d);G(f,t,"popup-blocked");try{f.focus()}catch{}return new NS(f)}function NW(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DW="__/auth/handler",bW="emulator/auth/handler";function DS(t,e,n,r,i,s){G(t.config.authDomain,t,"auth-domain-config-required"),G(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Wl,eventId:i};if(e instanceof ji){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",uv(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[u,c]of Object.entries(s||{}))o[u]=c}if(e instanceof Gl){const u=e.getScopes().filter(c=>c!=="");u.length>0&&(o.scopes=u.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const u of Object.keys(a))a[u]===void 0&&delete a[u];return`${xW(t)}?${oa(a).slice(1)}`}function xW({config:t}){return t.emulator?lw(t,bW):`https://${t.authDomain}/${DW}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hg="webStorageSupport";class AW{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=pw,this._completeRedirectFn=eD,this._overrideRedirectResult=KB}async _openPopup(e,n,r,i){var s;Li((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const o=DS(e,n,r,Pc(),i);return CW(e,o,Xp())}async _openRedirect(e,n,r,i){return await this._originValidation(e),uB(DS(e,n,r,Pc(),i)),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(Li(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await wW(e),r=new iW(e);return n.register("authEvent",i=>(G(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Hg,{type:Hg},i=>{var s;const o=(s=i==null?void 0:i[0])===null||s===void 0?void 0:s[Hg];o!==void 0&&n(!!o),sr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=uW(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return IN()||uw()||zp()}}const rD=AW;class RW{constructor(e){this.factorId=e}_process(e,n,r){switch(n.type){case"enroll":return this._finalizeEnroll(e,n.credential,r);case"signin":return this._finalizeSignIn(e,n.credential);default:return Jr("unexpected MultiFactorSessionType")}}}class _w extends RW{constructor(e){super("phone"),this.credential=e}static _fromCredential(e){return new _w(e)}_finalizeEnroll(e,n,r){return tB(e,{idToken:n,displayName:r,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(e,n){return _B(e,{mfaPendingCredential:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}class iD{constructor(){}static assertion(e){return _w._fromCredential(e)}}iD.FACTOR_ID="phone";var bS="@firebase/auth",xS="0.21.3";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OW{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){G(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PW(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}function MW(t){Wo(new Ps("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),{apiKey:s,authDomain:o}=r.options;return((a,u)=>{G(s&&!s.includes(":"),"invalid-api-key",{appName:a.name}),G(!(o!=null&&o.includes(":")),"argument-error",{appName:a.name});const c={apiKey:s,authDomain:o,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:EN(t)},d=new ZV(a,u,c);return OV(d,n),d})(r,i)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Wo(new Ps("auth-internal",e=>{const n=zn(e.getProvider("auth").getImmediate());return(r=>new OW(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),ri(bS,xS,PW(t)),ri(bS,xS,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LW=5*60,FW=GC("authIdTokenMaxAge")||LW;let AS=null;const UW=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>FW)return;const i=n==null?void 0:n.token;AS!==i&&(AS=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function sD(t=iw()){const e=Bl(t,"auth");if(e.isInitialized())return e.getImmediate();const n=aN(t,{popupRedirectResolver:rD,persistence:[HN,WN,pw]}),r=GC("authTokenSyncURL");if(r){const s=UW(r);VN(n,s,()=>s(n.currentUser)),UN(n,o=>s(o))}const i=zC("auth");return i&&SN(n,`http://${i}`),n}MW("Browser");const VW=Object.freeze(Object.defineProperty({__proto__:null,ActionCodeOperation:bV,ActionCodeURL:ql,AuthCredential:zl,AuthErrorCodes:RV,EmailAuthCredential:vl,EmailAuthProvider:Ys,FacebookAuthProvider:_i,FactorId:kV,GithubAuthProvider:Ii,GoogleAuthProvider:wi,OAuthCredential:si,OAuthProvider:rc,OperationType:DV,PhoneAuthCredential:Ds,PhoneAuthProvider:Ro,PhoneMultiFactorGenerator:iD,ProviderId:CV,RecaptchaVerifier:OB,SAMLAuthProvider:Vf,SignInMethod:NV,TwitterAuthProvider:Ei,applyActionCode:C$,beforeAuthStateChanged:VN,browserLocalPersistence:WN,browserPopupRedirectResolver:rD,browserSessionPersistence:pw,checkActionCode:MN,confirmPasswordReset:k$,connectAuthEmulator:SN,createUserWithEmailAndPassword:D$,debugErrorMap:AV,deleteUser:J$,fetchSignInMethodsForEmail:P$,getAdditionalUserInfo:G$,getAuth:sD,getIdToken:WV,getIdTokenResult:hN,getMultiFactorResolver:Z$,getRedirectResult:nW,inMemoryPersistence:pv,indexedDBLocalPersistence:HN,initializeAuth:aN,isSignInWithEmailLink:A$,linkWithCredential:ON,linkWithPhoneNumber:LB,linkWithPopup:qB,linkWithRedirect:eW,multiFactor:rB,onAuthStateChanged:Y$,onIdTokenChanged:UN,parseActionCodeURL:v$,prodErrorMap:iN,reauthenticateWithCredential:PN,reauthenticateWithPhoneNumber:FB,reauthenticateWithPopup:zB,reauthenticateWithRedirect:JB,reload:fN,sendEmailVerification:M$,sendPasswordResetEmail:T$,sendSignInLinkToEmail:x$,setPersistence:H$,signInAnonymously:DN,signInWithCredential:Hp,signInWithCustomToken:S$,signInWithEmailAndPassword:b$,signInWithEmailLink:R$,signInWithPhoneNumber:MB,signInWithPopup:jB,signInWithRedirect:QB,signOut:X$,unlink:I$,updateCurrentUser:Q$,updateEmail:V$,updatePassword:$$,updatePhoneNumber:UB,updateProfile:U$,useDeviceLanguage:K$,verifyBeforeUpdateEmail:L$,verifyPasswordResetCode:N$},Symbol.toStringTag,{value:"Module"})),RS="@firebase/database",OS="0.14.3";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let oD="";function $W(t){oD=t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BW{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,n){n==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),jt(n))}get(e){const n=this.domStorage_.getItem(this.prefixedName_(e));return n==null?null:Rc(n)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WW{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,n){n==null?delete this.cache_[e]:this.cache_[e]=n}get(e){return ai(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aD=function(t){try{if(typeof window<"u"&&typeof window[t]<"u"){const e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new BW(e)}}catch{}return new WW},Co=aD("localStorage"),gv=aD("sessionStorage");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const il=new Wp("@firebase/database"),jW=function(){let t=1;return function(){return t++}}(),lD=function(t){const e=g2(t),n=new d2;n.update(e);const r=n.digest();return tw.encodeByteArray(r)},gh=function(...t){let e="";for(let n=0;n<t.length;n++){const r=t[n];Array.isArray(r)||r&&typeof r=="object"&&typeof r.length=="number"?e+=gh.apply(null,r):typeof r=="object"?e+=jt(r):e+=r,e+=" "}return e};let Oo=null,PS=!0;const zW=function(t,e){j(!e||t===!0||t===!1,"Can't turn on custom loggers persistently."),t===!0?(il.logLevel=Fe.VERBOSE,Oo=il.log.bind(il),e&&gv.set("logging_enabled",!0)):typeof t=="function"?Oo=t:(Oo=null,gv.remove("logging_enabled"))},dn=function(...t){if(PS===!0&&(PS=!1,Oo===null&&gv.get("logging_enabled")===!0&&zW(!0)),Oo){const e=gh.apply(null,t);Oo(e)}},yh=function(t){return function(...e){dn(t,...e)}},yv=function(...t){const e="FIREBASE INTERNAL ERROR: "+gh(...t);il.error(e)},Ui=function(...t){const e=`FIREBASE FATAL ERROR: ${gh(...t)}`;throw il.error(e),new Error(e)},Vn=function(...t){const e="FIREBASE WARNING: "+gh(...t);il.warn(e)},qW=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&Vn("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},ww=function(t){return typeof t=="number"&&(t!==t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},GW=function(t){if(document.readyState==="complete")t();else{let e=!1;const n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}e||(e=!0,t())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&n()}),window.attachEvent("onload",n))}},_l="[MIN_NAME]",jo="[MAX_NAME]",la=function(t,e){if(t===e)return 0;if(t===_l||e===jo)return-1;if(e===_l||t===jo)return 1;{const n=MS(t),r=MS(e);return n!==null?r!==null?n-r===0?t.length-e.length:n-r:-1:r!==null?1:t<e?-1:1}},HW=function(t,e){return t===e?0:t<e?-1:1},ku=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+jt(e))},Iw=function(t){if(typeof t!="object"||t===null)return jt(t);const e=[];for(const r in t)e.push(r);e.sort();let n="{";for(let r=0;r<e.length;r++)r!==0&&(n+=","),n+=jt(e[r]),n+=":",n+=Iw(t[e[r]]);return n+="}",n},uD=function(t,e){const n=t.length;if(n<=e)return[t];const r=[];for(let i=0;i<n;i+=e)i+e>n?r.push(t.substring(i,n)):r.push(t.substring(i,i+e));return r};function yn(t,e){for(const n in t)t.hasOwnProperty(n)&&e(n,t[n])}const cD=function(t){j(!ww(t),"Invalid JSON number");const e=11,n=52,r=(1<<e-1)-1;let i,s,o,a,u;t===0?(s=0,o=0,i=1/t===-1/0?1:0):(i=t<0,t=Math.abs(t),t>=Math.pow(2,1-r)?(a=Math.min(Math.floor(Math.log(t)/Math.LN2),r),s=a+r,o=Math.round(t*Math.pow(2,n-a)-Math.pow(2,n))):(s=0,o=Math.round(t/Math.pow(2,1-r-n))));const c=[];for(u=n;u;u-=1)c.push(o%2?1:0),o=Math.floor(o/2);for(u=e;u;u-=1)c.push(s%2?1:0),s=Math.floor(s/2);c.push(i?1:0),c.reverse();const d=c.join("");let f="";for(u=0;u<64;u+=8){let g=parseInt(d.substr(u,8),2).toString(16);g.length===1&&(g="0"+g),f=f+g}return f.toLowerCase()},YW=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},KW=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function QW(t,e){let n="Unknown Error";t==="too_big"?n="The data requested exceeds the maximum size that can be accessed with a single request.":t==="permission_denied"?n="Client doesn't have permission to access the desired data.":t==="unavailable"&&(n="The service is unavailable");const r=new Error(t+" at "+e._path.toString()+": "+n);return r.code=t.toUpperCase(),r}const XW=new RegExp("^-?(0*)\\d{1,10}$"),JW=-2147483648,ZW=2147483647,MS=function(t){if(XW.test(t)){const e=Number(t);if(e>=JW&&e<=ZW)return e}return null},Hl=function(t){try{t()}catch(e){setTimeout(()=>{const n=e.stack||"";throw Vn("Exception was thrown by user callback.",n),e},Math.floor(0))}},ej=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},ic=function(t,e){const n=setTimeout(t,e);return typeof n=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(n):typeof n=="object"&&n.unref&&n.unref(),n};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tj{constructor(e,n){this.appName_=e,this.appCheckProvider=n,this.appCheck=n==null?void 0:n.getImmediate({optional:!0}),this.appCheck||n==null||n.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((n,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){var n;(n=this.appCheckProvider)===null||n===void 0||n.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){Vn(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nj{constructor(e,n,r){this.appName_=e,this.firebaseOptions_=n,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(n=>n&&n.code==="auth/token-not-initialized"?(dn("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(n=>n.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(n=>n.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Vn(e)}}class sl{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}sl.OWNER="owner";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ew="5",hD="v",dD="s",fD="r",pD="f",mD=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,gD="ls",yD="p",vv="ac",vD="websocket",_D="long_polling";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wD{constructor(e,n,r,i,s=!1,o="",a=!1,u=!1){this.secure=n,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=s,this.persistenceKey=o,this.includeNamespaceInQueryParams=a,this.isUsingEmulator=u,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Co.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&Co.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",n=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${n}`}}function rj(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams}function ID(t,e,n){j(typeof e=="string","typeof type must == string"),j(typeof n=="object","typeof params must == object");let r;if(e===vD)r=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else if(e===_D)r=(t.secure?"https://":"http://")+t.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);rj(t)&&(n.ns=t.namespace);const i=[];return yn(n,(s,o)=>{i.push(s+"="+o)}),r+i.join("&")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ij{constructor(){this.counters_={}}incrementCounter(e,n=1){ai(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=n}get(){return KU(this.counters_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yg={},Kg={};function Sw(t){const e=t.toString();return Yg[e]||(Yg[e]=new ij),Yg[e]}function sj(t,e){const n=t.toString();return Kg[n]||(Kg[n]=e()),Kg[n]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oj{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,n){this.closeAfterResponse=e,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,n){for(this.pendingResponses[e]=n;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&Hl(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LS="start",aj="close",lj="pLPCommand",uj="pRTLPCB",ED="id",SD="pw",TD="ser",cj="cb",hj="seg",dj="ts",fj="d",pj="dframe",kD=1870,CD=30,mj=kD-CD,gj=25e3,yj=3e4;class Ga{constructor(e,n,r,i,s,o,a){this.connId=e,this.repoInfo=n,this.applicationId=r,this.appCheckToken=i,this.authToken=s,this.transportSessionId=o,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=yh(e),this.stats_=Sw(n),this.urlFn=u=>(this.appCheckToken&&(u[vv]=this.appCheckToken),ID(n,_D,u))}open(e,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new oj(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(yj)),GW(()=>{if(this.isClosed_)return;this.scriptTagHolder=new Tw((...s)=>{const[o,a,u,c,d]=s;if(this.incrementIncomingBytes_(s),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,o===LS)this.id=a,this.password=u;else if(o===aj)a?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(a,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+o)},(...s)=>{const[o,a]=s;this.incrementIncomingBytes_(s),this.myPacketOrderer.handleResponse(o,a)},()=>{this.onClosed_()},this.urlFn);const r={};r[LS]="t",r[TD]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(r[cj]=this.scriptTagHolder.uniqueCallbackIdentifier),r[hD]=Ew,this.transportSessionId&&(r[dD]=this.transportSessionId),this.lastSessionId&&(r[gD]=this.lastSessionId),this.applicationId&&(r[yD]=this.applicationId),this.appCheckToken&&(r[vv]=this.appCheckToken),typeof location<"u"&&location.hostname&&mD.test(location.hostname)&&(r[fD]=pD);const i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){Ga.forceAllow_=!0}static forceDisallow(){Ga.forceDisallow_=!0}static isAvailable(){return Ga.forceAllow_?!0:!Ga.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!YW()&&!KW()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const n=jt(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const r=WC(n),i=uD(r,mj);for(let s=0;s<i.length;s++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[s]),this.curSegmentNum++}addDisconnectPingFrame(e,n){this.myDisconnFrame=document.createElement("iframe");const r={};r[pj]="t",r[ED]=e,r[SD]=n,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const n=jt(e).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}}class Tw{constructor(e,n,r,i){this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=jW(),window[lj+this.uniqueCallbackIdentifier]=e,window[uj+this.uniqueCallbackIdentifier]=n,this.myIFrame=Tw.createIFrame_();let s="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(s='<script>document.domain="'+document.domain+'";<\/script>');const o="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(a){dn("frame writing exception"),a.stack&&dn(a.stack),dn(a)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||dn("No IE domain setting required")}catch{const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,n){for(this.myID=e,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e[ED]=this.myID,e[SD]=this.myPW,e[TD]=this.currentSerial;let n=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+CD+r.length<=kD;){const o=this.pendingSegs.shift();r=r+"&"+hj+i+"="+o.seg+"&"+dj+i+"="+o.ts+"&"+fj+i+"="+o.d,i++}return n=n+r,this.addLongPollTag_(n,this.currentSerial),!0}else return!1}enqueueSegment(e,n,r){this.pendingSegs.push({seg:e,ts:n,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,n){this.outstandingRequests.add(n);const r=()=>{this.outstandingRequests.delete(n),this.newRequest_()},i=setTimeout(r,Math.floor(gj)),s=()=>{clearTimeout(i),r()};this.addTag(e,s)}addTag(e,n){setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const i=r.readyState;(!i||i==="loaded"||i==="complete")&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),n())},r.onerror=()=>{dn("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vj=16384,_j=45e3;let jf=null;typeof MozWebSocket<"u"?jf=MozWebSocket:typeof WebSocket<"u"&&(jf=WebSocket);class Lr{constructor(e,n,r,i,s,o,a){this.connId=e,this.applicationId=r,this.appCheckToken=i,this.authToken=s,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=yh(this.connId),this.stats_=Sw(n),this.connURL=Lr.connectionURL_(n,o,a,i,r),this.nodeAdmin=n.nodeAdmin}static connectionURL_(e,n,r,i,s){const o={};return o[hD]=Ew,typeof location<"u"&&location.hostname&&mD.test(location.hostname)&&(o[fD]=pD),n&&(o[dD]=n),r&&(o[gD]=r),i&&(o[vv]=i),s&&(o[yD]=s),ID(e,vD,o)}open(e,n){this.onDisconnect=n,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Co.set("previous_websocket_failure",!0);try{let r;KC(),this.mySock=new jf(this.connURL,[],r)}catch(r){this.log_("Error instantiating WebSocket.");const i=r.message||r.data;i&&this.log_(i),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=r=>{this.handleIncomingFrame(r)},this.mySock.onerror=r=>{this.log_("WebSocket error.  Closing connection.");const i=r.message||r.data;i&&this.log_(i),this.onClosed_()}}start(){}static forceDisallow(){Lr.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator<"u"&&navigator.userAgent){const n=/Android ([0-9]{0,}\.[0-9]{0,})/,r=navigator.userAgent.match(n);r&&r.length>1&&parseFloat(r[1])<4.4&&(e=!0)}return!e&&jf!==null&&!Lr.forceDisallow_}static previouslyFailed(){return Co.isInMemoryStorage||Co.get("previous_websocket_failure")===!0}markConnectionHealthy(){Co.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const n=this.frames.join("");this.frames=null;const r=Rc(n);this.onMessage(r)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(j(this.frames===null,"We already have a frame buffer"),e.length<=6){const n=Number(e);if(!isNaN(n))return this.handleNewFrameCount_(n),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(this.mySock===null)return;const n=e.data;if(this.bytesReceived+=n.length,this.stats_.incrementCounter("bytes_received",n.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(n);else{const r=this.extractFrameCount_(n);r!==null&&this.appendFrame_(r)}}send(e){this.resetKeepAlive();const n=jt(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const r=uD(n,vj);r.length>1&&this.sendString_(String(r.length));for(let i=0;i<r.length;i++)this.sendString_(r[i])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(_j))}sendString_(e){try{this.mySock.send(e)}catch(n){this.log_("Exception thrown from WebSocket.send():",n.message||n.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}Lr.responsesRequiredToBeHealthy=2;Lr.healthyTimeout=3e4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uc{constructor(e){this.initTransports_(e)}static get ALL_TRANSPORTS(){return[Ga,Lr]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(e){const n=Lr&&Lr.isAvailable();let r=n&&!Lr.previouslyFailed();if(e.webSocketOnly&&(n||Vn("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[Lr];else{const i=this.transports_=[];for(const s of Uc.ALL_TRANSPORTS)s&&s.isAvailable()&&i.push(s);Uc.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}Uc.globalTransportInitialized_=!1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wj=6e4,Ij=5e3,Ej=10*1024,Sj=100*1024,Qg="t",FS="d",Tj="s",US="r",kj="e",VS="o",$S="a",BS="n",WS="p",Cj="h";class Nj{constructor(e,n,r,i,s,o,a,u,c,d){this.id=e,this.repoInfo_=n,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=s,this.onMessage_=o,this.onReady_=a,this.onDisconnect_=u,this.onKill_=c,this.lastSessionId=d,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=yh("c:"+this.id+":"),this.transportManager_=new Uc(n),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,r)},Math.floor(0));const i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=ic(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>Sj?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>Ej?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return n=>{e===this.conn_?this.onConnectionLost_(n):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return n=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(n):e===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(e){const n={t:"d",d:e};this.sendData_(n)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(Qg in e){const n=e[Qg];n===$S?this.upgradeIfSecondaryHealthy_():n===US?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):n===VS&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const n=ku("t",e),r=ku("d",e);if(n==="c")this.onSecondaryControl_(r);else if(n==="d")this.pendingDataMessages.push(r);else throw new Error("Unknown protocol layer: "+n)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:WS,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:$S,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:BS,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const n=ku("t",e),r=ku("d",e);n==="c"?this.onControl_(r):n==="d"&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const n=ku(Qg,e);if(FS in e){const r=e[FS];if(n===Cj){const i=Object.assign({},r);this.repoInfo_.isUsingEmulator&&(i.h=this.repoInfo_.host),this.onHandshake_(i)}else if(n===BS){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else n===Tj?this.onConnectionShutdown_(r):n===US?this.onReset_(r):n===kj?yv("Server Error: "+r):n===VS?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):yv("Unknown control packet command: "+n)}}onHandshake_(e){const n=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),Ew!==r&&Vn("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),ic(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(wj))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,n){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):ic(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(Ij))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:WS,d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Co.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ND{put(e,n,r,i){}merge(e,n,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,n,r){}onDisconnectMerge(e,n,r){}onDisconnectCancel(e,n){}reportStats(e){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DD{constructor(e){this.allowedEvents_=e,this.listeners_={},j(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...n){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,n)}}on(e,n,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:n,context:r});const i=this.getInitialEvent(e);i&&n.apply(r,i)}off(e,n,r){this.validateEventType_(e);const i=this.listeners_[e]||[];for(let s=0;s<i.length;s++)if(i[s].callback===n&&(!r||r===i[s].context)){i.splice(s,1);return}}validateEventType_(e){j(this.allowedEvents_.find(n=>n===e),"Unknown event: "+e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zf extends DD{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!nw()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new zf}getInitialEvent(e){return j(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jS=32,zS=768;class He{constructor(e,n){if(n===void 0){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=n}toString(){let e="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)this.pieces_[n]!==""&&(e+="/"+this.pieces_[n]);return e||"/"}}function $e(){return new He("")}function Ce(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function Ms(t){return t.pieces_.length-t.pieceNum_}function Qe(t){let e=t.pieceNum_;return e<t.pieces_.length&&e++,new He(t.pieces_,e)}function kw(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function Dj(t){let e="";for(let n=t.pieceNum_;n<t.pieces_.length;n++)t.pieces_[n]!==""&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}function Vc(t,e=0){return t.pieces_.slice(t.pieceNum_+e)}function bD(t){if(t.pieceNum_>=t.pieces_.length)return null;const e=[];for(let n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new He(e,0)}function St(t,e){const n=[];for(let r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);if(e instanceof He)for(let r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);else{const r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&n.push(r[i])}return new He(n,0)}function De(t){return t.pieceNum_>=t.pieces_.length}function Ln(t,e){const n=Ce(t),r=Ce(e);if(n===null)return e;if(n===r)return Ln(Qe(t),Qe(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function bj(t,e){const n=Vc(t,0),r=Vc(e,0);for(let i=0;i<n.length&&i<r.length;i++){const s=la(n[i],r[i]);if(s!==0)return s}return n.length===r.length?0:n.length<r.length?-1:1}function Cw(t,e){if(Ms(t)!==Ms(e))return!1;for(let n=t.pieceNum_,r=e.pieceNum_;n<=t.pieces_.length;n++,r++)if(t.pieces_[n]!==e.pieces_[r])return!1;return!0}function Tr(t,e){let n=t.pieceNum_,r=e.pieceNum_;if(Ms(t)>Ms(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[r])return!1;++n,++r}return!0}class xj{constructor(e,n){this.errorPrefix_=n,this.parts_=Vc(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=Bp(this.parts_[r]);xD(this)}}function Aj(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=Bp(e),xD(t)}function Rj(t){const e=t.parts_.pop();t.byteLength_-=Bp(e),t.parts_.length>0&&(t.byteLength_-=1)}function xD(t){if(t.byteLength_>zS)throw new Error(t.errorPrefix_+"has a key path longer than "+zS+" bytes ("+t.byteLength_+").");if(t.parts_.length>jS)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+jS+") or object contains a cycle "+go(t))}function go(t){return t.parts_.length===0?"":"in property '"+t.parts_.join(".")+"'"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nw extends DD{constructor(){super(["visible"]);let e,n;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(n="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(n="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(n="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(n="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new Nw}getInitialEvent(e){return j(e==="visible","Unknown event type: "+e),[this.visible_]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cu=1e3,Oj=60*5*1e3,qS=30*1e3,Pj=1.3,Mj=3e4,Lj="server_kill",GS=3;class Ai extends ND{constructor(e,n,r,i,s,o,a,u){if(super(),this.repoInfo_=e,this.applicationId_=n,this.onDataUpdate_=r,this.onConnectStatus_=i,this.onServerInfoUpdate_=s,this.authTokenProvider_=o,this.appCheckTokenProvider_=a,this.authOverride_=u,this.id=Ai.nextPersistentConnectionId_++,this.log_=yh("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Cu,this.maxReconnectDelay_=Oj,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,u&&!KC())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");Nw.getInstance().on("visible",this.onVisible_,this),e.host.indexOf("fblocal")===-1&&zf.getInstance().on("online",this.onOnline_,this)}sendRequest(e,n,r){const i=++this.requestNumber_,s={r:i,a:e,b:n};this.log_(jt(s)),j(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(s),r&&(this.requestCBHash_[i]=r)}get(e){this.initConnection_();const n=new dh,i={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:o=>{const a=o.d;o.s==="ok"?n.resolve(a):n.reject(a)}};this.outstandingGets_.push(i),this.outstandingGetCount_++;const s=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(s),n.promise}listen(e,n,r,i){this.initConnection_();const s=e._queryIdentifier,o=e._path.toString();this.log_("Listen called for "+o+" "+s),this.listens.has(o)||this.listens.set(o,new Map),j(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),j(!this.listens.get(o).has(s),"listen() called twice for same path/queryId.");const a={onComplete:i,hashFn:n,query:e,tag:r};this.listens.get(o).set(s,a),this.connected_&&this.sendListen_(a)}sendGet_(e){const n=this.outstandingGets_[e];this.sendRequest("g",n.request,r=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),n.onComplete&&n.onComplete(r)})}sendListen_(e){const n=e.query,r=n._path.toString(),i=n._queryIdentifier;this.log_("Listen on "+r+" for "+i);const s={p:r},o="q";e.tag&&(s.q=n._queryObject,s.t=e.tag),s.h=e.hashFn(),this.sendRequest(o,s,a=>{const u=a.d,c=a.s;Ai.warnOnListenWarnings_(u,n),(this.listens.get(r)&&this.listens.get(r).get(i))===e&&(this.log_("listen response",a),c!=="ok"&&this.removeListen_(r,i),e.onComplete&&e.onComplete(c,u))})}static warnOnListenWarnings_(e,n){if(e&&typeof e=="object"&&ai(e,"w")){const r=gl(e,"w");if(Array.isArray(r)&&~r.indexOf("no_index")){const i='".indexOn": "'+n._queryParams.getIndex().toString()+'"',s=n._path.toString();Vn(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${i} at ${s} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&e.length===40||h2(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=qS)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,n=c2(e)?"auth":"gauth",r={cred:e};this.authOverride_===null?r.noauth=!0:typeof this.authOverride_=="object"&&(r.authvar=this.authOverride_),this.sendRequest(n,r,i=>{const s=i.s,o=i.d||"error";this.authToken_===e&&(s==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(s,o))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const n=e.s,r=e.d||"error";n==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(n,r)})}unlisten(e,n){const r=e._path.toString(),i=e._queryIdentifier;this.log_("Unlisten called for "+r+" "+i),j(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(r,i)&&this.connected_&&this.sendUnlisten_(r,i,e._queryObject,n)}sendUnlisten_(e,n,r,i){this.log_("Unlisten on "+e+" for "+n);const s={p:e},o="n";i&&(s.q=r,s.t=i),this.sendRequest(o,s)}onDisconnectPut(e,n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,n,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:n,onComplete:r})}onDisconnectMerge(e,n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,n,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:n,onComplete:r})}onDisconnectCancel(e,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:n})}sendOnDisconnect_(e,n,r,i){const s={p:n,d:r};this.log_("onDisconnect "+e,s),this.sendRequest(e,s,o=>{i&&setTimeout(()=>{i(o.s,o.d)},Math.floor(0))})}put(e,n,r,i){this.putInternal("p",e,n,r,i)}merge(e,n,r,i){this.putInternal("m",e,n,r,i)}putInternal(e,n,r,i,s){this.initConnection_();const o={p:n,d:r};s!==void 0&&(o.h=s),this.outstandingPuts_.push({action:e,request:o,onComplete:i}),this.outstandingPutCount_++;const a=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(a):this.log_("Buffering put: "+n)}sendPut_(e){const n=this.outstandingPuts_[e].action,r=this.outstandingPuts_[e].request,i=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(n,r,s=>{this.log_(n+" response",s),delete this.outstandingPuts_[e],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),i&&i(s.s,s.d)})}reportStats(e){if(this.connected_){const n={c:e};this.log_("reportStats",n),this.sendRequest("s",n,r=>{if(r.s!=="ok"){const s=r.d;this.log_("reportStats","Error sending stats: "+s)}})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+jt(e));const n=e.r,r=this.requestCBHash_[n];r&&(delete this.requestCBHash_[n],r(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,n){this.log_("handleServerMessage",e,n),e==="d"?this.onDataUpdate_(n.p,n.d,!1,n.t):e==="m"?this.onDataUpdate_(n.p,n.d,!0,n.t):e==="c"?this.onListenRevoked_(n.p,n.q):e==="ac"?this.onAuthRevoked_(n.s,n.d):e==="apc"?this.onAppCheckRevoked_(n.s,n.d):e==="sd"?this.onSecurityDebugPacket_(n):yv("Unrecognized action received from server: "+jt(e)+`
Are you using the latest client?`)}onReady_(e,n){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(e),this.lastSessionId=n,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){j(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Cu,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=Cu,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>Mj&&(this.reconnectDelay_=Cu),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const e=new Date().getTime()-this.lastConnectionAttemptTime_;let n=Math.max(0,this.reconnectDelay_-e);n=Math.random()*n,this.log_("Trying to reconnect in "+n+"ms"),this.scheduleConnect_(n),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*Pj)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),r=this.onRealtimeDisconnect_.bind(this),i=this.id+":"+Ai.nextConnectionId_++,s=this.lastSessionId;let o=!1,a=null;const u=function(){a?a.close():(o=!0,r())},c=function(f){j(a,"sendRequest call when we're not connected not allowed."),a.sendRequest(f)};this.realtime_={close:u,sendRequest:c};const d=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[f,g]=await Promise.all([this.authTokenProvider_.getToken(d),this.appCheckTokenProvider_.getToken(d)]);o?dn("getToken() completed but was canceled"):(dn("getToken() completed. Creating connection."),this.authToken_=f&&f.accessToken,this.appCheckToken_=g&&g.token,a=new Nj(i,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,n,r,v=>{Vn(v+" ("+this.repoInfo_.toString()+")"),this.interrupt(Lj)},s))}catch(f){this.log_("Failed to get token: "+f),o||(this.repoInfo_.nodeAdmin&&Vn(f),u())}}}interrupt(e){dn("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){dn("Resuming connection for reason: "+e),delete this.interruptReasons_[e],uv(this.interruptReasons_)&&(this.reconnectDelay_=Cu,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const n=e-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:n})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const n=this.outstandingPuts_[e];n&&"h"in n.request&&n.queued&&(n.onComplete&&n.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(e,n){let r;n?r=n.map(s=>Iw(s)).join("$"):r="default";const i=this.removeListen_(e,r);i&&i.onComplete&&i.onComplete("permission_denied")}removeListen_(e,n){const r=new He(e).toString();let i;if(this.listens.has(r)){const s=this.listens.get(r);i=s.get(n),s.delete(n),s.size===0&&this.listens.delete(r)}else i=void 0;return i}onAuthRevoked_(e,n){dn("Auth token revoked: "+e+"/"+n),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(e==="invalid_token"||e==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=GS&&(this.reconnectDelay_=qS,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,n){dn("App check token revoked: "+e+"/"+n),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(e==="invalid_token"||e==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=GS&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const n of e.values())this.sendListen_(n);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let n="js";e["sdk."+n+"."+oD.replace(/\./g,"-")]=1,nw()?e["framework.cordova"]=1:YC()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=zf.getInstance().currentlyOnline();return uv(this.interruptReasons_)&&e}}Ai.nextPersistentConnectionId_=0;Ai.nextConnectionId_=0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ne{constructor(e,n){this.name=e,this.node=n}static Wrap(e,n){return new Ne(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class em{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,n){const r=new Ne(_l,e),i=new Ne(_l,n);return this.compare(r,i)!==0}minPost(){return Ne.MIN}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let kd;class AD extends em{static get __EMPTY_NODE(){return kd}static set __EMPTY_NODE(e){kd=e}compare(e,n){return la(e.name,n.name)}isDefinedOn(e){throw $l("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,n){return!1}minPost(){return Ne.MIN}maxPost(){return new Ne(jo,kd)}makePost(e,n){return j(typeof e=="string","KeyIndex indexValue must always be a string."),new Ne(e,kd)}toString(){return".key"}}const ol=new AD;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cd{constructor(e,n,r,i,s=null){this.isReverse_=i,this.resultGenerator_=s,this.nodeStack_=[];let o=1;for(;!e.isEmpty();)if(e=e,o=n?r(e.key,n):1,i&&(o*=-1),o<0)this.isReverse_?e=e.left:e=e.right;else if(o===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),n;if(this.resultGenerator_?n=this.resultGenerator_(e.key,e.value):n={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}class tn{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??tn.RED,this.left=i??Jn.EMPTY_NODE,this.right=s??Jn.EMPTY_NODE}copy(e,n,r,i,s){return new tn(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return s<0?i=i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i=i.copy(null,n,null,null,null):i=i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp_()}removeMin_(){if(this.left.isEmpty())return Jn.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,n){let r,i;if(r=this,n(e,r.key)<0)!r.left.isEmpty()&&!r.left.isRed_()&&!r.left.left.isRed_()&&(r=r.moveRedLeft_()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed_()&&(r=r.rotateRight_()),!r.right.isEmpty()&&!r.right.isRed_()&&!r.right.left.isRed_()&&(r=r.moveRedRight_()),n(e,r.key)===0){if(r.right.isEmpty())return Jn.EMPTY_NODE;i=r.right.min_(),r=r.copy(i.key,i.value,null,null,r.right.removeMin_())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,tn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,tn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}tn.RED=!0;tn.BLACK=!1;class Fj{copy(e,n,r,i,s){return this}insert(e,n,r){return new tn(e,n,null)}remove(e,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}class Jn{constructor(e,n=Jn.EMPTY_NODE){this.comparator_=e,this.root_=n}insert(e,n){return new Jn(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,tn.BLACK,null,null))}remove(e){return new Jn(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,tn.BLACK,null,null))}get(e){let n,r=this.root_;for(;!r.isEmpty();){if(n=this.comparator_(e,r.key),n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}getPredecessorKey(e){let n,r=this.root_,i=null;for(;!r.isEmpty();)if(n=this.comparator_(e,r.key),n===0){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}else n<0?r=r.left:n>0&&(i=r,r=r.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new Cd(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,n){return new Cd(this.root_,e,this.comparator_,!1,n)}getReverseIteratorFrom(e,n){return new Cd(this.root_,e,this.comparator_,!0,n)}getReverseIterator(e){return new Cd(this.root_,null,this.comparator_,!0,e)}}Jn.EMPTY_NODE=new Fj;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uj(t,e){return la(t.name,e.name)}function Dw(t,e){return la(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let _v;function Vj(t){_v=t}const RD=function(t){return typeof t=="number"?"number:"+cD(t):"string:"+t},OD=function(t){if(t.isLeafNode()){const e=t.val();j(typeof e=="string"||typeof e=="number"||typeof e=="object"&&ai(e,".sv"),"Priority must be a string or number.")}else j(t===_v||t.isEmpty(),"priority of unexpected type.");j(t===_v||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let HS;class Jt{constructor(e,n=Jt.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=n,this.lazyHash_=null,j(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),OD(this.priorityNode_)}static set __childrenNodeConstructor(e){HS=e}static get __childrenNodeConstructor(){return HS}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new Jt(this.value_,e)}getImmediateChild(e){return e===".priority"?this.priorityNode_:Jt.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return De(e)?this:Ce(e)===".priority"?this.priorityNode_:Jt.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,n){return null}updateImmediateChild(e,n){return e===".priority"?this.updatePriority(n):n.isEmpty()&&e!==".priority"?this:Jt.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)}updateChild(e,n){const r=Ce(e);return r===null?n:n.isEmpty()&&r!==".priority"?this:(j(r!==".priority"||Ms(e)===1,".priority must be the last token in a path"),this.updateImmediateChild(r,Jt.__childrenNodeConstructor.EMPTY_NODE.updateChild(Qe(e),n)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,n){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+RD(this.priorityNode_.val())+":");const n=typeof this.value_;e+=n+":",n==="number"?e+=cD(this.value_):e+=this.value_,this.lazyHash_=lD(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===Jt.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof Jt.__childrenNodeConstructor?-1:(j(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const n=typeof e.value_,r=typeof this.value_,i=Jt.VALUE_TYPE_ORDER.indexOf(n),s=Jt.VALUE_TYPE_ORDER.indexOf(r);return j(i>=0,"Unknown leaf type: "+n),j(s>=0,"Unknown leaf type: "+r),i===s?r==="object"?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:s-i}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const n=e;return this.value_===n.value_&&this.priorityNode_.equals(n.priorityNode_)}else return!1}}Jt.VALUE_TYPE_ORDER=["object","boolean","number","string"];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let PD,MD;function $j(t){PD=t}function Bj(t){MD=t}class Wj extends em{compare(e,n){const r=e.node.getPriority(),i=n.node.getPriority(),s=r.compareTo(i);return s===0?la(e.name,n.name):s}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,n){return!e.getPriority().equals(n.getPriority())}minPost(){return Ne.MIN}maxPost(){return new Ne(jo,new Jt("[PRIORITY-POST]",MD))}makePost(e,n){const r=PD(e);return new Ne(n,new Jt("[PRIORITY-POST]",r))}toString(){return".priority"}}const kt=new Wj;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jj=Math.log(2);class zj{constructor(e){const n=s=>parseInt(Math.log(s)/jj,10),r=s=>parseInt(Array(s+1).join("1"),2);this.count=n(e+1),this.current_=this.count-1;const i=r(this.count);this.bits_=e+1&i}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const qf=function(t,e,n,r){t.sort(e);const i=function(u,c){const d=c-u;let f,g;if(d===0)return null;if(d===1)return f=t[u],g=n?n(f):f,new tn(g,f.node,tn.BLACK,null,null);{const v=parseInt(d/2,10)+u,w=i(u,v),T=i(v+1,c);return f=t[v],g=n?n(f):f,new tn(g,f.node,tn.BLACK,w,T)}},s=function(u){let c=null,d=null,f=t.length;const g=function(w,T){const C=f-w,I=f;f-=w;const _=i(C+1,I),E=t[C],b=n?n(E):E;v(new tn(b,E.node,T,null,_))},v=function(w){c?(c.left=w,c=w):(d=w,c=w)};for(let w=0;w<u.count;++w){const T=u.nextBitIsOne(),C=Math.pow(2,u.count-(w+1));T?g(C,tn.BLACK):(g(C,tn.BLACK),g(C,tn.RED))}return d},o=new zj(t.length),a=s(o);return new Jn(r||e,a)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Xg;const Da={};class Ni{constructor(e,n){this.indexes_=e,this.indexSet_=n}static get Default(){return j(Da&&kt,"ChildrenNode.ts has not been loaded"),Xg=Xg||new Ni({".priority":Da},{".priority":kt}),Xg}get(e){const n=gl(this.indexes_,e);if(!n)throw new Error("No index defined for "+e);return n instanceof Jn?n:null}hasIndex(e){return ai(this.indexSet_,e.toString())}addIndex(e,n){j(e!==ol,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let i=!1;const s=n.getIterator(Ne.Wrap);let o=s.getNext();for(;o;)i=i||e.isDefinedOn(o.node),r.push(o),o=s.getNext();let a;i?a=qf(r,e.getCompare()):a=Da;const u=e.toString(),c=Object.assign({},this.indexSet_);c[u]=e;const d=Object.assign({},this.indexes_);return d[u]=a,new Ni(d,c)}addToIndexes(e,n){const r=Lf(this.indexes_,(i,s)=>{const o=gl(this.indexSet_,s);if(j(o,"Missing index implementation for "+s),i===Da)if(o.isDefinedOn(e.node)){const a=[],u=n.getIterator(Ne.Wrap);let c=u.getNext();for(;c;)c.name!==e.name&&a.push(c),c=u.getNext();return a.push(e),qf(a,o.getCompare())}else return Da;else{const a=n.get(e.name);let u=i;return a&&(u=u.remove(new Ne(e.name,a))),u.insert(e,e.node)}});return new Ni(r,this.indexSet_)}removeFromIndexes(e,n){const r=Lf(this.indexes_,i=>{if(i===Da)return i;{const s=n.get(e.name);return s?i.remove(new Ne(e.name,s)):i}});return new Ni(r,this.indexSet_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Nu;class pe{constructor(e,n,r){this.children_=e,this.priorityNode_=n,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&OD(this.priorityNode_),this.children_.isEmpty()&&j(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return Nu||(Nu=new pe(new Jn(Dw),null,Ni.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Nu}updatePriority(e){return this.children_.isEmpty()?this:new pe(this.children_,e,this.indexMap_)}getImmediateChild(e){if(e===".priority")return this.getPriority();{const n=this.children_.get(e);return n===null?Nu:n}}getChild(e){const n=Ce(e);return n===null?this:this.getImmediateChild(n).getChild(Qe(e))}hasChild(e){return this.children_.get(e)!==null}updateImmediateChild(e,n){if(j(n,"We should always be passing snapshot nodes"),e===".priority")return this.updatePriority(n);{const r=new Ne(e,n);let i,s;n.isEmpty()?(i=this.children_.remove(e),s=this.indexMap_.removeFromIndexes(r,this.children_)):(i=this.children_.insert(e,n),s=this.indexMap_.addToIndexes(r,this.children_));const o=i.isEmpty()?Nu:this.priorityNode_;return new pe(i,o,s)}}updateChild(e,n){const r=Ce(e);if(r===null)return n;{j(Ce(e)!==".priority"||Ms(e)===1,".priority must be the last token in a path");const i=this.getImmediateChild(r).updateChild(Qe(e),n);return this.updateImmediateChild(r,i)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const n={};let r=0,i=0,s=!0;if(this.forEachChild(kt,(o,a)=>{n[o]=a.val(e),r++,s&&pe.INTEGER_REGEXP_.test(o)?i=Math.max(i,Number(o)):s=!1}),!e&&s&&i<2*r){const o=[];for(const a in n)o[a]=n[a];return o}else return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n}hash(){if(this.lazyHash_===null){let e="";this.getPriority().isEmpty()||(e+="priority:"+RD(this.getPriority().val())+":"),this.forEachChild(kt,(n,r)=>{const i=r.hash();i!==""&&(e+=":"+n+":"+i)}),this.lazyHash_=e===""?"":lD(e)}return this.lazyHash_}getPredecessorChildName(e,n,r){const i=this.resolveIndex_(r);if(i){const s=i.getPredecessorKey(new Ne(e,n));return s?s.name:null}else return this.children_.getPredecessorKey(e)}getFirstChildName(e){const n=this.resolveIndex_(e);if(n){const r=n.minKey();return r&&r.name}else return this.children_.minKey()}getFirstChild(e){const n=this.getFirstChildName(e);return n?new Ne(n,this.children_.get(n)):null}getLastChildName(e){const n=this.resolveIndex_(e);if(n){const r=n.maxKey();return r&&r.name}else return this.children_.maxKey()}getLastChild(e){const n=this.getLastChildName(e);return n?new Ne(n,this.children_.get(n)):null}forEachChild(e,n){const r=this.resolveIndex_(e);return r?r.inorderTraversal(i=>n(i.name,i.node)):this.children_.inorderTraversal(n)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,n){const r=this.resolveIndex_(n);if(r)return r.getIteratorFrom(e,i=>i);{const i=this.children_.getIteratorFrom(e.name,Ne.Wrap);let s=i.peek();for(;s!=null&&n.compare(s,e)<0;)i.getNext(),s=i.peek();return i}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,n){const r=this.resolveIndex_(n);if(r)return r.getReverseIteratorFrom(e,i=>i);{const i=this.children_.getReverseIteratorFrom(e.name,Ne.Wrap);let s=i.peek();for(;s!=null&&n.compare(s,e)>0;)i.getNext(),s=i.peek();return i}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===vh?-1:0}withIndex(e){if(e===ol||this.indexMap_.hasIndex(e))return this;{const n=this.indexMap_.addIndex(e,this.children_);return new pe(this.children_,this.priorityNode_,n)}}isIndexed(e){return e===ol||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const n=e;if(this.getPriority().equals(n.getPriority()))if(this.children_.count()===n.children_.count()){const r=this.getIterator(kt),i=n.getIterator(kt);let s=r.getNext(),o=i.getNext();for(;s&&o;){if(s.name!==o.name||!s.node.equals(o.node))return!1;s=r.getNext(),o=i.getNext()}return s===null&&o===null}else return!1;else return!1}}resolveIndex_(e){return e===ol?null:this.indexMap_.get(e.toString())}}pe.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class qj extends pe{constructor(){super(new Jn(Dw),pe.EMPTY_NODE,Ni.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return pe.EMPTY_NODE}isEmpty(){return!1}}const vh=new qj;Object.defineProperties(Ne,{MIN:{value:new Ne(_l,pe.EMPTY_NODE)},MAX:{value:new Ne(jo,vh)}});AD.__EMPTY_NODE=pe.EMPTY_NODE;Jt.__childrenNodeConstructor=pe;Vj(vh);Bj(vh);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gj=!0;function Wt(t,e=null){if(t===null)return pe.EMPTY_NODE;if(typeof t=="object"&&".priority"in t&&(e=t[".priority"]),j(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof t=="object"&&".value"in t&&t[".value"]!==null&&(t=t[".value"]),typeof t!="object"||".sv"in t){const n=t;return new Jt(n,Wt(e))}if(!(t instanceof Array)&&Gj){const n=[];let r=!1;if(yn(t,(o,a)=>{if(o.substring(0,1)!=="."){const u=Wt(a);u.isEmpty()||(r=r||!u.getPriority().isEmpty(),n.push(new Ne(o,u)))}}),n.length===0)return pe.EMPTY_NODE;const s=qf(n,Uj,o=>o.name,Dw);if(r){const o=qf(n,kt.getCompare());return new pe(s,Wt(e),new Ni({".priority":o},{".priority":kt}))}else return new pe(s,Wt(e),Ni.Default)}else{let n=pe.EMPTY_NODE;return yn(t,(r,i)=>{if(ai(t,r)&&r.substring(0,1)!=="."){const s=Wt(i);(s.isLeafNode()||!s.isEmpty())&&(n=n.updateImmediateChild(r,s))}}),n.updatePriority(Wt(e))}}$j(Wt);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hj extends em{constructor(e){super(),this.indexPath_=e,j(!De(e)&&Ce(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,n){const r=this.extractChild(e.node),i=this.extractChild(n.node),s=r.compareTo(i);return s===0?la(e.name,n.name):s}makePost(e,n){const r=Wt(e),i=pe.EMPTY_NODE.updateChild(this.indexPath_,r);return new Ne(n,i)}maxPost(){const e=pe.EMPTY_NODE.updateChild(this.indexPath_,vh);return new Ne(jo,e)}toString(){return Vc(this.indexPath_,0).join("/")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yj extends em{compare(e,n){const r=e.node.compareTo(n.node);return r===0?la(e.name,n.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,n){return!e.equals(n)}minPost(){return Ne.MIN}maxPost(){return Ne.MAX}makePost(e,n){const r=Wt(e);return new Ne(n,r)}toString(){return".value"}}const Kj=new Yj;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LD(t){return{type:"value",snapshotNode:t}}function wl(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function $c(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function Bc(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}function Qj(t,e){return{type:"child_moved",snapshotNode:e,childName:t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bw{constructor(e){this.index_=e}updateChild(e,n,r,i,s,o){j(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const a=e.getImmediateChild(n);return a.getChild(i).equals(r.getChild(i))&&a.isEmpty()===r.isEmpty()||(o!=null&&(r.isEmpty()?e.hasChild(n)?o.trackChildChange($c(n,a)):j(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?o.trackChildChange(wl(n,r)):o.trackChildChange(Bc(n,r,a))),e.isLeafNode()&&r.isEmpty())?e:e.updateImmediateChild(n,r).withIndex(this.index_)}updateFullNode(e,n,r){return r!=null&&(e.isLeafNode()||e.forEachChild(kt,(i,s)=>{n.hasChild(i)||r.trackChildChange($c(i,s))}),n.isLeafNode()||n.forEachChild(kt,(i,s)=>{if(e.hasChild(i)){const o=e.getImmediateChild(i);o.equals(s)||r.trackChildChange(Bc(i,s,o))}else r.trackChildChange(wl(i,s))})),n.withIndex(this.index_)}updatePriority(e,n){return e.isEmpty()?pe.EMPTY_NODE:e.updatePriority(n)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wc{constructor(e){this.indexedFilter_=new bw(e.getIndex()),this.index_=e.getIndex(),this.startPost_=Wc.getStartPost_(e),this.endPost_=Wc.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const n=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,r=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return n&&r}updateChild(e,n,r,i,s,o){return this.matches(new Ne(n,r))||(r=pe.EMPTY_NODE),this.indexedFilter_.updateChild(e,n,r,i,s,o)}updateFullNode(e,n,r){n.isLeafNode()&&(n=pe.EMPTY_NODE);let i=n.withIndex(this.index_);i=i.updatePriority(pe.EMPTY_NODE);const s=this;return n.forEachChild(kt,(o,a)=>{s.matches(new Ne(o,a))||(i=i.updateImmediateChild(o,pe.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,i,r)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const n=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),n)}else return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const n=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),n)}else return e.getIndex().maxPost()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xj{constructor(e){this.withinDirectionalStart=n=>this.reverse_?this.withinEndPost(n):this.withinStartPost(n),this.withinDirectionalEnd=n=>this.reverse_?this.withinStartPost(n):this.withinEndPost(n),this.withinStartPost=n=>{const r=this.index_.compare(this.rangedFilter_.getStartPost(),n);return this.startIsInclusive_?r<=0:r<0},this.withinEndPost=n=>{const r=this.index_.compare(n,this.rangedFilter_.getEndPost());return this.endIsInclusive_?r<=0:r<0},this.rangedFilter_=new Wc(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,n,r,i,s,o){return this.rangedFilter_.matches(new Ne(n,r))||(r=pe.EMPTY_NODE),e.getImmediateChild(n).equals(r)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,n,r,i,s,o):this.fullLimitUpdateChild_(e,n,r,s,o)}updateFullNode(e,n,r){let i;if(n.isLeafNode()||n.isEmpty())i=pe.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<n.numChildren()&&n.isIndexed(this.index_)){i=pe.EMPTY_NODE.withIndex(this.index_);let s;this.reverse_?s=n.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):s=n.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let o=0;for(;s.hasNext()&&o<this.limit_;){const a=s.getNext();if(this.withinDirectionalStart(a))if(this.withinDirectionalEnd(a))i=i.updateImmediateChild(a.name,a.node),o++;else break;else continue}}else{i=n.withIndex(this.index_),i=i.updatePriority(pe.EMPTY_NODE);let s;this.reverse_?s=i.getReverseIterator(this.index_):s=i.getIterator(this.index_);let o=0;for(;s.hasNext();){const a=s.getNext();o<this.limit_&&this.withinDirectionalStart(a)&&this.withinDirectionalEnd(a)?o++:i=i.updateImmediateChild(a.name,pe.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,i,r)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,n,r,i,s){let o;if(this.reverse_){const f=this.index_.getCompare();o=(g,v)=>f(v,g)}else o=this.index_.getCompare();const a=e;j(a.numChildren()===this.limit_,"");const u=new Ne(n,r),c=this.reverse_?a.getFirstChild(this.index_):a.getLastChild(this.index_),d=this.rangedFilter_.matches(u);if(a.hasChild(n)){const f=a.getImmediateChild(n);let g=i.getChildAfterChild(this.index_,c,this.reverse_);for(;g!=null&&(g.name===n||a.hasChild(g.name));)g=i.getChildAfterChild(this.index_,g,this.reverse_);const v=g==null?1:o(g,u);if(d&&!r.isEmpty()&&v>=0)return s!=null&&s.trackChildChange(Bc(n,r,f)),a.updateImmediateChild(n,r);{s!=null&&s.trackChildChange($c(n,f));const T=a.updateImmediateChild(n,pe.EMPTY_NODE);return g!=null&&this.rangedFilter_.matches(g)?(s!=null&&s.trackChildChange(wl(g.name,g.node)),T.updateImmediateChild(g.name,g.node)):T}}else return r.isEmpty()?e:d&&o(c,u)>=0?(s!=null&&(s.trackChildChange($c(c.name,c.node)),s.trackChildChange(wl(n,r))),a.updateImmediateChild(n,r).updateImmediateChild(c.name,pe.EMPTY_NODE)):e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xw{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=kt}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return j(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return j(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:_l}hasEnd(){return this.endSet_}getIndexEndValue(){return j(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return j(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:jo}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return j(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===kt}copy(){const e=new xw;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function Jj(t){return t.loadsAllData()?new bw(t.getIndex()):t.hasLimit()?new Xj(t):new Wc(t)}function YS(t){const e={};if(t.isDefault())return e;let n;if(t.index_===kt?n="$priority":t.index_===Kj?n="$value":t.index_===ol?n="$key":(j(t.index_ instanceof Hj,"Unrecognized index type!"),n=t.index_.toString()),e.orderBy=jt(n),t.startSet_){const r=t.startAfterSet_?"startAfter":"startAt";e[r]=jt(t.indexStartValue_),t.startNameSet_&&(e[r]+=","+jt(t.indexStartName_))}if(t.endSet_){const r=t.endBeforeSet_?"endBefore":"endAt";e[r]=jt(t.indexEndValue_),t.endNameSet_&&(e[r]+=","+jt(t.indexEndName_))}return t.limitSet_&&(t.isViewFromLeft()?e.limitToFirst=t.limit_:e.limitToLast=t.limit_),e}function KS(t){const e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_),e.sin=!t.startAfterSet_),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_),e.ein=!t.endBeforeSet_),t.limitSet_){e.l=t.limit_;let n=t.viewFrom_;n===""&&(t.isViewFromLeft()?n="l":n="r"),e.vf=n}return t.index_!==kt&&(e.i=t.index_.toString()),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gf extends ND{constructor(e,n,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=n,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=yh("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,n){return n!==void 0?"tag$"+n:(j(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,n,r,i){const s=e._path.toString();this.log_("Listen called for "+s+" "+e._queryIdentifier);const o=Gf.getListenId_(e,r),a={};this.listens_[o]=a;const u=YS(e._queryParams);this.restRequest_(s+".json",u,(c,d)=>{let f=d;if(c===404&&(f=null,c=null),c===null&&this.onDataUpdate_(s,f,!1,r),gl(this.listens_,o)===a){let g;c?c===401?g="permission_denied":g="rest_error:"+c:g="ok",i(g,null)}})}unlisten(e,n){const r=Gf.getListenId_(e,n);delete this.listens_[r]}get(e){const n=YS(e._queryParams),r=e._path.toString(),i=new dh;return this.restRequest_(r+".json",n,(s,o)=>{let a=o;s===404&&(a=null,s=null),s===null?(this.onDataUpdate_(r,a,!1,null),i.resolve(a)):i.reject(new Error(a))}),i.promise}refreshAuthToken(e){}restRequest_(e,n={},r){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,s])=>{i&&i.accessToken&&(n.auth=i.accessToken),s&&s.token&&(n.ac=s.token);const o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+oa(n);this.log_("Sending REST request for "+o);const a=new XMLHttpRequest;a.onreadystatechange=()=>{if(r&&a.readyState===4){this.log_("REST Response for "+o+" received. status:",a.status,"response:",a.responseText);let u=null;if(a.status>=200&&a.status<300){try{u=Rc(a.responseText)}catch{Vn("Failed to parse JSON response for "+o+": "+a.responseText)}r(null,u)}else a.status!==401&&a.status!==404&&Vn("Got unsuccessful REST response for "+o+" Status: "+a.status),r(a.status);r=null}},a.open("GET",o,!0),a.send()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zj{constructor(){this.rootNode_=pe.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,n){this.rootNode_=this.rootNode_.updateChild(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hf(){return{value:null,children:new Map}}function FD(t,e,n){if(De(e))t.value=n,t.children.clear();else if(t.value!==null)t.value=t.value.updateChild(e,n);else{const r=Ce(e);t.children.has(r)||t.children.set(r,Hf());const i=t.children.get(r);e=Qe(e),FD(i,e,n)}}function wv(t,e,n){t.value!==null?n(e,t.value):ez(t,(r,i)=>{const s=new He(e.toString()+"/"+r);wv(i,s,n)})}function ez(t,e){t.children.forEach((n,r)=>{e(r,n)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tz{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),n=Object.assign({},e);return this.last_&&yn(this.last_,(r,i)=>{n[r]=n[r]-i}),this.last_=e,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QS=10*1e3,nz=30*1e3,rz=5*60*1e3;class iz{constructor(e,n){this.server_=n,this.statsToReport_={},this.statsListener_=new tz(e);const r=QS+(nz-QS)*Math.random();ic(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),n={};let r=!1;yn(e,(i,s)=>{s>0&&ai(this.statsToReport_,i)&&(n[i]=s,r=!0)}),r&&this.server_.reportStats(n),ic(this.reportStats_.bind(this),Math.floor(Math.random()*2*rz))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Fr;(function(t){t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(Fr||(Fr={}));function Aw(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function Rw(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function Ow(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yf{constructor(e,n,r){this.path=e,this.affectedTree=n,this.revert=r,this.type=Fr.ACK_USER_WRITE,this.source=Aw()}operationForChild(e){if(De(this.path)){if(this.affectedTree.value!=null)return j(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const n=this.affectedTree.subtree(new He(e));return new Yf($e(),n,this.revert)}}else return j(Ce(this.path)===e,"operationForChild called for unrelated child."),new Yf(Qe(this.path),this.affectedTree,this.revert)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jc{constructor(e,n){this.source=e,this.path=n,this.type=Fr.LISTEN_COMPLETE}operationForChild(e){return De(this.path)?new jc(this.source,$e()):new jc(this.source,Qe(this.path))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zo{constructor(e,n,r){this.source=e,this.path=n,this.snap=r,this.type=Fr.OVERWRITE}operationForChild(e){return De(this.path)?new zo(this.source,$e(),this.snap.getImmediateChild(e)):new zo(this.source,Qe(this.path),this.snap)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Il{constructor(e,n,r){this.source=e,this.path=n,this.children=r,this.type=Fr.MERGE}operationForChild(e){if(De(this.path)){const n=this.children.subtree(new He(e));return n.isEmpty()?null:n.value?new zo(this.source,$e(),n.value):new Il(this.source,$e(),n)}else return j(Ce(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new Il(this.source,Qe(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ls{constructor(e,n,r){this.node_=e,this.fullyInitialized_=n,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(De(e))return this.isFullyInitialized()&&!this.filtered_;const n=Ce(e);return this.isCompleteForChild(n)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sz{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function oz(t,e,n,r){const i=[],s=[];return e.forEach(o=>{o.type==="child_changed"&&t.index_.indexedValueChanged(o.oldSnap,o.snapshotNode)&&s.push(Qj(o.childName,o.snapshotNode))}),Du(t,i,"child_removed",e,r,n),Du(t,i,"child_added",e,r,n),Du(t,i,"child_moved",s,r,n),Du(t,i,"child_changed",e,r,n),Du(t,i,"value",e,r,n),i}function Du(t,e,n,r,i,s){const o=r.filter(a=>a.type===n);o.sort((a,u)=>lz(t,a,u)),o.forEach(a=>{const u=az(t,a,s);i.forEach(c=>{c.respondsTo(a.type)&&e.push(c.createEvent(u,t.query_))})})}function az(t,e,n){return e.type==="value"||e.type==="child_removed"||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}function lz(t,e,n){if(e.childName==null||n.childName==null)throw $l("Should only compare child_ events.");const r=new Ne(e.childName,e.snapshotNode),i=new Ne(n.childName,n.snapshotNode);return t.index_.compare(r,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tm(t,e){return{eventCache:t,serverCache:e}}function sc(t,e,n,r){return tm(new Ls(e,n,r),t.serverCache)}function UD(t,e,n,r){return tm(t.eventCache,new Ls(e,n,r))}function Kf(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function qo(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Jg;const uz=()=>(Jg||(Jg=new Jn(HW)),Jg);class Ke{constructor(e,n=uz()){this.value=e,this.children=n}static fromObject(e){let n=new Ke(null);return yn(e,(r,i)=>{n=n.set(new He(r),i)}),n}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,n){if(this.value!=null&&n(this.value))return{path:$e(),value:this.value};if(De(e))return null;{const r=Ce(e),i=this.children.get(r);if(i!==null){const s=i.findRootMostMatchingPathAndValue(Qe(e),n);return s!=null?{path:St(new He(r),s.path),value:s.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(De(e))return this;{const n=Ce(e),r=this.children.get(n);return r!==null?r.subtree(Qe(e)):new Ke(null)}}set(e,n){if(De(e))return new Ke(n,this.children);{const r=Ce(e),s=(this.children.get(r)||new Ke(null)).set(Qe(e),n),o=this.children.insert(r,s);return new Ke(this.value,o)}}remove(e){if(De(e))return this.children.isEmpty()?new Ke(null):new Ke(null,this.children);{const n=Ce(e),r=this.children.get(n);if(r){const i=r.remove(Qe(e));let s;return i.isEmpty()?s=this.children.remove(n):s=this.children.insert(n,i),this.value===null&&s.isEmpty()?new Ke(null):new Ke(this.value,s)}else return this}}get(e){if(De(e))return this.value;{const n=Ce(e),r=this.children.get(n);return r?r.get(Qe(e)):null}}setTree(e,n){if(De(e))return n;{const r=Ce(e),s=(this.children.get(r)||new Ke(null)).setTree(Qe(e),n);let o;return s.isEmpty()?o=this.children.remove(r):o=this.children.insert(r,s),new Ke(this.value,o)}}fold(e){return this.fold_($e(),e)}fold_(e,n){const r={};return this.children.inorderTraversal((i,s)=>{r[i]=s.fold_(St(e,i),n)}),n(e,this.value,r)}findOnPath(e,n){return this.findOnPath_(e,$e(),n)}findOnPath_(e,n,r){const i=this.value?r(n,this.value):!1;if(i)return i;if(De(e))return null;{const s=Ce(e),o=this.children.get(s);return o?o.findOnPath_(Qe(e),St(n,s),r):null}}foreachOnPath(e,n){return this.foreachOnPath_(e,$e(),n)}foreachOnPath_(e,n,r){if(De(e))return this;{this.value&&r(n,this.value);const i=Ce(e),s=this.children.get(i);return s?s.foreachOnPath_(Qe(e),St(n,i),r):new Ke(null)}}foreach(e){this.foreach_($e(),e)}foreach_(e,n){this.children.inorderTraversal((r,i)=>{i.foreach_(St(e,r),n)}),this.value&&n(e,this.value)}foreachChild(e){this.children.inorderTraversal((n,r)=>{r.value&&e(n,r.value)})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Br{constructor(e){this.writeTree_=e}static empty(){return new Br(new Ke(null))}}function oc(t,e,n){if(De(e))return new Br(new Ke(n));{const r=t.writeTree_.findRootMostValueAndPath(e);if(r!=null){const i=r.path;let s=r.value;const o=Ln(i,e);return s=s.updateChild(o,n),new Br(t.writeTree_.set(i,s))}else{const i=new Ke(n),s=t.writeTree_.setTree(e,i);return new Br(s)}}}function Iv(t,e,n){let r=t;return yn(n,(i,s)=>{r=oc(r,St(e,i),s)}),r}function XS(t,e){if(De(e))return Br.empty();{const n=t.writeTree_.setTree(e,new Ke(null));return new Br(n)}}function Ev(t,e){return ua(t,e)!=null}function ua(t,e){const n=t.writeTree_.findRootMostValueAndPath(e);return n!=null?t.writeTree_.get(n.path).getChild(Ln(n.path,e)):null}function JS(t){const e=[],n=t.writeTree_.value;return n!=null?n.isLeafNode()||n.forEachChild(kt,(r,i)=>{e.push(new Ne(r,i))}):t.writeTree_.children.inorderTraversal((r,i)=>{i.value!=null&&e.push(new Ne(r,i.value))}),e}function bs(t,e){if(De(e))return t;{const n=ua(t,e);return n!=null?new Br(new Ke(n)):new Br(t.writeTree_.subtree(e))}}function Sv(t){return t.writeTree_.isEmpty()}function El(t,e){return VD($e(),t.writeTree_,e)}function VD(t,e,n){if(e.value!=null)return n.updateChild(t,e.value);{let r=null;return e.children.inorderTraversal((i,s)=>{i===".priority"?(j(s.value!==null,"Priority writes must always be leaf nodes"),r=s.value):n=VD(St(t,i),s,n)}),!n.getChild(t).isEmpty()&&r!==null&&(n=n.updateChild(St(t,".priority"),r)),n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nm(t,e){return jD(e,t)}function cz(t,e,n,r,i){j(r>t.lastWriteId,"Stacking an older write on top of newer ones"),i===void 0&&(i=!0),t.allWrites.push({path:e,snap:n,writeId:r,visible:i}),i&&(t.visibleWrites=oc(t.visibleWrites,e,n)),t.lastWriteId=r}function hz(t,e,n,r){j(r>t.lastWriteId,"Stacking an older merge on top of newer ones"),t.allWrites.push({path:e,children:n,writeId:r,visible:!0}),t.visibleWrites=Iv(t.visibleWrites,e,n),t.lastWriteId=r}function dz(t,e){for(let n=0;n<t.allWrites.length;n++){const r=t.allWrites[n];if(r.writeId===e)return r}return null}function fz(t,e){const n=t.allWrites.findIndex(a=>a.writeId===e);j(n>=0,"removeWrite called with nonexistent writeId.");const r=t.allWrites[n];t.allWrites.splice(n,1);let i=r.visible,s=!1,o=t.allWrites.length-1;for(;i&&o>=0;){const a=t.allWrites[o];a.visible&&(o>=n&&pz(a,r.path)?i=!1:Tr(r.path,a.path)&&(s=!0)),o--}if(i){if(s)return mz(t),!0;if(r.snap)t.visibleWrites=XS(t.visibleWrites,r.path);else{const a=r.children;yn(a,u=>{t.visibleWrites=XS(t.visibleWrites,St(r.path,u))})}return!0}else return!1}function pz(t,e){if(t.snap)return Tr(t.path,e);for(const n in t.children)if(t.children.hasOwnProperty(n)&&Tr(St(t.path,n),e))return!0;return!1}function mz(t){t.visibleWrites=$D(t.allWrites,gz,$e()),t.allWrites.length>0?t.lastWriteId=t.allWrites[t.allWrites.length-1].writeId:t.lastWriteId=-1}function gz(t){return t.visible}function $D(t,e,n){let r=Br.empty();for(let i=0;i<t.length;++i){const s=t[i];if(e(s)){const o=s.path;let a;if(s.snap)Tr(n,o)?(a=Ln(n,o),r=oc(r,a,s.snap)):Tr(o,n)&&(a=Ln(o,n),r=oc(r,$e(),s.snap.getChild(a)));else if(s.children){if(Tr(n,o))a=Ln(n,o),r=Iv(r,a,s.children);else if(Tr(o,n))if(a=Ln(o,n),De(a))r=Iv(r,$e(),s.children);else{const u=gl(s.children,Ce(a));if(u){const c=u.getChild(Qe(a));r=oc(r,$e(),c)}}}else throw $l("WriteRecord should have .snap or .children")}}return r}function BD(t,e,n,r,i){if(!r&&!i){const s=ua(t.visibleWrites,e);if(s!=null)return s;{const o=bs(t.visibleWrites,e);if(Sv(o))return n;if(n==null&&!Ev(o,$e()))return null;{const a=n||pe.EMPTY_NODE;return El(o,a)}}}else{const s=bs(t.visibleWrites,e);if(!i&&Sv(s))return n;if(!i&&n==null&&!Ev(s,$e()))return null;{const o=function(c){return(c.visible||i)&&(!r||!~r.indexOf(c.writeId))&&(Tr(c.path,e)||Tr(e,c.path))},a=$D(t.allWrites,o,e),u=n||pe.EMPTY_NODE;return El(a,u)}}}function yz(t,e,n){let r=pe.EMPTY_NODE;const i=ua(t.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(kt,(s,o)=>{r=r.updateImmediateChild(s,o)}),r;if(n){const s=bs(t.visibleWrites,e);return n.forEachChild(kt,(o,a)=>{const u=El(bs(s,new He(o)),a);r=r.updateImmediateChild(o,u)}),JS(s).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}else{const s=bs(t.visibleWrites,e);return JS(s).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}}function vz(t,e,n,r,i){j(r||i,"Either existingEventSnap or existingServerSnap must exist");const s=St(e,n);if(Ev(t.visibleWrites,s))return null;{const o=bs(t.visibleWrites,s);return Sv(o)?i.getChild(n):El(o,i.getChild(n))}}function _z(t,e,n,r){const i=St(e,n),s=ua(t.visibleWrites,i);if(s!=null)return s;if(r.isCompleteForChild(n)){const o=bs(t.visibleWrites,i);return El(o,r.getNode().getImmediateChild(n))}else return null}function wz(t,e){return ua(t.visibleWrites,e)}function Iz(t,e,n,r,i,s,o){let a;const u=bs(t.visibleWrites,e),c=ua(u,$e());if(c!=null)a=c;else if(n!=null)a=El(u,n);else return[];if(a=a.withIndex(o),!a.isEmpty()&&!a.isLeafNode()){const d=[],f=o.getCompare(),g=s?a.getReverseIteratorFrom(r,o):a.getIteratorFrom(r,o);let v=g.getNext();for(;v&&d.length<i;)f(v,r)!==0&&d.push(v),v=g.getNext();return d}else return[]}function Ez(){return{visibleWrites:Br.empty(),allWrites:[],lastWriteId:-1}}function Qf(t,e,n,r){return BD(t.writeTree,t.treePath,e,n,r)}function Pw(t,e){return yz(t.writeTree,t.treePath,e)}function ZS(t,e,n,r){return vz(t.writeTree,t.treePath,e,n,r)}function Xf(t,e){return wz(t.writeTree,St(t.treePath,e))}function Sz(t,e,n,r,i,s){return Iz(t.writeTree,t.treePath,e,n,r,i,s)}function Mw(t,e,n){return _z(t.writeTree,t.treePath,e,n)}function WD(t,e){return jD(St(t.treePath,e),t.writeTree)}function jD(t,e){return{treePath:t,writeTree:e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tz{constructor(){this.changeMap=new Map}trackChildChange(e){const n=e.type,r=e.childName;j(n==="child_added"||n==="child_changed"||n==="child_removed","Only child changes supported for tracking"),j(r!==".priority","Only non-priority child changes can be tracked.");const i=this.changeMap.get(r);if(i){const s=i.type;if(n==="child_added"&&s==="child_removed")this.changeMap.set(r,Bc(r,e.snapshotNode,i.snapshotNode));else if(n==="child_removed"&&s==="child_added")this.changeMap.delete(r);else if(n==="child_removed"&&s==="child_changed")this.changeMap.set(r,$c(r,i.oldSnap));else if(n==="child_changed"&&s==="child_added")this.changeMap.set(r,wl(r,e.snapshotNode));else if(n==="child_changed"&&s==="child_changed")this.changeMap.set(r,Bc(r,e.snapshotNode,i.oldSnap));else throw $l("Illegal combination of changes: "+e+" occurred after "+i)}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kz{getCompleteChild(e){return null}getChildAfterChild(e,n,r){return null}}const zD=new kz;class Lw{constructor(e,n,r=null){this.writes_=e,this.viewCache_=n,this.optCompleteServerCache_=r}getCompleteChild(e){const n=this.viewCache_.eventCache;if(n.isCompleteForChild(e))return n.getNode().getImmediateChild(e);{const r=this.optCompleteServerCache_!=null?new Ls(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return Mw(this.writes_,e,r)}}getChildAfterChild(e,n,r){const i=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:qo(this.viewCache_),s=Sz(this.writes_,i,n,1,r,e);return s.length===0?null:s[0]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cz(t){return{filter:t}}function Nz(t,e){j(e.eventCache.getNode().isIndexed(t.filter.getIndex()),"Event snap not indexed"),j(e.serverCache.getNode().isIndexed(t.filter.getIndex()),"Server snap not indexed")}function Dz(t,e,n,r,i){const s=new Tz;let o,a;if(n.type===Fr.OVERWRITE){const c=n;c.source.fromUser?o=Tv(t,e,c.path,c.snap,r,i,s):(j(c.source.fromServer,"Unknown source."),a=c.source.tagged||e.serverCache.isFiltered()&&!De(c.path),o=Jf(t,e,c.path,c.snap,r,i,a,s))}else if(n.type===Fr.MERGE){const c=n;c.source.fromUser?o=xz(t,e,c.path,c.children,r,i,s):(j(c.source.fromServer,"Unknown source."),a=c.source.tagged||e.serverCache.isFiltered(),o=kv(t,e,c.path,c.children,r,i,a,s))}else if(n.type===Fr.ACK_USER_WRITE){const c=n;c.revert?o=Oz(t,e,c.path,r,i,s):o=Az(t,e,c.path,c.affectedTree,r,i,s)}else if(n.type===Fr.LISTEN_COMPLETE)o=Rz(t,e,n.path,r,s);else throw $l("Unknown operation type: "+n.type);const u=s.getChanges();return bz(e,o,u),{viewCache:o,changes:u}}function bz(t,e,n){const r=e.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),s=Kf(t);(n.length>0||!t.eventCache.isFullyInitialized()||i&&!r.getNode().equals(s)||!r.getNode().getPriority().equals(s.getPriority()))&&n.push(LD(Kf(e)))}}function qD(t,e,n,r,i,s){const o=e.eventCache;if(Xf(r,n)!=null)return e;{let a,u;if(De(n))if(j(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const c=qo(e),d=c instanceof pe?c:pe.EMPTY_NODE,f=Pw(r,d);a=t.filter.updateFullNode(e.eventCache.getNode(),f,s)}else{const c=Qf(r,qo(e));a=t.filter.updateFullNode(e.eventCache.getNode(),c,s)}else{const c=Ce(n);if(c===".priority"){j(Ms(n)===1,"Can't have a priority with additional path components");const d=o.getNode();u=e.serverCache.getNode();const f=ZS(r,n,d,u);f!=null?a=t.filter.updatePriority(d,f):a=o.getNode()}else{const d=Qe(n);let f;if(o.isCompleteForChild(c)){u=e.serverCache.getNode();const g=ZS(r,n,o.getNode(),u);g!=null?f=o.getNode().getImmediateChild(c).updateChild(d,g):f=o.getNode().getImmediateChild(c)}else f=Mw(r,c,e.serverCache);f!=null?a=t.filter.updateChild(o.getNode(),c,f,d,i,s):a=o.getNode()}}return sc(e,a,o.isFullyInitialized()||De(n),t.filter.filtersNodes())}}function Jf(t,e,n,r,i,s,o,a){const u=e.serverCache;let c;const d=o?t.filter:t.filter.getIndexedFilter();if(De(n))c=d.updateFullNode(u.getNode(),r,null);else if(d.filtersNodes()&&!u.isFiltered()){const v=u.getNode().updateChild(n,r);c=d.updateFullNode(u.getNode(),v,null)}else{const v=Ce(n);if(!u.isCompleteForPath(n)&&Ms(n)>1)return e;const w=Qe(n),C=u.getNode().getImmediateChild(v).updateChild(w,r);v===".priority"?c=d.updatePriority(u.getNode(),C):c=d.updateChild(u.getNode(),v,C,w,zD,null)}const f=UD(e,c,u.isFullyInitialized()||De(n),d.filtersNodes()),g=new Lw(i,f,s);return qD(t,f,n,i,g,a)}function Tv(t,e,n,r,i,s,o){const a=e.eventCache;let u,c;const d=new Lw(i,e,s);if(De(n))c=t.filter.updateFullNode(e.eventCache.getNode(),r,o),u=sc(e,c,!0,t.filter.filtersNodes());else{const f=Ce(n);if(f===".priority")c=t.filter.updatePriority(e.eventCache.getNode(),r),u=sc(e,c,a.isFullyInitialized(),a.isFiltered());else{const g=Qe(n),v=a.getNode().getImmediateChild(f);let w;if(De(g))w=r;else{const T=d.getCompleteChild(f);T!=null?kw(g)===".priority"&&T.getChild(bD(g)).isEmpty()?w=T:w=T.updateChild(g,r):w=pe.EMPTY_NODE}if(v.equals(w))u=e;else{const T=t.filter.updateChild(a.getNode(),f,w,g,d,o);u=sc(e,T,a.isFullyInitialized(),t.filter.filtersNodes())}}}return u}function eT(t,e){return t.eventCache.isCompleteForChild(e)}function xz(t,e,n,r,i,s,o){let a=e;return r.foreach((u,c)=>{const d=St(n,u);eT(e,Ce(d))&&(a=Tv(t,a,d,c,i,s,o))}),r.foreach((u,c)=>{const d=St(n,u);eT(e,Ce(d))||(a=Tv(t,a,d,c,i,s,o))}),a}function tT(t,e,n){return n.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function kv(t,e,n,r,i,s,o,a){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let u=e,c;De(n)?c=r:c=new Ke(null).setTree(n,r);const d=e.serverCache.getNode();return c.children.inorderTraversal((f,g)=>{if(d.hasChild(f)){const v=e.serverCache.getNode().getImmediateChild(f),w=tT(t,v,g);u=Jf(t,u,new He(f),w,i,s,o,a)}}),c.children.inorderTraversal((f,g)=>{const v=!e.serverCache.isCompleteForChild(f)&&g.value===null;if(!d.hasChild(f)&&!v){const w=e.serverCache.getNode().getImmediateChild(f),T=tT(t,w,g);u=Jf(t,u,new He(f),T,i,s,o,a)}}),u}function Az(t,e,n,r,i,s,o){if(Xf(i,n)!=null)return e;const a=e.serverCache.isFiltered(),u=e.serverCache;if(r.value!=null){if(De(n)&&u.isFullyInitialized()||u.isCompleteForPath(n))return Jf(t,e,n,u.getNode().getChild(n),i,s,a,o);if(De(n)){let c=new Ke(null);return u.getNode().forEachChild(ol,(d,f)=>{c=c.set(new He(d),f)}),kv(t,e,n,c,i,s,a,o)}else return e}else{let c=new Ke(null);return r.foreach((d,f)=>{const g=St(n,d);u.isCompleteForPath(g)&&(c=c.set(d,u.getNode().getChild(g)))}),kv(t,e,n,c,i,s,a,o)}}function Rz(t,e,n,r,i){const s=e.serverCache,o=UD(e,s.getNode(),s.isFullyInitialized()||De(n),s.isFiltered());return qD(t,o,n,r,zD,i)}function Oz(t,e,n,r,i,s){let o;if(Xf(r,n)!=null)return e;{const a=new Lw(r,e,i),u=e.eventCache.getNode();let c;if(De(n)||Ce(n)===".priority"){let d;if(e.serverCache.isFullyInitialized())d=Qf(r,qo(e));else{const f=e.serverCache.getNode();j(f instanceof pe,"serverChildren would be complete if leaf node"),d=Pw(r,f)}d=d,c=t.filter.updateFullNode(u,d,s)}else{const d=Ce(n);let f=Mw(r,d,e.serverCache);f==null&&e.serverCache.isCompleteForChild(d)&&(f=u.getImmediateChild(d)),f!=null?c=t.filter.updateChild(u,d,f,Qe(n),a,s):e.eventCache.getNode().hasChild(d)?c=t.filter.updateChild(u,d,pe.EMPTY_NODE,Qe(n),a,s):c=u,c.isEmpty()&&e.serverCache.isFullyInitialized()&&(o=Qf(r,qo(e)),o.isLeafNode()&&(c=t.filter.updateFullNode(c,o,s)))}return o=e.serverCache.isFullyInitialized()||Xf(r,$e())!=null,sc(e,c,o,t.filter.filtersNodes())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pz{constructor(e,n){this.query_=e,this.eventRegistrations_=[];const r=this.query_._queryParams,i=new bw(r.getIndex()),s=Jj(r);this.processor_=Cz(s);const o=n.serverCache,a=n.eventCache,u=i.updateFullNode(pe.EMPTY_NODE,o.getNode(),null),c=s.updateFullNode(pe.EMPTY_NODE,a.getNode(),null),d=new Ls(u,o.isFullyInitialized(),i.filtersNodes()),f=new Ls(c,a.isFullyInitialized(),s.filtersNodes());this.viewCache_=tm(f,d),this.eventGenerator_=new sz(this.query_)}get query(){return this.query_}}function Mz(t){return t.viewCache_.serverCache.getNode()}function Lz(t){return Kf(t.viewCache_)}function Fz(t,e){const n=qo(t.viewCache_);return n&&(t.query._queryParams.loadsAllData()||!De(e)&&!n.getImmediateChild(Ce(e)).isEmpty())?n.getChild(e):null}function nT(t){return t.eventRegistrations_.length===0}function Uz(t,e){t.eventRegistrations_.push(e)}function rT(t,e,n){const r=[];if(n){j(e==null,"A cancel should cancel all event registrations.");const i=t.query._path;t.eventRegistrations_.forEach(s=>{const o=s.createCancelEvent(n,i);o&&r.push(o)})}if(e){let i=[];for(let s=0;s<t.eventRegistrations_.length;++s){const o=t.eventRegistrations_[s];if(!o.matches(e))i.push(o);else if(e.hasAnyCallback()){i=i.concat(t.eventRegistrations_.slice(s+1));break}}t.eventRegistrations_=i}else t.eventRegistrations_=[];return r}function iT(t,e,n,r){e.type===Fr.MERGE&&e.source.queryId!==null&&(j(qo(t.viewCache_),"We should always have a full cache before handling merges"),j(Kf(t.viewCache_),"Missing event cache, even though we have a server cache"));const i=t.viewCache_,s=Dz(t.processor_,i,e,n,r);return Nz(t.processor_,s.viewCache),j(s.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=s.viewCache,GD(t,s.changes,s.viewCache.eventCache.getNode(),null)}function Vz(t,e){const n=t.viewCache_.eventCache,r=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(kt,(s,o)=>{r.push(wl(s,o))}),n.isFullyInitialized()&&r.push(LD(n.getNode())),GD(t,r,n.getNode(),e)}function GD(t,e,n,r){const i=r?[r]:t.eventRegistrations_;return oz(t.eventGenerator_,e,n,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Zf;class HD{constructor(){this.views=new Map}}function $z(t){j(!Zf,"__referenceConstructor has already been defined"),Zf=t}function Bz(){return j(Zf,"Reference.ts has not been loaded"),Zf}function Wz(t){return t.views.size===0}function Fw(t,e,n,r){const i=e.source.queryId;if(i!==null){const s=t.views.get(i);return j(s!=null,"SyncTree gave us an op for an invalid query."),iT(s,e,n,r)}else{let s=[];for(const o of t.views.values())s=s.concat(iT(o,e,n,r));return s}}function YD(t,e,n,r,i){const s=e._queryIdentifier,o=t.views.get(s);if(!o){let a=Qf(n,i?r:null),u=!1;a?u=!0:r instanceof pe?(a=Pw(n,r),u=!1):(a=pe.EMPTY_NODE,u=!1);const c=tm(new Ls(a,u,!1),new Ls(r,i,!1));return new Pz(e,c)}return o}function jz(t,e,n,r,i,s){const o=YD(t,e,r,i,s);return t.views.has(e._queryIdentifier)||t.views.set(e._queryIdentifier,o),Uz(o,n),Vz(o,n)}function zz(t,e,n,r){const i=e._queryIdentifier,s=[];let o=[];const a=Fs(t);if(i==="default")for(const[u,c]of t.views.entries())o=o.concat(rT(c,n,r)),nT(c)&&(t.views.delete(u),c.query._queryParams.loadsAllData()||s.push(c.query));else{const u=t.views.get(i);u&&(o=o.concat(rT(u,n,r)),nT(u)&&(t.views.delete(i),u.query._queryParams.loadsAllData()||s.push(u.query)))}return a&&!Fs(t)&&s.push(new(Bz())(e._repo,e._path)),{removed:s,events:o}}function KD(t){const e=[];for(const n of t.views.values())n.query._queryParams.loadsAllData()||e.push(n);return e}function xs(t,e){let n=null;for(const r of t.views.values())n=n||Fz(r,e);return n}function QD(t,e){if(e._queryParams.loadsAllData())return rm(t);{const r=e._queryIdentifier;return t.views.get(r)}}function XD(t,e){return QD(t,e)!=null}function Fs(t){return rm(t)!=null}function rm(t){for(const e of t.views.values())if(e.query._queryParams.loadsAllData())return e;return null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ep;function qz(t){j(!ep,"__referenceConstructor has already been defined"),ep=t}function Gz(){return j(ep,"Reference.ts has not been loaded"),ep}let Hz=1;class sT{constructor(e){this.listenProvider_=e,this.syncPointTree_=new Ke(null),this.pendingWriteTree_=Ez(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function JD(t,e,n,r,i){return cz(t.pendingWriteTree_,e,n,r,i),i?Yl(t,new zo(Aw(),e,n)):[]}function Yz(t,e,n,r){hz(t.pendingWriteTree_,e,n,r);const i=Ke.fromObject(n);return Yl(t,new Il(Aw(),e,i))}function ms(t,e,n=!1){const r=dz(t.pendingWriteTree_,e);if(fz(t.pendingWriteTree_,e)){let s=new Ke(null);return r.snap!=null?s=s.set($e(),!0):yn(r.children,o=>{s=s.set(new He(o),!0)}),Yl(t,new Yf(r.path,s,n))}else return[]}function _h(t,e,n){return Yl(t,new zo(Rw(),e,n))}function Kz(t,e,n){const r=Ke.fromObject(n);return Yl(t,new Il(Rw(),e,r))}function Qz(t,e){return Yl(t,new jc(Rw(),e))}function Xz(t,e,n){const r=Vw(t,n);if(r){const i=$w(r),s=i.path,o=i.queryId,a=Ln(s,e),u=new jc(Ow(o),a);return Bw(t,s,u)}else return[]}function tp(t,e,n,r,i=!1){const s=e._path,o=t.syncPointTree_.get(s);let a=[];if(o&&(e._queryIdentifier==="default"||XD(o,e))){const u=zz(o,e,n,r);Wz(o)&&(t.syncPointTree_=t.syncPointTree_.remove(s));const c=u.removed;if(a=u.events,!i){const d=c.findIndex(g=>g._queryParams.loadsAllData())!==-1,f=t.syncPointTree_.findOnPath(s,(g,v)=>Fs(v));if(d&&!f){const g=t.syncPointTree_.subtree(s);if(!g.isEmpty()){const v=e3(g);for(let w=0;w<v.length;++w){const T=v[w],C=T.query,I=nb(t,T);t.listenProvider_.startListening(ac(C),zc(t,C),I.hashFn,I.onComplete)}}}!f&&c.length>0&&!r&&(d?t.listenProvider_.stopListening(ac(e),null):c.forEach(g=>{const v=t.queryToTagMap.get(im(g));t.listenProvider_.stopListening(ac(g),v)}))}t3(t,c)}return a}function ZD(t,e,n,r){const i=Vw(t,r);if(i!=null){const s=$w(i),o=s.path,a=s.queryId,u=Ln(o,e),c=new zo(Ow(a),u,n);return Bw(t,o,c)}else return[]}function Jz(t,e,n,r){const i=Vw(t,r);if(i){const s=$w(i),o=s.path,a=s.queryId,u=Ln(o,e),c=Ke.fromObject(n),d=new Il(Ow(a),u,c);return Bw(t,o,d)}else return[]}function Cv(t,e,n,r=!1){const i=e._path;let s=null,o=!1;t.syncPointTree_.foreachOnPath(i,(g,v)=>{const w=Ln(g,i);s=s||xs(v,w),o=o||Fs(v)});let a=t.syncPointTree_.get(i);a?(o=o||Fs(a),s=s||xs(a,$e())):(a=new HD,t.syncPointTree_=t.syncPointTree_.set(i,a));let u;s!=null?u=!0:(u=!1,s=pe.EMPTY_NODE,t.syncPointTree_.subtree(i).foreachChild((v,w)=>{const T=xs(w,$e());T&&(s=s.updateImmediateChild(v,T))}));const c=XD(a,e);if(!c&&!e._queryParams.loadsAllData()){const g=im(e);j(!t.queryToTagMap.has(g),"View does not exist, but we have a tag");const v=n3();t.queryToTagMap.set(g,v),t.tagToQueryMap.set(v,g)}const d=nm(t.pendingWriteTree_,i);let f=jz(a,e,n,d,s,u);if(!c&&!o&&!r){const g=QD(a,e);f=f.concat(r3(t,e,g))}return f}function Uw(t,e,n){const i=t.pendingWriteTree_,s=t.syncPointTree_.findOnPath(e,(o,a)=>{const u=Ln(o,e),c=xs(a,u);if(c)return c});return BD(i,e,s,n,!0)}function Zz(t,e){const n=e._path;let r=null;t.syncPointTree_.foreachOnPath(n,(c,d)=>{const f=Ln(c,n);r=r||xs(d,f)});let i=t.syncPointTree_.get(n);i?r=r||xs(i,$e()):(i=new HD,t.syncPointTree_=t.syncPointTree_.set(n,i));const s=r!=null,o=s?new Ls(r,!0,!1):null,a=nm(t.pendingWriteTree_,e._path),u=YD(i,e,a,s?o.getNode():pe.EMPTY_NODE,s);return Lz(u)}function Yl(t,e){return eb(e,t.syncPointTree_,null,nm(t.pendingWriteTree_,$e()))}function eb(t,e,n,r){if(De(t.path))return tb(t,e,n,r);{const i=e.get($e());n==null&&i!=null&&(n=xs(i,$e()));let s=[];const o=Ce(t.path),a=t.operationForChild(o),u=e.children.get(o);if(u&&a){const c=n?n.getImmediateChild(o):null,d=WD(r,o);s=s.concat(eb(a,u,c,d))}return i&&(s=s.concat(Fw(i,t,r,n))),s}}function tb(t,e,n,r){const i=e.get($e());n==null&&i!=null&&(n=xs(i,$e()));let s=[];return e.children.inorderTraversal((o,a)=>{const u=n?n.getImmediateChild(o):null,c=WD(r,o),d=t.operationForChild(o);d&&(s=s.concat(tb(d,a,u,c)))}),i&&(s=s.concat(Fw(i,t,r,n))),s}function nb(t,e){const n=e.query,r=zc(t,n);return{hashFn:()=>(Mz(e)||pe.EMPTY_NODE).hash(),onComplete:i=>{if(i==="ok")return r?Xz(t,n._path,r):Qz(t,n._path);{const s=QW(i,n);return tp(t,n,null,s)}}}}function zc(t,e){const n=im(e);return t.queryToTagMap.get(n)}function im(t){return t._path.toString()+"$"+t._queryIdentifier}function Vw(t,e){return t.tagToQueryMap.get(e)}function $w(t){const e=t.indexOf("$");return j(e!==-1&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new He(t.substr(0,e))}}function Bw(t,e,n){const r=t.syncPointTree_.get(e);j(r,"Missing sync point for query tag that we're tracking");const i=nm(t.pendingWriteTree_,e);return Fw(r,n,i,null)}function e3(t){return t.fold((e,n,r)=>{if(n&&Fs(n))return[rm(n)];{let i=[];return n&&(i=KD(n)),yn(r,(s,o)=>{i=i.concat(o)}),i}})}function ac(t){return t._queryParams.loadsAllData()&&!t._queryParams.isDefault()?new(Gz())(t._repo,t._path):t}function t3(t,e){for(let n=0;n<e.length;++n){const r=e[n];if(!r._queryParams.loadsAllData()){const i=im(r),s=t.queryToTagMap.get(i);t.queryToTagMap.delete(i),t.tagToQueryMap.delete(s)}}}function n3(){return Hz++}function r3(t,e,n){const r=e._path,i=zc(t,e),s=nb(t,n),o=t.listenProvider_.startListening(ac(e),i,s.hashFn,s.onComplete),a=t.syncPointTree_.subtree(r);if(i)j(!Fs(a.value),"If we're adding a query, it shouldn't be shadowed");else{const u=a.fold((c,d,f)=>{if(!De(c)&&d&&Fs(d))return[rm(d).query];{let g=[];return d&&(g=g.concat(KD(d).map(v=>v.query))),yn(f,(v,w)=>{g=g.concat(w)}),g}});for(let c=0;c<u.length;++c){const d=u[c];t.listenProvider_.stopListening(ac(d),zc(t,d))}}return o}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ww{constructor(e){this.node_=e}getImmediateChild(e){const n=this.node_.getImmediateChild(e);return new Ww(n)}node(){return this.node_}}class jw{constructor(e,n){this.syncTree_=e,this.path_=n}getImmediateChild(e){const n=St(this.path_,e);return new jw(this.syncTree_,n)}node(){return Uw(this.syncTree_,this.path_)}}const i3=function(t){return t=t||{},t.timestamp=t.timestamp||new Date().getTime(),t},oT=function(t,e,n){if(!t||typeof t!="object")return t;if(j(".sv"in t,"Unexpected leaf node or priority contents"),typeof t[".sv"]=="string")return s3(t[".sv"],e,n);if(typeof t[".sv"]=="object")return o3(t[".sv"],e);j(!1,"Unexpected server value: "+JSON.stringify(t,null,2))},s3=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:j(!1,"Unexpected server value: "+t)}},o3=function(t,e,n){t.hasOwnProperty("increment")||j(!1,"Unexpected server value: "+JSON.stringify(t,null,2));const r=t.increment;typeof r!="number"&&j(!1,"Unexpected increment value: "+r);const i=e.node();if(j(i!==null&&typeof i<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;const o=i.getValue();return typeof o!="number"?r:o+r},rb=function(t,e,n,r){return zw(e,new jw(n,t),r)},ib=function(t,e,n){return zw(t,new Ww(e),n)};function zw(t,e,n){const r=t.getPriority().val(),i=oT(r,e.getImmediateChild(".priority"),n);let s;if(t.isLeafNode()){const o=t,a=oT(o.getValue(),e,n);return a!==o.getValue()||i!==o.getPriority().val()?new Jt(a,Wt(i)):t}else{const o=t;return s=o,i!==o.getPriority().val()&&(s=s.updatePriority(new Jt(i))),o.forEachChild(kt,(a,u)=>{const c=zw(u,e.getImmediateChild(a),n);c!==u&&(s=s.updateImmediateChild(a,c))}),s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qw{constructor(e="",n=null,r={children:{},childCount:0}){this.name=e,this.parent=n,this.node=r}}function Gw(t,e){let n=e instanceof He?e:new He(e),r=t,i=Ce(n);for(;i!==null;){const s=gl(r.node.children,i)||{children:{},childCount:0};r=new qw(i,r,s),n=Qe(n),i=Ce(n)}return r}function Kl(t){return t.node.value}function sb(t,e){t.node.value=e,Nv(t)}function ob(t){return t.node.childCount>0}function a3(t){return Kl(t)===void 0&&!ob(t)}function sm(t,e){yn(t.node.children,(n,r)=>{e(new qw(n,t,r))})}function ab(t,e,n,r){n&&!r&&e(t),sm(t,i=>{ab(i,e,!0,r)}),n&&r&&e(t)}function l3(t,e,n){let r=n?t:t.parent;for(;r!==null;){if(e(r))return!0;r=r.parent}return!1}function wh(t){return new He(t.parent===null?t.name:wh(t.parent)+"/"+t.name)}function Nv(t){t.parent!==null&&u3(t.parent,t.name,t)}function u3(t,e,n){const r=a3(n),i=ai(t.node.children,e);r&&i?(delete t.node.children[e],t.node.childCount--,Nv(t)):!r&&!i&&(t.node.children[e]=n.node,t.node.childCount++,Nv(t))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c3=/[\[\].#$\/\u0000-\u001F\u007F]/,h3=/[\[\].#$\u0000-\u001F\u007F]/,Zg=10*1024*1024,Hw=function(t){return typeof t=="string"&&t.length!==0&&!c3.test(t)},lb=function(t){return typeof t=="string"&&t.length!==0&&!h3.test(t)},d3=function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),lb(t)},f3=function(t){return t===null||typeof t=="string"||typeof t=="number"&&!ww(t)||t&&typeof t=="object"&&ai(t,".sv")},p3=function(t,e,n,r){r&&e===void 0||om($p(t,"value"),e,n)},om=function(t,e,n){const r=n instanceof He?new xj(n,t):n;if(e===void 0)throw new Error(t+"contains undefined "+go(r));if(typeof e=="function")throw new Error(t+"contains a function "+go(r)+" with contents = "+e.toString());if(ww(e))throw new Error(t+"contains "+e.toString()+" "+go(r));if(typeof e=="string"&&e.length>Zg/3&&Bp(e)>Zg)throw new Error(t+"contains a string greater than "+Zg+" utf8 bytes "+go(r)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let i=!1,s=!1;if(yn(e,(o,a)=>{if(o===".value")i=!0;else if(o!==".priority"&&o!==".sv"&&(s=!0,!Hw(o)))throw new Error(t+" contains an invalid key ("+o+") "+go(r)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);Aj(r,o),om(t,a,r),Rj(r)}),i&&s)throw new Error(t+' contains ".value" child '+go(r)+" in addition to actual children.")}},m3=function(t,e){let n,r;for(n=0;n<e.length;n++){r=e[n];const s=Vc(r);for(let o=0;o<s.length;o++)if(!(s[o]===".priority"&&o===s.length-1)){if(!Hw(s[o]))throw new Error(t+"contains an invalid key ("+s[o]+") in path "+r.toString()+`. Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`)}}e.sort(bj);let i=null;for(n=0;n<e.length;n++){if(r=e[n],i!==null&&Tr(i,r))throw new Error(t+"contains a path "+i.toString()+" that is ancestor of another path "+r.toString());i=r}},g3=function(t,e,n,r){if(r&&e===void 0)return;const i=$p(t,"values");if(!(e&&typeof e=="object")||Array.isArray(e))throw new Error(i+" must be an object containing the children to replace.");const s=[];yn(e,(o,a)=>{const u=new He(o);if(om(i,a,St(n,u)),kw(u)===".priority"&&!f3(a))throw new Error(i+"contains an invalid value for '"+u.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");s.push(u)}),m3(i,s)},ub=function(t,e,n,r){if(!(r&&n===void 0)&&!lb(n))throw new Error($p(t,e)+'was an invalid path = "'+n+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},y3=function(t,e,n,r){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),ub(t,e,n,r)},v3=function(t,e){if(Ce(e)===".info")throw new Error(t+" failed = Can't modify data under /.info/")},_3=function(t,e){const n=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!Hw(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||n.length!==0&&!d3(n))throw new Error($p(t,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w3{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function am(t,e){let n=null;for(let r=0;r<e.length;r++){const i=e[r],s=i.getPath();n!==null&&!Cw(s,n.path)&&(t.eventLists_.push(n),n=null),n===null&&(n={events:[],path:s}),n.events.push(i)}n&&t.eventLists_.push(n)}function cb(t,e,n){am(t,n),hb(t,r=>Cw(r,e))}function xr(t,e,n){am(t,n),hb(t,r=>Tr(r,e)||Tr(e,r))}function hb(t,e){t.recursionDepth_++;let n=!0;for(let r=0;r<t.eventLists_.length;r++){const i=t.eventLists_[r];if(i){const s=i.path;e(s)?(I3(t.eventLists_[r]),t.eventLists_[r]=null):n=!1}}n&&(t.eventLists_=[]),t.recursionDepth_--}function I3(t){for(let e=0;e<t.events.length;e++){const n=t.events[e];if(n!==null){t.events[e]=null;const r=n.getEventRunner();Oo&&dn("event: "+n.toString()),Hl(r)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E3="repo_interrupt",S3=25;class T3{constructor(e,n,r,i){this.repoInfo_=e,this.forceRestClient_=n,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new w3,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Hf(),this.transactionQueueTree_=new qw,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function k3(t,e,n){if(t.stats_=Sw(t.repoInfo_),t.forceRestClient_||ej())t.server_=new Gf(t.repoInfo_,(r,i,s,o)=>{aT(t,r,i,s,o)},t.authTokenProvider_,t.appCheckProvider_),setTimeout(()=>lT(t,!0),0);else{if(typeof n<"u"&&n!==null){if(typeof n!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{jt(n)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}t.persistentConnection_=new Ai(t.repoInfo_,e,(r,i,s,o)=>{aT(t,r,i,s,o)},r=>{lT(t,r)},r=>{N3(t,r)},t.authTokenProvider_,t.appCheckProvider_,n),t.server_=t.persistentConnection_}t.authTokenProvider_.addTokenChangeListener(r=>{t.server_.refreshAuthToken(r)}),t.appCheckProvider_.addTokenChangeListener(r=>{t.server_.refreshAppCheckToken(r.token)}),t.statsReporter_=sj(t.repoInfo_,()=>new iz(t.stats_,t.server_)),t.infoData_=new Zj,t.infoSyncTree_=new sT({startListening:(r,i,s,o)=>{let a=[];const u=t.infoData_.getNode(r._path);return u.isEmpty()||(a=_h(t.infoSyncTree_,r._path,u),setTimeout(()=>{o("ok")},0)),a},stopListening:()=>{}}),Yw(t,"connected",!1),t.serverSyncTree_=new sT({startListening:(r,i,s,o)=>(t.server_.listen(r,s,i,(a,u)=>{const c=o(a,u);xr(t.eventQueue_,r._path,c)}),[]),stopListening:(r,i)=>{t.server_.unlisten(r,i)}})}function C3(t){const n=t.infoData_.getNode(new He(".info/serverTimeOffset")).val()||0;return new Date().getTime()+n}function lm(t){return i3({timestamp:C3(t)})}function aT(t,e,n,r,i){t.dataUpdateCount++;const s=new He(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;let o=[];if(i)if(r){const u=Lf(n,c=>Wt(c));o=Jz(t.serverSyncTree_,s,u,i)}else{const u=Wt(n);o=ZD(t.serverSyncTree_,s,u,i)}else if(r){const u=Lf(n,c=>Wt(c));o=Kz(t.serverSyncTree_,s,u)}else{const u=Wt(n);o=_h(t.serverSyncTree_,s,u)}let a=s;o.length>0&&(a=Sl(t,s)),xr(t.eventQueue_,a,o)}function lT(t,e){Yw(t,"connected",e),e===!1&&A3(t)}function N3(t,e){yn(e,(n,r)=>{Yw(t,n,r)})}function Yw(t,e,n){const r=new He("/.info/"+e),i=Wt(n);t.infoData_.updateSnapshot(r,i);const s=_h(t.infoSyncTree_,r,i);xr(t.eventQueue_,r,s)}function Kw(t){return t.nextWriteId_++}function D3(t,e,n){const r=Zz(t.serverSyncTree_,e);return r!=null?Promise.resolve(r):t.server_.get(e).then(i=>{const s=Wt(i).withIndex(e._queryParams.getIndex());Cv(t.serverSyncTree_,e,n,!0);let o;if(e._queryParams.loadsAllData())o=_h(t.serverSyncTree_,e._path,s);else{const a=zc(t.serverSyncTree_,e);o=ZD(t.serverSyncTree_,e._path,s,a)}return xr(t.eventQueue_,e._path,o),tp(t.serverSyncTree_,e,n,null,!0),s},i=>(Ih(t,"get for query "+jt(e)+" failed: "+i),Promise.reject(new Error(i))))}function b3(t,e,n,r,i){Ih(t,"set",{path:e.toString(),value:n,priority:r});const s=lm(t),o=Wt(n,r),a=Uw(t.serverSyncTree_,e),u=ib(o,a,s),c=Kw(t),d=JD(t.serverSyncTree_,e,u,c,!0);am(t.eventQueue_,d),t.server_.put(e.toString(),o.val(!0),(g,v)=>{const w=g==="ok";w||Vn("set at "+e+" failed: "+g);const T=ms(t.serverSyncTree_,c,!w);xr(t.eventQueue_,e,T),Dv(t,i,g,v)});const f=Xw(t,e);Sl(t,f),xr(t.eventQueue_,f,[])}function x3(t,e,n,r){Ih(t,"update",{path:e.toString(),value:n});let i=!0;const s=lm(t),o={};if(yn(n,(a,u)=>{i=!1,o[a]=rb(St(e,a),Wt(u),t.serverSyncTree_,s)}),i)dn("update() called with empty data.  Don't do anything."),Dv(t,r,"ok",void 0);else{const a=Kw(t),u=Yz(t.serverSyncTree_,e,o,a);am(t.eventQueue_,u),t.server_.merge(e.toString(),n,(c,d)=>{const f=c==="ok";f||Vn("update at "+e+" failed: "+c);const g=ms(t.serverSyncTree_,a,!f),v=g.length>0?Sl(t,e):e;xr(t.eventQueue_,v,g),Dv(t,r,c,d)}),yn(n,c=>{const d=Xw(t,St(e,c));Sl(t,d)}),xr(t.eventQueue_,e,[])}}function A3(t){Ih(t,"onDisconnectEvents");const e=lm(t),n=Hf();wv(t.onDisconnect_,$e(),(i,s)=>{const o=rb(i,s,t.serverSyncTree_,e);FD(n,i,o)});let r=[];wv(n,$e(),(i,s)=>{r=r.concat(_h(t.serverSyncTree_,i,s));const o=Xw(t,i);Sl(t,o)}),t.onDisconnect_=Hf(),xr(t.eventQueue_,$e(),r)}function R3(t,e,n){let r;Ce(e._path)===".info"?r=Cv(t.infoSyncTree_,e,n):r=Cv(t.serverSyncTree_,e,n),cb(t.eventQueue_,e._path,r)}function uT(t,e,n){let r;Ce(e._path)===".info"?r=tp(t.infoSyncTree_,e,n):r=tp(t.serverSyncTree_,e,n),cb(t.eventQueue_,e._path,r)}function O3(t){t.persistentConnection_&&t.persistentConnection_.interrupt(E3)}function Ih(t,...e){let n="";t.persistentConnection_&&(n=t.persistentConnection_.id+":"),dn(n,...e)}function Dv(t,e,n,r){e&&Hl(()=>{if(n==="ok")e(null);else{const i=(n||"error").toUpperCase();let s=i;r&&(s+=": "+r);const o=new Error(s);o.code=i,e(o)}})}function db(t,e,n){return Uw(t.serverSyncTree_,e,n)||pe.EMPTY_NODE}function Qw(t,e=t.transactionQueueTree_){if(e||um(t,e),Kl(e)){const n=pb(t,e);j(n.length>0,"Sending zero length transaction queue"),n.every(i=>i.status===0)&&P3(t,wh(e),n)}else ob(e)&&sm(e,n=>{Qw(t,n)})}function P3(t,e,n){const r=n.map(c=>c.currentWriteId),i=db(t,e,r);let s=i;const o=i.hash();for(let c=0;c<n.length;c++){const d=n[c];j(d.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),d.status=1,d.retryCount++;const f=Ln(e,d.path);s=s.updateChild(f,d.currentOutputSnapshotRaw)}const a=s.val(!0),u=e;t.server_.put(u.toString(),a,c=>{Ih(t,"transaction put response",{path:u.toString(),status:c});let d=[];if(c==="ok"){const f=[];for(let g=0;g<n.length;g++)n[g].status=2,d=d.concat(ms(t.serverSyncTree_,n[g].currentWriteId)),n[g].onComplete&&f.push(()=>n[g].onComplete(null,!0,n[g].currentOutputSnapshotResolved)),n[g].unwatcher();um(t,Gw(t.transactionQueueTree_,e)),Qw(t,t.transactionQueueTree_),xr(t.eventQueue_,e,d);for(let g=0;g<f.length;g++)Hl(f[g])}else{if(c==="datastale")for(let f=0;f<n.length;f++)n[f].status===3?n[f].status=4:n[f].status=0;else{Vn("transaction at "+u.toString()+" failed: "+c);for(let f=0;f<n.length;f++)n[f].status=4,n[f].abortReason=c}Sl(t,e)}},o)}function Sl(t,e){const n=fb(t,e),r=wh(n),i=pb(t,n);return M3(t,i,r),r}function M3(t,e,n){if(e.length===0)return;const r=[];let i=[];const o=e.filter(a=>a.status===0).map(a=>a.currentWriteId);for(let a=0;a<e.length;a++){const u=e[a],c=Ln(n,u.path);let d=!1,f;if(j(c!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),u.status===4)d=!0,f=u.abortReason,i=i.concat(ms(t.serverSyncTree_,u.currentWriteId,!0));else if(u.status===0)if(u.retryCount>=S3)d=!0,f="maxretry",i=i.concat(ms(t.serverSyncTree_,u.currentWriteId,!0));else{const g=db(t,u.path,o);u.currentInputSnapshot=g;const v=e[a].update(g.val());if(v!==void 0){om("transaction failed: Data returned ",v,u.path);let w=Wt(v);typeof v=="object"&&v!=null&&ai(v,".priority")||(w=w.updatePriority(g.getPriority()));const C=u.currentWriteId,I=lm(t),_=ib(w,g,I);u.currentOutputSnapshotRaw=w,u.currentOutputSnapshotResolved=_,u.currentWriteId=Kw(t),o.splice(o.indexOf(C),1),i=i.concat(JD(t.serverSyncTree_,u.path,_,u.currentWriteId,u.applyLocally)),i=i.concat(ms(t.serverSyncTree_,C,!0))}else d=!0,f="nodata",i=i.concat(ms(t.serverSyncTree_,u.currentWriteId,!0))}xr(t.eventQueue_,n,i),i=[],d&&(e[a].status=2,function(g){setTimeout(g,Math.floor(0))}(e[a].unwatcher),e[a].onComplete&&(f==="nodata"?r.push(()=>e[a].onComplete(null,!1,e[a].currentInputSnapshot)):r.push(()=>e[a].onComplete(new Error(f),!1,null))))}um(t,t.transactionQueueTree_);for(let a=0;a<r.length;a++)Hl(r[a]);Qw(t,t.transactionQueueTree_)}function fb(t,e){let n,r=t.transactionQueueTree_;for(n=Ce(e);n!==null&&Kl(r)===void 0;)r=Gw(r,n),e=Qe(e),n=Ce(e);return r}function pb(t,e){const n=[];return mb(t,e,n),n.sort((r,i)=>r.order-i.order),n}function mb(t,e,n){const r=Kl(e);if(r)for(let i=0;i<r.length;i++)n.push(r[i]);sm(e,i=>{mb(t,i,n)})}function um(t,e){const n=Kl(e);if(n){let r=0;for(let i=0;i<n.length;i++)n[i].status!==2&&(n[r]=n[i],r++);n.length=r,sb(e,n.length>0?n:void 0)}sm(e,r=>{um(t,r)})}function Xw(t,e){const n=wh(fb(t,e)),r=Gw(t.transactionQueueTree_,e);return l3(r,i=>{ey(t,i)}),ey(t,r),ab(r,i=>{ey(t,i)}),n}function ey(t,e){const n=Kl(e);if(n){const r=[];let i=[],s=-1;for(let o=0;o<n.length;o++)n[o].status===3||(n[o].status===1?(j(s===o-1,"All SENT items should be at beginning of queue."),s=o,n[o].status=3,n[o].abortReason="set"):(j(n[o].status===0,"Unexpected transaction status in abort"),n[o].unwatcher(),i=i.concat(ms(t.serverSyncTree_,n[o].currentWriteId,!0)),n[o].onComplete&&r.push(n[o].onComplete.bind(null,new Error("set"),!1,null))));s===-1?sb(e,void 0):n.length=s+1,xr(t.eventQueue_,wh(e),i);for(let o=0;o<r.length;o++)Hl(r[o])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function L3(t){let e="";const n=t.split("/");for(let r=0;r<n.length;r++)if(n[r].length>0){let i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}e+="/"+i}return e}function F3(t){const e={};t.charAt(0)==="?"&&(t=t.substring(1));for(const n of t.split("&")){if(n.length===0)continue;const r=n.split("=");r.length===2?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):Vn(`Invalid query segment '${n}' in query '${t}'`)}return e}const cT=function(t,e){const n=U3(t),r=n.namespace;n.domain==="firebase.com"&&Ui(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||r==="undefined")&&n.domain!=="localhost"&&Ui("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||qW();const i=n.scheme==="ws"||n.scheme==="wss";return{repoInfo:new wD(n.host,n.secure,r,i,e,"",r!==n.subdomain),path:new He(n.pathString)}},U3=function(t){let e="",n="",r="",i="",s="",o=!0,a="https",u=443;if(typeof t=="string"){let c=t.indexOf("//");c>=0&&(a=t.substring(0,c-1),t=t.substring(c+2));let d=t.indexOf("/");d===-1&&(d=t.length);let f=t.indexOf("?");f===-1&&(f=t.length),e=t.substring(0,Math.min(d,f)),d<f&&(i=L3(t.substring(d,f)));const g=F3(t.substring(Math.min(t.length,f)));c=e.indexOf(":"),c>=0?(o=a==="https"||a==="wss",u=parseInt(e.substring(c+1),10)):c=e.length;const v=e.slice(0,c);if(v.toLowerCase()==="localhost")n="localhost";else if(v.split(".").length<=2)n=v;else{const w=e.indexOf(".");r=e.substring(0,w).toLowerCase(),n=e.substring(w+1),s=r}"ns"in g&&(s=g.ns)}return{host:e,port:u,domain:n,subdomain:r,secure:o,scheme:a,pathString:i,namespace:s}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gb{constructor(e,n,r,i){this.eventType=e,this.eventRegistration=n,this.snapshot=r,this.prevName=i}getPath(){const e=this.snapshot.ref;return this.eventType==="value"?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+jt(this.snapshot.exportVal())}}class yb{constructor(e,n,r){this.eventRegistration=e,this.error=n,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vb{constructor(e,n){this.snapshotCallback=e,this.cancelCallback=n}onValue(e,n){this.snapshotCallback.call(null,e,n)}onCancel(e){return j(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jw{constructor(e,n,r,i){this._repo=e,this._path=n,this._queryParams=r,this._orderByCalled=i}get key(){return De(this._path)?null:kw(this._path)}get ref(){return new li(this._repo,this._path)}get _queryIdentifier(){const e=KS(this._queryParams),n=Iw(e);return n==="{}"?"default":n}get _queryObject(){return KS(this._queryParams)}isEqual(e){if(e=te(e),!(e instanceof Jw))return!1;const n=this._repo===e._repo,r=Cw(this._path,e._path),i=this._queryIdentifier===e._queryIdentifier;return n&&r&&i}toJSON(){return this.toString()}toString(){return this._repo.toString()+Dj(this._path)}}class li extends Jw{constructor(e,n){super(e,n,new xw,!1)}get parent(){const e=bD(this._path);return e===null?null:new li(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}}class Tl{constructor(e,n,r){this._node=e,this.ref=n,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const n=new He(e),r=np(this.ref,e);return new Tl(this._node.getChild(n),r,kt)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(r,i)=>e(new Tl(i,np(this.ref,r),kt)))}hasChild(e){const n=new He(e);return!this._node.getChild(n).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function Nd(t,e){return t=te(t),t._checkNotDeleted("ref"),e!==void 0?np(t._root,e):t._root}function np(t,e){return t=te(t),Ce(t._path)===null?y3("child","path",e,!1):ub("child","path",e,!1),new li(t._repo,St(t._path,e))}function V3(t,e){t=te(t),v3("set",t._path),p3("set",e,t._path,!1);const n=new dh;return b3(t._repo,t._path,e,null,n.wrapCallback(()=>{})),n.promise}function $3(t,e){g3("update",e,t._path,!1);const n=new dh;return x3(t._repo,t._path,e,n.wrapCallback(()=>{})),n.promise}function B3(t){t=te(t);const e=new vb(()=>{}),n=new cm(e);return D3(t._repo,t,n).then(r=>new Tl(r,new li(t._repo,t._path),t._queryParams.getIndex()))}class cm{constructor(e){this.callbackContext=e}respondsTo(e){return e==="value"}createEvent(e,n){const r=n._queryParams.getIndex();return new gb("value",this,new Tl(e.snapshotNode,new li(n._repo,n._path),r))}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,n){return this.callbackContext.hasCancelCallback?new yb(this,e,n):null}matches(e){return e instanceof cm?!e.callbackContext||!this.callbackContext?!0:e.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}}class Zw{constructor(e,n){this.eventType=e,this.callbackContext=n}respondsTo(e){let n=e==="children_added"?"child_added":e;return n=n==="children_removed"?"child_removed":n,this.eventType===n}createCancelEvent(e,n){return this.callbackContext.hasCancelCallback?new yb(this,e,n):null}createEvent(e,n){j(e.childName!=null,"Child events should have a childName.");const r=np(new li(n._repo,n._path),e.childName),i=n._queryParams.getIndex();return new gb(e.type,this,new Tl(e.snapshotNode,r,i),e.prevName)}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof Zw?this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext)):!1}hasAnyCallback(){return!!this.callbackContext}}function W3(t,e,n,r,i){let s;if(typeof r=="object"&&(s=void 0,i=r),typeof r=="function"&&(s=r),i&&i.onlyOnce){const u=n,c=(d,f)=>{uT(t._repo,t,a),u(d,f)};c.userCallback=n.userCallback,c.context=n.context,n=c}const o=new vb(n,s||void 0),a=e==="value"?new cm(o):new Zw(e,o);return R3(t._repo,t,a),()=>uT(t._repo,t,a)}function j3(t,e,n,r){return W3(t,"value",e,n,r)}$z(li);qz(li);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z3="FIREBASE_DATABASE_EMULATOR_HOST",bv={};let q3=!1;function G3(t,e,n,r){t.repoInfo_=new wD(`${e}:${n}`,!1,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams,!0),r&&(t.authTokenProvider_=r)}function H3(t,e,n,r,i){let s=r||t.options.databaseURL;s===void 0&&(t.options.projectId||Ui("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),dn("Using default host for project ",t.options.projectId),s=`${t.options.projectId}-default-rtdb.firebaseio.com`);let o=cT(s,i),a=o.repoInfo,u,c;typeof process<"u"&&process.env&&(c=process.env[z3]),c?(u=!0,s=`http://${c}?ns=${a.namespace}`,o=cT(s,i),a=o.repoInfo):u=!o.repoInfo.secure;const d=i&&u?new sl(sl.OWNER):new nj(t.name,t.options,e);_3("Invalid Firebase Database URL",o),De(o.path)||Ui("Database URL must point to the root of a Firebase Database (not including a child path).");const f=K3(a,t,d,new tj(t.name,n));return new Q3(f,t)}function Y3(t,e){const n=bv[e];(!n||n[t.key]!==t)&&Ui(`Database ${e}(${t.repoInfo_}) has already been deleted.`),O3(t),delete n[t.key]}function K3(t,e,n,r){let i=bv[e.name];i||(i={},bv[e.name]=i);let s=i[t.toURLString()];return s&&Ui("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),s=new T3(t,q3,n,r),i[t.toURLString()]=s,s}class Q3{constructor(e,n){this._repoInternal=e,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(k3(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new li(this._repo,$e())),this._rootInternal}_delete(){return this._rootInternal!==null&&(Y3(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&Ui("Cannot call "+e+" on a deleted database.")}}function X3(t=iw(),e){const n=Bl(t,"database").getImmediate({identifier:e});if(!n._instanceStarted){const r=qC("database");r&&J3(n,...r)}return n}function J3(t,e,n,r={}){t=te(t),t._checkNotDeleted("useEmulator"),t._instanceStarted&&Ui("Cannot call useEmulator() after instance has already been initialized.");const i=t._repoInternal;let s;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&Ui('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),s=new sl(sl.OWNER);else if(r.mockUserToken){const o=typeof r.mockUserToken=="string"?r.mockUserToken:HC(r.mockUserToken,t.app.options.projectId);s=new sl(o)}G3(i,e,n,s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z3(t){$W(Wl),Wo(new Ps("database",(e,{instanceIdentifier:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),s=e.getProvider("app-check-internal");return H3(r,i,s,n)},"PUBLIC").setMultipleInstances(!0)),ri(RS,OS,t),ri(RS,OS,"esm2017")}Ai.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)};Ai.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};Z3();var bt={};const eq=x1(VW);Object.defineProperty(bt,"__esModule",{value:!0});var Yt=eq,ce=Vt;/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function qn(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(d){try{c(r.next(d))}catch(f){o(f)}}function u(d){try{c(r.throw(d))}catch(f){o(f)}}function c(d){d.done?s(d.value):i(d.value).then(a,u)}c((r=r.apply(t,e||[])).next())})}function Gn(t,e){var n={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},r,i,s,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(c){return function(d){return u([c,d])}}function u(c){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,i&&(s=c[0]&2?i.return:c[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,c[1])).done)return s;switch(i=0,s&&(c=[c[0]&2,s.value]),c[0]){case 0:case 1:s=c;break;case 4:return n.label++,{value:c[1],done:!1};case 5:n.label++,i=c[1],c=[0];continue;case 7:c=n.ops.pop(),n.trys.pop();continue;default:if(s=n.trys,!(s=s.length>0&&s[s.length-1])&&(c[0]===6||c[0]===2)){n=0;continue}if(c[0]===3&&(!s||c[1]>s[0]&&c[1]<s[3])){n.label=c[1];break}if(c[0]===6&&n.label<s[1]){n.label=s[1],s=c;break}if(s&&n.label<s[2]){n.label=s[2],n.ops.push(c);break}s[2]&&n.ops.pop(),n.trys.pop();continue}c=e.call(t,n)}catch(d){c=[6,d],i=0}finally{r=s=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Ha=function(){return Ha=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},Ha.apply(this,arguments)},_b=function(t){return{loading:t==null,value:t}},tq=function(){return function(t,e){switch(e.type){case"error":return Ha(Ha({},t),{error:e.error,loading:!1,value:void 0});case"reset":return _b(e.defaultValue);case"value":return Ha(Ha({},t),{error:void 0,loading:!1,value:e.value});default:return t}}},wb=function(t){var e=t?t():void 0,n=ce.useReducer(tq(),_b(e)),r=n[0],i=n[1],s=ce.useCallback(function(){var u=t?t():void 0;i({type:"reset",defaultValue:u})},[t]),o=ce.useCallback(function(u){i({type:"error",error:u})},[]),a=ce.useCallback(function(u){i({type:"value",value:u})},[]);return ce.useMemo(function(){return{error:r.error,loading:r.loading,reset:s,setError:o,setValue:a,value:r.value}},[r.error,r.loading,s,o,a,r.value])},nq=function(t,e){var n=wb(function(){return t.currentUser}),r=n.error,i=n.loading,s=n.setError,o=n.setValue,a=n.value;return ce.useEffect(function(){var u=Yt.onAuthStateChanged(t,function(c){return qn(void 0,void 0,void 0,function(){var d;return Gn(this,function(f){switch(f.label){case 0:if(!(e!=null&&e.onUserChanged))return[3,4];f.label=1;case 1:return f.trys.push([1,3,,4]),[4,e.onUserChanged(c)];case 2:return f.sent(),[3,4];case 3:return d=f.sent(),s(d),[3,4];case 4:return o(c),[2]}})})},s);return function(){u()}},[t]),[a,i,r]},rq=function(t,e){var n=ce.useState(),r=n[0],i=n[1],s=ce.useState(),o=s[0],a=s[1],u=ce.useState(!1),c=u[0],d=u[1],f=ce.useCallback(function(g,v){return qn(void 0,void 0,void 0,function(){var w,T;return Gn(this,function(C){switch(C.label){case 0:d(!0),i(void 0),C.label=1;case 1:return C.trys.push([1,5,6,7]),[4,Yt.createUserWithEmailAndPassword(t,g,v)];case 2:return w=C.sent(),e&&e.sendEmailVerification&&w.user?[4,Yt.sendEmailVerification(w.user,e.emailVerificationOptions)]:[3,4];case 3:C.sent(),C.label=4;case 4:return a(w),[2,w];case 5:return T=C.sent(),i(T),[3,7];case 6:return d(!1),[7];case 7:return[2]}})})},[t,e]);return[f,o,c,r]},iq=function(t){var e=ce.useState(),n=e[0],r=e[1],i=ce.useState(!1),s=i[0],o=i[1],a=ce.useCallback(function(){return qn(void 0,void 0,void 0,function(){var u;return Gn(this,function(c){switch(c.label){case 0:o(!0),r(void 0),c.label=1;case 1:return c.trys.push([1,5,6,7]),t.currentUser?[4,t.currentUser.delete()]:[3,3];case 2:return c.sent(),[2,!0];case 3:throw new Error("No user is logged in");case 4:return[3,7];case 5:return u=c.sent(),r(u),[2,!1];case 6:return o(!1),[7];case 7:return[2]}})})},[t]);return[a,s,n]},sq=function(t){var e=ce.useState(),n=e[0],r=e[1],i=ce.useState(!1),s=i[0],o=i[1],a=ce.useCallback(function(){return qn(void 0,void 0,void 0,function(){var u;return Gn(this,function(c){switch(c.label){case 0:o(!0),r(void 0),c.label=1;case 1:return c.trys.push([1,5,6,7]),t.currentUser?[4,Yt.sendEmailVerification(t.currentUser)]:[3,3];case 2:return c.sent(),[2,!0];case 3:throw new Error("No user is logged in");case 4:return[3,7];case 5:return u=c.sent(),r(u),[2,!1];case 6:return o(!1),[7];case 7:return[2]}})})},[t]);return[a,s,n]},oq=function(t){var e=ce.useState(),n=e[0],r=e[1],i=ce.useState(!1),s=i[0],o=i[1],a=ce.useCallback(function(u,c){return qn(void 0,void 0,void 0,function(){var d;return Gn(this,function(f){switch(f.label){case 0:o(!0),r(void 0),f.label=1;case 1:return f.trys.push([1,3,4,5]),[4,Yt.sendPasswordResetEmail(t,u,c)];case 2:return f.sent(),[2,!0];case 3:return d=f.sent(),r(d),[2,!1];case 4:return o(!1),[7];case 5:return[2]}})})},[t]);return[a,s,n]},aq=function(t){var e=ce.useState(),n=e[0],r=e[1],i=ce.useState(!1),s=i[0],o=i[1],a=ce.useCallback(function(u,c){return qn(void 0,void 0,void 0,function(){var d;return Gn(this,function(f){switch(f.label){case 0:o(!0),r(void 0),f.label=1;case 1:return f.trys.push([1,3,4,5]),[4,Yt.sendSignInLinkToEmail(t,u,c)];case 2:return f.sent(),[2,!0];case 3:return d=f.sent(),r(d),[2,!1];case 4:return o(!1),[7];case 5:return[2]}})})},[t]);return[a,s,n]},lq=function(t){var e=ce.useState(),n=e[0],r=e[1],i=ce.useState(),s=i[0],o=i[1],a=ce.useState(!1),u=a[0],c=a[1],d=ce.useCallback(function(f,g){return qn(void 0,void 0,void 0,function(){var v,w;return Gn(this,function(T){switch(T.label){case 0:c(!0),r(void 0),T.label=1;case 1:return T.trys.push([1,3,4,5]),[4,Yt.signInWithEmailAndPassword(t,f,g)];case 2:return v=T.sent(),o(v),[2,v];case 3:return w=T.sent(),r(w),[3,5];case 4:return c(!1),[7];case 5:return[2]}})})},[t]);return[d,s,u,n]},uq=function(t){var e=ce.useState(),n=e[0],r=e[1],i=ce.useState(),s=i[0],o=i[1],a=ce.useState(!1),u=a[0],c=a[1],d=ce.useCallback(function(f,g){return qn(void 0,void 0,void 0,function(){var v,w;return Gn(this,function(T){switch(T.label){case 0:c(!0),r(void 0),T.label=1;case 1:return T.trys.push([1,3,4,5]),[4,Yt.signInWithEmailLink(t,f,g)];case 2:return v=T.sent(),o(v),[2,v];case 3:return w=T.sent(),r(w),[3,5];case 4:return c(!1),[7];case 5:return[2]}})})},[t]);return[d,s,u,n]},cq=function(t){return e0(t,"apple.com")},hq=function(t){var e=ce.useCallback(function(n,r){var i=new Yt.FacebookAuthProvider;return n&&n.forEach(function(s){return i.addScope(s)}),r&&i.setCustomParameters(r),i},[]);return Eh(t,e)},dq=function(t){var e=ce.useCallback(function(n,r){var i=new Yt.GithubAuthProvider;return n&&n.forEach(function(s){return i.addScope(s)}),r&&i.setCustomParameters(r),i},[]);return Eh(t,e)},fq=function(t){var e=ce.useCallback(function(n,r){var i=new Yt.GoogleAuthProvider;return n&&n.forEach(function(s){return i.addScope(s)}),r&&i.setCustomParameters(r),i},[]);return Eh(t,e)},pq=function(t){return e0(t,"microsoft.com")},mq=function(t){var e=ce.useCallback(function(n,r){var i=new Yt.TwitterAuthProvider;return n&&n.forEach(function(s){return i.addScope(s)}),r&&i.setCustomParameters(r),i},[]);return Eh(t,e)},gq=function(t){return e0(t,"yahoo.com")},e0=function(t,e){var n=ce.useCallback(function(r,i){var s=new Yt.OAuthProvider(e);return r&&r.forEach(function(o){return s.addScope(o)}),i&&s.setCustomParameters(i),s},[e]);return Eh(t,n)},Eh=function(t,e){var n=ce.useState(),r=n[0],i=n[1],s=ce.useState(),o=s[0],a=s[1],u=ce.useState(!1),c=u[0],d=u[1],f=ce.useCallback(function(g,v){return qn(void 0,void 0,void 0,function(){var w,T,C;return Gn(this,function(I){switch(I.label){case 0:d(!0),i(void 0),I.label=1;case 1:return I.trys.push([1,3,4,5]),w=e(g,v),[4,Yt.signInWithPopup(t,w)];case 2:return T=I.sent(),a(T),[2,T];case 3:return C=I.sent(),i(C),[3,5];case 4:return d(!1),[7];case 5:return[2]}})})},[t,e]);return[f,o,c,r]},yq=function(t){var e=ce.useState(),n=e[0],r=e[1],i=ce.useState(!1),s=i[0],o=i[1],a=ce.useCallback(function(){return qn(void 0,void 0,void 0,function(){var u;return Gn(this,function(c){switch(c.label){case 0:o(!0),r(void 0),c.label=1;case 1:return c.trys.push([1,3,4,5]),[4,t.signOut()];case 2:return c.sent(),[2,!0];case 3:return u=c.sent(),r(u),[2,!1];case 4:return o(!1),[7];case 5:return[2]}})})},[t]);return[a,s,n]},vq=function(t){var e=ce.useState(),n=e[0],r=e[1],i=ce.useState(!1),s=i[0],o=i[1],a=ce.useCallback(function(u){return qn(void 0,void 0,void 0,function(){var c;return Gn(this,function(d){switch(d.label){case 0:o(!0),r(void 0),d.label=1;case 1:return d.trys.push([1,5,6,7]),t.currentUser?[4,Yt.updateEmail(t.currentUser,u)]:[3,3];case 2:return d.sent(),[2,!0];case 3:throw new Error("No user is logged in");case 4:return[3,7];case 5:return c=d.sent(),r(c),[2,!1];case 6:return o(!1),[7];case 7:return[2]}})})},[t]);return[a,s,n]},_q=function(t){var e=ce.useState(),n=e[0],r=e[1],i=ce.useState(!1),s=i[0],o=i[1],a=ce.useCallback(function(u){return qn(void 0,void 0,void 0,function(){var c;return Gn(this,function(d){switch(d.label){case 0:o(!0),r(void 0),d.label=1;case 1:return d.trys.push([1,5,6,7]),t.currentUser?[4,Yt.updatePassword(t.currentUser,u)]:[3,3];case 2:return d.sent(),[2,!0];case 3:throw new Error("No user is logged in");case 4:return[3,7];case 5:return c=d.sent(),r(c),[2,!1];case 6:return o(!1),[7];case 7:return[2]}})})},[t]);return[a,s,n]},wq=function(t){var e=ce.useState(),n=e[0],r=e[1],i=ce.useState(!1),s=i[0],o=i[1],a=ce.useCallback(function(u){return qn(void 0,void 0,void 0,function(){var c;return Gn(this,function(d){switch(d.label){case 0:o(!0),r(void 0),d.label=1;case 1:return d.trys.push([1,5,6,7]),t.currentUser?[4,Yt.updateProfile(t.currentUser,u)]:[3,3];case 2:return d.sent(),[2,!0];case 3:throw new Error("No user is logged in");case 4:return[3,7];case 5:return c=d.sent(),r(c),[2,!1];case 6:return o(!1),[7];case 7:return[2]}})})},[t]);return[a,s,n]},Iq=function(t){var e=ce.useState(),n=e[0],r=e[1],i=ce.useState(!1),s=i[0],o=i[1],a=ce.useCallback(function(u,c){return qn(void 0,void 0,void 0,function(){var d;return Gn(this,function(f){switch(f.label){case 0:o(!0),r(void 0),f.label=1;case 1:return f.trys.push([1,5,6,7]),t.currentUser?[4,Yt.verifyBeforeUpdateEmail(t.currentUser,u,c)]:[3,3];case 2:return f.sent(),[2,!0];case 3:throw new Error("No user is logged in");case 4:return[3,7];case 5:return d=f.sent(),r(d),[2,!1];case 6:return o(!1),[7];case 7:return[2]}})})},[t]);return[a,s,n]},Eq=function(t,e){var n=wb(function(){return t.currentUser}),r=n.error,i=n.loading,s=n.setError,o=n.setValue,a=n.value;return ce.useEffect(function(){var u=Yt.onIdTokenChanged(t,function(c){return qn(void 0,void 0,void 0,function(){var d;return Gn(this,function(f){switch(f.label){case 0:if(!(e!=null&&e.onUserChanged))return[3,4];f.label=1;case 1:return f.trys.push([1,3,,4]),[4,e.onUserChanged(c)];case 2:return f.sent(),[3,4];case 3:return d=f.sent(),s(d),[3,4];case 4:return o(c),[2]}})})},s);return function(){u()}},[t]),[a,i,r]},Sq=bt.useAuthState=nq;bt.useCreateUserWithEmailAndPassword=rq;bt.useDeleteUser=iq;bt.useIdToken=Eq;bt.useSendEmailVerification=sq;bt.useSendPasswordResetEmail=oq;bt.useSendSignInLinkToEmail=aq;bt.useSignInWithApple=cq;bt.useSignInWithEmailAndPassword=lq;bt.useSignInWithEmailLink=uq;bt.useSignInWithFacebook=hq;bt.useSignInWithGithub=dq;bt.useSignInWithGoogle=fq;bt.useSignInWithMicrosoft=pq;bt.useSignInWithTwitter=mq;bt.useSignInWithYahoo=gq;bt.useSignOut=yq;bt.useUpdateEmail=vq;bt.useUpdatePassword=_q;bt.useUpdateProfile=wq;bt.useVerifyBeforeUpdateEmail=Iq;var zi={},Tq=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},oe,t0=t0||{},ve=Tq||self;function rp(){}function hm(t){var e=typeof t;return e=e!="object"?e:t?Array.isArray(t)?"array":e:"null",e=="array"||e=="object"&&typeof t.length=="number"}function Sh(t){var e=typeof t;return e=="object"&&t!=null||e=="function"}function kq(t){return Object.prototype.hasOwnProperty.call(t,ty)&&t[ty]||(t[ty]=++Cq)}var ty="closure_uid_"+(1e9*Math.random()>>>0),Cq=0;function Nq(t,e,n){return t.call.apply(t.bind,arguments)}function Dq(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),t.apply(e,i)}}return function(){return t.apply(e,arguments)}}function Dn(t,e,n){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?Dn=Nq:Dn=Dq,Dn.apply(null,arguments)}function Dd(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var r=n.slice();return r.push.apply(r,arguments),t.apply(this,r)}}function vn(t,e){function n(){}n.prototype=e.prototype,t.X=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.Wb=function(r,i,s){for(var o=Array(arguments.length-2),a=2;a<arguments.length;a++)o[a-2]=arguments[a];return e.prototype[i].apply(r,o)}}function Ks(){this.s=this.s,this.o=this.o}var bq=0;Ks.prototype.s=!1;Ks.prototype.na=function(){!this.s&&(this.s=!0,this.M(),bq!=0)&&kq(this)};Ks.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const Ib=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if(typeof t=="string")return typeof e!="string"||e.length!=1?-1:t.indexOf(e,0);for(let n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1};function n0(t){const e=t.length;if(0<e){const n=Array(e);for(let r=0;r<e;r++)n[r]=t[r];return n}return[]}function hT(t,e){for(let n=1;n<arguments.length;n++){const r=arguments[n];if(hm(r)){const i=t.length||0,s=r.length||0;t.length=i+s;for(let o=0;o<s;o++)t[i+o]=r[o]}else t.push(r)}}function bn(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}bn.prototype.h=function(){this.defaultPrevented=!0};var xq=function(){if(!ve.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{ve.addEventListener("test",rp,e),ve.removeEventListener("test",rp,e)}catch{}return t}();function ip(t){return/^[\s\xa0]*$/.test(t)}var dT=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function ny(t,e){return t<e?-1:t>e?1:0}function dm(){var t=ve.navigator;return t&&(t=t.userAgent)?t:""}function Xr(t){return dm().indexOf(t)!=-1}function r0(t){return r0[" "](t),t}r0[" "]=rp;function Aq(t){var e=Pq;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=t(9)}var Rq=Xr("Opera"),kl=Xr("Trident")||Xr("MSIE"),Eb=Xr("Edge"),xv=Eb||kl,Sb=Xr("Gecko")&&!(dm().toLowerCase().indexOf("webkit")!=-1&&!Xr("Edge"))&&!(Xr("Trident")||Xr("MSIE"))&&!Xr("Edge"),Oq=dm().toLowerCase().indexOf("webkit")!=-1&&!Xr("Edge");function Tb(){var t=ve.document;return t?t.documentMode:void 0}var sp;e:{var ry="",iy=function(){var t=dm();if(Sb)return/rv:([^\);]+)(\)|;)/.exec(t);if(Eb)return/Edge\/([\d\.]+)/.exec(t);if(kl)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t);if(Oq)return/WebKit\/(\S+)/.exec(t);if(Rq)return/(?:Version)[ \/]?(\S+)/.exec(t)}();if(iy&&(ry=iy?iy[1]:""),kl){var sy=Tb();if(sy!=null&&sy>parseFloat(ry)){sp=String(sy);break e}}sp=ry}var Pq={};function Mq(){return Aq(function(){let t=0;const e=dT(String(sp)).split("."),n=dT("9").split("."),r=Math.max(e.length,n.length);for(let o=0;t==0&&o<r;o++){var i=e[o]||"",s=n[o]||"";do{if(i=/(\d*)(\D*)(.*)/.exec(i)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],i[0].length==0&&s[0].length==0)break;t=ny(i[1].length==0?0:parseInt(i[1],10),s[1].length==0?0:parseInt(s[1],10))||ny(i[2].length==0,s[2].length==0)||ny(i[2],s[2]),i=i[3],s=s[3]}while(t==0)}return 0<=t})}var Av;if(ve.document&&kl){var fT=Tb();Av=fT||parseInt(sp,10)||void 0}else Av=void 0;var Lq=Av;function qc(t,e){if(bn.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(Sb){e:{try{r0(e.nodeName);var i=!0;break e}catch{}i=!1}i||(e=null)}}else n=="mouseover"?e=t.fromElement:n=="mouseout"&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=r.clientX!==void 0?r.clientX:r.pageX,this.clientY=r.clientY!==void 0?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=t.clientX!==void 0?t.clientX:t.pageX,this.clientY=t.clientY!==void 0?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType=typeof t.pointerType=="string"?t.pointerType:Fq[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&qc.X.h.call(this)}}vn(qc,bn);var Fq={2:"touch",3:"pen",4:"mouse"};qc.prototype.h=function(){qc.X.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var Th="closure_listenable_"+(1e6*Math.random()|0),Uq=0;function Vq(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.ha=i,this.key=++Uq,this.ba=this.ea=!1}function fm(t){t.ba=!0,t.listener=null,t.proxy=null,t.src=null,t.ha=null}function i0(t,e,n){for(const r in t)e.call(n,t[r],r,t)}function kb(t){const e={};for(const n in t)e[n]=t[n];return e}const pT="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Cb(t,e){let n,r;for(let i=1;i<arguments.length;i++){r=arguments[i];for(n in r)t[n]=r[n];for(let s=0;s<pT.length;s++)n=pT[s],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function pm(t){this.src=t,this.g={},this.h=0}pm.prototype.add=function(t,e,n,r,i){var s=t.toString();t=this.g[s],t||(t=this.g[s]=[],this.h++);var o=Ov(t,e,r,i);return-1<o?(e=t[o],n||(e.ea=!1)):(e=new Vq(e,this.src,s,!!r,i),e.ea=n,t.push(e)),e};function Rv(t,e){var n=e.type;if(n in t.g){var r=t.g[n],i=Ib(r,e),s;(s=0<=i)&&Array.prototype.splice.call(r,i,1),s&&(fm(e),t.g[n].length==0&&(delete t.g[n],t.h--))}}function Ov(t,e,n,r){for(var i=0;i<t.length;++i){var s=t[i];if(!s.ba&&s.listener==e&&s.capture==!!n&&s.ha==r)return i}return-1}var s0="closure_lm_"+(1e6*Math.random()|0),oy={};function Nb(t,e,n,r,i){if(r&&r.once)return bb(t,e,n,r,i);if(Array.isArray(e)){for(var s=0;s<e.length;s++)Nb(t,e[s],n,r,i);return null}return n=l0(n),t&&t[Th]?t.N(e,n,Sh(r)?!!r.capture:!!r,i):Db(t,e,n,!1,r,i)}function Db(t,e,n,r,i,s){if(!e)throw Error("Invalid event type");var o=Sh(i)?!!i.capture:!!i,a=a0(t);if(a||(t[s0]=a=new pm(t)),n=a.add(e,n,r,o,s),n.proxy)return n;if(r=$q(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)xq||(i=o),i===void 0&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(Ab(e.toString()),r);else if(t.addListener&&t.removeListener)t.addListener(r);else throw Error("addEventListener and attachEvent are unavailable.");return n}function $q(){function t(n){return e.call(t.src,t.listener,n)}const e=Bq;return t}function bb(t,e,n,r,i){if(Array.isArray(e)){for(var s=0;s<e.length;s++)bb(t,e[s],n,r,i);return null}return n=l0(n),t&&t[Th]?t.O(e,n,Sh(r)?!!r.capture:!!r,i):Db(t,e,n,!0,r,i)}function xb(t,e,n,r,i){if(Array.isArray(e))for(var s=0;s<e.length;s++)xb(t,e[s],n,r,i);else r=Sh(r)?!!r.capture:!!r,n=l0(n),t&&t[Th]?(t=t.i,e=String(e).toString(),e in t.g&&(s=t.g[e],n=Ov(s,n,r,i),-1<n&&(fm(s[n]),Array.prototype.splice.call(s,n,1),s.length==0&&(delete t.g[e],t.h--)))):t&&(t=a0(t))&&(e=t.g[e.toString()],t=-1,e&&(t=Ov(e,n,r,i)),(n=-1<t?e[t]:null)&&o0(n))}function o0(t){if(typeof t!="number"&&t&&!t.ba){var e=t.src;if(e&&e[Th])Rv(e.i,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(Ab(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=a0(e))?(Rv(n,t),n.h==0&&(n.src=null,e[s0]=null)):fm(t)}}}function Ab(t){return t in oy?oy[t]:oy[t]="on"+t}function Bq(t,e){if(t.ba)t=!0;else{e=new qc(e,this);var n=t.listener,r=t.ha||t.src;t.ea&&o0(t),t=n.call(r,e)}return t}function a0(t){return t=t[s0],t instanceof pm?t:null}var ay="__closure_events_fn_"+(1e9*Math.random()>>>0);function l0(t){return typeof t=="function"?t:(t[ay]||(t[ay]=function(e){return t.handleEvent(e)}),t[ay])}function sn(){Ks.call(this),this.i=new pm(this),this.P=this,this.I=null}vn(sn,Ks);sn.prototype[Th]=!0;sn.prototype.removeEventListener=function(t,e,n,r){xb(this,t,e,n,r)};function mn(t,e){var n,r=t.I;if(r)for(n=[];r;r=r.I)n.push(r);if(t=t.P,r=e.type||e,typeof e=="string")e=new bn(e,t);else if(e instanceof bn)e.target=e.target||t;else{var i=e;e=new bn(r,t),Cb(e,i)}if(i=!0,n)for(var s=n.length-1;0<=s;s--){var o=e.g=n[s];i=bd(o,r,!0,e)&&i}if(o=e.g=t,i=bd(o,r,!0,e)&&i,i=bd(o,r,!1,e)&&i,n)for(s=0;s<n.length;s++)o=e.g=n[s],i=bd(o,r,!1,e)&&i}sn.prototype.M=function(){if(sn.X.M.call(this),this.i){var t=this.i,e;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)fm(n[r]);delete t.g[e],t.h--}}this.I=null};sn.prototype.N=function(t,e,n,r){return this.i.add(String(t),e,!1,n,r)};sn.prototype.O=function(t,e,n,r){return this.i.add(String(t),e,!0,n,r)};function bd(t,e,n,r){if(e=t.i.g[String(e)],!e)return!0;e=e.concat();for(var i=!0,s=0;s<e.length;++s){var o=e[s];if(o&&!o.ba&&o.capture==n){var a=o.listener,u=o.ha||o.src;o.ea&&Rv(t.i,o),i=a.call(u,r)!==!1&&i}}return i&&!r.defaultPrevented}var u0=ve.JSON.stringify;function Wq(){var t=Pb;let e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}class jq{constructor(){this.h=this.g=null}add(e,n){const r=Rb.get();r.set(e,n),this.h?this.h.next=r:this.g=r,this.h=r}}var Rb=new class{constructor(t,e){this.i=t,this.j=e,this.h=0,this.g=null}get(){let t;return 0<this.h?(this.h--,t=this.g,this.g=t.next,t.next=null):t=this.i(),t}}(()=>new zq,t=>t.reset());class zq{constructor(){this.next=this.g=this.h=null}set(e,n){this.h=e,this.g=n,this.next=null}reset(){this.next=this.g=this.h=null}}function qq(t){ve.setTimeout(()=>{throw t},0)}function Ob(t,e){Pv||Gq(),Mv||(Pv(),Mv=!0),Pb.add(t,e)}var Pv;function Gq(){var t=ve.Promise.resolve(void 0);Pv=function(){t.then(Hq)}}var Mv=!1,Pb=new jq;function Hq(){for(var t;t=Wq();){try{t.h.call(t.g)}catch(n){qq(n)}var e=Rb;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}Mv=!1}function mm(t,e){sn.call(this),this.h=t||1,this.g=e||ve,this.j=Dn(this.lb,this),this.l=Date.now()}vn(mm,sn);oe=mm.prototype;oe.ca=!1;oe.R=null;oe.lb=function(){if(this.ca){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.R=this.g.setTimeout(this.j,this.h-t):(this.R&&(this.g.clearTimeout(this.R),this.R=null),mn(this,"tick"),this.ca&&(c0(this),this.start()))}};oe.start=function(){this.ca=!0,this.R||(this.R=this.g.setTimeout(this.j,this.h),this.l=Date.now())};function c0(t){t.ca=!1,t.R&&(t.g.clearTimeout(t.R),t.R=null)}oe.M=function(){mm.X.M.call(this),c0(this),delete this.g};function h0(t,e,n){if(typeof t=="function")n&&(t=Dn(t,n));else if(t&&typeof t.handleEvent=="function")t=Dn(t.handleEvent,t);else throw Error("Invalid listener argument");return 2147483647<Number(e)?-1:ve.setTimeout(t,e||0)}function Mb(t){t.g=h0(()=>{t.g=null,t.i&&(t.i=!1,Mb(t))},t.j);const e=t.h;t.h=null,t.m.apply(null,e)}class Yq extends Ks{constructor(e,n){super(),this.m=e,this.j=n,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:Mb(this)}M(){super.M(),this.g&&(ve.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Gc(t){Ks.call(this),this.h=t,this.g={}}vn(Gc,Ks);var mT=[];function Lb(t,e,n,r){Array.isArray(n)||(n&&(mT[0]=n.toString()),n=mT);for(var i=0;i<n.length;i++){var s=Nb(e,n[i],r||t.handleEvent,!1,t.h||t);if(!s)break;t.g[s.key]=s}}function Fb(t){i0(t.g,function(e,n){this.g.hasOwnProperty(n)&&o0(e)},t),t.g={}}Gc.prototype.M=function(){Gc.X.M.call(this),Fb(this)};Gc.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};function gm(){this.g=!0}gm.prototype.Aa=function(){this.g=!1};function Kq(t,e,n,r,i,s){t.info(function(){if(t.g)if(s)for(var o="",a=s.split("&"),u=0;u<a.length;u++){var c=a[u].split("=");if(1<c.length){var d=c[0];c=c[1];var f=d.split("_");o=2<=f.length&&f[1]=="type"?o+(d+"="+c+"&"):o+(d+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+`
`+n+`
`+o})}function Qq(t,e,n,r,i,s,o){t.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+`
`+n+`
`+s+" "+o})}function Ya(t,e,n,r){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+Jq(t,n)+(r?" "+r:"")})}function Xq(t,e){t.info(function(){return"TIMEOUT: "+e})}gm.prototype.info=function(){};function Jq(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n){for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if(s!="noop"&&s!="stop"&&s!="close")for(var o=1;o<i.length;o++)i[o]=""}}}}return u0(n)}catch{return e}}var ca={},gT=null;function ym(){return gT=gT||new sn}ca.Pa="serverreachability";function Ub(t){bn.call(this,ca.Pa,t)}vn(Ub,bn);function Hc(t){const e=ym();mn(e,new Ub(e))}ca.STAT_EVENT="statevent";function Vb(t,e){bn.call(this,ca.STAT_EVENT,t),this.stat=e}vn(Vb,bn);function Fn(t){const e=ym();mn(e,new Vb(e,t))}ca.Qa="timingevent";function $b(t,e){bn.call(this,ca.Qa,t),this.size=e}vn($b,bn);function kh(t,e){if(typeof t!="function")throw Error("Fn must not be null and must be a function");return ve.setTimeout(function(){t()},e)}var vm={NO_ERROR:0,mb:1,zb:2,yb:3,tb:4,xb:5,Ab:6,Ma:7,TIMEOUT:8,Db:9},Bb={rb:"complete",Nb:"success",Na:"error",Ma:"abort",Fb:"ready",Gb:"readystatechange",TIMEOUT:"timeout",Bb:"incrementaldata",Eb:"progress",ub:"downloadprogress",Vb:"uploadprogress"};function d0(){}d0.prototype.h=null;function yT(t){return t.h||(t.h=t.i())}function Wb(){}var Ch={OPEN:"a",qb:"b",Na:"c",Cb:"d"};function f0(){bn.call(this,"d")}vn(f0,bn);function p0(){bn.call(this,"c")}vn(p0,bn);var Lv;function _m(){}vn(_m,d0);_m.prototype.g=function(){return new XMLHttpRequest};_m.prototype.i=function(){return{}};Lv=new _m;function Nh(t,e,n,r){this.l=t,this.j=e,this.m=n,this.U=r||1,this.S=new Gc(this),this.O=Zq,t=xv?125:void 0,this.T=new mm(t),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.V=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.Y=-1,this.I=!1,this.N=0,this.L=null,this.$=this.J=this.Z=this.P=!1,this.h=new jb}function jb(){this.i=null,this.g="",this.h=!1}var Zq=45e3,Fv={},op={};oe=Nh.prototype;oe.setTimeout=function(t){this.O=t};function Uv(t,e,n){t.K=1,t.v=Im(Vi(e)),t.s=n,t.P=!0,zb(t,null)}function zb(t,e){t.F=Date.now(),Dh(t),t.A=Vi(t.v);var n=t.A,r=t.U;Array.isArray(r)||(r=[String(r)]),Jb(n.i,"t",r),t.C=0,n=t.l.H,t.h=new jb,t.g=_x(t.l,n?e:null,!t.s),0<t.N&&(t.L=new Yq(Dn(t.La,t,t.g),t.N)),Lb(t.S,t.g,"readystatechange",t.ib),e=t.H?kb(t.H):{},t.s?(t.u||(t.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.da(t.A,t.u,t.s,e)):(t.u="GET",t.g.da(t.A,t.u,null,e)),Hc(),Kq(t.j,t.u,t.A,t.m,t.U,t.s)}oe.ib=function(t){t=t.target;const e=this.L;e&&Di(t)==3?e.l():this.La(t)};oe.La=function(t){try{if(t==this.g)e:{const d=Di(this.g);var e=this.g.Ea();const f=this.g.aa();if(!(3>d)&&(d!=3||xv||this.g&&(this.h.h||this.g.fa()||IT(this.g)))){this.I||d!=4||e==7||(e==8||0>=f?Hc(3):Hc(2)),wm(this);var n=this.g.aa();this.Y=n;t:if(qb(this)){var r=IT(this.g);t="";var i=r.length,s=Di(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){No(this),lc(this);var o="";break t}this.h.i=new ve.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,t+=this.h.i.decode(r[e],{stream:s&&e==i-1});r.splice(0,i),this.h.g+=t,this.C=0,o=this.h.g}else o=this.g.fa();if(this.i=n==200,Qq(this.j,this.u,this.A,this.m,this.U,d,n),this.i){if(this.Z&&!this.J){t:{if(this.g){var a,u=this.g;if((a=u.g?u.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!ip(a)){var c=a;break t}}c=null}if(n=c)Ya(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,Vv(this,n);else{this.i=!1,this.o=3,Fn(12),No(this),lc(this);break e}}this.P?(Gb(this,d,o),xv&&this.i&&d==3&&(Lb(this.S,this.T,"tick",this.hb),this.T.start())):(Ya(this.j,this.m,o,null),Vv(this,o)),d==4&&No(this),this.i&&!this.I&&(d==4?mx(this.l,this):(this.i=!1,Dh(this)))}else n==400&&0<o.indexOf("Unknown SID")?(this.o=3,Fn(12)):(this.o=0,Fn(13)),No(this),lc(this)}}}catch{}finally{}};function qb(t){return t.g?t.u=="GET"&&t.K!=2&&t.l.Da:!1}function Gb(t,e,n){let r=!0,i;for(;!t.I&&t.C<n.length;)if(i=e4(t,n),i==op){e==4&&(t.o=4,Fn(14),r=!1),Ya(t.j,t.m,null,"[Incomplete Response]");break}else if(i==Fv){t.o=4,Fn(15),Ya(t.j,t.m,n,"[Invalid Chunk]"),r=!1;break}else Ya(t.j,t.m,i,null),Vv(t,i);qb(t)&&i!=op&&i!=Fv&&(t.h.g="",t.C=0),e!=4||n.length!=0||t.h.h||(t.o=1,Fn(16),r=!1),t.i=t.i&&r,r?0<n.length&&!t.$&&(t.$=!0,e=t.l,e.g==t&&e.$&&!e.K&&(e.j.info("Great, no buffering proxy detected. Bytes received: "+n.length),I0(e),e.K=!0,Fn(11))):(Ya(t.j,t.m,n,"[Invalid Chunked Response]"),No(t),lc(t))}oe.hb=function(){if(this.g){var t=Di(this.g),e=this.g.fa();this.C<e.length&&(wm(this),Gb(this,t,e),this.i&&t!=4&&Dh(this))}};function e4(t,e){var n=t.C,r=e.indexOf(`
`,n);return r==-1?op:(n=Number(e.substring(n,r)),isNaN(n)?Fv:(r+=1,r+n>e.length?op:(e=e.substr(r,n),t.C=r+n,e)))}oe.cancel=function(){this.I=!0,No(this)};function Dh(t){t.V=Date.now()+t.O,Hb(t,t.O)}function Hb(t,e){if(t.B!=null)throw Error("WatchDog timer not null");t.B=kh(Dn(t.gb,t),e)}function wm(t){t.B&&(ve.clearTimeout(t.B),t.B=null)}oe.gb=function(){this.B=null;const t=Date.now();0<=t-this.V?(Xq(this.j,this.A),this.K!=2&&(Hc(),Fn(17)),No(this),this.o=2,lc(this)):Hb(this,this.V-t)};function lc(t){t.l.G==0||t.I||mx(t.l,t)}function No(t){wm(t);var e=t.L;e&&typeof e.na=="function"&&e.na(),t.L=null,c0(t.T),Fb(t.S),t.g&&(e=t.g,t.g=null,e.abort(),e.na())}function Vv(t,e){try{var n=t.l;if(n.G!=0&&(n.g==t||$v(n.h,t))){if(!t.J&&$v(n.h,t)&&n.G==3){try{var r=n.Fa.g.parse(e)}catch{r=null}if(Array.isArray(r)&&r.length==3){var i=r;if(i[0]==0){e:if(!n.u){if(n.g)if(n.g.F+3e3<t.F)up(n),Tm(n);else break e;w0(n),Fn(18)}}else n.Ba=i[1],0<n.Ba-n.T&&37500>i[2]&&n.L&&n.A==0&&!n.v&&(n.v=kh(Dn(n.cb,n),6e3));if(1>=tx(n.h)&&n.ja){try{n.ja()}catch{}n.ja=void 0}}else Do(n,11)}else if((t.J||n.g==t)&&up(n),!ip(e))for(i=n.Fa.g.parse(e),e=0;e<i.length;e++){let c=i[e];if(n.T=c[0],c=c[1],n.G==2)if(c[0]=="c"){n.I=c[1],n.ka=c[2];const d=c[3];d!=null&&(n.ma=d,n.j.info("VER="+n.ma));const f=c[4];f!=null&&(n.Ca=f,n.j.info("SVER="+n.Ca));const g=c[5];g!=null&&typeof g=="number"&&0<g&&(r=1.5*g,n.J=r,n.j.info("backChannelRequestTimeoutMs_="+r)),r=n;const v=t.g;if(v){const w=v.g?v.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(w){var s=r.h;s.g||w.indexOf("spdy")==-1&&w.indexOf("quic")==-1&&w.indexOf("h2")==-1||(s.j=s.l,s.g=new Set,s.h&&(m0(s,s.h),s.h=null))}if(r.D){const T=v.g?v.g.getResponseHeader("X-HTTP-Session-Id"):null;T&&(r.za=T,dt(r.F,r.D,T))}}n.G=3,n.l&&n.l.xa(),n.$&&(n.P=Date.now()-t.F,n.j.info("Handshake RTT: "+n.P+"ms")),r=n;var o=t;if(r.sa=vx(r,r.H?r.ka:null,r.V),o.J){nx(r.h,o);var a=o,u=r.J;u&&a.setTimeout(u),a.B&&(wm(a),Dh(a)),r.g=o}else fx(r);0<n.i.length&&km(n)}else c[0]!="stop"&&c[0]!="close"||Do(n,7);else n.G==3&&(c[0]=="stop"||c[0]=="close"?c[0]=="stop"?Do(n,7):_0(n):c[0]!="noop"&&n.l&&n.l.wa(c),n.A=0)}}Hc(4)}catch{}}function t4(t){if(t.W&&typeof t.W=="function")return t.W();if(typeof Map<"u"&&t instanceof Map||typeof Set<"u"&&t instanceof Set)return Array.from(t.values());if(typeof t=="string")return t.split("");if(hm(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}e=[],n=0;for(r in t)e[n++]=t[r];return e}function n4(t){if(t.oa&&typeof t.oa=="function")return t.oa();if(!t.W||typeof t.W!="function"){if(typeof Map<"u"&&t instanceof Map)return Array.from(t.keys());if(!(typeof Set<"u"&&t instanceof Set)){if(hm(t)||typeof t=="string"){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}e=[],n=0;for(const r in t)e[n++]=r;return e}}}function Yb(t,e){if(t.forEach&&typeof t.forEach=="function")t.forEach(e,void 0);else if(hm(t)||typeof t=="string")Array.prototype.forEach.call(t,e,void 0);else for(var n=n4(t),r=t4(t),i=r.length,s=0;s<i;s++)e.call(void 0,r[s],n&&n[s],t)}var Kb=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function r4(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var s=t[n].substring(0,r);i=t[n].substring(r+1)}else s=t[n];e(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}function Po(t,e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,t instanceof Po){this.h=e!==void 0?e:t.h,ap(this,t.j),this.s=t.s,this.g=t.g,lp(this,t.m),this.l=t.l,e=t.i;var n=new Yc;n.i=e.i,e.g&&(n.g=new Map(e.g),n.h=e.h),vT(this,n),this.o=t.o}else t&&(n=String(t).match(Kb))?(this.h=!!e,ap(this,n[1]||"",!0),this.s=ju(n[2]||""),this.g=ju(n[3]||"",!0),lp(this,n[4]),this.l=ju(n[5]||"",!0),vT(this,n[6]||"",!0),this.o=ju(n[7]||"")):(this.h=!!e,this.i=new Yc(null,this.h))}Po.prototype.toString=function(){var t=[],e=this.j;e&&t.push(zu(e,_T,!0),":");var n=this.g;return(n||e=="file")&&(t.push("//"),(e=this.s)&&t.push(zu(e,_T,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n=this.m,n!=null&&t.push(":",String(n))),(n=this.l)&&(this.g&&n.charAt(0)!="/"&&t.push("/"),t.push(zu(n,n.charAt(0)=="/"?o4:s4,!0))),(n=this.i.toString())&&t.push("?",n),(n=this.o)&&t.push("#",zu(n,l4)),t.join("")};function Vi(t){return new Po(t)}function ap(t,e,n){t.j=n?ju(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function lp(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function vT(t,e,n){e instanceof Yc?(t.i=e,u4(t.i,t.h)):(n||(e=zu(e,a4)),t.i=new Yc(e,t.h))}function dt(t,e,n){t.i.set(e,n)}function Im(t){return dt(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function ju(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function zu(t,e,n){return typeof t=="string"?(t=encodeURI(t).replace(e,i4),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function i4(t){return t=t.charCodeAt(0),"%"+(t>>4&15).toString(16)+(t&15).toString(16)}var _T=/[#\/\?@]/g,s4=/[#\?:]/g,o4=/[#\?]/g,a4=/[#\?@]/g,l4=/#/g;function Yc(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function Qs(t){t.g||(t.g=new Map,t.h=0,t.i&&r4(t.i,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}oe=Yc.prototype;oe.add=function(t,e){Qs(this),this.i=null,t=Ql(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this};function Qb(t,e){Qs(t),e=Ql(t,e),t.g.has(e)&&(t.i=null,t.h-=t.g.get(e).length,t.g.delete(e))}function Xb(t,e){return Qs(t),e=Ql(t,e),t.g.has(e)}oe.forEach=function(t,e){Qs(this),this.g.forEach(function(n,r){n.forEach(function(i){t.call(e,i,r,this)},this)},this)};oe.oa=function(){Qs(this);const t=Array.from(this.g.values()),e=Array.from(this.g.keys()),n=[];for(let r=0;r<e.length;r++){const i=t[r];for(let s=0;s<i.length;s++)n.push(e[r])}return n};oe.W=function(t){Qs(this);let e=[];if(typeof t=="string")Xb(this,t)&&(e=e.concat(this.g.get(Ql(this,t))));else{t=Array.from(this.g.values());for(let n=0;n<t.length;n++)e=e.concat(t[n])}return e};oe.set=function(t,e){return Qs(this),this.i=null,t=Ql(this,t),Xb(this,t)&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this};oe.get=function(t,e){return t?(t=this.W(t),0<t.length?String(t[0]):e):e};function Jb(t,e,n){Qb(t,e),0<n.length&&(t.i=null,t.g.set(Ql(t,e),n0(n)),t.h+=n.length)}oe.toString=function(){if(this.i)return this.i;if(!this.g)return"";const t=[],e=Array.from(this.g.keys());for(var n=0;n<e.length;n++){var r=e[n];const s=encodeURIComponent(String(r)),o=this.W(r);for(r=0;r<o.length;r++){var i=s;o[r]!==""&&(i+="="+encodeURIComponent(String(o[r]))),t.push(i)}}return this.i=t.join("&")};function Ql(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}function u4(t,e){e&&!t.j&&(Qs(t),t.i=null,t.g.forEach(function(n,r){var i=r.toLowerCase();r!=i&&(Qb(this,r),Jb(this,i,n))},t)),t.j=e}var c4=class{constructor(e,n){this.h=e,this.g=n}};function Zb(t){this.l=t||h4,ve.PerformanceNavigationTiming?(t=ve.performance.getEntriesByType("navigation"),t=0<t.length&&(t[0].nextHopProtocol=="hq"||t[0].nextHopProtocol=="h2")):t=!!(ve.g&&ve.g.Ga&&ve.g.Ga()&&ve.g.Ga().$b),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var h4=10;function ex(t){return t.h?!0:t.g?t.g.size>=t.j:!1}function tx(t){return t.h?1:t.g?t.g.size:0}function $v(t,e){return t.h?t.h==e:t.g?t.g.has(e):!1}function m0(t,e){t.g?t.g.add(e):t.h=e}function nx(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}Zb.prototype.cancel=function(){if(this.i=rx(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const t of this.g.values())t.cancel();this.g.clear()}};function rx(t){if(t.h!=null)return t.i.concat(t.h.D);if(t.g!=null&&t.g.size!==0){let e=t.i;for(const n of t.g.values())e=e.concat(n.D);return e}return n0(t.i)}function g0(){}g0.prototype.stringify=function(t){return ve.JSON.stringify(t,void 0)};g0.prototype.parse=function(t){return ve.JSON.parse(t,void 0)};function d4(){this.g=new g0}function f4(t,e,n){const r=n||"";try{Yb(t,function(i,s){let o=i;Sh(i)&&(o=u0(i)),e.push(r+s+"="+encodeURIComponent(o))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function p4(t,e){const n=new gm;if(ve.Image){const r=new Image;r.onload=Dd(xd,n,r,"TestLoadImage: loaded",!0,e),r.onerror=Dd(xd,n,r,"TestLoadImage: error",!1,e),r.onabort=Dd(xd,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=Dd(xd,n,r,"TestLoadImage: timeout",!1,e),ve.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=t}else e(!1)}function xd(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch{}}function bh(t){this.l=t.ac||null,this.j=t.jb||!1}vn(bh,d0);bh.prototype.g=function(){return new Em(this.l,this.j)};bh.prototype.i=function(t){return function(){return t}}({});function Em(t,e){sn.call(this),this.D=t,this.u=e,this.m=void 0,this.readyState=y0,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}vn(Em,sn);var y0=0;oe=Em.prototype;oe.open=function(t,e){if(this.readyState!=y0)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,Kc(this)};oe.send=function(t){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.D||ve).fetch(new Request(this.B,e)).then(this.Wa.bind(this),this.ga.bind(this))};oe.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,xh(this)),this.readyState=y0};oe.Wa=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,Kc(this)),this.g&&(this.readyState=3,Kc(this),this.g)))if(this.responseType==="arraybuffer")t.arrayBuffer().then(this.Ua.bind(this),this.ga.bind(this));else if(typeof ve.ReadableStream<"u"&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;ix(this)}else t.text().then(this.Va.bind(this),this.ga.bind(this))};function ix(t){t.j.read().then(t.Ta.bind(t)).catch(t.ga.bind(t))}oe.Ta=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?xh(this):Kc(this),this.readyState==3&&ix(this)}};oe.Va=function(t){this.g&&(this.response=this.responseText=t,xh(this))};oe.Ua=function(t){this.g&&(this.response=t,xh(this))};oe.ga=function(){this.g&&xh(this)};function xh(t){t.readyState=4,t.l=null,t.j=null,t.A=null,Kc(t)}oe.setRequestHeader=function(t,e){this.v.append(t,e)};oe.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""};oe.getAllResponseHeaders=function(){if(!this.h)return"";const t=[],e=this.h.entries();for(var n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join(`\r
`)};function Kc(t){t.onreadystatechange&&t.onreadystatechange.call(t)}Object.defineProperty(Em.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(t){this.m=t?"include":"same-origin"}});var m4=ve.JSON.parse;function Nt(t){sn.call(this),this.headers=new Map,this.u=t||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=sx,this.K=this.L=!1}vn(Nt,sn);var sx="",g4=/^https?$/i,y4=["POST","PUT"];oe=Nt.prototype;oe.Ka=function(t){this.L=t};oe.da=function(t,e,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+t);e=e?e.toUpperCase():"GET",this.H=t,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():Lv.g(),this.C=this.u?yT(this.u):yT(Lv),this.g.onreadystatechange=Dn(this.Ha,this);try{this.F=!0,this.g.open(e,String(t),!0),this.F=!1}catch(s){wT(this,s);return}if(t=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else if(typeof r.keys=="function"&&typeof r.get=="function")for(const s of r.keys())n.set(s,r.get(s));else throw Error("Unknown input type for opt_headers: "+String(r));r=Array.from(n.keys()).find(s=>s.toLowerCase()=="content-type"),i=ve.FormData&&t instanceof ve.FormData,!(0<=Ib(y4,e))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[s,o]of n)this.g.setRequestHeader(s,o);this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{lx(this),0<this.B&&((this.K=v4(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Dn(this.qa,this)):this.A=h0(this.qa,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(s){wT(this,s)}};function v4(t){return kl&&Mq()&&typeof t.timeout=="number"&&t.ontimeout!==void 0}oe.qa=function(){typeof t0<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,mn(this,"timeout"),this.abort(8))};function wT(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,ox(t),Sm(t)}function ox(t){t.D||(t.D=!0,mn(t,"complete"),mn(t,"error"))}oe.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,mn(this,"complete"),mn(this,"abort"),Sm(this))};oe.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Sm(this,!0)),Nt.X.M.call(this)};oe.Ha=function(){this.s||(this.F||this.v||this.l?ax(this):this.fb())};oe.fb=function(){ax(this)};function ax(t){if(t.h&&typeof t0<"u"&&(!t.C[1]||Di(t)!=4||t.aa()!=2)){if(t.v&&Di(t)==4)h0(t.Ha,0,t);else if(mn(t,"readystatechange"),Di(t)==4){t.h=!1;try{const a=t.aa();e:switch(a){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var n;if(!(n=e)){var r;if(r=a===0){var i=String(t.H).match(Kb)[1]||null;if(!i&&ve.self&&ve.self.location){var s=ve.self.location.protocol;i=s.substr(0,s.length-1)}r=!g4.test(i?i.toLowerCase():"")}n=r}if(n)mn(t,"complete"),mn(t,"success");else{t.m=6;try{var o=2<Di(t)?t.g.statusText:""}catch{o=""}t.j=o+" ["+t.aa()+"]",ox(t)}}finally{Sm(t)}}}}function Sm(t,e){if(t.g){lx(t);const n=t.g,r=t.C[0]?rp:null;t.g=null,t.C=null,e||mn(t,"ready");try{n.onreadystatechange=r}catch{}}}function lx(t){t.g&&t.K&&(t.g.ontimeout=null),t.A&&(ve.clearTimeout(t.A),t.A=null)}function Di(t){return t.g?t.g.readyState:0}oe.aa=function(){try{return 2<Di(this)?this.g.status:-1}catch{return-1}};oe.fa=function(){try{return this.g?this.g.responseText:""}catch{return""}};oe.Sa=function(t){if(this.g){var e=this.g.responseText;return t&&e.indexOf(t)==0&&(e=e.substring(t.length)),m4(e)}};function IT(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.J){case sx:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch{return null}}oe.Ea=function(){return this.m};oe.Oa=function(){return typeof this.j=="string"?this.j:String(this.j)};function ux(t){let e="";return i0(t,function(n,r){e+=r,e+=":",e+=n,e+=`\r
`}),e}function v0(t,e,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=ux(n),typeof t=="string"?n!=null&&encodeURIComponent(String(n)):dt(t,e,n))}function bu(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function cx(t){this.Ca=0,this.i=[],this.j=new gm,this.ka=this.sa=this.F=this.V=this.g=this.za=this.D=this.ia=this.o=this.S=this.s=null,this.ab=this.U=0,this.Za=bu("failFast",!1,t),this.L=this.v=this.u=this.m=this.l=null,this.Y=!0,this.pa=this.Ba=this.T=-1,this.Z=this.A=this.C=0,this.Xa=bu("baseRetryDelayMs",5e3,t),this.bb=bu("retryDelaySeedMs",1e4,t),this.$a=bu("forwardChannelMaxRetries",2,t),this.ta=bu("forwardChannelRequestTimeoutMs",2e4,t),this.ra=t&&t.xmlHttpFactory||void 0,this.Da=t&&t.Zb||!1,this.J=void 0,this.H=t&&t.supportsCrossDomainXhr||!1,this.I="",this.h=new Zb(t&&t.concurrentRequestLimit),this.Fa=new d4,this.O=t&&t.fastHandshake||!1,this.N=t&&t.encodeInitMessageHeaders||!1,this.O&&this.N&&(this.N=!1),this.Ya=t&&t.Xb||!1,t&&t.Aa&&this.j.Aa(),t&&t.forceLongPolling&&(this.Y=!1),this.$=!this.O&&this.Y&&t&&t.detectBufferingProxy||!1,this.ja=void 0,this.P=0,this.K=!1,this.la=this.B=null}oe=cx.prototype;oe.ma=8;oe.G=1;function _0(t){if(hx(t),t.G==3){var e=t.U++,n=Vi(t.F);dt(n,"SID",t.I),dt(n,"RID",e),dt(n,"TYPE","terminate"),Ah(t,n),e=new Nh(t,t.j,e,void 0),e.K=2,e.v=Im(Vi(n)),n=!1,ve.navigator&&ve.navigator.sendBeacon&&(n=ve.navigator.sendBeacon(e.v.toString(),"")),!n&&ve.Image&&(new Image().src=e.v,n=!0),n||(e.g=_x(e.l,null),e.g.da(e.v)),e.F=Date.now(),Dh(e)}yx(t)}function Tm(t){t.g&&(I0(t),t.g.cancel(),t.g=null)}function hx(t){Tm(t),t.u&&(ve.clearTimeout(t.u),t.u=null),up(t),t.h.cancel(),t.m&&(typeof t.m=="number"&&ve.clearTimeout(t.m),t.m=null)}function km(t){ex(t.h)||t.m||(t.m=!0,Ob(t.Ja,t),t.C=0)}function _4(t,e){return tx(t.h)>=t.h.j-(t.m?1:0)?!1:t.m?(t.i=e.D.concat(t.i),!0):t.G==1||t.G==2||t.C>=(t.Za?0:t.$a)?!1:(t.m=kh(Dn(t.Ja,t,e),gx(t,t.C)),t.C++,!0)}oe.Ja=function(t){if(this.m)if(this.m=null,this.G==1){if(!t){this.U=Math.floor(1e5*Math.random()),t=this.U++;const i=new Nh(this,this.j,t,void 0);let s=this.s;if(this.S&&(s?(s=kb(s),Cb(s,this.S)):s=this.S),this.o!==null||this.N||(i.H=s,s=null),this.O)e:{for(var e=0,n=0;n<this.i.length;n++){t:{var r=this.i[n];if("__data__"in r.g&&(r=r.g.__data__,typeof r=="string")){r=r.length;break t}r=void 0}if(r===void 0)break;if(e+=r,4096<e){e=n;break e}if(e===4096||n===this.i.length-1){e=n+1;break e}}e=1e3}else e=1e3;e=dx(this,i,e),n=Vi(this.F),dt(n,"RID",t),dt(n,"CVER",22),this.D&&dt(n,"X-HTTP-Session-Id",this.D),Ah(this,n),s&&(this.N?e="headers="+encodeURIComponent(String(ux(s)))+"&"+e:this.o&&v0(n,this.o,s)),m0(this.h,i),this.Ya&&dt(n,"TYPE","init"),this.O?(dt(n,"$req",e),dt(n,"SID","null"),i.Z=!0,Uv(i,n,null)):Uv(i,n,e),this.G=2}}else this.G==3&&(t?ET(this,t):this.i.length==0||ex(this.h)||ET(this))};function ET(t,e){var n;e?n=e.m:n=t.U++;const r=Vi(t.F);dt(r,"SID",t.I),dt(r,"RID",n),dt(r,"AID",t.T),Ah(t,r),t.o&&t.s&&v0(r,t.o,t.s),n=new Nh(t,t.j,n,t.C+1),t.o===null&&(n.H=t.s),e&&(t.i=e.D.concat(t.i)),e=dx(t,n,1e3),n.setTimeout(Math.round(.5*t.ta)+Math.round(.5*t.ta*Math.random())),m0(t.h,n),Uv(n,r,e)}function Ah(t,e){t.ia&&i0(t.ia,function(n,r){dt(e,r,n)}),t.l&&Yb({},function(n,r){dt(e,r,n)})}function dx(t,e,n){n=Math.min(t.i.length,n);var r=t.l?Dn(t.l.Ra,t.l,t):null;e:{var i=t.i;let s=-1;for(;;){const o=["count="+n];s==-1?0<n?(s=i[0].h,o.push("ofs="+s)):s=0:o.push("ofs="+s);let a=!0;for(let u=0;u<n;u++){let c=i[u].h;const d=i[u].g;if(c-=s,0>c)s=Math.max(0,i[u].h-100),a=!1;else try{f4(d,o,"req"+c+"_")}catch{r&&r(d)}}if(a){r=o.join("&");break e}}}return t=t.i.splice(0,n),e.D=t,r}function fx(t){t.g||t.u||(t.Z=1,Ob(t.Ia,t),t.A=0)}function w0(t){return t.g||t.u||3<=t.A?!1:(t.Z++,t.u=kh(Dn(t.Ia,t),gx(t,t.A)),t.A++,!0)}oe.Ia=function(){if(this.u=null,px(this),this.$&&!(this.K||this.g==null||0>=this.P)){var t=2*this.P;this.j.info("BP detection timer enabled: "+t),this.B=kh(Dn(this.eb,this),t)}};oe.eb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.L=!1,this.K=!0,Fn(10),Tm(this),px(this))};function I0(t){t.B!=null&&(ve.clearTimeout(t.B),t.B=null)}function px(t){t.g=new Nh(t,t.j,"rpc",t.Z),t.o===null&&(t.g.H=t.s),t.g.N=0;var e=Vi(t.sa);dt(e,"RID","rpc"),dt(e,"SID",t.I),dt(e,"CI",t.L?"0":"1"),dt(e,"AID",t.T),dt(e,"TYPE","xmlhttp"),Ah(t,e),t.o&&t.s&&v0(e,t.o,t.s),t.J&&t.g.setTimeout(t.J);var n=t.g;t=t.ka,n.K=1,n.v=Im(Vi(e)),n.s=null,n.P=!0,zb(n,t)}oe.cb=function(){this.v!=null&&(this.v=null,Tm(this),w0(this),Fn(19))};function up(t){t.v!=null&&(ve.clearTimeout(t.v),t.v=null)}function mx(t,e){var n=null;if(t.g==e){up(t),I0(t),t.g=null;var r=2}else if($v(t.h,e))n=e.D,nx(t.h,e),r=1;else return;if(t.G!=0){if(t.pa=e.Y,e.i)if(r==1){n=e.s?e.s.length:0,e=Date.now()-e.F;var i=t.C;r=ym(),mn(r,new $b(r,n)),km(t)}else fx(t);else if(i=e.o,i==3||i==0&&0<t.pa||!(r==1&&_4(t,e)||r==2&&w0(t)))switch(n&&0<n.length&&(e=t.h,e.i=e.i.concat(n)),i){case 1:Do(t,5);break;case 4:Do(t,10);break;case 3:Do(t,6);break;default:Do(t,2)}}}function gx(t,e){let n=t.Xa+Math.floor(Math.random()*t.bb);return t.l||(n*=2),n*e}function Do(t,e){if(t.j.info("Error code "+e),e==2){var n=null;t.l&&(n=null);var r=Dn(t.kb,t);n||(n=new Po("//www.google.com/images/cleardot.gif"),ve.location&&ve.location.protocol=="http"||ap(n,"https"),Im(n)),p4(n.toString(),r)}else Fn(2);t.G=0,t.l&&t.l.va(e),yx(t),hx(t)}oe.kb=function(t){t?(this.j.info("Successfully pinged google.com"),Fn(2)):(this.j.info("Failed to ping google.com"),Fn(1))};function yx(t){if(t.G=0,t.la=[],t.l){const e=rx(t.h);(e.length!=0||t.i.length!=0)&&(hT(t.la,e),hT(t.la,t.i),t.h.i.length=0,n0(t.i),t.i.length=0),t.l.ua()}}function vx(t,e,n){var r=n instanceof Po?Vi(n):new Po(n,void 0);if(r.g!="")e&&(r.g=e+"."+r.g),lp(r,r.m);else{var i=ve.location;r=i.protocol,e=e?e+"."+i.hostname:i.hostname,i=+i.port;var s=new Po(null,void 0);r&&ap(s,r),e&&(s.g=e),i&&lp(s,i),n&&(s.l=n),r=s}return n=t.D,e=t.za,n&&e&&dt(r,n,e),dt(r,"VER",t.ma),Ah(t,r),r}function _x(t,e,n){if(e&&!t.H)throw Error("Can't create secondary domain capable XhrIo object.");return e=n&&t.Da&&!t.ra?new Nt(new bh({jb:!0})):new Nt(t.ra),e.Ka(t.H),e}function wx(){}oe=wx.prototype;oe.xa=function(){};oe.wa=function(){};oe.va=function(){};oe.ua=function(){};oe.Ra=function(){};function cp(){if(kl&&!(10<=Number(Lq)))throw Error("Environmental error: no available transport.")}cp.prototype.g=function(t,e){return new mr(t,e)};function mr(t,e){sn.call(this),this.g=new cx(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(t?t["X-WebChannel-Client-Profile"]=e.ya:t={"X-WebChannel-Client-Profile":e.ya}),this.g.S=t,(t=e&&e.Yb)&&!ip(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!ip(e)&&(this.g.D=e,t=this.h,t!==null&&e in t&&(t=this.h,e in t&&delete t[e])),this.j=new Xl(this)}vn(mr,sn);mr.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.H=!0);var t=this.g,e=this.l,n=this.h||void 0;Fn(0),t.V=e,t.ia=n||{},t.L=t.Y,t.F=vx(t,null,t.V),km(t)};mr.prototype.close=function(){_0(this.g)};mr.prototype.u=function(t){var e=this.g;if(typeof t=="string"){var n={};n.__data__=t,t=n}else this.v&&(n={},n.__data__=u0(t),t=n);e.i.push(new c4(e.ab++,t)),e.G==3&&km(e)};mr.prototype.M=function(){this.g.l=null,delete this.j,_0(this.g),delete this.g,mr.X.M.call(this)};function Ix(t){f0.call(this);var e=t.__sm__;if(e){e:{for(const n in e){t=n;break e}t=void 0}(this.i=t)&&(t=this.i,e=e!==null&&t in e?e[t]:void 0),this.data=e}else this.data=t}vn(Ix,f0);function Ex(){p0.call(this),this.status=1}vn(Ex,p0);function Xl(t){this.g=t}vn(Xl,wx);Xl.prototype.xa=function(){mn(this.g,"a")};Xl.prototype.wa=function(t){mn(this.g,new Ix(t))};Xl.prototype.va=function(t){mn(this.g,new Ex)};Xl.prototype.ua=function(){mn(this.g,"b")};cp.prototype.createWebChannel=cp.prototype.g;mr.prototype.send=mr.prototype.u;mr.prototype.open=mr.prototype.m;mr.prototype.close=mr.prototype.close;vm.NO_ERROR=0;vm.TIMEOUT=8;vm.HTTP_ERROR=6;Bb.COMPLETE="complete";Wb.EventType=Ch;Ch.OPEN="a";Ch.CLOSE="b";Ch.ERROR="c";Ch.MESSAGE="d";sn.prototype.listen=sn.prototype.N;Nt.prototype.listenOnce=Nt.prototype.O;Nt.prototype.getLastError=Nt.prototype.Oa;Nt.prototype.getLastErrorCode=Nt.prototype.Ea;Nt.prototype.getStatus=Nt.prototype.aa;Nt.prototype.getResponseJson=Nt.prototype.Sa;Nt.prototype.getResponseText=Nt.prototype.fa;Nt.prototype.send=Nt.prototype.da;Nt.prototype.setWithCredentials=Nt.prototype.Ka;var w4=function(){return new cp},I4=function(){return ym()},ly=vm,E4=Bb,S4=ca,ST={sb:0,vb:1,wb:2,Pb:3,Ub:4,Rb:5,Sb:6,Qb:7,Ob:8,Tb:9,PROXY:10,NOPROXY:11,Mb:12,Ib:13,Jb:14,Hb:15,Kb:16,Lb:17,ob:18,nb:19,pb:20},T4=bh,Ad=Wb,k4=Nt;const TT="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}nn.UNAUTHENTICATED=new nn(null),nn.GOOGLE_CREDENTIALS=new nn("google-credentials-uid"),nn.FIRST_PARTY=new nn("first-party-uid"),nn.MOCK_USER=new nn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Jl="9.17.1";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Us=new Wp("@firebase/firestore");function Bv(){return Us.logLevel}function C4(t){Us.setLogLevel(t)}function F(t,...e){if(Us.logLevel<=Fe.DEBUG){const n=e.map(E0);Us.debug(`Firestore (${Jl}): ${t}`,...n)}}function Rt(t,...e){if(Us.logLevel<=Fe.ERROR){const n=e.map(E0);Us.error(`Firestore (${Jl}): ${t}`,...n)}}function Go(t,...e){if(Us.logLevel<=Fe.WARN){const n=e.map(E0);Us.warn(`Firestore (${Jl}): ${t}`,...n)}}function E0(t){if(typeof t=="string")return t;try{return e=t,JSON.stringify(e)}catch{return t}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ee(t="Unexpected state"){const e=`FIRESTORE (${Jl}) INTERNAL ASSERTION FAILED: `+t;throw Rt(e),new Error(e)}function ie(t,e){t||ee()}function N4(t,e){t||ee()}function Y(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class M extends Bi{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gt{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sx{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Tx{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(nn.UNAUTHENTICATED))}shutdown(){}}class D4{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class b4{constructor(e){this.t=e,this.currentUser=nn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){let r=this.i;const i=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve();let s=new Gt;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Gt,e.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const u=s;e.enqueueRetryable(async()=>{await u.promise,await i(this.currentUser)})},a=u=>{F("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(u=>a(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?a(u):(F("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Gt)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(F("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ie(typeof r.accessToken=="string"),new Sx(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return ie(e===null||typeof e=="string"),new nn(e)}}class x4{constructor(e,n,r,i){this.h=e,this.l=n,this.m=r,this.g=i,this.type="FirstParty",this.user=nn.FIRST_PARTY,this.p=new Map}I(){return this.g?this.g():(ie(!(typeof this.h!="object"||this.h===null||!this.h.auth||!this.h.auth.getAuthHeaderValueForFirstParty)),this.h.auth.getAuthHeaderValueForFirstParty([]))}get headers(){this.p.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.p.set("Authorization",e),this.m&&this.p.set("X-Goog-Iam-Authorization-Token",this.m),this.p}}class A4{constructor(e,n,r,i){this.h=e,this.l=n,this.m=r,this.g=i}getToken(){return Promise.resolve(new x4(this.h,this.l,this.m,this.g))}start(e,n){e.enqueueRetryable(()=>n(nn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class kx{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class R4{constructor(e){this.T=e,this.forceRefresh=!1,this.appCheck=null,this.A=null}start(e,n){const r=s=>{s.error!=null&&F("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.A;return this.A=s.token,F("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{F("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.T.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.T.getImmediate({optional:!0});s?i(s):F("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(ie(typeof n.token=="string"),this.A=n.token,new kx(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}class O4{getToken(){return Promise.resolve(new kx(""))}invalidateToken(){}start(e,n){}shutdown(){}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function P4(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cx{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=P4(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%e.length))}return r}}function ye(t,e){return t<e?-1:t>e?1:0}function Cl(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}function Nx(t){return t+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pt{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new M(D.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new M(D.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new M(D.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new M(D.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return pt.fromMillis(Date.now())}static fromDate(e){return pt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new pt(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?ye(this.nanoseconds,e.nanoseconds):ye(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class le{constructor(e){this.timestamp=e}static fromTimestamp(e){return new le(e)}static min(){return new le(new pt(0,0))}static max(){return new le(new pt(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qc{constructor(e,n,r){n===void 0?n=0:n>e.length&&ee(),r===void 0?r=e.length-n:r>e.length-n&&ee(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Qc.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Qc?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const s=e.get(i),o=n.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class Me extends Qc{construct(e,n,r){return new Me(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new M(D.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new Me(n)}static emptyPath(){return new Me([])}}const M4=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Tt extends Qc{construct(e,n,r){return new Tt(e,n,r)}static isValidIdentifier(e){return M4.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Tt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Tt(["__name__"])}static fromServerFormat(e){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new M(D.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<e.length;){const a=e[i];if(a==="\\"){if(i+1===e.length)throw new M(D.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new M(D.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new M(D.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Tt(n)}static emptyPath(){return new Tt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H{constructor(e){this.path=e}static fromPath(e){return new H(Me.fromString(e))}static fromName(e){return new H(Me.fromString(e).popFirst(5))}static empty(){return new H(Me.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Me.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Me.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new H(new Me(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hp{constructor(e,n,r,i){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=i}}function Wv(t){return t.fields.find(e=>e.kind===2)}function yo(t){return t.fields.filter(e=>e.kind!==2)}function L4(t,e){let n=ye(t.collectionGroup,e.collectionGroup);if(n!==0)return n;for(let r=0;r<Math.min(t.fields.length,e.fields.length);++r)if(n=F4(t.fields[r],e.fields[r]),n!==0)return n;return ye(t.fields.length,e.fields.length)}hp.UNKNOWN_ID=-1;class ef{constructor(e,n){this.fieldPath=e,this.kind=n}}function F4(t,e){const n=Tt.comparator(t.fieldPath,e.fieldPath);return n!==0?n:ye(t.kind,e.kind)}class Xc{constructor(e,n){this.sequenceNumber=e,this.offset=n}static empty(){return new Xc(0,gr.min())}}function Dx(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=le.fromTimestamp(r===1e9?new pt(n+1,0):new pt(n,r));return new gr(i,H.empty(),e)}function bx(t){return new gr(t.readTime,t.key,-1)}class gr{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new gr(le.min(),H.empty(),-1)}static max(){return new gr(le.max(),H.empty(),-1)}}function S0(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=H.comparator(t.documentKey,e.documentKey),n!==0?n:ye(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xx="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Ax{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Xs(t){if(t.code!==D.FAILED_PRECONDITION||t.message!==xx)throw t;F("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&ee(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new N((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof N?n:N.resolve(n)}catch(n){return N.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):N.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):N.reject(n)}static resolve(e){return new N((n,r)=>{n(e)})}static reject(e){return new N((n,r)=>{r(e)})}static waitFor(e){return new N((n,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&n()},u=>r(u))}),o=!0,s===i&&n()})}static or(e){let n=N.resolve(!1);for(const r of e)n=n.next(i=>i?N.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new N((r,i)=>{const s=e.length,o=new Array(s);let a=0;for(let u=0;u<s;u++){const c=u;n(e[c]).next(d=>{o[c]=d,++a,a===s&&r(o)},d=>i(d))}})}static doWhile(e,n){return new N((r,i)=>{const s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cm{constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.P=new Gt,this.transaction.oncomplete=()=>{this.P.resolve()},this.transaction.onabort=()=>{n.error?this.P.reject(new uc(e,n.error)):this.P.resolve()},this.transaction.onerror=r=>{const i=T0(r.target.error);this.P.reject(new uc(e,i))}}static open(e,n,r,i){try{return new Cm(n,e.transaction(i,r))}catch(s){throw new uc(n,s)}}get v(){return this.P.promise}abort(e){e&&this.P.reject(e),this.aborted||(F("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}V(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const n=this.transaction.objectStore(e);return new V4(n)}}class Ur{constructor(e,n,r){this.name=e,this.version=n,this.S=r,Ur.D(Ht())===12.2&&Rt("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return F("SimpleDb","Removing database:",e),vo(window.indexedDB.deleteDatabase(e)).toPromise()}static C(){if(!QC())return!1;if(Ur.N())return!0;const e=Ht(),n=Ur.D(e),r=0<n&&n<10,i=Ur.k(e),s=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||s)}static N(){var e;return typeof process<"u"&&((e=process.env)===null||e===void 0?void 0:e.O)==="YES"}static M(e,n){return e.store(n)}static D(e){const n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static k(e){const n=e.match(/Android ([\d.]+)/i),r=n?n[1].split(".").slice(0,2).join("."):"-1";return Number(r)}async F(e){return this.db||(F("SimpleDb","Opening database:",this.name),this.db=await new Promise((n,r)=>{const i=indexedDB.open(this.name,this.version);i.onsuccess=s=>{const o=s.target.result;n(o)},i.onblocked=()=>{r(new uc(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=s=>{const o=s.target.error;o.name==="VersionError"?r(new M(D.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):o.name==="InvalidStateError"?r(new M(D.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+o)):r(new uc(e,o))},i.onupgradeneeded=s=>{F("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',s.oldVersion);const o=s.target.result;this.S.$(o,i.transaction,s.oldVersion,this.version).next(()=>{F("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.B&&(this.db.onversionchange=n=>this.B(n)),this.db}L(e){this.B=e,this.db&&(this.db.onversionchange=n=>e(n))}async runTransaction(e,n,r,i){const s=n==="readonly";let o=0;for(;;){++o;try{this.db=await this.F(e);const a=Cm.open(this.db,e,s?"readonly":"readwrite",r),u=i(a).next(c=>(a.V(),c)).catch(c=>(a.abort(c),N.reject(c))).toPromise();return u.catch(()=>{}),await a.v,u}catch(a){const u=a,c=u.name!=="FirebaseError"&&o<3;if(F("SimpleDb","Transaction failed with error:",u.message,"Retrying:",c),this.close(),!c)return Promise.reject(u)}}}close(){this.db&&this.db.close(),this.db=void 0}}class U4{constructor(e){this.q=e,this.U=!1,this.K=null}get isDone(){return this.U}get G(){return this.K}set cursor(e){this.q=e}done(){this.U=!0}j(e){this.K=e}delete(){return vo(this.q.delete())}}class uc extends M{constructor(e,n){super(D.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${n}`),this.name="IndexedDbTransactionError"}}function Js(t){return t.name==="IndexedDbTransactionError"}class V4{constructor(e){this.store=e}put(e,n){let r;return n!==void 0?(F("SimpleDb","PUT",this.store.name,e,n),r=this.store.put(n,e)):(F("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),vo(r)}add(e){return F("SimpleDb","ADD",this.store.name,e,e),vo(this.store.add(e))}get(e){return vo(this.store.get(e)).next(n=>(n===void 0&&(n=null),F("SimpleDb","GET",this.store.name,e,n),n))}delete(e){return F("SimpleDb","DELETE",this.store.name,e),vo(this.store.delete(e))}count(){return F("SimpleDb","COUNT",this.store.name),vo(this.store.count())}W(e,n){const r=this.options(e,n);if(r.index||typeof this.store.getAll!="function"){const i=this.cursor(r),s=[];return this.H(i,(o,a)=>{s.push(a)}).next(()=>s)}{const i=this.store.getAll(r.range);return new N((s,o)=>{i.onerror=a=>{o(a.target.error)},i.onsuccess=a=>{s(a.target.result)}})}}J(e,n){const r=this.store.getAll(e,n===null?void 0:n);return new N((i,s)=>{r.onerror=o=>{s(o.target.error)},r.onsuccess=o=>{i(o.target.result)}})}Y(e,n){F("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,n);r.X=!1;const i=this.cursor(r);return this.H(i,(s,o,a)=>a.delete())}Z(e,n){let r;n?r=e:(r={},n=e);const i=this.cursor(r);return this.H(i,n)}tt(e){const n=this.cursor({});return new N((r,i)=>{n.onerror=s=>{const o=T0(s.target.error);i(o)},n.onsuccess=s=>{const o=s.target.result;o?e(o.primaryKey,o.value).next(a=>{a?o.continue():r()}):r()}})}H(e,n){const r=[];return new N((i,s)=>{e.onerror=o=>{s(o.target.error)},e.onsuccess=o=>{const a=o.target.result;if(!a)return void i();const u=new U4(a),c=n(a.primaryKey,a.value,u);if(c instanceof N){const d=c.catch(f=>(u.done(),N.reject(f)));r.push(d)}u.isDone?i():u.G===null?a.continue():a.continue(u.G)}}).next(()=>N.waitFor(r))}options(e,n){let r;return e!==void 0&&(typeof e=="string"?r=e:n=e),{index:r,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){const r=this.store.index(e.index);return e.X?r.openKeyCursor(e.range,n):r.openCursor(e.range,n)}return this.store.openCursor(e.range,n)}}function vo(t){return new N((e,n)=>{t.onsuccess=r=>{const i=r.target.result;e(i)},t.onerror=r=>{const i=T0(r.target.error);n(i)}})}let kT=!1;function T0(t){const e=Ur.D(Ht());if(e>=12.2&&e<13){const n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){const r=new M("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return kT||(kT=!0,setTimeout(()=>{throw r},0)),r}}return t}class $4{constructor(e,n){this.asyncQueue=e,this.et=n,this.task=null}start(){this.nt(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}nt(e){F("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,async()=>{this.task=null;try{F("IndexBackiller",`Documents written: ${await this.et.st()}`)}catch(n){Js(n)?F("IndexBackiller","Ignoring IndexedDB error during index backfill: ",n):await Xs(n)}await this.nt(6e4)})}}class B4{constructor(e,n){this.localStore=e,this.persistence=n}async st(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",n=>this.it(n,e))}it(e,n){const r=new Set;let i=n,s=!0;return N.doWhile(()=>s===!0&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(o=>{if(o!==null&&!r.has(o))return F("IndexBackiller",`Processing collection: ${o}`),this.rt(e,o,i).next(a=>{i-=a,r.add(o)});s=!1})).next(()=>n-i)}rt(e,n,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,n).next(i=>this.localStore.localDocuments.getNextDocuments(e,n,i,r).next(s=>{const o=s.changes;return this.localStore.indexManager.updateIndexEntries(e,o).next(()=>this.ot(i,s)).next(a=>(F("IndexBackiller",`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,n,a))).next(()=>o.size)}))}ot(e,n){let r=e;return n.changes.forEach((i,s)=>{const o=bx(s);S0(o,r)>0&&(r=o)}),new gr(r.readTime,r.documentKey,Math.max(n.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zn{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ut(r),this.ct=r=>n.writeSequenceNumber(r))}ut(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ct&&this.ct(e),e}}Zn.at=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W4{constructor(e,n,r,i,s,o,a,u){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.useFetchStreams=u}}class Vs{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new Vs("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Vs&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CT(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function ha(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function Rx(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rh(t){return t==null}function Jc(t){return t===0&&1/t==-1/0}function Ox(t){return typeof t=="number"&&Number.isInteger(t)&&!Jc(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function j4(){return typeof atob<"u"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=atob(e);return new Kt(n)}static fromUint8Array(e){const n=function(r){let i="";for(let s=0;s<r.length;++s)i+=String.fromCharCode(r[s]);return i}(e);return new Kt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return e=this.binaryString,btoa(e);var e}toUint8Array(){return function(e){const n=new Uint8Array(e.length);for(let r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return n}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ye(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Kt.EMPTY_BYTE_STRING=new Kt("");const z4=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function $s(t){if(ie(!!t),typeof t=="string"){let e=0;const n=z4.exec(t);if(ie(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Et(t.seconds),nanos:Et(t.nanos)}}function Et(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Ho(t){return typeof t=="string"?Kt.fromBase64String(t):Kt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function k0(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function Px(t){const e=t.mapValue.fields.__previous_value__;return k0(e)?Px(e):e}function Zc(t){const e=$s(t.mapValue.fields.__local_write_time__.timestampValue);return new pt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gs={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},tf={nullValue:"NULL_VALUE"};function Yo(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?k0(t)?4:Mx(t)?9007199254740991:10:ee()}function oi(t,e){if(t===e)return!0;const n=Yo(t);if(n!==Yo(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Zc(t).isEqual(Zc(e));case 3:return function(r,i){if(typeof r.timestampValue=="string"&&typeof i.timestampValue=="string"&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;const s=$s(r.timestampValue),o=$s(i.timestampValue);return s.seconds===o.seconds&&s.nanos===o.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(r,i){return Ho(r.bytesValue).isEqual(Ho(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(r,i){return Et(r.geoPointValue.latitude)===Et(i.geoPointValue.latitude)&&Et(r.geoPointValue.longitude)===Et(i.geoPointValue.longitude)}(t,e);case 2:return function(r,i){if("integerValue"in r&&"integerValue"in i)return Et(r.integerValue)===Et(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){const s=Et(r.doubleValue),o=Et(i.doubleValue);return s===o?Jc(s)===Jc(o):isNaN(s)&&isNaN(o)}return!1}(t,e);case 9:return Cl(t.arrayValue.values||[],e.arrayValue.values||[],oi);case 10:return function(r,i){const s=r.mapValue.fields||{},o=i.mapValue.fields||{};if(CT(s)!==CT(o))return!1;for(const a in s)if(s.hasOwnProperty(a)&&(o[a]===void 0||!oi(s[a],o[a])))return!1;return!0}(t,e);default:return ee()}}function eh(t,e){return(t.values||[]).find(n=>oi(n,e))!==void 0}function Bs(t,e){if(t===e)return 0;const n=Yo(t),r=Yo(e);if(n!==r)return ye(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return ye(t.booleanValue,e.booleanValue);case 2:return function(i,s){const o=Et(i.integerValue||i.doubleValue),a=Et(s.integerValue||s.doubleValue);return o<a?-1:o>a?1:o===a?0:isNaN(o)?isNaN(a)?0:-1:1}(t,e);case 3:return NT(t.timestampValue,e.timestampValue);case 4:return NT(Zc(t),Zc(e));case 5:return ye(t.stringValue,e.stringValue);case 6:return function(i,s){const o=Ho(i),a=Ho(s);return o.compareTo(a)}(t.bytesValue,e.bytesValue);case 7:return function(i,s){const o=i.split("/"),a=s.split("/");for(let u=0;u<o.length&&u<a.length;u++){const c=ye(o[u],a[u]);if(c!==0)return c}return ye(o.length,a.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,s){const o=ye(Et(i.latitude),Et(s.latitude));return o!==0?o:ye(Et(i.longitude),Et(s.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(i,s){const o=i.values||[],a=s.values||[];for(let u=0;u<o.length&&u<a.length;++u){const c=Bs(o[u],a[u]);if(c)return c}return ye(o.length,a.length)}(t.arrayValue,e.arrayValue);case 10:return function(i,s){if(i===gs.mapValue&&s===gs.mapValue)return 0;if(i===gs.mapValue)return 1;if(s===gs.mapValue)return-1;const o=i.fields||{},a=Object.keys(o),u=s.fields||{},c=Object.keys(u);a.sort(),c.sort();for(let d=0;d<a.length&&d<c.length;++d){const f=ye(a[d],c[d]);if(f!==0)return f;const g=Bs(o[a[d]],u[c[d]]);if(g!==0)return g}return ye(a.length,c.length)}(t.mapValue,e.mapValue);default:throw ee()}}function NT(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return ye(t,e);const n=$s(t),r=$s(e),i=ye(n.seconds,r.seconds);return i!==0?i:ye(n.nanos,r.nanos)}function Nl(t){return jv(t)}function jv(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(r){const i=$s(r);return`time(${i.seconds},${i.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?Ho(t.bytesValue).toBase64():"referenceValue"in t?(n=t.referenceValue,H.fromName(n).toString()):"geoPointValue"in t?`geo(${(e=t.geoPointValue).latitude},${e.longitude})`:"arrayValue"in t?function(r){let i="[",s=!0;for(const o of r.values||[])s?s=!1:i+=",",i+=jv(o);return i+"]"}(t.arrayValue):"mapValue"in t?function(r){const i=Object.keys(r.fields||{}).sort();let s="{",o=!0;for(const a of i)o?o=!1:s+=",",s+=`${a}:${jv(r.fields[a])}`;return s+"}"}(t.mapValue):ee();var e,n}function Ko(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function zv(t){return!!t&&"integerValue"in t}function th(t){return!!t&&"arrayValue"in t}function DT(t){return!!t&&"nullValue"in t}function bT(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function nf(t){return!!t&&"mapValue"in t}function cc(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return ha(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=cc(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=cc(t.arrayValue.values[n]);return e}return Object.assign({},t)}function Mx(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}function q4(t){return"nullValue"in t?tf:"booleanValue"in t?{booleanValue:!1}:"integerValue"in t||"doubleValue"in t?{doubleValue:NaN}:"timestampValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in t?{stringValue:""}:"bytesValue"in t?{bytesValue:""}:"referenceValue"in t?Ko(Vs.empty(),H.empty()):"geoPointValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in t?{arrayValue:{}}:"mapValue"in t?{mapValue:{}}:ee()}function G4(t){return"nullValue"in t?{booleanValue:!1}:"booleanValue"in t?{doubleValue:NaN}:"integerValue"in t||"doubleValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in t?{stringValue:""}:"stringValue"in t?{bytesValue:""}:"bytesValue"in t?Ko(Vs.empty(),H.empty()):"referenceValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in t?{arrayValue:{}}:"arrayValue"in t?{mapValue:{}}:"mapValue"in t?gs:ee()}function xT(t,e){const n=Bs(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?-1:!t.inclusive&&e.inclusive?1:0}function AT(t,e){const n=Bs(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?1:!t.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ws{constructor(e,n){this.position=e,this.inclusive=n}}function RT(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],o=t.position[i];if(s.field.isKeyField()?r=H.comparator(H.fromName(o.referenceValue),n.key):r=Bs(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function OT(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!oi(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lx{}class be extends Lx{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new H4(e,n,r):n==="array-contains"?new Q4(e,r):n==="in"?new Wx(e,r):n==="not-in"?new X4(e,r):n==="array-contains-any"?new J4(e,r):new be(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new Y4(e,r):new K4(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Bs(n,this.value)):n!==null&&Yo(this.value)===Yo(n)&&this.matchesComparison(Bs(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ee()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class We extends Lx{constructor(e,n){super(),this.filters=e,this.op=n,this.ht=null}static create(e,n){return new We(e,n)}matches(e){return Dl(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ht!==null||(this.ht=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ht}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.lt(n=>n.isInequality());return e!==null?e.field:null}lt(e){for(const n of this.getFlattenedFilters())if(e(n))return n;return null}}function Dl(t){return t.op==="and"}function qv(t){return t.op==="or"}function C0(t){return Fx(t)&&Dl(t)}function Fx(t){for(const e of t.filters)if(e instanceof We)return!1;return!0}function Gv(t){if(t instanceof be)return t.field.canonicalString()+t.op.toString()+Nl(t.value);if(C0(t))return t.filters.map(e=>Gv(e)).join(",");{const e=t.filters.map(n=>Gv(n)).join(",");return`${t.op}(${e})`}}function Ux(t,e){return t instanceof be?function(n,r){return r instanceof be&&n.op===r.op&&n.field.isEqual(r.field)&&oi(n.value,r.value)}(t,e):t instanceof We?function(n,r){return r instanceof We&&n.op===r.op&&n.filters.length===r.filters.length?n.filters.reduce((i,s,o)=>i&&Ux(s,r.filters[o]),!0):!1}(t,e):void ee()}function Vx(t,e){const n=t.filters.concat(e);return We.create(n,t.op)}function $x(t){return t instanceof be?function(e){return`${e.field.canonicalString()} ${e.op} ${Nl(e.value)}`}(t):t instanceof We?function(e){return e.op.toString()+" {"+e.getFilters().map($x).join(" ,")+"}"}(t):"Filter"}class H4 extends be{constructor(e,n,r){super(e,n,r),this.key=H.fromName(r.referenceValue)}matches(e){const n=H.comparator(e.key,this.key);return this.matchesComparison(n)}}class Y4 extends be{constructor(e,n){super(e,"in",n),this.keys=Bx("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class K4 extends be{constructor(e,n){super(e,"not-in",n),this.keys=Bx("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function Bx(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>H.fromName(r.referenceValue))}class Q4 extends be{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return th(n)&&eh(n.arrayValue,this.value)}}class Wx extends be{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&eh(this.value.arrayValue,n)}}class X4 extends be{constructor(e,n){super(e,"not-in",n)}matches(e){if(eh(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!eh(this.value.arrayValue,n)}}class J4 extends be{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!th(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>eh(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class al{constructor(e,n="asc"){this.field=e,this.dir=n}}function Z4(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dt{constructor(e,n){this.comparator=e,this.root=n||hn.EMPTY}insert(e,n){return new Dt(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,hn.BLACK,null,null))}remove(e){return new Dt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,hn.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Rd(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Rd(this.root,e,this.comparator,!1)}getReverseIterator(){return new Rd(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Rd(this.root,e,this.comparator,!0)}}class Rd{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class hn{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??hn.RED,this.left=i??hn.EMPTY,this.right=s??hn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new hn(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return hn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return hn.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,hn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,hn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ee();const e=this.left.check();if(e!==this.right.check())throw ee();return e+(this.isRed()?0:1)}}hn.EMPTY=null,hn.RED=!0,hn.BLACK=!1;hn.EMPTY=new class{constructor(){this.size=0}get key(){throw ee()}get value(){throw ee()}get color(){throw ee()}get left(){throw ee()}get right(){throw ee()}copy(t,e,n,r,i){return this}insert(t,e,n){return new hn(t,e)}remove(t,e){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ge{constructor(e){this.comparator=e,this.data=new Dt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new PT(this.data.getIterator())}getIteratorFrom(e){return new PT(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Ge)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Ge(this.comparator);return n.data=e,n}}class PT{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function ba(t){return t.hasNext()?t.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class er{constructor(e){this.fields=e,e.sort(Tt.comparator)}static empty(){return new er([])}unionWith(e){let n=new Ge(Tt.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new er(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Cl(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fn{constructor(e){this.value=e}static empty(){return new fn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!nf(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=cc(n)}setAll(e){let n=Tt.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const u=this.getFieldsMap(n);this.applyChanges(u,r,i),r={},i=[],n=a.popLast()}o?r[a.lastSegment()]=cc(o):i.push(a.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){const n=this.field(e.popLast());nf(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return oi(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];nf(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){ha(n,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new fn(cc(this.value))}}function jx(t){const e=[];return ha(t.fields,(n,r)=>{const i=new Tt([n]);if(nf(r)){const s=jx(r.mapValue).fields;if(s.length===0)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new er(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class it{constructor(e,n,r,i,s,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new it(e,0,le.min(),le.min(),le.min(),fn.empty(),0)}static newFoundDocument(e,n,r,i){return new it(e,1,n,le.min(),r,i,0)}static newNoDocument(e,n){return new it(e,2,n,le.min(),le.min(),fn.empty(),0)}static newUnknownDocument(e,n){return new it(e,3,n,le.min(),le.min(),fn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(le.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=fn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=fn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=le.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof it&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new it(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eG{constructor(e,n=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.ft=null}}function Hv(t,e=null,n=[],r=[],i=null,s=null,o=null){return new eG(t,e,n,r,i,s,o)}function Qo(t){const e=Y(t);if(e.ft===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Gv(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),Rh(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Nl(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Nl(r)).join(",")),e.ft=n}return e.ft}function Oh(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!Z4(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!Ux(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!OT(t.startAt,e.startAt)&&OT(t.endAt,e.endAt)}function dp(t){return H.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function fp(t,e){return t.filters.filter(n=>n instanceof be&&n.field.isEqual(e))}function MT(t,e,n){let r=tf,i=!0;for(const s of fp(t,e)){let o=tf,a=!0;switch(s.op){case"<":case"<=":o=q4(s.value);break;case"==":case"in":case">=":o=s.value;break;case">":o=s.value,a=!1;break;case"!=":case"not-in":o=tf}xT({value:r,inclusive:i},{value:o,inclusive:a})<0&&(r=o,i=a)}if(n!==null){for(let s=0;s<t.orderBy.length;++s)if(t.orderBy[s].field.isEqual(e)){const o=n.position[s];xT({value:r,inclusive:i},{value:o,inclusive:n.inclusive})<0&&(r=o,i=n.inclusive);break}}return{value:r,inclusive:i}}function LT(t,e,n){let r=gs,i=!0;for(const s of fp(t,e)){let o=gs,a=!0;switch(s.op){case">=":case">":o=G4(s.value),a=!1;break;case"==":case"in":case"<=":o=s.value;break;case"<":o=s.value,a=!1;break;case"!=":case"not-in":o=gs}AT({value:r,inclusive:i},{value:o,inclusive:a})>0&&(r=o,i=a)}if(n!==null){for(let s=0;s<t.orderBy.length;++s)if(t.orderBy[s].field.isEqual(e)){const o=n.position[s];AT({value:r,inclusive:i},{value:o,inclusive:n.inclusive})>0&&(r=o,i=n.inclusive);break}}return{value:r,inclusive:i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qi{constructor(e,n=null,r=[],i=[],s=null,o="F",a=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=u,this.dt=null,this._t=null,this.startAt,this.endAt}}function zx(t,e,n,r,i,s,o,a){return new qi(t,e,n,r,i,s,o,a)}function Zl(t){return new qi(t)}function FT(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function N0(t){return t.explicitOrderBy.length>0?t.explicitOrderBy[0].field:null}function Nm(t){for(const e of t.filters){const n=e.getFirstInequalityField();if(n!==null)return n}return null}function D0(t){return t.collectionGroup!==null}function Mo(t){const e=Y(t);if(e.dt===null){e.dt=[];const n=Nm(e),r=N0(e);if(n!==null&&r===null)n.isKeyField()||e.dt.push(new al(n)),e.dt.push(new al(Tt.keyField(),"asc"));else{let i=!1;for(const s of e.explicitOrderBy)e.dt.push(s),s.field.isKeyField()&&(i=!0);if(!i){const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.dt.push(new al(Tt.keyField(),s))}}}return e.dt}function Bn(t){const e=Y(t);if(!e._t)if(e.limitType==="F")e._t=Hv(e.path,e.collectionGroup,Mo(e),e.filters,e.limit,e.startAt,e.endAt);else{const n=[];for(const s of Mo(e)){const o=s.dir==="desc"?"asc":"desc";n.push(new al(s.field,o))}const r=e.endAt?new Ws(e.endAt.position,e.endAt.inclusive):null,i=e.startAt?new Ws(e.startAt.position,e.startAt.inclusive):null;e._t=Hv(e.path,e.collectionGroup,n,e.filters,e.limit,r,i)}return e._t}function Yv(t,e){e.getFirstInequalityField(),Nm(t);const n=t.filters.concat([e]);return new qi(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function pp(t,e,n){return new qi(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Ph(t,e){return Oh(Bn(t),Bn(e))&&t.limitType===e.limitType}function qx(t){return`${Qo(Bn(t))}|lt:${t.limitType}`}function Kv(t){return`Query(target=${function(e){let n=e.path.canonicalString();return e.collectionGroup!==null&&(n+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(n+=`, filters: [${e.filters.map(r=>$x(r)).join(", ")}]`),Rh(e.limit)||(n+=", limit: "+e.limit),e.orderBy.length>0&&(n+=`, orderBy: [${e.orderBy.map(r=>function(i){return`${i.field.canonicalString()} (${i.dir})`}(r)).join(", ")}]`),e.startAt&&(n+=", startAt: ",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Nl(r)).join(",")),e.endAt&&(n+=", endAt: ",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Nl(r)).join(",")),`Target(${n})`}(Bn(t))}; limitType=${t.limitType})`}function Mh(t,e){return e.isFoundDocument()&&function(n,r){const i=r.key.path;return n.collectionGroup!==null?r.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(i):H.isDocumentKey(n.path)?n.path.isEqual(i):n.path.isImmediateParentOf(i)}(t,e)&&function(n,r){for(const i of Mo(n))if(!i.field.isKeyField()&&r.data.field(i.field)===null)return!1;return!0}(t,e)&&function(n,r){for(const i of n.filters)if(!i.matches(r))return!1;return!0}(t,e)&&function(n,r){return!(n.startAt&&!function(i,s,o){const a=RT(i,s,o);return i.inclusive?a<=0:a<0}(n.startAt,Mo(n),r)||n.endAt&&!function(i,s,o){const a=RT(i,s,o);return i.inclusive?a>=0:a>0}(n.endAt,Mo(n),r))}(t,e)}function Gx(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function Hx(t){return(e,n)=>{let r=!1;for(const i of Mo(t)){const s=tG(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function tG(t,e,n){const r=t.field.isKeyField()?H.comparator(e.key,n.key):function(i,s,o){const a=s.data.field(i),u=o.data.field(i);return a!==null&&u!==null?Bs(a,u):ee()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return ee()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yx(t,e){if(t.wt){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Jc(e)?"-0":e}}function Kx(t){return{integerValue:""+t}}function Qx(t,e){return Ox(e)?Kx(e):Yx(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dm{constructor(){this._=void 0}}function nG(t,e,n){return t instanceof bl?function(r,i){const s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&(s.fields.__previous_value__=i),{mapValue:s}}(n,e):t instanceof Xo?Jx(t,e):t instanceof Jo?Zx(t,e):function(r,i){const s=Xx(r,i),o=UT(s)+UT(r.gt);return zv(s)&&zv(r.gt)?Kx(o):Yx(r.yt,o)}(t,e)}function rG(t,e,n){return t instanceof Xo?Jx(t,e):t instanceof Jo?Zx(t,e):n}function Xx(t,e){return t instanceof xl?zv(n=e)||function(r){return!!r&&"doubleValue"in r}(n)?e:{integerValue:0}:null;var n}class bl extends Dm{}class Xo extends Dm{constructor(e){super(),this.elements=e}}function Jx(t,e){const n=eA(e);for(const r of t.elements)n.some(i=>oi(i,r))||n.push(r);return{arrayValue:{values:n}}}class Jo extends Dm{constructor(e){super(),this.elements=e}}function Zx(t,e){let n=eA(e);for(const r of t.elements)n=n.filter(i=>!oi(i,r));return{arrayValue:{values:n}}}class xl extends Dm{constructor(e,n){super(),this.yt=e,this.gt=n}}function UT(t){return Et(t.integerValue||t.doubleValue)}function eA(t){return th(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lh{constructor(e,n){this.field=e,this.transform=n}}function iG(t,e){return t.field.isEqual(e.field)&&function(n,r){return n instanceof Xo&&r instanceof Xo||n instanceof Jo&&r instanceof Jo?Cl(n.elements,r.elements,oi):n instanceof xl&&r instanceof xl?oi(n.gt,r.gt):n instanceof bl&&r instanceof bl}(t.transform,e.transform)}class sG{constructor(e,n){this.version=e,this.transformResults=n}}class ft{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new ft}static exists(e){return new ft(void 0,e)}static updateTime(e){return new ft(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function rf(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class bm{}function tA(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new tu(t.key,ft.none()):new eu(t.key,t.data,ft.none());{const n=t.data,r=fn.empty();let i=new Ge(Tt.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new Gi(t.key,r,new er(i.toArray()),ft.none())}}function oG(t,e,n){t instanceof eu?function(r,i,s){const o=r.value.clone(),a=$T(r.fieldTransforms,i,s.transformResults);o.setAll(a),i.convertToFoundDocument(s.version,o).setHasCommittedMutations()}(t,e,n):t instanceof Gi?function(r,i,s){if(!rf(r.precondition,i))return void i.convertToUnknownDocument(s.version);const o=$T(r.fieldTransforms,i,s.transformResults),a=i.data;a.setAll(nA(r)),a.setAll(o),i.convertToFoundDocument(s.version,a).setHasCommittedMutations()}(t,e,n):function(r,i,s){i.convertToNoDocument(s.version).setHasCommittedMutations()}(0,e,n)}function hc(t,e,n,r){return t instanceof eu?function(i,s,o,a){if(!rf(i.precondition,s))return o;const u=i.value.clone(),c=BT(i.fieldTransforms,a,s);return u.setAll(c),s.convertToFoundDocument(s.version,u).setHasLocalMutations(),null}(t,e,n,r):t instanceof Gi?function(i,s,o,a){if(!rf(i.precondition,s))return o;const u=BT(i.fieldTransforms,a,s),c=s.data;return c.setAll(nA(i)),c.setAll(u),s.convertToFoundDocument(s.version,c).setHasLocalMutations(),o===null?null:o.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(d=>d.field))}(t,e,n,r):function(i,s,o){return rf(i.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):o}(t,e,n)}function aG(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),s=Xx(r.transform,i||null);s!=null&&(n===null&&(n=fn.empty()),n.set(r.field,s))}return n||null}function VT(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(n,r){return n===void 0&&r===void 0||!(!n||!r)&&Cl(n,r,(i,s)=>iG(i,s))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class eu extends bm{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Gi extends bm{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function nA(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function $T(t,e,n){const r=new Map;ie(t.length===n.length);for(let i=0;i<n.length;i++){const s=t[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,rG(o,a,n[i]))}return r}function BT(t,e,n){const r=new Map;for(const i of t){const s=i.transform,o=n.data.field(i.field);r.set(i.field,nG(s,o,e))}return r}class tu extends bm{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class b0 extends bm{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lG{constructor(e){this.count=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Mt,Pe;function rA(t){switch(t){default:return ee();case D.CANCELLED:case D.UNKNOWN:case D.DEADLINE_EXCEEDED:case D.RESOURCE_EXHAUSTED:case D.INTERNAL:case D.UNAVAILABLE:case D.UNAUTHENTICATED:return!1;case D.INVALID_ARGUMENT:case D.NOT_FOUND:case D.ALREADY_EXISTS:case D.PERMISSION_DENIED:case D.FAILED_PRECONDITION:case D.ABORTED:case D.OUT_OF_RANGE:case D.UNIMPLEMENTED:case D.DATA_LOSS:return!0}}function iA(t){if(t===void 0)return Rt("GRPC error has no .code"),D.UNKNOWN;switch(t){case Mt.OK:return D.OK;case Mt.CANCELLED:return D.CANCELLED;case Mt.UNKNOWN:return D.UNKNOWN;case Mt.DEADLINE_EXCEEDED:return D.DEADLINE_EXCEEDED;case Mt.RESOURCE_EXHAUSTED:return D.RESOURCE_EXHAUSTED;case Mt.INTERNAL:return D.INTERNAL;case Mt.UNAVAILABLE:return D.UNAVAILABLE;case Mt.UNAUTHENTICATED:return D.UNAUTHENTICATED;case Mt.INVALID_ARGUMENT:return D.INVALID_ARGUMENT;case Mt.NOT_FOUND:return D.NOT_FOUND;case Mt.ALREADY_EXISTS:return D.ALREADY_EXISTS;case Mt.PERMISSION_DENIED:return D.PERMISSION_DENIED;case Mt.FAILED_PRECONDITION:return D.FAILED_PRECONDITION;case Mt.ABORTED:return D.ABORTED;case Mt.OUT_OF_RANGE:return D.OUT_OF_RANGE;case Mt.UNIMPLEMENTED:return D.UNIMPLEMENTED;case Mt.DATA_LOSS:return D.DATA_LOSS;default:return ee()}}(Pe=Mt||(Mt={}))[Pe.OK=0]="OK",Pe[Pe.CANCELLED=1]="CANCELLED",Pe[Pe.UNKNOWN=2]="UNKNOWN",Pe[Pe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Pe[Pe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Pe[Pe.NOT_FOUND=5]="NOT_FOUND",Pe[Pe.ALREADY_EXISTS=6]="ALREADY_EXISTS",Pe[Pe.PERMISSION_DENIED=7]="PERMISSION_DENIED",Pe[Pe.UNAUTHENTICATED=16]="UNAUTHENTICATED",Pe[Pe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Pe[Pe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Pe[Pe.ABORTED=10]="ABORTED",Pe[Pe.OUT_OF_RANGE=11]="OUT_OF_RANGE",Pe[Pe.UNIMPLEMENTED=12]="UNIMPLEMENTED",Pe[Pe.INTERNAL=13]="INTERNAL",Pe[Pe.UNAVAILABLE=14]="UNAVAILABLE",Pe[Pe.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zs{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){ha(this.inner,(n,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return Rx(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uG=new Dt(H.comparator);function tr(){return uG}const sA=new Dt(H.comparator);function qu(...t){let e=sA;for(const n of t)e=e.insert(n.key,n);return e}function oA(t){let e=sA;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Zr(){return dc()}function aA(){return dc()}function dc(){return new Zs(t=>t.toString(),(t,e)=>t.isEqual(e))}const cG=new Dt(H.comparator),hG=new Ge(H.comparator);function Ee(...t){let e=hG;for(const n of t)e=e.add(n);return e}const dG=new Ge(ye);function xm(){return dG}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fh{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,Uh.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Fh(le.min(),i,xm(),tr(),Ee())}}class Uh{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Uh(r,n,Ee(),Ee(),Ee())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sf{constructor(e,n,r,i){this.It=e,this.removedTargetIds=n,this.key=r,this.Tt=i}}class lA{constructor(e,n){this.targetId=e,this.Et=n}}class uA{constructor(e,n,r=Kt.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class WT{constructor(){this.At=0,this.Rt=zT(),this.bt=Kt.EMPTY_BYTE_STRING,this.Pt=!1,this.vt=!0}get current(){return this.Pt}get resumeToken(){return this.bt}get Vt(){return this.At!==0}get St(){return this.vt}Dt(e){e.approximateByteSize()>0&&(this.vt=!0,this.bt=e)}Ct(){let e=Ee(),n=Ee(),r=Ee();return this.Rt.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:ee()}}),new Uh(this.bt,this.Pt,e,n,r)}xt(){this.vt=!1,this.Rt=zT()}Nt(e,n){this.vt=!0,this.Rt=this.Rt.insert(e,n)}kt(e){this.vt=!0,this.Rt=this.Rt.remove(e)}Ot(){this.At+=1}Mt(){this.At-=1}Ft(){this.vt=!0,this.Pt=!0}}class fG{constructor(e){this.$t=e,this.Bt=new Map,this.Lt=tr(),this.qt=jT(),this.Ut=new Ge(ye)}Kt(e){for(const n of e.It)e.Tt&&e.Tt.isFoundDocument()?this.Gt(n,e.Tt):this.Qt(n,e.key,e.Tt);for(const n of e.removedTargetIds)this.Qt(n,e.key,e.Tt)}jt(e){this.forEachTarget(e,n=>{const r=this.Wt(n);switch(e.state){case 0:this.zt(n)&&r.Dt(e.resumeToken);break;case 1:r.Mt(),r.Vt||r.xt(),r.Dt(e.resumeToken);break;case 2:r.Mt(),r.Vt||this.removeTarget(n);break;case 3:this.zt(n)&&(r.Ft(),r.Dt(e.resumeToken));break;case 4:this.zt(n)&&(this.Ht(n),r.Dt(e.resumeToken));break;default:ee()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Bt.forEach((r,i)=>{this.zt(i)&&n(i)})}Jt(e){const n=e.targetId,r=e.Et.count,i=this.Yt(n);if(i){const s=i.target;if(dp(s))if(r===0){const o=new H(s.path);this.Qt(n,o,it.newNoDocument(o,le.min()))}else ie(r===1);else this.Xt(n)!==r&&(this.Ht(n),this.Ut=this.Ut.add(n))}}Zt(e){const n=new Map;this.Bt.forEach((s,o)=>{const a=this.Yt(o);if(a){if(s.current&&dp(a.target)){const u=new H(a.target.path);this.Lt.get(u)!==null||this.te(o,u)||this.Qt(o,u,it.newNoDocument(u,e))}s.St&&(n.set(o,s.Ct()),s.xt())}});let r=Ee();this.qt.forEach((s,o)=>{let a=!0;o.forEachWhile(u=>{const c=this.Yt(u);return!c||c.purpose===2||(a=!1,!1)}),a&&(r=r.add(s))}),this.Lt.forEach((s,o)=>o.setReadTime(e));const i=new Fh(e,n,this.Ut,this.Lt,r);return this.Lt=tr(),this.qt=jT(),this.Ut=new Ge(ye),i}Gt(e,n){if(!this.zt(e))return;const r=this.te(e,n.key)?2:0;this.Wt(e).Nt(n.key,r),this.Lt=this.Lt.insert(n.key,n),this.qt=this.qt.insert(n.key,this.ee(n.key).add(e))}Qt(e,n,r){if(!this.zt(e))return;const i=this.Wt(e);this.te(e,n)?i.Nt(n,1):i.kt(n),this.qt=this.qt.insert(n,this.ee(n).delete(e)),r&&(this.Lt=this.Lt.insert(n,r))}removeTarget(e){this.Bt.delete(e)}Xt(e){const n=this.Wt(e).Ct();return this.$t.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ot(e){this.Wt(e).Ot()}Wt(e){let n=this.Bt.get(e);return n||(n=new WT,this.Bt.set(e,n)),n}ee(e){let n=this.qt.get(e);return n||(n=new Ge(ye),this.qt=this.qt.insert(e,n)),n}zt(e){const n=this.Yt(e)!==null;return n||F("WatchChangeAggregator","Detected inactive target",e),n}Yt(e){const n=this.Bt.get(e);return n&&n.Vt?null:this.$t.ne(e)}Ht(e){this.Bt.set(e,new WT),this.$t.getRemoteKeysForTarget(e).forEach(n=>{this.Qt(e,n,null)})}te(e,n){return this.$t.getRemoteKeysForTarget(e).has(n)}}function jT(){return new Dt(H.comparator)}function zT(){return new Dt(H.comparator)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pG=(()=>({asc:"ASCENDING",desc:"DESCENDING"}))(),mG=(()=>({"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"}))(),gG=(()=>({and:"AND",or:"OR"}))();class yG{constructor(e,n){this.databaseId=e,this.wt=n}}function Al(t,e){return t.wt?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function cA(t,e){return t.wt?e.toBase64():e.toUint8Array()}function vG(t,e){return Al(t,e.toTimestamp())}function Ot(t){return ie(!!t),le.fromTimestamp(function(e){const n=$s(e);return new pt(n.seconds,n.nanos)}(t))}function x0(t,e){return function(n){return new Me(["projects",n.projectId,"databases",n.database])}(t).child("documents").child(e).canonicalString()}function hA(t){const e=Me.fromString(t);return ie(_A(e)),e}function nh(t,e){return x0(t.databaseId,e.path)}function ii(t,e){const n=hA(e);if(n.get(1)!==t.databaseId.projectId)throw new M(D.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new M(D.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new H(fA(n))}function Qv(t,e){return x0(t.databaseId,e)}function dA(t){const e=hA(t);return e.length===4?Me.emptyPath():fA(e)}function rh(t){return new Me(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function fA(t){return ie(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function qT(t,e,n){return{name:nh(t,e),fields:n.value.mapValue.fields}}function pA(t,e,n){const r=ii(t,e.name),i=Ot(e.updateTime),s=e.createTime?Ot(e.createTime):le.min(),o=new fn({mapValue:{fields:e.fields}}),a=it.newFoundDocument(r,i,s,o);return n&&a.setHasCommittedMutations(),n?a.setHasCommittedMutations():a}function _G(t,e){return"found"in e?function(n,r){ie(!!r.found),r.found.name,r.found.updateTime;const i=ii(n,r.found.name),s=Ot(r.found.updateTime),o=r.found.createTime?Ot(r.found.createTime):le.min(),a=new fn({mapValue:{fields:r.found.fields}});return it.newFoundDocument(i,s,o,a)}(t,e):"missing"in e?function(n,r){ie(!!r.missing),ie(!!r.readTime);const i=ii(n,r.missing),s=Ot(r.readTime);return it.newNoDocument(i,s)}(t,e):ee()}function wG(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:ee()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(u,c){return u.wt?(ie(c===void 0||typeof c=="string"),Kt.fromBase64String(c||"")):(ie(c===void 0||c instanceof Uint8Array),Kt.fromUint8Array(c||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(u){const c=u.code===void 0?D.UNKNOWN:iA(u.code);return new M(c,u.message||"")}(o);n=new uA(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=ii(t,r.document.name),s=Ot(r.document.updateTime),o=r.document.createTime?Ot(r.document.createTime):le.min(),a=new fn({mapValue:{fields:r.document.fields}}),u=it.newFoundDocument(i,s,o,a),c=r.targetIds||[],d=r.removedTargetIds||[];n=new sf(c,d,u.key,u)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=ii(t,r.document),s=r.readTime?Ot(r.readTime):le.min(),o=it.newNoDocument(i,s),a=r.removedTargetIds||[];n=new sf([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=ii(t,r.document),s=r.removedTargetIds||[];n=new sf([],s,i,null)}else{if(!("filter"in e))return ee();{e.filter;const r=e.filter;r.targetId;const i=r.count||0,s=new lG(i),o=r.targetId;n=new lA(o,s)}}return n}function ih(t,e){let n;if(e instanceof eu)n={update:qT(t,e.key,e.value)};else if(e instanceof tu)n={delete:nh(t,e.key)};else if(e instanceof Gi)n={update:qT(t,e.key,e.data),updateMask:CG(e.fieldMask)};else{if(!(e instanceof b0))return ee();n={verify:nh(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,s){const o=s.transform;if(o instanceof bl)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(o instanceof Xo)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:o.elements}};if(o instanceof Jo)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:o.elements}};if(o instanceof xl)return{fieldPath:s.field.canonicalString(),increment:o.gt};throw ee()}(0,r))),e.precondition.isNone||(n.currentDocument=function(r,i){return i.updateTime!==void 0?{updateTime:vG(r,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:ee()}(t,e.precondition)),n}function Xv(t,e){const n=e.currentDocument?function(i){return i.updateTime!==void 0?ft.updateTime(Ot(i.updateTime)):i.exists!==void 0?ft.exists(i.exists):ft.none()}(e.currentDocument):ft.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(s,o){let a=null;if("setToServerValue"in o)ie(o.setToServerValue==="REQUEST_TIME"),a=new bl;else if("appendMissingElements"in o){const c=o.appendMissingElements.values||[];a=new Xo(c)}else if("removeAllFromArray"in o){const c=o.removeAllFromArray.values||[];a=new Jo(c)}else"increment"in o?a=new xl(s,o.increment):ee();const u=Tt.fromServerFormat(o.fieldPath);return new Lh(u,a)}(t,i)):[];if(e.update){e.update.name;const i=ii(t,e.update.name),s=new fn({mapValue:{fields:e.update.fields}});if(e.updateMask){const o=function(a){const u=a.fieldPaths||[];return new er(u.map(c=>Tt.fromServerFormat(c)))}(e.updateMask);return new Gi(i,s,o,n,r)}return new eu(i,s,n,r)}if(e.delete){const i=ii(t,e.delete);return new tu(i,n)}if(e.verify){const i=ii(t,e.verify);return new b0(i,n)}return ee()}function IG(t,e){return t&&t.length>0?(ie(e!==void 0),t.map(n=>function(r,i){let s=r.updateTime?Ot(r.updateTime):Ot(i);return s.isEqual(le.min())&&(s=Ot(i)),new sG(s,r.transformResults||[])}(n,e))):[]}function mA(t,e){return{documents:[Qv(t,e.path)]}}function A0(t,e){const n={structuredQuery:{}},r=e.path;e.collectionGroup!==null?(n.parent=Qv(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=Qv(t,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(u){if(u.length!==0)return vA(We.create(u,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const s=function(u){if(u.length!==0)return u.map(c=>function(d){return{field:Aa(d.field),direction:SG(d.dir)}}(c))}(e.orderBy);s&&(n.structuredQuery.orderBy=s);const o=function(u,c){return u.wt||Rh(c)?c:{value:c}}(t,e.limit);var a;return o!==null&&(n.structuredQuery.limit=o),e.startAt&&(n.structuredQuery.startAt={before:(a=e.startAt).inclusive,values:a.position}),e.endAt&&(n.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(e.endAt)),n}function gA(t){let e=dA(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){ie(r===1);const d=n.from[0];d.allDescendants?i=d.collectionId:e=e.child(d.collectionId)}let s=[];n.where&&(s=function(d){const f=yA(d);return f instanceof We&&C0(f)?f.getFilters():[f]}(n.where));let o=[];n.orderBy&&(o=n.orderBy.map(d=>function(f){return new al(Ra(f.field),function(g){switch(g){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(f.direction))}(d)));let a=null;n.limit&&(a=function(d){let f;return f=typeof d=="object"?d.value:d,Rh(f)?null:f}(n.limit));let u=null;n.startAt&&(u=function(d){const f=!!d.before,g=d.values||[];return new Ws(g,f)}(n.startAt));let c=null;return n.endAt&&(c=function(d){const f=!d.before,g=d.values||[];return new Ws(g,f)}(n.endAt)),zx(e,i,o,s,a,"F",u,c)}function EG(t,e){const n=function(r,i){switch(i){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return ee()}}(0,e.purpose);return n==null?null:{"goog-listen-tags":n}}function yA(t){return t.unaryFilter!==void 0?function(e){switch(e.unaryFilter.op){case"IS_NAN":const n=Ra(e.unaryFilter.field);return be.create(n,"==",{doubleValue:NaN});case"IS_NULL":const r=Ra(e.unaryFilter.field);return be.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=Ra(e.unaryFilter.field);return be.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const s=Ra(e.unaryFilter.field);return be.create(s,"!=",{nullValue:"NULL_VALUE"});default:return ee()}}(t):t.fieldFilter!==void 0?function(e){return be.create(Ra(e.fieldFilter.field),function(n){switch(n){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ee()}}(e.fieldFilter.op),e.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(e){return We.create(e.compositeFilter.filters.map(n=>yA(n)),function(n){switch(n){case"AND":return"and";case"OR":return"or";default:return ee()}}(e.compositeFilter.op))}(t):ee()}function SG(t){return pG[t]}function TG(t){return mG[t]}function kG(t){return gG[t]}function Aa(t){return{fieldPath:t.canonicalString()}}function Ra(t){return Tt.fromServerFormat(t.fieldPath)}function vA(t){return t instanceof be?function(e){if(e.op==="=="){if(bT(e.value))return{unaryFilter:{field:Aa(e.field),op:"IS_NAN"}};if(DT(e.value))return{unaryFilter:{field:Aa(e.field),op:"IS_NULL"}}}else if(e.op==="!="){if(bT(e.value))return{unaryFilter:{field:Aa(e.field),op:"IS_NOT_NAN"}};if(DT(e.value))return{unaryFilter:{field:Aa(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Aa(e.field),op:TG(e.op),value:e.value}}}(t):t instanceof We?function(e){const n=e.getFilters().map(r=>vA(r));return n.length===1?n[0]:{compositeFilter:{op:kG(e.op),filters:n}}}(t):ee()}function CG(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function _A(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $n(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=GT(e)),e=NG(t.get(n),e);return GT(e)}function NG(t,e){let n=e;const r=t.length;for(let i=0;i<r;i++){const s=t.charAt(i);switch(s){case"\0":n+="";break;case"":n+="";break;default:n+=s}}return n}function GT(t){return t+""}function ei(t){const e=t.length;if(ie(e>=2),e===2)return ie(t.charAt(0)===""&&t.charAt(1)===""),Me.emptyPath();const n=e-2,r=[];let i="";for(let s=0;s<e;){const o=t.indexOf("",s);switch((o<0||o>n)&&ee(),t.charAt(o+1)){case"":const a=t.substring(s,o);let u;i.length===0?u=a:(i+=a,u=i,i=""),r.push(u);break;case"":i+=t.substring(s,o),i+="\0";break;case"":i+=t.substring(s,o+1);break;default:ee()}s=o+2}return new Me(r)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HT=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function of(t,e){return[t,$n(e)]}function wA(t,e,n){return[t,$n(e),n]}const DG={},bG=["prefixPath","collectionGroup","readTime","documentId"],xG=["prefixPath","collectionGroup","documentId"],AG=["collectionGroup","readTime","prefixPath","documentId"],RG=["canonicalId","targetId"],OG=["targetId","path"],PG=["path","targetId"],MG=["collectionId","parent"],LG=["indexId","uid"],FG=["uid","sequenceNumber"],UG=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],VG=["indexId","uid","orderedDocumentKey"],$G=["userId","collectionPath","documentId"],BG=["userId","collectionPath","largestBatchId"],WG=["userId","collectionGroup","largestBatchId"],IA=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],jG=[...IA,"documentOverlays"],EA=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],SA=EA,zG=[...SA,"indexConfiguration","indexState","indexEntries"];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jv extends Ax{constructor(e,n){super(),this.se=e,this.currentSequenceNumber=n}}function ln(t,e){const n=Y(t);return Ur.M(n.se,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R0{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&oG(s,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=hc(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=hc(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=aA();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=n.has(i.key)?null:a;const u=tA(o,a);u!==null&&r.set(i.key,u),o.isValidDocument()||o.convertToNoDocument(le.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Ee())}isEqual(e){return this.batchId===e.batchId&&Cl(this.mutations,e.mutations,(n,r)=>VT(n,r))&&Cl(this.baseMutations,e.baseMutations,(n,r)=>VT(n,r))}}class O0{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){ie(e.mutations.length===r.length);let i=cG;const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new O0(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P0{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class As{constructor(e,n,r,i,s=le.min(),o=le.min(),a=Kt.EMPTY_BYTE_STRING){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a}withSequenceNumber(e){return new As(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,n){return new As(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new As(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TA{constructor(e){this.ie=e}}function qG(t,e){let n;if(e.document)n=pA(t.ie,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=H.fromSegments(e.noDocument.path),i=ea(e.noDocument.readTime);n=it.newNoDocument(r,i),e.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!e.unknownDocument)return ee();{const r=H.fromSegments(e.unknownDocument.path),i=ea(e.unknownDocument.version);n=it.newUnknownDocument(r,i)}}return e.readTime&&n.setReadTime(function(r){const i=new pt(r[0],r[1]);return le.fromTimestamp(i)}(e.readTime)),n}function YT(t,e){const n=e.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:mp(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=function(i,s){return{name:nh(i,s.key),fields:s.data.value.mapValue.fields,updateTime:Al(i,s.version.toTimestamp()),createTime:Al(i,s.createTime.toTimestamp())}}(t.ie,e);else if(e.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:Zo(e.version)};else{if(!e.isUnknownDocument())return ee();r.unknownDocument={path:n.path.toArray(),version:Zo(e.version)}}return r}function mp(t){const e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function Zo(t){const e=t.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function ea(t){const e=new pt(t.seconds,t.nanoseconds);return le.fromTimestamp(e)}function _o(t,e){const n=(e.baseMutations||[]).map(s=>Xv(t.ie,s));for(let s=0;s<e.mutations.length-1;++s){const o=e.mutations[s];if(s+1<e.mutations.length&&e.mutations[s+1].transform!==void 0){const a=e.mutations[s+1];o.updateTransforms=a.transform.fieldTransforms,e.mutations.splice(s+1,1),++s}}const r=e.mutations.map(s=>Xv(t.ie,s)),i=pt.fromMillis(e.localWriteTimeMs);return new R0(e.batchId,i,n,r)}function Gu(t){const e=ea(t.readTime),n=t.lastLimboFreeSnapshotVersion!==void 0?ea(t.lastLimboFreeSnapshotVersion):le.min();let r;var i;return t.query.documents!==void 0?(ie((i=t.query).documents.length===1),r=Bn(Zl(dA(i.documents[0])))):r=function(s){return Bn(gA(s))}(t.query),new As(r,t.targetId,0,t.lastListenSequenceNumber,e,n,Kt.fromBase64String(t.resumeToken))}function kA(t,e){const n=Zo(e.snapshotVersion),r=Zo(e.lastLimboFreeSnapshotVersion);let i;i=dp(e.target)?mA(t.ie,e.target):A0(t.ie,e.target);const s=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Qo(e.target),readTime:n,resumeToken:s,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function M0(t){const e=gA({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?pp(e,e.limit,"L"):e}function uy(t,e){return new P0(e.largestBatchId,Xv(t.ie,e.overlayMutation))}function KT(t,e){const n=e.path.lastSegment();return[t,$n(e.path.popLast()),n]}function QT(t,e,n,r){return{indexId:t,uid:e.uid||"",sequenceNumber:n,readTime:Zo(r.readTime),documentKey:$n(r.documentKey.path),largestBatchId:r.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GG{getBundleMetadata(e,n){return XT(e).get(n).next(r=>{if(r)return{id:(i=r).bundleId,createTime:ea(i.createTime),version:i.version};var i})}saveBundleMetadata(e,n){return XT(e).put({bundleId:(r=n).id,createTime:Zo(Ot(r.createTime)),version:r.version});var r}getNamedQuery(e,n){return JT(e).get(n).next(r=>{if(r)return{name:(i=r).name,query:M0(i.bundledQuery),readTime:ea(i.readTime)};var i})}saveNamedQuery(e,n){return JT(e).put(function(r){return{name:r.name,readTime:Zo(Ot(r.readTime)),bundledQuery:r.bundledQuery}}(n))}}function XT(t){return ln(t,"bundles")}function JT(t){return ln(t,"namedQueries")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Am{constructor(e,n){this.yt=e,this.userId=n}static re(e,n){const r=n.uid||"";return new Am(e,r)}getOverlay(e,n){return xu(e).get(KT(this.userId,n)).next(r=>r?uy(this.yt,r):null)}getOverlays(e,n){const r=Zr();return N.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){const i=[];return r.forEach((s,o)=>{const a=new P0(n,o);i.push(this.oe(e,a))}),N.waitFor(i)}removeOverlaysForBatchId(e,n,r){const i=new Set;n.forEach(o=>i.add($n(o.getCollectionPath())));const s=[];return i.forEach(o=>{const a=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,r+1],!1,!0);s.push(xu(e).Y("collectionPathOverlayIndex",a))}),N.waitFor(s)}getOverlaysForCollection(e,n,r){const i=Zr(),s=$n(n),o=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,Number.POSITIVE_INFINITY],!0);return xu(e).W("collectionPathOverlayIndex",o).next(a=>{for(const u of a){const c=uy(this.yt,u);i.set(c.getKey(),c)}return i})}getOverlaysForCollectionGroup(e,n,r,i){const s=Zr();let o;const a=IDBKeyRange.bound([this.userId,n,r],[this.userId,n,Number.POSITIVE_INFINITY],!0);return xu(e).Z({index:"collectionGroupOverlayIndex",range:a},(u,c,d)=>{const f=uy(this.yt,c);s.size()<i||f.largestBatchId===o?(s.set(f.getKey(),f),o=f.largestBatchId):d.done()}).next(()=>s)}oe(e,n){return xu(e).put(function(r,i,s){const[o,a,u]=KT(i,s.mutation.key);return{userId:i,collectionPath:a,documentId:u,collectionGroup:s.mutation.key.getCollectionGroup(),largestBatchId:s.largestBatchId,overlayMutation:ih(r.ie,s.mutation)}}(this.yt,this.userId,n))}}function xu(t){return ln(t,"documentOverlays")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wo{constructor(){}ue(e,n){this.ce(e,n),n.ae()}ce(e,n){if("nullValue"in e)this.he(n,5);else if("booleanValue"in e)this.he(n,10),n.le(e.booleanValue?1:0);else if("integerValue"in e)this.he(n,15),n.le(Et(e.integerValue));else if("doubleValue"in e){const r=Et(e.doubleValue);isNaN(r)?this.he(n,13):(this.he(n,15),Jc(r)?n.le(0):n.le(r))}else if("timestampValue"in e){const r=e.timestampValue;this.he(n,20),typeof r=="string"?n.fe(r):(n.fe(`${r.seconds||""}`),n.le(r.nanos||0))}else if("stringValue"in e)this.de(e.stringValue,n),this._e(n);else if("bytesValue"in e)this.he(n,30),n.we(Ho(e.bytesValue)),this._e(n);else if("referenceValue"in e)this.me(e.referenceValue,n);else if("geoPointValue"in e){const r=e.geoPointValue;this.he(n,45),n.le(r.latitude||0),n.le(r.longitude||0)}else"mapValue"in e?Mx(e)?this.he(n,Number.MAX_SAFE_INTEGER):(this.ge(e.mapValue,n),this._e(n)):"arrayValue"in e?(this.ye(e.arrayValue,n),this._e(n)):ee()}de(e,n){this.he(n,25),this.pe(e,n)}pe(e,n){n.fe(e)}ge(e,n){const r=e.fields||{};this.he(n,55);for(const i of Object.keys(r))this.de(i,n),this.ce(r[i],n)}ye(e,n){const r=e.values||[];this.he(n,50);for(const i of r)this.ce(i,n)}me(e,n){this.he(n,37),H.fromName(e).path.forEach(r=>{this.he(n,60),this.pe(r,n)})}he(e,n){e.le(n)}_e(e){e.le(2)}}wo.Ie=new wo;function HG(t){if(t===0)return 8;let e=0;return!(t>>4)&&(e+=4,t<<=4),!(t>>6)&&(e+=2,t<<=2),!(t>>7)&&(e+=1),e}function ZT(t){const e=64-function(n){let r=0;for(let i=0;i<8;++i){const s=HG(255&n[i]);if(r+=s,s!==8)break}return r}(t);return Math.ceil(e/8)}class YG{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Te(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Ee(r.value),r=n.next();this.Ae()}Re(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.be(r.value),r=n.next();this.Pe()}ve(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Ee(r);else if(r<2048)this.Ee(960|r>>>6),this.Ee(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Ee(480|r>>>12),this.Ee(128|63&r>>>6),this.Ee(128|63&r);else{const i=n.codePointAt(0);this.Ee(240|i>>>18),this.Ee(128|63&i>>>12),this.Ee(128|63&i>>>6),this.Ee(128|63&i)}}this.Ae()}Ve(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.be(r);else if(r<2048)this.be(960|r>>>6),this.be(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.be(480|r>>>12),this.be(128|63&r>>>6),this.be(128|63&r);else{const i=n.codePointAt(0);this.be(240|i>>>18),this.be(128|63&i>>>12),this.be(128|63&i>>>6),this.be(128|63&i)}}this.Pe()}Se(e){const n=this.De(e),r=ZT(n);this.Ce(1+r),this.buffer[this.position++]=255&r;for(let i=n.length-r;i<n.length;++i)this.buffer[this.position++]=255&n[i]}xe(e){const n=this.De(e),r=ZT(n);this.Ce(1+r),this.buffer[this.position++]=~(255&r);for(let i=n.length-r;i<n.length;++i)this.buffer[this.position++]=~(255&n[i])}Ne(){this.ke(255),this.ke(255)}Oe(){this.Me(255),this.Me(255)}reset(){this.position=0}seed(e){this.Ce(e.length),this.buffer.set(e,this.position),this.position+=e.length}Fe(){return this.buffer.slice(0,this.position)}De(e){const n=function(i){const s=new DataView(new ArrayBuffer(8));return s.setFloat64(0,i,!1),new Uint8Array(s.buffer)}(e),r=(128&n[0])!=0;n[0]^=r?255:128;for(let i=1;i<n.length;++i)n[i]^=r?255:0;return n}Ee(e){const n=255&e;n===0?(this.ke(0),this.ke(255)):n===255?(this.ke(255),this.ke(0)):this.ke(n)}be(e){const n=255&e;n===0?(this.Me(0),this.Me(255)):n===255?(this.Me(255),this.Me(0)):this.Me(e)}Ae(){this.ke(0),this.ke(1)}Pe(){this.Me(0),this.Me(1)}ke(e){this.Ce(1),this.buffer[this.position++]=e}Me(e){this.Ce(1),this.buffer[this.position++]=~e}Ce(e){const n=e+this.position;if(n<=this.buffer.length)return;let r=2*this.buffer.length;r<n&&(r=n);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class KG{constructor(e){this.$e=e}we(e){this.$e.Te(e)}fe(e){this.$e.ve(e)}le(e){this.$e.Se(e)}ae(){this.$e.Ne()}}class QG{constructor(e){this.$e=e}we(e){this.$e.Re(e)}fe(e){this.$e.Ve(e)}le(e){this.$e.xe(e)}ae(){this.$e.Oe()}}class Au{constructor(){this.$e=new YG,this.Be=new KG(this.$e),this.Le=new QG(this.$e)}seed(e){this.$e.seed(e)}qe(e){return e===0?this.Be:this.Le}Fe(){return this.$e.Fe()}reset(){this.$e.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Io{constructor(e,n,r,i){this.indexId=e,this.documentKey=n,this.arrayValue=r,this.directionalValue=i}Ue(){const e=this.directionalValue.length,n=e===0||this.directionalValue[e-1]===255?e+1:e,r=new Uint8Array(n);return r.set(this.directionalValue,0),n!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new Io(this.indexId,this.documentKey,this.arrayValue,r)}}function ss(t,e){let n=t.indexId-e.indexId;return n!==0?n:(n=e1(t.arrayValue,e.arrayValue),n!==0?n:(n=e1(t.directionalValue,e.directionalValue),n!==0?n:H.comparator(t.documentKey,e.documentKey)))}function e1(t,e){for(let n=0;n<t.length&&n<e.length;++n){const r=t[n]-e[n];if(r!==0)return r}return t.length-e.length}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XG{constructor(e){this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.Ke=e.orderBy,this.Ge=[];for(const n of e.filters){const r=n;r.isInequality()?this.Qe=r:this.Ge.push(r)}}je(e){ie(e.collectionGroup===this.collectionId);const n=Wv(e);if(n!==void 0&&!this.We(n))return!1;const r=yo(e);let i=0,s=0;for(;i<r.length&&this.We(r[i]);++i);if(i===r.length)return!0;if(this.Qe!==void 0){const o=r[i];if(!this.ze(this.Qe,o)||!this.He(this.Ke[s++],o))return!1;++i}for(;i<r.length;++i){const o=r[i];if(s>=this.Ke.length||!this.He(this.Ke[s++],o))return!1}return!0}We(e){for(const n of this.Ge)if(this.ze(n,e))return!0;return!1}ze(e,n){if(e===void 0||!e.field.isEqual(n.fieldPath))return!1;const r=e.op==="array-contains"||e.op==="array-contains-any";return n.kind===2===r}He(e,n){return!!e.field.isEqual(n.fieldPath)&&(n.kind===0&&e.dir==="asc"||n.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CA(t){var e,n;if(ie(t instanceof be||t instanceof We),t instanceof be){if(t instanceof Wx){const i=((n=(e=t.value.arrayValue)===null||e===void 0?void 0:e.values)===null||n===void 0?void 0:n.map(s=>be.create(t.field,"==",s)))||[];return We.create(i,"or")}return t}const r=t.filters.map(i=>CA(i));return We.create(r,t.op)}function JG(t){if(t.getFilters().length===0)return[];const e=t_(CA(t));return ie(NA(e)),Zv(e)||e_(e)?[e]:e.getFilters()}function Zv(t){return t instanceof be}function e_(t){return t instanceof We&&C0(t)}function NA(t){return Zv(t)||e_(t)||function(e){if(e instanceof We&&qv(e)){for(const n of e.getFilters())if(!Zv(n)&&!e_(n))return!1;return!0}return!1}(t)}function t_(t){if(ie(t instanceof be||t instanceof We),t instanceof be)return t;if(t.filters.length===1)return t_(t.filters[0]);const e=t.filters.map(r=>t_(r));let n=We.create(e,t.op);return n=gp(n),NA(n)?n:(ie(n instanceof We),ie(Dl(n)),ie(n.filters.length>1),n.filters.reduce((r,i)=>L0(r,i)))}function L0(t,e){let n;return ie(t instanceof be||t instanceof We),ie(e instanceof be||e instanceof We),n=t instanceof be?e instanceof be?function(r,i){return We.create([r,i],"and")}(t,e):t1(t,e):e instanceof be?t1(e,t):function(r,i){if(ie(r.filters.length>0&&i.filters.length>0),Dl(r)&&Dl(i))return Vx(r,i.getFilters());const s=qv(r)?r:i,o=qv(r)?i:r,a=s.filters.map(u=>L0(u,o));return We.create(a,"or")}(t,e),gp(n)}function t1(t,e){if(Dl(e))return Vx(e,t.getFilters());{const n=e.filters.map(r=>L0(t,r));return We.create(n,"or")}}function gp(t){if(ie(t instanceof be||t instanceof We),t instanceof be)return t;const e=t.getFilters();if(e.length===1)return gp(e[0]);if(Fx(t))return t;const n=e.map(i=>gp(i)),r=[];return n.forEach(i=>{i instanceof be?r.push(i):i instanceof We&&(i.op===t.op?r.push(...i.filters):r.push(i))}),r.length===1?r[0]:We.create(r,t.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZG{constructor(){this.Je=new F0}addToCollectionParentIndex(e,n){return this.Je.add(n),N.resolve()}getCollectionParents(e,n){return N.resolve(this.Je.getEntries(n))}addFieldIndex(e,n){return N.resolve()}deleteFieldIndex(e,n){return N.resolve()}getDocumentsMatchingTarget(e,n){return N.resolve(null)}getIndexType(e,n){return N.resolve(0)}getFieldIndexes(e,n){return N.resolve([])}getNextCollectionGroupToUpdate(e){return N.resolve(null)}getMinOffset(e,n){return N.resolve(gr.min())}getMinOffsetFromCollectionGroup(e,n){return N.resolve(gr.min())}updateCollectionGroup(e,n,r){return N.resolve()}updateIndexEntries(e,n){return N.resolve()}}class F0{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new Ge(Me.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Ge(Me.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Od=new Uint8Array(0);class eH{constructor(e,n){this.user=e,this.databaseId=n,this.Ye=new F0,this.Xe=new Zs(r=>Qo(r),(r,i)=>Oh(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,n){if(!this.Ye.has(n)){const r=n.lastSegment(),i=n.popLast();e.addOnCommittedListener(()=>{this.Ye.add(n)});const s={collectionId:r,parent:$n(i)};return n1(e).put(s)}return N.resolve()}getCollectionParents(e,n){const r=[],i=IDBKeyRange.bound([n,""],[Nx(n),""],!1,!0);return n1(e).W(i).next(s=>{for(const o of s){if(o.collectionId!==n)break;r.push(ei(o.parent))}return r})}addFieldIndex(e,n){const r=Pd(e),i=function(o){return{indexId:o.indexId,collectionGroup:o.collectionGroup,fields:o.fields.map(a=>[a.fieldPath.canonicalString(),a.kind])}}(n);delete i.indexId;const s=r.add(i);if(n.indexState){const o=Ou(e);return s.next(a=>{o.put(QT(a,this.user,n.indexState.sequenceNumber,n.indexState.offset))})}return s.next()}deleteFieldIndex(e,n){const r=Pd(e),i=Ou(e),s=Ru(e);return r.delete(n.indexId).next(()=>i.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0))).next(()=>s.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,n){const r=Ru(e);let i=!0;const s=new Map;return N.forEach(this.Ze(n),o=>this.tn(e,o).next(a=>{i&&(i=!!a),s.set(o,a)})).next(()=>{if(i){let o=Ee();const a=[];return N.forEach(s,(u,c)=>{var d;F("IndexedDbIndexManager",`Using index ${d=u,`id=${d.indexId}|cg=${d.collectionGroup}|f=${d.fields.map(E=>`${E.fieldPath}:${E.kind}`).join(",")}`} to execute ${Qo(n)}`);const f=function(E,b){const O=Wv(b);if(O===void 0)return null;for(const P of fp(E,O.fieldPath))switch(P.op){case"array-contains-any":return P.value.arrayValue.values||[];case"array-contains":return[P.value]}return null}(c,u),g=function(E,b){const O=new Map;for(const P of yo(b))for(const L of fp(E,P.fieldPath))switch(L.op){case"==":case"in":O.set(P.fieldPath.canonicalString(),L.value);break;case"not-in":case"!=":return O.set(P.fieldPath.canonicalString(),L.value),Array.from(O.values())}return null}(c,u),v=function(E,b){const O=[];let P=!0;for(const L of yo(b)){const z=L.kind===0?MT(E,L.fieldPath,E.startAt):LT(E,L.fieldPath,E.startAt);O.push(z.value),P&&(P=z.inclusive)}return new Ws(O,P)}(c,u),w=function(E,b){const O=[];let P=!0;for(const L of yo(b)){const z=L.kind===0?LT(E,L.fieldPath,E.endAt):MT(E,L.fieldPath,E.endAt);O.push(z.value),P&&(P=z.inclusive)}return new Ws(O,P)}(c,u),T=this.en(u,c,v),C=this.en(u,c,w),I=this.nn(u,c,g),_=this.sn(u.indexId,f,T,v.inclusive,C,w.inclusive,I);return N.forEach(_,E=>r.J(E,n.limit).next(b=>{b.forEach(O=>{const P=H.fromSegments(O.documentKey);o.has(P)||(o=o.add(P),a.push(P))})}))}).next(()=>a)}return N.resolve(null)})}Ze(e){let n=this.Xe.get(e);return n||(e.filters.length===0?n=[e]:n=JG(We.create(e.filters,"and")).map(r=>Hv(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.Xe.set(e,n),n)}sn(e,n,r,i,s,o,a){const u=(n!=null?n.length:1)*Math.max(r.length,s.length),c=u/(n!=null?n.length:1),d=[];for(let f=0;f<u;++f){const g=n?this.rn(n[f/c]):Od,v=this.on(e,g,r[f%c],i),w=this.un(e,g,s[f%c],o),T=a.map(C=>this.on(e,g,C,!0));d.push(...this.createRange(v,w,T))}return d}on(e,n,r,i){const s=new Io(e,H.empty(),n,r);return i?s:s.Ue()}un(e,n,r,i){const s=new Io(e,H.empty(),n,r);return i?s.Ue():s}tn(e,n){const r=new XG(n),i=n.collectionGroup!=null?n.collectionGroup:n.path.lastSegment();return this.getFieldIndexes(e,i).next(s=>{let o=null;for(const a of s)r.je(a)&&(!o||a.fields.length>o.fields.length)&&(o=a);return o})}getIndexType(e,n){let r=2;const i=this.Ze(n);return N.forEach(i,s=>this.tn(e,s).next(o=>{o?r!==0&&o.fields.length<function(a){let u=new Ge(Tt.comparator),c=!1;for(const d of a.filters)for(const f of d.getFlattenedFilters())f.field.isKeyField()||(f.op==="array-contains"||f.op==="array-contains-any"?c=!0:u=u.add(f.field));for(const d of a.orderBy)d.field.isKeyField()||(u=u.add(d.field));return u.size+(c?1:0)}(s)&&(r=1):r=0})).next(()=>function(s){return s.limit!==null}(n)&&i.length>1&&r===2?1:r)}cn(e,n){const r=new Au;for(const i of yo(e)){const s=n.data.field(i.fieldPath);if(s==null)return null;const o=r.qe(i.kind);wo.Ie.ue(s,o)}return r.Fe()}rn(e){const n=new Au;return wo.Ie.ue(e,n.qe(0)),n.Fe()}an(e,n){const r=new Au;return wo.Ie.ue(Ko(this.databaseId,n),r.qe(function(i){const s=yo(i);return s.length===0?0:s[s.length-1].kind}(e))),r.Fe()}nn(e,n,r){if(r===null)return[];let i=[];i.push(new Au);let s=0;for(const o of yo(e)){const a=r[s++];for(const u of i)if(this.hn(n,o.fieldPath)&&th(a))i=this.ln(i,o,a);else{const c=u.qe(o.kind);wo.Ie.ue(a,c)}}return this.fn(i)}en(e,n,r){return this.nn(e,n,r.position)}fn(e){const n=[];for(let r=0;r<e.length;++r)n[r]=e[r].Fe();return n}ln(e,n,r){const i=[...e],s=[];for(const o of r.arrayValue.values||[])for(const a of i){const u=new Au;u.seed(a.Fe()),wo.Ie.ue(o,u.qe(n.kind)),s.push(u)}return s}hn(e,n){return!!e.filters.find(r=>r instanceof be&&r.field.isEqual(n)&&(r.op==="in"||r.op==="not-in"))}getFieldIndexes(e,n){const r=Pd(e),i=Ou(e);return(n?r.W("collectionGroupIndex",IDBKeyRange.bound(n,n)):r.W()).next(s=>{const o=[];return N.forEach(s,a=>i.get([a.indexId,this.uid]).next(u=>{o.push(function(c,d){const f=d?new Xc(d.sequenceNumber,new gr(ea(d.readTime),new H(ei(d.documentKey)),d.largestBatchId)):Xc.empty(),g=c.fields.map(([v,w])=>new ef(Tt.fromServerFormat(v),w));return new hp(c.indexId,c.collectionGroup,g,f)}(a,u))})).next(()=>o)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(n=>n.length===0?null:(n.sort((r,i)=>{const s=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return s!==0?s:ye(r.collectionGroup,i.collectionGroup)}),n[0].collectionGroup))}updateCollectionGroup(e,n,r){const i=Pd(e),s=Ou(e);return this.dn(e).next(o=>i.W("collectionGroupIndex",IDBKeyRange.bound(n,n)).next(a=>N.forEach(a,u=>s.put(QT(u.indexId,this.user,o,r)))))}updateIndexEntries(e,n){const r=new Map;return N.forEach(n,(i,s)=>{const o=r.get(i.collectionGroup);return(o?N.resolve(o):this.getFieldIndexes(e,i.collectionGroup)).next(a=>(r.set(i.collectionGroup,a),N.forEach(a,u=>this._n(e,i,u).next(c=>{const d=this.wn(s,u);return c.isEqual(d)?N.resolve():this.mn(e,s,u,c,d)}))))})}gn(e,n,r,i){return Ru(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.an(r,n.key),documentKey:n.key.path.toArray()})}yn(e,n,r,i){return Ru(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.an(r,n.key),n.key.path.toArray()])}_n(e,n,r){const i=Ru(e);let s=new Ge(ss);return i.Z({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.an(r,n)])},(o,a)=>{s=s.add(new Io(r.indexId,n,a.arrayValue,a.directionalValue))}).next(()=>s)}wn(e,n){let r=new Ge(ss);const i=this.cn(n,e);if(i==null)return r;const s=Wv(n);if(s!=null){const o=e.data.field(s.fieldPath);if(th(o))for(const a of o.arrayValue.values||[])r=r.add(new Io(n.indexId,e.key,this.rn(a),i))}else r=r.add(new Io(n.indexId,e.key,Od,i));return r}mn(e,n,r,i,s){F("IndexedDbIndexManager","Updating index entries for document '%s'",n.key);const o=[];return function(a,u,c,d,f){const g=a.getIterator(),v=u.getIterator();let w=ba(g),T=ba(v);for(;w||T;){let C=!1,I=!1;if(w&&T){const _=c(w,T);_<0?I=!0:_>0&&(C=!0)}else w!=null?I=!0:C=!0;C?(d(T),T=ba(v)):I?(f(w),w=ba(g)):(w=ba(g),T=ba(v))}}(i,s,ss,a=>{o.push(this.gn(e,n,r,a))},a=>{o.push(this.yn(e,n,r,a))}),N.waitFor(o)}dn(e){let n=1;return Ou(e).Z({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,s)=>{s.done(),n=i.sequenceNumber+1}).next(()=>n)}createRange(e,n,r){r=r.sort((o,a)=>ss(o,a)).filter((o,a,u)=>!a||ss(o,u[a-1])!==0);const i=[];i.push(e);for(const o of r){const a=ss(o,e),u=ss(o,n);if(a===0)i[0]=e.Ue();else if(a>0&&u<0)i.push(o),i.push(o.Ue());else if(u>0)break}i.push(n);const s=[];for(let o=0;o<i.length;o+=2){if(this.pn(i[o],i[o+1]))return[];const a=[i[o].indexId,this.uid,i[o].arrayValue,i[o].directionalValue,Od,[]],u=[i[o+1].indexId,this.uid,i[o+1].arrayValue,i[o+1].directionalValue,Od,[]];s.push(IDBKeyRange.bound(a,u))}return s}pn(e,n){return ss(e,n)>0}getMinOffsetFromCollectionGroup(e,n){return this.getFieldIndexes(e,n).next(r1)}getMinOffset(e,n){return N.mapArray(this.Ze(n),r=>this.tn(e,r).next(i=>i||ee())).next(r1)}}function n1(t){return ln(t,"collectionParents")}function Ru(t){return ln(t,"indexEntries")}function Pd(t){return ln(t,"indexConfiguration")}function Ou(t){return ln(t,"indexState")}function r1(t){ie(t.length!==0);let e=t[0].indexState.offset,n=e.largestBatchId;for(let r=1;r<t.length;r++){const i=t[r].indexState.offset;S0(i,e)<0&&(e=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new gr(e.readTime,e.documentKey,n)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i1={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Kn{constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new Kn(e,Kn.DEFAULT_COLLECTION_PERCENTILE,Kn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DA(t,e,n){const r=t.store("mutations"),i=t.store("documentMutations"),s=[],o=IDBKeyRange.only(n.batchId);let a=0;const u=r.Z({range:o},(d,f,g)=>(a++,g.delete()));s.push(u.next(()=>{ie(a===1)}));const c=[];for(const d of n.mutations){const f=wA(e,d.key.path,n.batchId);s.push(i.delete(f)),c.push(d.key)}return N.waitFor(s).next(()=>c)}function yp(t){if(!t)return 0;let e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw ee();e=t.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Kn.DEFAULT_COLLECTION_PERCENTILE=10,Kn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Kn.DEFAULT=new Kn(41943040,Kn.DEFAULT_COLLECTION_PERCENTILE,Kn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Kn.DISABLED=new Kn(-1,0,0);class Rm{constructor(e,n,r,i){this.userId=e,this.yt=n,this.indexManager=r,this.referenceDelegate=i,this.In={}}static re(e,n,r,i){ie(e.uid!=="");const s=e.isAuthenticated()?e.uid:"";return new Rm(s,n,r,i)}checkEmpty(e){let n=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return os(e).Z({index:"userMutationsIndex",range:r},(i,s,o)=>{n=!1,o.done()}).next(()=>n)}addMutationBatch(e,n,r,i){const s=Oa(e),o=os(e);return o.add({}).next(a=>{ie(typeof a=="number");const u=new R0(a,n,r,i),c=function(g,v,w){const T=w.baseMutations.map(I=>ih(g.ie,I)),C=w.mutations.map(I=>ih(g.ie,I));return{userId:v,batchId:w.batchId,localWriteTimeMs:w.localWriteTime.toMillis(),baseMutations:T,mutations:C}}(this.yt,this.userId,u),d=[];let f=new Ge((g,v)=>ye(g.canonicalString(),v.canonicalString()));for(const g of i){const v=wA(this.userId,g.key.path,a);f=f.add(g.key.path.popLast()),d.push(o.put(c)),d.push(s.put(v,DG))}return f.forEach(g=>{d.push(this.indexManager.addToCollectionParentIndex(e,g))}),e.addOnCommittedListener(()=>{this.In[a]=u.keys()}),N.waitFor(d).next(()=>u)})}lookupMutationBatch(e,n){return os(e).get(n).next(r=>r?(ie(r.userId===this.userId),_o(this.yt,r)):null)}Tn(e,n){return this.In[n]?N.resolve(this.In[n]):this.lookupMutationBatch(e,n).next(r=>{if(r){const i=r.keys();return this.In[n]=i,i}return null})}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=IDBKeyRange.lowerBound([this.userId,r]);let s=null;return os(e).Z({index:"userMutationsIndex",range:i},(o,a,u)=>{a.userId===this.userId&&(ie(a.batchId>=r),s=_o(this.yt,a)),u.done()}).next(()=>s)}getHighestUnacknowledgedBatchId(e){const n=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return os(e).Z({index:"userMutationsIndex",range:n,reverse:!0},(i,s,o)=>{r=s.batchId,o.done()}).next(()=>r)}getAllMutationBatches(e){const n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return os(e).W("userMutationsIndex",n).next(r=>r.map(i=>_o(this.yt,i)))}getAllMutationBatchesAffectingDocumentKey(e,n){const r=of(this.userId,n.path),i=IDBKeyRange.lowerBound(r),s=[];return Oa(e).Z({range:i},(o,a,u)=>{const[c,d,f]=o,g=ei(d);if(c===this.userId&&n.path.isEqual(g))return os(e).get(f).next(v=>{if(!v)throw ee();ie(v.userId===this.userId),s.push(_o(this.yt,v))});u.done()}).next(()=>s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Ge(ye);const i=[];return n.forEach(s=>{const o=of(this.userId,s.path),a=IDBKeyRange.lowerBound(o),u=Oa(e).Z({range:a},(c,d,f)=>{const[g,v,w]=c,T=ei(v);g===this.userId&&s.path.isEqual(T)?r=r.add(w):f.done()});i.push(u)}),N.waitFor(i).next(()=>this.En(e,r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1,s=of(this.userId,r),o=IDBKeyRange.lowerBound(s);let a=new Ge(ye);return Oa(e).Z({range:o},(u,c,d)=>{const[f,g,v]=u,w=ei(g);f===this.userId&&r.isPrefixOf(w)?w.length===i&&(a=a.add(v)):d.done()}).next(()=>this.En(e,a))}En(e,n){const r=[],i=[];return n.forEach(s=>{i.push(os(e).get(s).next(o=>{if(o===null)throw ee();ie(o.userId===this.userId),r.push(_o(this.yt,o))}))}),N.waitFor(i).next(()=>r)}removeMutationBatch(e,n){return DA(e.se,this.userId,n).next(r=>(e.addOnCommittedListener(()=>{this.An(n.batchId)}),N.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}An(e){delete this.In[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(n=>{if(!n)return N.resolve();const r=IDBKeyRange.lowerBound([this.userId]),i=[];return Oa(e).Z({range:r},(s,o,a)=>{if(s[0]===this.userId){const u=ei(s[1]);i.push(u)}else a.done()}).next(()=>{ie(i.length===0)})})}containsKey(e,n){return bA(e,this.userId,n)}Rn(e){return xA(e).get(this.userId).next(n=>n||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function bA(t,e,n){const r=of(e,n.path),i=r[1],s=IDBKeyRange.lowerBound(r);let o=!1;return Oa(t).Z({range:s,X:!0},(a,u,c)=>{const[d,f,g]=a;d===e&&f===i&&(o=!0),c.done()}).next(()=>o)}function os(t){return ln(t,"mutations")}function Oa(t){return ln(t,"documentMutations")}function xA(t){return ln(t,"mutationQueues")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ta{constructor(e){this.bn=e}next(){return this.bn+=2,this.bn}static Pn(){return new ta(0)}static vn(){return new ta(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tH{constructor(e,n){this.referenceDelegate=e,this.yt=n}allocateTargetId(e){return this.Vn(e).next(n=>{const r=new ta(n.highestTargetId);return n.highestTargetId=r.next(),this.Sn(e,n).next(()=>n.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Vn(e).next(n=>le.fromTimestamp(new pt(n.lastRemoteSnapshotVersion.seconds,n.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Vn(e).next(n=>n.highestListenSequenceNumber)}setTargetsMetadata(e,n,r){return this.Vn(e).next(i=>(i.highestListenSequenceNumber=n,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),n>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=n),this.Sn(e,i)))}addTargetData(e,n){return this.Dn(e,n).next(()=>this.Vn(e).next(r=>(r.targetCount+=1,this.Cn(n,r),this.Sn(e,r))))}updateTargetData(e,n){return this.Dn(e,n)}removeTargetData(e,n){return this.removeMatchingKeysForTargetId(e,n.targetId).next(()=>xa(e).delete(n.targetId)).next(()=>this.Vn(e)).next(r=>(ie(r.targetCount>0),r.targetCount-=1,this.Sn(e,r)))}removeTargets(e,n,r){let i=0;const s=[];return xa(e).Z((o,a)=>{const u=Gu(a);u.sequenceNumber<=n&&r.get(u.targetId)===null&&(i++,s.push(this.removeTargetData(e,u)))}).next(()=>N.waitFor(s)).next(()=>i)}forEachTarget(e,n){return xa(e).Z((r,i)=>{const s=Gu(i);n(s)})}Vn(e){return s1(e).get("targetGlobalKey").next(n=>(ie(n!==null),n))}Sn(e,n){return s1(e).put("targetGlobalKey",n)}Dn(e,n){return xa(e).put(kA(this.yt,n))}Cn(e,n){let r=!1;return e.targetId>n.highestTargetId&&(n.highestTargetId=e.targetId,r=!0),e.sequenceNumber>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.Vn(e).next(n=>n.targetCount)}getTargetData(e,n){const r=Qo(n),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let s=null;return xa(e).Z({range:i,index:"queryTargetsIndex"},(o,a,u)=>{const c=Gu(a);Oh(n,c.target)&&(s=c,u.done())}).next(()=>s)}addMatchingKeys(e,n,r){const i=[],s=hs(e);return n.forEach(o=>{const a=$n(o.path);i.push(s.put({targetId:r,path:a})),i.push(this.referenceDelegate.addReference(e,r,o))}),N.waitFor(i)}removeMatchingKeys(e,n,r){const i=hs(e);return N.forEach(n,s=>{const o=$n(s.path);return N.waitFor([i.delete([r,o]),this.referenceDelegate.removeReference(e,r,s)])})}removeMatchingKeysForTargetId(e,n){const r=hs(e),i=IDBKeyRange.bound([n],[n+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,n){const r=IDBKeyRange.bound([n],[n+1],!1,!0),i=hs(e);let s=Ee();return i.Z({range:r,X:!0},(o,a,u)=>{const c=ei(o[1]),d=new H(c);s=s.add(d)}).next(()=>s)}containsKey(e,n){const r=$n(n.path),i=IDBKeyRange.bound([r],[Nx(r)],!1,!0);let s=0;return hs(e).Z({index:"documentTargetsIndex",X:!0,range:i},([o,a],u,c)=>{o!==0&&(s++,c.done())}).next(()=>s>0)}ne(e,n){return xa(e).get(n).next(r=>r?Gu(r):null)}}function xa(t){return ln(t,"targets")}function s1(t){return ln(t,"targetGlobal")}function hs(t){return ln(t,"targetDocuments")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o1([t,e],[n,r]){const i=ye(t,n);return i===0?ye(e,r):i}class nH{constructor(e){this.xn=e,this.buffer=new Ge(o1),this.Nn=0}kn(){return++this.Nn}On(e){const n=[e,this.kn()];if(this.buffer.size<this.xn)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();o1(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class rH{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Mn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Fn(6e4)}stop(){this.Mn&&(this.Mn.cancel(),this.Mn=null)}get started(){return this.Mn!==null}Fn(e){F("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Mn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Mn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Js(n)?F("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",n):await Xs(n)}await this.Fn(3e5)})}}class iH{constructor(e,n){this.$n=e,this.params=n}calculateTargetCount(e,n){return this.$n.Bn(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return N.resolve(Zn.at);const r=new nH(n);return this.$n.forEachTarget(e,i=>r.On(i.sequenceNumber)).next(()=>this.$n.Ln(e,i=>r.On(i))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.$n.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.$n.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(F("LruGarbageCollector","Garbage collection skipped; disabled"),N.resolve(i1)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(F("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),i1):this.qn(e,n))}getCacheSize(e){return this.$n.getCacheSize(e)}qn(e,n){let r,i,s,o,a,u,c;const d=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(f=>(f>this.params.maximumSequenceNumbersToCollect?(F("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${f}`),i=this.params.maximumSequenceNumbersToCollect):i=f,o=Date.now(),this.nthSequenceNumber(e,i))).next(f=>(r=f,a=Date.now(),this.removeTargets(e,r,n))).next(f=>(s=f,u=Date.now(),this.removeOrphanedDocuments(e,r))).next(f=>(c=Date.now(),Bv()<=Fe.DEBUG&&F("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-d}ms
	Determined least recently used ${i} in `+(a-o)+`ms
	Removed ${s} targets in `+(u-a)+`ms
	Removed ${f} documents in `+(c-u)+`ms
Total Duration: ${c-d}ms`),N.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:f})))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sH{constructor(e,n){this.db=e,this.garbageCollector=function(r,i){return new iH(r,i)}(this,n)}Bn(e){const n=this.Un(e);return this.db.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}Un(e){let n=0;return this.Ln(e,r=>{n++}).next(()=>n)}forEachTarget(e,n){return this.db.getTargetCache().forEachTarget(e,n)}Ln(e,n){return this.Kn(e,(r,i)=>n(i))}addReference(e,n,r){return Md(e,r)}removeReference(e,n,r){return Md(e,r)}removeTargets(e,n,r){return this.db.getTargetCache().removeTargets(e,n,r)}markPotentiallyOrphaned(e,n){return Md(e,n)}Gn(e,n){return function(r,i){let s=!1;return xA(r).tt(o=>bA(r,o,i).next(a=>(a&&(s=!0),N.resolve(!a)))).next(()=>s)}(e,n)}removeOrphanedDocuments(e,n){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let s=0;return this.Kn(e,(o,a)=>{if(a<=n){const u=this.Gn(e,o).next(c=>{if(!c)return s++,r.getEntry(e,o).next(()=>(r.removeEntry(o,le.min()),hs(e).delete([0,$n(o.path)])))});i.push(u)}}).next(()=>N.waitFor(i)).next(()=>r.apply(e)).next(()=>s)}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,n){return Md(e,n)}Kn(e,n){const r=hs(e);let i,s=Zn.at;return r.Z({index:"documentTargetsIndex"},([o,a],{path:u,sequenceNumber:c})=>{o===0?(s!==Zn.at&&n(new H(ei(i)),s),s=c,i=u):s=Zn.at}).next(()=>{s!==Zn.at&&n(new H(ei(i)),s)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Md(t,e){return hs(t).put(function(n,r){return{targetId:0,path:$n(n.path),sequenceNumber:r}}(e,t.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AA{constructor(){this.changes=new Zs(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,it.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?N.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oH{constructor(e){this.yt=e}setIndexManager(e){this.indexManager=e}addEntry(e,n,r){return ho(e).put(r)}removeEntry(e,n,r){return ho(e).delete(function(i,s){const o=i.path.toArray();return[o.slice(0,o.length-2),o[o.length-2],mp(s),o[o.length-1]]}(n,r))}updateMetadata(e,n){return this.getMetadata(e).next(r=>(r.byteSize+=n,this.Qn(e,r)))}getEntry(e,n){let r=it.newInvalidDocument(n);return ho(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(Pu(n))},(i,s)=>{r=this.jn(n,s)}).next(()=>r)}Wn(e,n){let r={size:0,document:it.newInvalidDocument(n)};return ho(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(Pu(n))},(i,s)=>{r={document:this.jn(n,s),size:yp(s)}}).next(()=>r)}getEntries(e,n){let r=tr();return this.zn(e,n,(i,s)=>{const o=this.jn(i,s);r=r.insert(i,o)}).next(()=>r)}Hn(e,n){let r=tr(),i=new Dt(H.comparator);return this.zn(e,n,(s,o)=>{const a=this.jn(s,o);r=r.insert(s,a),i=i.insert(s,yp(o))}).next(()=>({documents:r,Jn:i}))}zn(e,n,r){if(n.isEmpty())return N.resolve();let i=new Ge(u1);n.forEach(u=>i=i.add(u));const s=IDBKeyRange.bound(Pu(i.first()),Pu(i.last())),o=i.getIterator();let a=o.getNext();return ho(e).Z({index:"documentKeyIndex",range:s},(u,c,d)=>{const f=H.fromSegments([...c.prefixPath,c.collectionGroup,c.documentId]);for(;a&&u1(a,f)<0;)r(a,null),a=o.getNext();a&&a.isEqual(f)&&(r(a,c),a=o.hasNext()?o.getNext():null),a?d.j(Pu(a)):d.done()}).next(()=>{for(;a;)r(a,null),a=o.hasNext()?o.getNext():null})}getDocumentsMatchingQuery(e,n,r,i){const s=n.path,o=[s.popLast().toArray(),s.lastSegment(),mp(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],a=[s.popLast().toArray(),s.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return ho(e).W(IDBKeyRange.bound(o,a,!0)).next(u=>{let c=tr();for(const d of u){const f=this.jn(H.fromSegments(d.prefixPath.concat(d.collectionGroup,d.documentId)),d);f.isFoundDocument()&&(Mh(n,f)||i.has(f.key))&&(c=c.insert(f.key,f))}return c})}getAllFromCollectionGroup(e,n,r,i){let s=tr();const o=l1(n,r),a=l1(n,gr.max());return ho(e).Z({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,a,!0)},(u,c,d)=>{const f=this.jn(H.fromSegments(c.prefixPath.concat(c.collectionGroup,c.documentId)),c);s=s.insert(f.key,f),s.size===i&&d.done()}).next(()=>s)}newChangeBuffer(e){return new aH(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(n=>n.byteSize)}getMetadata(e){return a1(e).get("remoteDocumentGlobalKey").next(n=>(ie(!!n),n))}Qn(e,n){return a1(e).put("remoteDocumentGlobalKey",n)}jn(e,n){if(n){const r=qG(this.yt,n);if(!(r.isNoDocument()&&r.version.isEqual(le.min())))return r}return it.newInvalidDocument(e)}}function RA(t){return new oH(t)}class aH extends AA{constructor(e,n){super(),this.Yn=e,this.trackRemovals=n,this.Xn=new Zs(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const n=[];let r=0,i=new Ge((s,o)=>ye(s.canonicalString(),o.canonicalString()));return this.changes.forEach((s,o)=>{const a=this.Xn.get(s);if(n.push(this.Yn.removeEntry(e,s,a.readTime)),o.isValidDocument()){const u=YT(this.Yn.yt,o);i=i.add(s.path.popLast());const c=yp(u);r+=c-a.size,n.push(this.Yn.addEntry(e,s,u))}else if(r-=a.size,this.trackRemovals){const u=YT(this.Yn.yt,o.convertToNoDocument(le.min()));n.push(this.Yn.addEntry(e,s,u))}}),i.forEach(s=>{n.push(this.Yn.indexManager.addToCollectionParentIndex(e,s))}),n.push(this.Yn.updateMetadata(e,r)),N.waitFor(n)}getFromCache(e,n){return this.Yn.Wn(e,n).next(r=>(this.Xn.set(n,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,n){return this.Yn.Hn(e,n).next(({documents:r,Jn:i})=>(i.forEach((s,o)=>{this.Xn.set(s,{size:o,readTime:r.get(s).readTime})}),r))}}function a1(t){return ln(t,"remoteDocumentGlobal")}function ho(t){return ln(t,"remoteDocumentsV14")}function Pu(t){const e=t.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function l1(t,e){const n=e.documentKey.path.toArray();return[t,mp(e.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function u1(t,e){const n=t.path.toArray(),r=e.path.toArray();let i=0;for(let s=0;s<n.length-2&&s<r.length-2;++s)if(i=ye(n[s],r[s]),i)return i;return i=ye(n.length,r.length),i||(i=ye(n[n.length-2],r[r.length-2]),i||ye(n[n.length-1],r[r.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lH{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OA{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&hc(r.mutation,i,er.empty(),pt.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,Ee()).next(()=>r))}getLocalViewOfDocuments(e,n,r=Ee()){const i=Zr();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=qu();return s.forEach((a,u)=>{o=o.insert(a,u.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=Zr();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,Ee()))}populateOverlays(e,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,i){let s=tr();const o=dc(),a=dc();return n.forEach((u,c)=>{const d=r.get(c.key);i.has(c.key)&&(d===void 0||d.mutation instanceof Gi)?s=s.insert(c.key,c):d!==void 0?(o.set(c.key,d.mutation.getFieldMask()),hc(d.mutation,c,d.mutation.getFieldMask(),pt.now())):o.set(c.key,er.empty())}),this.recalculateAndSaveOverlays(e,s).next(u=>(u.forEach((c,d)=>o.set(c,d)),n.forEach((c,d)=>{var f;return a.set(c,new lH(d,(f=o.get(c))!==null&&f!==void 0?f:null))}),a))}recalculateAndSaveOverlays(e,n){const r=dc();let i=new Dt((o,a)=>o-a),s=Ee();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(u=>{const c=n.get(u);if(c===null)return;let d=r.get(u)||er.empty();d=a.applyToLocalView(c,d),r.set(u,d);const f=(i.get(a.batchId)||Ee()).add(u);i=i.insert(a.batchId,f)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const u=a.getNext(),c=u.key,d=u.value,f=aA();d.forEach(g=>{if(!s.has(g)){const v=tA(n.get(g),r.get(g));v!==null&&f.set(g,v),s=s.add(g)}}),o.push(this.documentOverlayCache.saveOverlays(e,c,f))}return N.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r){return function(i){return H.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):D0(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r):this.getDocumentsMatchingCollectionQuery(e,n,r)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):N.resolve(Zr());let a=-1,u=s;return o.next(c=>N.forEach(c,(d,f)=>(a<f.largestBatchId&&(a=f.largestBatchId),s.get(d)?N.resolve():this.remoteDocumentCache.getEntry(e,d).next(g=>{u=u.insert(d,g)}))).next(()=>this.populateOverlays(e,c,s)).next(()=>this.computeViews(e,u,c,Ee())).next(d=>({batchId:a,changes:oA(d)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new H(n)).next(r=>{let i=qu();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r){const i=n.collectionGroup;let s=qu();return this.indexManager.getCollectionParents(e,i).next(o=>N.forEach(o,a=>{const u=function(c,d){return new qi(d,null,c.explicitOrderBy.slice(),c.filters.slice(),c.limit,c.limitType,c.startAt,c.endAt)}(n,a.child(i));return this.getDocumentsMatchingCollectionQuery(e,u,r).next(c=>{c.forEach((d,f)=>{s=s.insert(d,f)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,n,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(s=>(i=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i))).next(s=>{i.forEach((a,u)=>{const c=u.getKey();s.get(c)===null&&(s=s.insert(c,it.newInvalidDocument(c)))});let o=qu();return s.forEach((a,u)=>{const c=i.get(a);c!==void 0&&hc(c.mutation,u,er.empty(),pt.now()),Mh(n,u)&&(o=o.insert(a,u))}),o})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uH{constructor(e){this.yt=e,this.Zn=new Map,this.ts=new Map}getBundleMetadata(e,n){return N.resolve(this.Zn.get(n))}saveBundleMetadata(e,n){var r;return this.Zn.set(n.id,{id:(r=n).id,version:r.version,createTime:Ot(r.createTime)}),N.resolve()}getNamedQuery(e,n){return N.resolve(this.ts.get(n))}saveNamedQuery(e,n){return this.ts.set(n.name,function(r){return{name:r.name,query:M0(r.bundledQuery),readTime:Ot(r.readTime)}}(n)),N.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cH{constructor(){this.overlays=new Dt(H.comparator),this.es=new Map}getOverlay(e,n){return N.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Zr();return N.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.oe(e,n,s)}),N.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.es.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.es.delete(r)),N.resolve()}getOverlaysForCollection(e,n,r){const i=Zr(),s=n.length+1,o=new H(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const u=a.getNext().value,c=u.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===s&&u.largestBatchId>r&&i.set(u.getKey(),u)}return N.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new Dt((c,d)=>c-d);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>r){let d=s.get(c.largestBatchId);d===null&&(d=Zr(),s=s.insert(c.largestBatchId,d)),d.set(c.getKey(),c)}}const a=Zr(),u=s.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((c,d)=>a.set(c,d)),!(a.size()>=i)););return N.resolve(a)}oe(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.es.get(i.largestBatchId).delete(r.key);this.es.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new P0(n,r));let s=this.es.get(n);s===void 0&&(s=Ee(),this.es.set(n,s)),this.es.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U0{constructor(){this.ns=new Ge(Zt.ss),this.rs=new Ge(Zt.os)}isEmpty(){return this.ns.isEmpty()}addReference(e,n){const r=new Zt(e,n);this.ns=this.ns.add(r),this.rs=this.rs.add(r)}us(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.cs(new Zt(e,n))}hs(e,n){e.forEach(r=>this.removeReference(r,n))}ls(e){const n=new H(new Me([])),r=new Zt(n,e),i=new Zt(n,e+1),s=[];return this.rs.forEachInRange([r,i],o=>{this.cs(o),s.push(o.key)}),s}fs(){this.ns.forEach(e=>this.cs(e))}cs(e){this.ns=this.ns.delete(e),this.rs=this.rs.delete(e)}ds(e){const n=new H(new Me([])),r=new Zt(n,e),i=new Zt(n,e+1);let s=Ee();return this.rs.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const n=new Zt(e,0),r=this.ns.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Zt{constructor(e,n){this.key=e,this._s=n}static ss(e,n){return H.comparator(e.key,n.key)||ye(e._s,n._s)}static os(e,n){return ye(e._s,n._s)||H.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hH{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.ws=1,this.gs=new Ge(Zt.ss)}checkEmpty(e){return N.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const s=this.ws;this.ws++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new R0(s,n,r,i);this.mutationQueue.push(o);for(const a of i)this.gs=this.gs.add(new Zt(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return N.resolve(o)}lookupMutationBatch(e,n){return N.resolve(this.ys(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.ps(r),s=i<0?0:i;return N.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return N.resolve(this.mutationQueue.length===0?-1:this.ws-1)}getAllMutationBatches(e){return N.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Zt(n,0),i=new Zt(n,Number.POSITIVE_INFINITY),s=[];return this.gs.forEachInRange([r,i],o=>{const a=this.ys(o._s);s.push(a)}),N.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Ge(ye);return n.forEach(i=>{const s=new Zt(i,0),o=new Zt(i,Number.POSITIVE_INFINITY);this.gs.forEachInRange([s,o],a=>{r=r.add(a._s)})}),N.resolve(this.Is(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let s=r;H.isDocumentKey(s)||(s=s.child(""));const o=new Zt(new H(s),0);let a=new Ge(ye);return this.gs.forEachWhile(u=>{const c=u.key.path;return!!r.isPrefixOf(c)&&(c.length===i&&(a=a.add(u._s)),!0)},o),N.resolve(this.Is(a))}Is(e){const n=[];return e.forEach(r=>{const i=this.ys(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){ie(this.Ts(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.gs;return N.forEach(n.mutations,i=>{const s=new Zt(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.gs=r})}An(e){}containsKey(e,n){const r=new Zt(n,0),i=this.gs.firstAfterOrEqual(r);return N.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,N.resolve()}Ts(e,n){return this.ps(e)}ps(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}ys(e){const n=this.ps(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dH{constructor(e){this.Es=e,this.docs=new Dt(H.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.Es(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return N.resolve(r?r.document.mutableCopy():it.newInvalidDocument(n))}getEntries(e,n){let r=tr();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():it.newInvalidDocument(i))}),N.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=tr();const o=n.path,a=new H(o.child("")),u=this.docs.getIteratorFrom(a);for(;u.hasNext();){const{key:c,value:{document:d}}=u.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||S0(bx(d),r)<=0||(i.has(d.key)||Mh(n,d))&&(s=s.insert(d.key,d.mutableCopy()))}return N.resolve(s)}getAllFromCollectionGroup(e,n,r,i){ee()}As(e,n){return N.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new fH(this)}getSize(e){return N.resolve(this.size)}}class fH extends AA{constructor(e){super(),this.Yn=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.Yn.addEntry(e,i)):this.Yn.removeEntry(r)}),N.waitFor(n)}getFromCache(e,n){return this.Yn.getEntry(e,n)}getAllFromCache(e,n){return this.Yn.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pH{constructor(e){this.persistence=e,this.Rs=new Zs(n=>Qo(n),Oh),this.lastRemoteSnapshotVersion=le.min(),this.highestTargetId=0,this.bs=0,this.Ps=new U0,this.targetCount=0,this.vs=ta.Pn()}forEachTarget(e,n){return this.Rs.forEach((r,i)=>n(i)),N.resolve()}getLastRemoteSnapshotVersion(e){return N.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return N.resolve(this.bs)}allocateTargetId(e){return this.highestTargetId=this.vs.next(),N.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.bs&&(this.bs=n),N.resolve()}Dn(e){this.Rs.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.vs=new ta(n),this.highestTargetId=n),e.sequenceNumber>this.bs&&(this.bs=e.sequenceNumber)}addTargetData(e,n){return this.Dn(n),this.targetCount+=1,N.resolve()}updateTargetData(e,n){return this.Dn(n),N.resolve()}removeTargetData(e,n){return this.Rs.delete(n.target),this.Ps.ls(n.targetId),this.targetCount-=1,N.resolve()}removeTargets(e,n,r){let i=0;const s=[];return this.Rs.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Rs.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),N.waitFor(s).next(()=>i)}getTargetCount(e){return N.resolve(this.targetCount)}getTargetData(e,n){const r=this.Rs.get(n)||null;return N.resolve(r)}addMatchingKeys(e,n,r){return this.Ps.us(n,r),N.resolve()}removeMatchingKeys(e,n,r){this.Ps.hs(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),N.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.Ps.ls(n),N.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Ps.ds(n);return N.resolve(r)}containsKey(e,n){return N.resolve(this.Ps.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PA{constructor(e,n){this.Vs={},this.overlays={},this.Ss=new Zn(0),this.Ds=!1,this.Ds=!0,this.referenceDelegate=e(this),this.Cs=new pH(this),this.indexManager=new ZG,this.remoteDocumentCache=function(r){return new dH(r)}(r=>this.referenceDelegate.xs(r)),this.yt=new TA(n),this.Ns=new uH(this.yt)}start(){return Promise.resolve()}shutdown(){return this.Ds=!1,Promise.resolve()}get started(){return this.Ds}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new cH,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.Vs[e.toKey()];return r||(r=new hH(n,this.referenceDelegate),this.Vs[e.toKey()]=r),r}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ns}runTransaction(e,n,r){F("MemoryPersistence","Starting transaction:",e);const i=new mH(this.Ss.next());return this.referenceDelegate.ks(),r(i).next(s=>this.referenceDelegate.Os(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Ms(e,n){return N.or(Object.values(this.Vs).map(r=>()=>r.containsKey(e,n)))}}class mH extends Ax{constructor(e){super(),this.currentSequenceNumber=e}}class Om{constructor(e){this.persistence=e,this.Fs=new U0,this.$s=null}static Bs(e){return new Om(e)}get Ls(){if(this.$s)return this.$s;throw ee()}addReference(e,n,r){return this.Fs.addReference(r,n),this.Ls.delete(r.toString()),N.resolve()}removeReference(e,n,r){return this.Fs.removeReference(r,n),this.Ls.add(r.toString()),N.resolve()}markPotentiallyOrphaned(e,n){return this.Ls.add(n.toString()),N.resolve()}removeTarget(e,n){this.Fs.ls(n.targetId).forEach(i=>this.Ls.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.Ls.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}ks(){this.$s=new Set}Os(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return N.forEach(this.Ls,r=>{const i=H.fromPath(r);return this.qs(e,i).next(s=>{s||n.removeEntry(i,le.min())})}).next(()=>(this.$s=null,n.apply(e)))}updateLimboDocument(e,n){return this.qs(e,n).next(r=>{r?this.Ls.delete(n.toString()):this.Ls.add(n.toString())})}xs(e){return 0}qs(e,n){return N.or([()=>N.resolve(this.Fs.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ms(e,n)])}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gH{constructor(e){this.yt=e}$(e,n,r,i){const s=new Cm("createOrUpgrade",n);r<1&&i>=1&&(function(a){a.createObjectStore("owner")}(e),function(a){a.createObjectStore("mutationQueues",{keyPath:"userId"}),a.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",HT,{unique:!0}),a.createObjectStore("documentMutations")}(e),c1(e),function(a){a.createObjectStore("remoteDocuments")}(e));let o=N.resolve();return r<3&&i>=3&&(r!==0&&(function(a){a.deleteObjectStore("targetDocuments"),a.deleteObjectStore("targets"),a.deleteObjectStore("targetGlobal")}(e),c1(e)),o=o.next(()=>function(a){const u=a.store("targetGlobal"),c={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:le.min().toTimestamp(),targetCount:0};return u.put("targetGlobalKey",c)}(s))),r<4&&i>=4&&(r!==0&&(o=o.next(()=>function(a,u){return u.store("mutations").W().next(c=>{a.deleteObjectStore("mutations"),a.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",HT,{unique:!0});const d=u.store("mutations"),f=c.map(g=>d.put(g));return N.waitFor(f)})}(e,s))),o=o.next(()=>{(function(a){a.createObjectStore("clientMetadata",{keyPath:"clientId"})})(e)})),r<5&&i>=5&&(o=o.next(()=>this.Us(s))),r<6&&i>=6&&(o=o.next(()=>(function(a){a.createObjectStore("remoteDocumentGlobal")}(e),this.Ks(s)))),r<7&&i>=7&&(o=o.next(()=>this.Gs(s))),r<8&&i>=8&&(o=o.next(()=>this.Qs(e,s))),r<9&&i>=9&&(o=o.next(()=>{(function(a){a.objectStoreNames.contains("remoteDocumentChanges")&&a.deleteObjectStore("remoteDocumentChanges")})(e)})),r<10&&i>=10&&(o=o.next(()=>this.js(s))),r<11&&i>=11&&(o=o.next(()=>{(function(a){a.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(a){a.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(o=o.next(()=>{(function(a){const u=a.createObjectStore("documentOverlays",{keyPath:$G});u.createIndex("collectionPathOverlayIndex",BG,{unique:!1}),u.createIndex("collectionGroupOverlayIndex",WG,{unique:!1})})(e)})),r<13&&i>=13&&(o=o.next(()=>function(a){const u=a.createObjectStore("remoteDocumentsV14",{keyPath:bG});u.createIndex("documentKeyIndex",xG),u.createIndex("collectionGroupIndex",AG)}(e)).next(()=>this.Ws(e,s)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(o=o.next(()=>this.zs(e,s))),r<15&&i>=15&&(o=o.next(()=>function(a){a.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),a.createObjectStore("indexState",{keyPath:LG}).createIndex("sequenceNumberIndex",FG,{unique:!1}),a.createObjectStore("indexEntries",{keyPath:UG}).createIndex("documentKeyIndex",VG,{unique:!1})}(e))),o}Ks(e){let n=0;return e.store("remoteDocuments").Z((r,i)=>{n+=yp(i)}).next(()=>{const r={byteSize:n};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Us(e){const n=e.store("mutationQueues"),r=e.store("mutations");return n.W().next(i=>N.forEach(i,s=>{const o=IDBKeyRange.bound([s.userId,-1],[s.userId,s.lastAcknowledgedBatchId]);return r.W("userMutationsIndex",o).next(a=>N.forEach(a,u=>{ie(u.userId===s.userId);const c=_o(this.yt,u);return DA(e,s.userId,c).next(()=>{})}))}))}Gs(e){const n=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{const s=[];return r.Z((o,a)=>{const u=new Me(o),c=function(d){return[0,$n(d)]}(u);s.push(n.get(c).next(d=>d?N.resolve():(f=>n.put({targetId:0,path:$n(f),sequenceNumber:i.highestListenSequenceNumber}))(u)))}).next(()=>N.waitFor(s))})}Qs(e,n){e.createObjectStore("collectionParents",{keyPath:MG});const r=n.store("collectionParents"),i=new F0,s=o=>{if(i.add(o)){const a=o.lastSegment(),u=o.popLast();return r.put({collectionId:a,parent:$n(u)})}};return n.store("remoteDocuments").Z({X:!0},(o,a)=>{const u=new Me(o);return s(u.popLast())}).next(()=>n.store("documentMutations").Z({X:!0},([o,a,u],c)=>{const d=ei(a);return s(d.popLast())}))}js(e){const n=e.store("targets");return n.Z((r,i)=>{const s=Gu(i),o=kA(this.yt,s);return n.put(o)})}Ws(e,n){const r=n.store("remoteDocuments"),i=[];return r.Z((s,o)=>{const a=n.store("remoteDocumentsV14"),u=(c=o,c.document?new H(Me.fromString(c.document.name).popFirst(5)):c.noDocument?H.fromSegments(c.noDocument.path):c.unknownDocument?H.fromSegments(c.unknownDocument.path):ee()).path.toArray();var c;/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const d={prefixPath:u.slice(0,u.length-2),collectionGroup:u[u.length-2],documentId:u[u.length-1],readTime:o.readTime||[0,0],unknownDocument:o.unknownDocument,noDocument:o.noDocument,document:o.document,hasCommittedMutations:!!o.hasCommittedMutations};i.push(a.put(d))}).next(()=>N.waitFor(i))}zs(e,n){const r=n.store("mutations"),i=RA(this.yt),s=new PA(Om.Bs,this.yt.ie);return r.W().next(o=>{const a=new Map;return o.forEach(u=>{var c;let d=(c=a.get(u.userId))!==null&&c!==void 0?c:Ee();_o(this.yt,u).keys().forEach(f=>d=d.add(f)),a.set(u.userId,d)}),N.forEach(a,(u,c)=>{const d=new nn(c),f=Am.re(this.yt,d),g=s.getIndexManager(d),v=Rm.re(d,this.yt,g,s.referenceDelegate);return new OA(i,v,f,g).recalculateAndSaveOverlaysForDocumentKeys(new Jv(n,Zn.at),u).next()})})}}function c1(t){t.createObjectStore("targetDocuments",{keyPath:OG}).createIndex("documentTargetsIndex",PG,{unique:!0}),t.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",RG,{unique:!0}),t.createObjectStore("targetGlobal")}const cy="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class V0{constructor(e,n,r,i,s,o,a,u,c,d,f=15){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.Hs=s,this.window=o,this.document=a,this.Js=c,this.Ys=d,this.Xs=f,this.Ss=null,this.Ds=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Zs=null,this.inForeground=!1,this.ti=null,this.ei=null,this.ni=Number.NEGATIVE_INFINITY,this.si=g=>Promise.resolve(),!V0.C())throw new M(D.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new sH(this,i),this.ii=n+"main",this.yt=new TA(u),this.ri=new Ur(this.ii,this.Xs,new gH(this.yt)),this.Cs=new tH(this.referenceDelegate,this.yt),this.remoteDocumentCache=RA(this.yt),this.Ns=new GG,this.window&&this.window.localStorage?this.oi=this.window.localStorage:(this.oi=null,d===!1&&Rt("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.ui().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new M(D.FAILED_PRECONDITION,cy);return this.ci(),this.ai(),this.hi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Cs.getHighestSequenceNumber(e))}).then(e=>{this.Ss=new Zn(e,this.Js)}).then(()=>{this.Ds=!0}).catch(e=>(this.ri&&this.ri.close(),Promise.reject(e)))}li(e){return this.si=async n=>{if(this.started)return e(n)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.ri.L(async n=>{n.newVersion===null&&await e()})}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.Hs.enqueueAndForget(async()=>{this.started&&await this.ui()}))}ui(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Ld(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.fi(e).next(n=>{n||(this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)))})}).next(()=>this.di(e)).next(n=>this.isPrimary&&!n?this._i(e).next(()=>!1):!!n&&this.wi(e).next(()=>!0))).catch(e=>{if(Js(e))return F("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return F("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Hs.enqueueRetryable(()=>this.si(e)),this.isPrimary=e})}fi(e){return Mu(e).get("owner").next(n=>N.resolve(this.mi(n)))}gi(e){return Ld(e).delete(this.clientId)}async yi(){if(this.isPrimary&&!this.pi(this.ni,18e5)){this.ni=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",n=>{const r=ln(n,"clientMetadata");return r.W().next(i=>{const s=this.Ii(i,18e5),o=i.filter(a=>s.indexOf(a)===-1);return N.forEach(o,a=>r.delete(a.clientId)).next(()=>o)})}).catch(()=>[]);if(this.oi)for(const n of e)this.oi.removeItem(this.Ti(n.clientId))}}hi(){this.ei=this.Hs.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.ui().then(()=>this.yi()).then(()=>this.hi()))}mi(e){return!!e&&e.ownerId===this.clientId}di(e){return this.Ys?N.resolve(!0):Mu(e).get("owner").next(n=>{if(n!==null&&this.pi(n.leaseTimestampMs,5e3)&&!this.Ei(n.ownerId)){if(this.mi(n)&&this.networkEnabled)return!0;if(!this.mi(n)){if(!n.allowTabSynchronization)throw new M(D.FAILED_PRECONDITION,cy);return!1}}return!(!this.networkEnabled||!this.inForeground)||Ld(e).W().next(r=>this.Ii(r,5e3).find(i=>{if(this.clientId!==i.clientId){const s=!this.networkEnabled&&i.networkEnabled,o=!this.inForeground&&i.inForeground,a=this.networkEnabled===i.networkEnabled;if(s||o&&a)return!0}return!1})===void 0)}).next(n=>(this.isPrimary!==n&&F("IndexedDbPersistence",`Client ${n?"is":"is not"} eligible for a primary lease.`),n))}async shutdown(){this.Ds=!1,this.Ai(),this.ei&&(this.ei.cancel(),this.ei=null),this.Ri(),this.bi(),await this.ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],e=>{const n=new Jv(e,Zn.at);return this._i(n).next(()=>this.gi(n))}),this.ri.close(),this.Pi()}Ii(e,n){return e.filter(r=>this.pi(r.updateTimeMs,n)&&!this.Ei(r.clientId))}vi(){return this.runTransaction("getActiveClients","readonly",e=>Ld(e).W().next(n=>this.Ii(n,18e5).map(r=>r.clientId)))}get started(){return this.Ds}getMutationQueue(e,n){return Rm.re(e,this.yt,n,this.referenceDelegate)}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new eH(e,this.yt.ie.databaseId)}getDocumentOverlayCache(e){return Am.re(this.yt,e)}getBundleCache(){return this.Ns}runTransaction(e,n,r){F("IndexedDbPersistence","Starting transaction:",e);const i=n==="readonly"?"readonly":"readwrite",s=(o=this.Xs)===15?zG:o===14?SA:o===13?EA:o===12?jG:o===11?IA:void ee();var o;let a;return this.ri.runTransaction(e,i,s,u=>(a=new Jv(u,this.Ss?this.Ss.next():Zn.at),n==="readwrite-primary"?this.fi(a).next(c=>!!c||this.di(a)).next(c=>{if(!c)throw Rt(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)),new M(D.FAILED_PRECONDITION,xx);return r(a)}).next(c=>this.wi(a).next(()=>c)):this.Vi(a).next(()=>r(a)))).then(u=>(a.raiseOnCommittedEvent(),u))}Vi(e){return Mu(e).get("owner").next(n=>{if(n!==null&&this.pi(n.leaseTimestampMs,5e3)&&!this.Ei(n.ownerId)&&!this.mi(n)&&!(this.Ys||this.allowTabSynchronization&&n.allowTabSynchronization))throw new M(D.FAILED_PRECONDITION,cy)})}wi(e){const n={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Mu(e).put("owner",n)}static C(){return Ur.C()}_i(e){const n=Mu(e);return n.get("owner").next(r=>this.mi(r)?(F("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):N.resolve())}pi(e,n){const r=Date.now();return!(e<r-n)&&(!(e>r)||(Rt(`Detected an update time that is in the future: ${e} > ${r}`),!1))}ci(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.ti=()=>{this.Hs.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.ui()))},this.document.addEventListener("visibilitychange",this.ti),this.inForeground=this.document.visibilityState==="visible")}Ri(){this.ti&&(this.document.removeEventListener("visibilitychange",this.ti),this.ti=null)}ai(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.Zs=()=>{this.Ai(),s2()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Hs.enterRestrictedMode(!0),this.Hs.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Zs))}bi(){this.Zs&&(this.window.removeEventListener("pagehide",this.Zs),this.Zs=null)}Ei(e){var n;try{const r=((n=this.oi)===null||n===void 0?void 0:n.getItem(this.Ti(e)))!==null;return F("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Rt("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Ai(){if(this.oi)try{this.oi.setItem(this.Ti(this.clientId),String(Date.now()))}catch(e){Rt("Failed to set zombie client id.",e)}}Pi(){if(this.oi)try{this.oi.removeItem(this.Ti(this.clientId))}catch{}}Ti(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Mu(t){return ln(t,"owner")}function Ld(t){return ln(t,"clientMetadata")}function $0(t,e){let n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B0{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.Si=r,this.Di=i}static Ci(e,n){let r=Ee(),i=Ee();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new B0(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MA{constructor(){this.xi=!1}initialize(e,n){this.Ni=e,this.indexManager=n,this.xi=!0}getDocumentsMatchingQuery(e,n,r,i){return this.ki(e,n).next(s=>s||this.Oi(e,n,i,r)).next(s=>s||this.Mi(e,n))}ki(e,n){if(FT(n))return N.resolve(null);let r=Bn(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=pp(n,null,"F"),r=Bn(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=Ee(...s);return this.Ni.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(u=>{const c=this.Fi(n,a);return this.$i(n,c,o,u.readTime)?this.ki(e,pp(n,null,"F")):this.Bi(e,c,n,u)}))})))}Oi(e,n,r,i){return FT(n)||i.isEqual(le.min())?this.Mi(e,n):this.Ni.getDocuments(e,r).next(s=>{const o=this.Fi(n,s);return this.$i(n,o,r,i)?this.Mi(e,n):(Bv()<=Fe.DEBUG&&F("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Kv(n)),this.Bi(e,o,n,Dx(i,-1)))})}Fi(e,n){let r=new Ge(Hx(e));return n.forEach((i,s)=>{Mh(e,s)&&(r=r.add(s))}),r}$i(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Mi(e,n){return Bv()<=Fe.DEBUG&&F("QueryEngine","Using full collection scan to execute query:",Kv(n)),this.Ni.getDocumentsMatchingQuery(e,n,gr.min())}Bi(e,n,r,i){return this.Ni.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yH{constructor(e,n,r,i){this.persistence=e,this.Li=n,this.yt=i,this.qi=new Dt(ye),this.Ui=new Zs(s=>Qo(s),Oh),this.Ki=new Map,this.Gi=e.getRemoteDocumentCache(),this.Cs=e.getTargetCache(),this.Ns=e.getBundleCache(),this.Qi(r)}Qi(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new OA(this.Gi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Gi.setIndexManager(this.indexManager),this.Li.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.qi))}}function LA(t,e,n,r){return new yH(t,e,n,r)}async function FA(t,e){const n=Y(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n.Qi(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],a=[];let u=Ee();for(const c of i){o.push(c.batchId);for(const d of c.mutations)u=u.add(d.key)}for(const c of s){a.push(c.batchId);for(const d of c.mutations)u=u.add(d.key)}return n.localDocuments.getDocuments(r,u).next(c=>({ji:c,removedBatchIds:o,addedBatchIds:a}))})})}function vH(t,e){const n=Y(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=n.Gi.newChangeBuffer({trackRemovals:!0});return function(o,a,u,c){const d=u.batch,f=d.keys();let g=N.resolve();return f.forEach(v=>{g=g.next(()=>c.getEntry(a,v)).next(w=>{const T=u.docVersions.get(v);ie(T!==null),w.version.compareTo(T)<0&&(d.applyToRemoteDocument(w,u),w.isValidDocument()&&(w.setReadTime(u.commitVersion),c.addEntry(w)))})}),g.next(()=>o.mutationQueue.removeMutationBatch(a,d))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(o){let a=Ee();for(let u=0;u<o.mutationResults.length;++u)o.mutationResults[u].transformResults.length>0&&(a=a.add(o.batch.mutations[u].key));return a}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function UA(t){const e=Y(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Cs.getLastRemoteSnapshotVersion(n))}function _H(t,e){const n=Y(t),r=e.snapshotVersion;let i=n.qi;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.Gi.newChangeBuffer({trackRemovals:!0});i=n.qi;const a=[];e.targetChanges.forEach((d,f)=>{const g=i.get(f);if(!g)return;a.push(n.Cs.removeMatchingKeys(s,d.removedDocuments,f).next(()=>n.Cs.addMatchingKeys(s,d.addedDocuments,f)));let v=g.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.has(f)?v=v.withResumeToken(Kt.EMPTY_BYTE_STRING,le.min()).withLastLimboFreeSnapshotVersion(le.min()):d.resumeToken.approximateByteSize()>0&&(v=v.withResumeToken(d.resumeToken,r)),i=i.insert(f,v),function(w,T,C){return w.resumeToken.approximateByteSize()===0||T.snapshotVersion.toMicroseconds()-w.snapshotVersion.toMicroseconds()>=3e8?!0:C.addedDocuments.size+C.modifiedDocuments.size+C.removedDocuments.size>0}(g,v,d)&&a.push(n.Cs.updateTargetData(s,v))});let u=tr(),c=Ee();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,d))}),a.push(VA(s,o,e.documentUpdates).next(d=>{u=d.Wi,c=d.zi})),!r.isEqual(le.min())){const d=n.Cs.getLastRemoteSnapshotVersion(s).next(f=>n.Cs.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(d)}return N.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,u,c)).next(()=>u)}).then(s=>(n.qi=i,s))}function VA(t,e,n){let r=Ee(),i=Ee();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let o=tr();return n.forEach((a,u)=>{const c=s.get(a);u.isFoundDocument()!==c.isFoundDocument()&&(i=i.add(a)),u.isNoDocument()&&u.version.isEqual(le.min())?(e.removeEntry(a,u.readTime),o=o.insert(a,u)):!c.isValidDocument()||u.version.compareTo(c.version)>0||u.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(u),o=o.insert(a,u)):F("LocalStore","Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",u.version)}),{Wi:o,zi:i}})}function wH(t,e){const n=Y(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Rl(t,e){const n=Y(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Cs.getTargetData(r,e).next(s=>s?(i=s,N.resolve(i)):n.Cs.allocateTargetId(r).next(o=>(i=new As(e,o,0,r.currentSequenceNumber),n.Cs.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.qi.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.qi=n.qi.insert(r.targetId,r),n.Ui.set(e,r.targetId)),r})}async function Ol(t,e,n){const r=Y(t),i=r.qi.get(e),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!Js(o))throw o;F("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.qi=r.qi.remove(e),r.Ui.delete(i.target)}function vp(t,e,n){const r=Y(t);let i=le.min(),s=Ee();return r.persistence.runTransaction("Execute query","readonly",o=>function(a,u,c){const d=Y(a),f=d.Ui.get(c);return f!==void 0?N.resolve(d.qi.get(f)):d.Cs.getTargetData(u,c)}(r,o,Bn(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Cs.getMatchingKeysForTargetId(o,a.targetId).next(u=>{s=u})}).next(()=>r.Li.getDocumentsMatchingQuery(o,e,n?i:le.min(),n?s:Ee())).next(a=>(WA(r,Gx(e),a),{documents:a,Hi:s})))}function $A(t,e){const n=Y(t),r=Y(n.Cs),i=n.qi.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",s=>r.ne(s,e).next(o=>o?o.target:null))}function BA(t,e){const n=Y(t),r=n.Ki.get(e)||le.min();return n.persistence.runTransaction("Get new document changes","readonly",i=>n.Gi.getAllFromCollectionGroup(i,e,Dx(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(WA(n,e,i),i))}function WA(t,e,n){let r=t.Ki.get(e)||le.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.Ki.set(e,r)}async function IH(t,e,n,r){const i=Y(t);let s=Ee(),o=tr();for(const c of n){const d=e.Ji(c.metadata.name);c.document&&(s=s.add(d));const f=e.Yi(c);f.setReadTime(e.Xi(c.metadata.readTime)),o=o.insert(d,f)}const a=i.Gi.newChangeBuffer({trackRemovals:!0}),u=await Rl(i,function(c){return Bn(Zl(Me.fromString(`__bundle__/docs/${c}`)))}(r));return i.persistence.runTransaction("Apply bundle documents","readwrite",c=>VA(c,a,o).next(d=>(a.apply(c),d)).next(d=>i.Cs.removeMatchingKeysForTargetId(c,u.targetId).next(()=>i.Cs.addMatchingKeys(c,s,u.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(c,d.Wi,d.zi)).next(()=>d.Wi)))}async function EH(t,e,n=Ee()){const r=await Rl(t,Bn(M0(e.bundledQuery))),i=Y(t);return i.persistence.runTransaction("Save named query","readwrite",s=>{const o=Ot(e.readTime);if(r.snapshotVersion.compareTo(o)>=0)return i.Ns.saveNamedQuery(s,e);const a=r.withResumeToken(Kt.EMPTY_BYTE_STRING,o);return i.qi=i.qi.insert(a.targetId,a),i.Cs.updateTargetData(s,a).next(()=>i.Cs.removeMatchingKeysForTargetId(s,r.targetId)).next(()=>i.Cs.addMatchingKeys(s,n,r.targetId)).next(()=>i.Ns.saveNamedQuery(s,e))})}function h1(t,e){return`firestore_clients_${t}_${e}`}function d1(t,e,n){let r=`firestore_mutations_${t}_${n}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function hy(t,e){return`firestore_targets_${t}_${e}`}class _p{constructor(e,n,r,i){this.user=e,this.batchId=n,this.state=r,this.error=i}static Zi(e,n,r){const i=JSON.parse(r);let s,o=typeof i=="object"&&["pending","acknowledged","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return o&&i.error&&(o=typeof i.error.message=="string"&&typeof i.error.code=="string",o&&(s=new M(i.error.code,i.error.message))),o?new _p(e,n,i.state,s):(Rt("SharedClientState",`Failed to parse mutation state for ID '${n}': ${r}`),null)}tr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class fc{constructor(e,n,r){this.targetId=e,this.state=n,this.error=r}static Zi(e,n){const r=JSON.parse(n);let i,s=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return s&&r.error&&(s=typeof r.error.message=="string"&&typeof r.error.code=="string",s&&(i=new M(r.error.code,r.error.message))),s?new fc(e,r.state,i):(Rt("SharedClientState",`Failed to parse target state for ID '${e}': ${n}`),null)}tr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class wp{constructor(e,n){this.clientId=e,this.activeTargetIds=n}static Zi(e,n){const r=JSON.parse(n);let i=typeof r=="object"&&r.activeTargetIds instanceof Array,s=xm();for(let o=0;i&&o<r.activeTargetIds.length;++o)i=Ox(r.activeTargetIds[o]),s=s.add(r.activeTargetIds[o]);return i?new wp(e,s):(Rt("SharedClientState",`Failed to parse client data for instance '${e}': ${n}`),null)}}class W0{constructor(e,n){this.clientId=e,this.onlineState=n}static Zi(e){const n=JSON.parse(e);return typeof n=="object"&&["Unknown","Online","Offline"].indexOf(n.onlineState)!==-1&&typeof n.clientId=="string"?new W0(n.clientId,n.onlineState):(Rt("SharedClientState",`Failed to parse online state: ${e}`),null)}}class n_{constructor(){this.activeTargetIds=xm()}er(e){this.activeTargetIds=this.activeTargetIds.add(e)}nr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}tr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class dy{constructor(e,n,r,i,s){this.window=e,this.Hs=n,this.persistenceKey=r,this.sr=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ir=this.rr.bind(this),this.ur=new Dt(ye),this.started=!1,this.cr=[];const o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=s,this.ar=h1(this.persistenceKey,this.sr),this.hr=function(a){return`firestore_sequence_number_${a}`}(this.persistenceKey),this.ur=this.ur.insert(this.sr,new n_),this.lr=new RegExp(`^firestore_clients_${o}_([^_]*)$`),this.dr=new RegExp(`^firestore_mutations_${o}_(\\d+)(?:_(.*))?$`),this._r=new RegExp(`^firestore_targets_${o}_(\\d+)$`),this.wr=function(a){return`firestore_online_state_${a}`}(this.persistenceKey),this.mr=function(a){return`firestore_bundle_loaded_v2_${a}`}(this.persistenceKey),this.window.addEventListener("storage",this.ir)}static C(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.vi();for(const r of e){if(r===this.sr)continue;const i=this.getItem(h1(this.persistenceKey,r));if(i){const s=wp.Zi(r,i);s&&(this.ur=this.ur.insert(s.clientId,s))}}this.gr();const n=this.storage.getItem(this.wr);if(n){const r=this.yr(n);r&&this.pr(r)}for(const r of this.cr)this.rr(r);this.cr=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0}writeSequenceNumber(e){this.setItem(this.hr,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Ir(this.ur)}isActiveQueryTarget(e){let n=!1;return this.ur.forEach((r,i)=>{i.activeTargetIds.has(e)&&(n=!0)}),n}addPendingMutation(e){this.Tr(e,"pending")}updateMutationState(e,n,r){this.Tr(e,n,r),this.Er(e)}addLocalQueryTarget(e){let n="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(hy(this.persistenceKey,e));if(r){const i=fc.Zi(e,r);i&&(n=i.state)}}return this.Ar.er(e),this.gr(),n}removeLocalQueryTarget(e){this.Ar.nr(e),this.gr()}isLocalQueryTarget(e){return this.Ar.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(hy(this.persistenceKey,e))}updateQueryState(e,n,r){this.Rr(e,n,r)}handleUserChange(e,n,r){n.forEach(i=>{this.Er(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.br(e)}notifyBundleLoaded(e){this.Pr(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ir),this.removeItem(this.ar),this.started=!1)}getItem(e){const n=this.storage.getItem(e);return F("SharedClientState","READ",e,n),n}setItem(e,n){F("SharedClientState","SET",e,n),this.storage.setItem(e,n)}removeItem(e){F("SharedClientState","REMOVE",e),this.storage.removeItem(e)}rr(e){const n=e;if(n.storageArea===this.storage){if(F("SharedClientState","EVENT",n.key,n.newValue),n.key===this.ar)return void Rt("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Hs.enqueueRetryable(async()=>{if(this.started){if(n.key!==null){if(this.lr.test(n.key)){if(n.newValue==null){const r=this.vr(n.key);return this.Vr(r,null)}{const r=this.Sr(n.key,n.newValue);if(r)return this.Vr(r.clientId,r)}}else if(this.dr.test(n.key)){if(n.newValue!==null){const r=this.Dr(n.key,n.newValue);if(r)return this.Cr(r)}}else if(this._r.test(n.key)){if(n.newValue!==null){const r=this.Nr(n.key,n.newValue);if(r)return this.kr(r)}}else if(n.key===this.wr){if(n.newValue!==null){const r=this.yr(n.newValue);if(r)return this.pr(r)}}else if(n.key===this.hr){const r=function(i){let s=Zn.at;if(i!=null)try{const o=JSON.parse(i);ie(typeof o=="number"),s=o}catch(o){Rt("SharedClientState","Failed to read sequence number from WebStorage",o)}return s}(n.newValue);r!==Zn.at&&this.sequenceNumberHandler(r)}else if(n.key===this.mr){const r=this.Or(n.newValue);await Promise.all(r.map(i=>this.syncEngine.Mr(i)))}}}else this.cr.push(n)})}}get Ar(){return this.ur.get(this.sr)}gr(){this.setItem(this.ar,this.Ar.tr())}Tr(e,n,r){const i=new _p(this.currentUser,e,n,r),s=d1(this.persistenceKey,this.currentUser,e);this.setItem(s,i.tr())}Er(e){const n=d1(this.persistenceKey,this.currentUser,e);this.removeItem(n)}br(e){const n={clientId:this.sr,onlineState:e};this.storage.setItem(this.wr,JSON.stringify(n))}Rr(e,n,r){const i=hy(this.persistenceKey,e),s=new fc(e,n,r);this.setItem(i,s.tr())}Pr(e){const n=JSON.stringify(Array.from(e));this.setItem(this.mr,n)}vr(e){const n=this.lr.exec(e);return n?n[1]:null}Sr(e,n){const r=this.vr(e);return wp.Zi(r,n)}Dr(e,n){const r=this.dr.exec(e),i=Number(r[1]),s=r[2]!==void 0?r[2]:null;return _p.Zi(new nn(s),i,n)}Nr(e,n){const r=this._r.exec(e),i=Number(r[1]);return fc.Zi(i,n)}yr(e){return W0.Zi(e)}Or(e){return JSON.parse(e)}async Cr(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.Fr(e.batchId,e.state,e.error);F("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)}kr(e){return this.syncEngine.$r(e.targetId,e.state,e.error)}Vr(e,n){const r=n?this.ur.insert(e,n):this.ur.remove(e),i=this.Ir(this.ur),s=this.Ir(r),o=[],a=[];return s.forEach(u=>{i.has(u)||o.push(u)}),i.forEach(u=>{s.has(u)||a.push(u)}),this.syncEngine.Br(o,a).then(()=>{this.ur=r})}pr(e){this.ur.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Ir(e){let n=xm();return e.forEach((r,i)=>{n=n.unionWith(i.activeTargetIds)}),n}}class jA{constructor(){this.Lr=new n_,this.qr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e){return this.Lr.er(e),this.qr[e]||"not-current"}updateQueryState(e,n,r){this.qr[e]=n}removeLocalQueryTarget(e){this.Lr.nr(e)}isLocalQueryTarget(e){return this.Lr.activeTargetIds.has(e)}clearQueryState(e){delete this.qr[e]}getAllActiveQueryTargets(){return this.Lr.activeTargetIds}isActiveQueryTarget(e){return this.Lr.activeTargetIds.has(e)}start(){return this.Lr=new n_,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SH{Ur(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f1{constructor(){this.Kr=()=>this.Gr(),this.Qr=()=>this.jr(),this.Wr=[],this.zr()}Ur(e){this.Wr.push(e)}shutdown(){window.removeEventListener("online",this.Kr),window.removeEventListener("offline",this.Qr)}zr(){window.addEventListener("online",this.Kr),window.addEventListener("offline",this.Qr)}Gr(){F("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Wr)e(0)}jr(){F("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Wr)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TH={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kH{constructor(e){this.Hr=e.Hr,this.Jr=e.Jr}Yr(e){this.Xr=e}Zr(e){this.eo=e}onMessage(e){this.no=e}close(){this.Jr()}send(e){this.Hr(e)}so(){this.Xr()}io(e){this.eo(e)}ro(e){this.no(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CH extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http";this.oo=n+"://"+e.host,this.uo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get co(){return!1}ao(e,n,r,i,s){const o=this.ho(e,n);F("RestConnection","Sending: ",o,r);const a={};return this.lo(a,i,s),this.fo(e,o,a,r).then(u=>(F("RestConnection","Received: ",u),u),u=>{throw Go("RestConnection",`${e} failed with error: `,u,"url: ",o,"request:",r),u})}_o(e,n,r,i,s,o){return this.ao(e,n,r,i,s)}lo(e,n,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+Jl,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((i,s)=>e[s]=i),r&&r.headers.forEach((i,s)=>e[s]=i)}ho(e,n){const r=TH[e];return`${this.oo}/v1/${n}:${r}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}fo(e,n,r,i){return new Promise((s,o)=>{const a=new k4;a.setWithCredentials(!0),a.listenOnce(E4.COMPLETE,()=>{try{switch(a.getLastErrorCode()){case ly.NO_ERROR:const c=a.getResponseJson();F("Connection","XHR received:",JSON.stringify(c)),s(c);break;case ly.TIMEOUT:F("Connection",'RPC "'+e+'" timed out'),o(new M(D.DEADLINE_EXCEEDED,"Request time out"));break;case ly.HTTP_ERROR:const d=a.getStatus();if(F("Connection",'RPC "'+e+'" failed with status:',d,"response text:",a.getResponseText()),d>0){let f=a.getResponseJson();Array.isArray(f)&&(f=f[0]);const g=f==null?void 0:f.error;if(g&&g.status&&g.message){const v=function(w){const T=w.toLowerCase().replace(/_/g,"-");return Object.values(D).indexOf(T)>=0?T:D.UNKNOWN}(g.status);o(new M(v,g.message))}else o(new M(D.UNKNOWN,"Server responded with status "+a.getStatus()))}else o(new M(D.UNAVAILABLE,"Connection failed."));break;default:ee()}}finally{F("Connection",'RPC "'+e+'" completed.')}});const u=JSON.stringify(i);a.send(n,"POST",u,r,15)})}wo(e,n,r){const i=[this.oo,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=w4(),o=I4(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(a.xmlHttpFactory=new T4({})),this.lo(a.initMessageHeaders,n,r),a.encodeInitMessageHeaders=!0;const u=i.join("");F("Connection","Creating WebChannel: "+u,a);const c=s.createWebChannel(u,a);let d=!1,f=!1;const g=new kH({Hr:w=>{f?F("Connection","Not sending because WebChannel is closed:",w):(d||(F("Connection","Opening WebChannel transport."),c.open(),d=!0),F("Connection","WebChannel sending:",w),c.send(w))},Jr:()=>c.close()}),v=(w,T,C)=>{w.listen(T,I=>{try{C(I)}catch(_){setTimeout(()=>{throw _},0)}})};return v(c,Ad.EventType.OPEN,()=>{f||F("Connection","WebChannel transport opened.")}),v(c,Ad.EventType.CLOSE,()=>{f||(f=!0,F("Connection","WebChannel transport closed"),g.io())}),v(c,Ad.EventType.ERROR,w=>{f||(f=!0,Go("Connection","WebChannel transport errored:",w),g.io(new M(D.UNAVAILABLE,"The operation could not be completed")))}),v(c,Ad.EventType.MESSAGE,w=>{var T;if(!f){const C=w.data[0];ie(!!C);const I=C,_=I.error||((T=I[0])===null||T===void 0?void 0:T.error);if(_){F("Connection","WebChannel received error:",_);const E=_.status;let b=function(P){const L=Mt[P];if(L!==void 0)return iA(L)}(E),O=_.message;b===void 0&&(b=D.INTERNAL,O="Unknown error status: "+E+" with message "+_.message),f=!0,g.io(new M(b,O)),c.close()}else F("Connection","WebChannel received:",C),g.ro(C)}}),v(o,S4.STAT_EVENT,w=>{w.stat===ST.PROXY?F("Connection","Detected buffering proxy"):w.stat===ST.NOPROXY&&F("Connection","Detected no buffering proxy")}),setTimeout(()=>{g.so()},0),g}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zA(){return typeof window<"u"?window:null}function af(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vh(t){return new yG(t,!0)}class j0{constructor(e,n,r=1e3,i=1.5,s=6e4){this.Hs=e,this.timerId=n,this.mo=r,this.yo=i,this.po=s,this.Io=0,this.To=null,this.Eo=Date.now(),this.reset()}reset(){this.Io=0}Ao(){this.Io=this.po}Ro(e){this.cancel();const n=Math.floor(this.Io+this.bo()),r=Math.max(0,Date.now()-this.Eo),i=Math.max(0,n-r);i>0&&F("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Io} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.To=this.Hs.enqueueAfterDelay(this.timerId,i,()=>(this.Eo=Date.now(),e())),this.Io*=this.yo,this.Io<this.mo&&(this.Io=this.mo),this.Io>this.po&&(this.Io=this.po)}Po(){this.To!==null&&(this.To.skipDelay(),this.To=null)}cancel(){this.To!==null&&(this.To.cancel(),this.To=null)}bo(){return(Math.random()-.5)*this.Io}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qA{constructor(e,n,r,i,s,o,a,u){this.Hs=e,this.vo=r,this.Vo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=u,this.state=0,this.So=0,this.Do=null,this.Co=null,this.stream=null,this.xo=new j0(e,n)}No(){return this.state===1||this.state===5||this.ko()}ko(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.Oo()}async stop(){this.No()&&await this.close(0)}Mo(){this.state=0,this.xo.reset()}Fo(){this.ko()&&this.Do===null&&(this.Do=this.Hs.enqueueAfterDelay(this.vo,6e4,()=>this.$o()))}Bo(e){this.Lo(),this.stream.send(e)}async $o(){if(this.ko())return this.close(0)}Lo(){this.Do&&(this.Do.cancel(),this.Do=null)}qo(){this.Co&&(this.Co.cancel(),this.Co=null)}async close(e,n){this.Lo(),this.qo(),this.xo.cancel(),this.So++,e!==4?this.xo.reset():n&&n.code===D.RESOURCE_EXHAUSTED?(Rt(n.toString()),Rt("Using maximum backoff delay to prevent overloading the backend."),this.xo.Ao()):n&&n.code===D.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.Uo(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Zr(n)}Uo(){}auth(){this.state=1;const e=this.Ko(this.So),n=this.So;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.So===n&&this.Go(r,i)},r=>{e(()=>{const i=new M(D.UNKNOWN,"Fetching auth token failed: "+r.message);return this.Qo(i)})})}Go(e,n){const r=this.Ko(this.So);this.stream=this.jo(e,n),this.stream.Yr(()=>{r(()=>(this.state=2,this.Co=this.Hs.enqueueAfterDelay(this.Vo,1e4,()=>(this.ko()&&(this.state=3),Promise.resolve())),this.listener.Yr()))}),this.stream.Zr(i=>{r(()=>this.Qo(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}Oo(){this.state=5,this.xo.Ro(async()=>{this.state=0,this.start()})}Qo(e){return F("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Ko(e){return n=>{this.Hs.enqueueAndForget(()=>this.So===e?n():(F("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class NH extends qA{constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.yt=s}jo(e,n){return this.connection.wo("Listen",e,n)}onMessage(e){this.xo.reset();const n=wG(this.yt,e),r=function(i){if(!("targetChange"in i))return le.min();const s=i.targetChange;return s.targetIds&&s.targetIds.length?le.min():s.readTime?Ot(s.readTime):le.min()}(e);return this.listener.Wo(n,r)}zo(e){const n={};n.database=rh(this.yt),n.addTarget=function(i,s){let o;const a=s.target;return o=dp(a)?{documents:mA(i,a)}:{query:A0(i,a)},o.targetId=s.targetId,s.resumeToken.approximateByteSize()>0?o.resumeToken=cA(i,s.resumeToken):s.snapshotVersion.compareTo(le.min())>0&&(o.readTime=Al(i,s.snapshotVersion.toTimestamp())),o}(this.yt,e);const r=EG(this.yt,e);r&&(n.labels=r),this.Bo(n)}Ho(e){const n={};n.database=rh(this.yt),n.removeTarget=e,this.Bo(n)}}class DH extends qA{constructor(e,n,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.yt=s,this.Jo=!1}get Yo(){return this.Jo}start(){this.Jo=!1,this.lastStreamToken=void 0,super.start()}Uo(){this.Jo&&this.Xo([])}jo(e,n){return this.connection.wo("Write",e,n)}onMessage(e){if(ie(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Jo){this.xo.reset();const n=IG(e.writeResults,e.commitTime),r=Ot(e.commitTime);return this.listener.Zo(r,n)}return ie(!e.writeResults||e.writeResults.length===0),this.Jo=!0,this.listener.tu()}eu(){const e={};e.database=rh(this.yt),this.Bo(e)}Xo(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>ih(this.yt,r))};this.Bo(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bH extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.yt=i,this.nu=!1}su(){if(this.nu)throw new M(D.FAILED_PRECONDITION,"The client has already been terminated.")}ao(e,n,r){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,s])=>this.connection.ao(e,n,r,i,s)).catch(i=>{throw i.name==="FirebaseError"?(i.code===D.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new M(D.UNKNOWN,i.toString())})}_o(e,n,r,i){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection._o(e,n,r,s,o,i)).catch(s=>{throw s.name==="FirebaseError"?(s.code===D.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new M(D.UNKNOWN,s.toString())})}terminate(){this.nu=!0}}async function xH(t,e){const n=Y(t),r=function(s,o){const a=A0(s,o);return{structuredAggregationQuery:{aggregations:[{count:{},alias:"count_alias"}],structuredQuery:a.structuredQuery},parent:a.parent}}(n.yt,Bn(e)),i=r.parent;return n.connection.co||delete r.parent,(await n._o("RunAggregationQuery",i,r,1)).filter(s=>!!s.result).map(s=>s.result.aggregateFields)}class AH{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.iu=0,this.ru=null,this.ou=!0}uu(){this.iu===0&&(this.cu("Unknown"),this.ru=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.ru=null,this.au("Backend didn't respond within 10 seconds."),this.cu("Offline"),Promise.resolve())))}hu(e){this.state==="Online"?this.cu("Unknown"):(this.iu++,this.iu>=1&&(this.lu(),this.au(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.cu("Offline")))}set(e){this.lu(),this.iu=0,e==="Online"&&(this.ou=!1),this.cu(e)}cu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}au(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ou?(Rt(n),this.ou=!1):F("OnlineStateTracker",n)}lu(){this.ru!==null&&(this.ru.cancel(),this.ru=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RH{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.fu=[],this.du=new Map,this._u=new Set,this.wu=[],this.mu=s,this.mu.Ur(o=>{r.enqueueAndForget(async()=>{Hi(this)&&(F("RemoteStore","Restarting streams for network reachability change."),await async function(a){const u=Y(a);u._u.add(4),await nu(u),u.gu.set("Unknown"),u._u.delete(4),await $h(u)}(this))})}),this.gu=new AH(r,i)}}async function $h(t){if(Hi(t))for(const e of t.wu)await e(!0)}async function nu(t){for(const e of t.wu)await e(!1)}function Pm(t,e){const n=Y(t);n.du.has(e.targetId)||(n.du.set(e.targetId,e),G0(n)?q0(n):iu(n).ko()&&z0(n,e))}function sh(t,e){const n=Y(t),r=iu(n);n.du.delete(e),r.ko()&&GA(n,e),n.du.size===0&&(r.ko()?r.Fo():Hi(n)&&n.gu.set("Unknown"))}function z0(t,e){t.yu.Ot(e.targetId),iu(t).zo(e)}function GA(t,e){t.yu.Ot(e),iu(t).Ho(e)}function q0(t){t.yu=new fG({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ne:e=>t.du.get(e)||null}),iu(t).start(),t.gu.uu()}function G0(t){return Hi(t)&&!iu(t).No()&&t.du.size>0}function Hi(t){return Y(t)._u.size===0}function HA(t){t.yu=void 0}async function OH(t){t.du.forEach((e,n)=>{z0(t,e)})}async function PH(t,e){HA(t),G0(t)?(t.gu.hu(e),q0(t)):t.gu.set("Unknown")}async function MH(t,e,n){if(t.gu.set("Online"),e instanceof uA&&e.state===2&&e.cause)try{await async function(r,i){const s=i.cause;for(const o of i.targetIds)r.du.has(o)&&(await r.remoteSyncer.rejectListen(o,s),r.du.delete(o),r.yu.removeTarget(o))}(t,e)}catch(r){F("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Ip(t,r)}else if(e instanceof sf?t.yu.Kt(e):e instanceof lA?t.yu.Jt(e):t.yu.jt(e),!n.isEqual(le.min()))try{const r=await UA(t.localStore);n.compareTo(r)>=0&&await function(i,s){const o=i.yu.Zt(s);return o.targetChanges.forEach((a,u)=>{if(a.resumeToken.approximateByteSize()>0){const c=i.du.get(u);c&&i.du.set(u,c.withResumeToken(a.resumeToken,s))}}),o.targetMismatches.forEach(a=>{const u=i.du.get(a);if(!u)return;i.du.set(a,u.withResumeToken(Kt.EMPTY_BYTE_STRING,u.snapshotVersion)),GA(i,a);const c=new As(u.target,a,1,u.sequenceNumber);z0(i,c)}),i.remoteSyncer.applyRemoteEvent(o)}(t,n)}catch(r){F("RemoteStore","Failed to raise snapshot:",r),await Ip(t,r)}}async function Ip(t,e,n){if(!Js(e))throw e;t._u.add(1),await nu(t),t.gu.set("Offline"),n||(n=()=>UA(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{F("RemoteStore","Retrying IndexedDB access"),await n(),t._u.delete(1),await $h(t)})}function YA(t,e){return e().catch(n=>Ip(t,n,e))}async function ru(t){const e=Y(t),n=js(e);let r=e.fu.length>0?e.fu[e.fu.length-1].batchId:-1;for(;LH(e);)try{const i=await wH(e.localStore,r);if(i===null){e.fu.length===0&&n.Fo();break}r=i.batchId,FH(e,i)}catch(i){await Ip(e,i)}KA(e)&&QA(e)}function LH(t){return Hi(t)&&t.fu.length<10}function FH(t,e){t.fu.push(e);const n=js(t);n.ko()&&n.Yo&&n.Xo(e.mutations)}function KA(t){return Hi(t)&&!js(t).No()&&t.fu.length>0}function QA(t){js(t).start()}async function UH(t){js(t).eu()}async function VH(t){const e=js(t);for(const n of t.fu)e.Xo(n.mutations)}async function $H(t,e,n){const r=t.fu.shift(),i=O0.from(r,e,n);await YA(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await ru(t)}async function BH(t,e){e&&js(t).Yo&&await async function(n,r){if(i=r.code,rA(i)&&i!==D.ABORTED){const s=n.fu.shift();js(n).Mo(),await YA(n,()=>n.remoteSyncer.rejectFailedWrite(s.batchId,r)),await ru(n)}var i}(t,e),KA(t)&&QA(t)}async function p1(t,e){const n=Y(t);n.asyncQueue.verifyOperationInProgress(),F("RemoteStore","RemoteStore received new credentials");const r=Hi(n);n._u.add(3),await nu(n),r&&n.gu.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n._u.delete(3),await $h(n)}async function r_(t,e){const n=Y(t);e?(n._u.delete(2),await $h(n)):e||(n._u.add(2),await nu(n),n.gu.set("Unknown"))}function iu(t){return t.pu||(t.pu=function(e,n,r){const i=Y(e);return i.su(),new NH(n,i.connection,i.authCredentials,i.appCheckCredentials,i.yt,r)}(t.datastore,t.asyncQueue,{Yr:OH.bind(null,t),Zr:PH.bind(null,t),Wo:MH.bind(null,t)}),t.wu.push(async e=>{e?(t.pu.Mo(),G0(t)?q0(t):t.gu.set("Unknown")):(await t.pu.stop(),HA(t))})),t.pu}function js(t){return t.Iu||(t.Iu=function(e,n,r){const i=Y(e);return i.su(),new DH(n,i.connection,i.authCredentials,i.appCheckCredentials,i.yt,r)}(t.datastore,t.asyncQueue,{Yr:UH.bind(null,t),Zr:BH.bind(null,t),tu:VH.bind(null,t),Zo:$H.bind(null,t)}),t.wu.push(async e=>{e?(t.Iu.Mo(),await ru(t)):(await t.Iu.stop(),t.fu.length>0&&(F("RemoteStore",`Stopping write stream with ${t.fu.length} pending writes`),t.fu=[]))})),t.Iu}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H0{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Gt,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}static createAndSchedule(e,n,r,i,s){const o=Date.now()+r,a=new H0(e,n,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new M(D.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function su(t,e){if(Rt("AsyncQueue",`${e}: ${t}`),Js(t))return new M(D.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ll{constructor(e){this.comparator=e?(n,r)=>e(n,r)||H.comparator(n.key,r.key):(n,r)=>H.comparator(n.key,r.key),this.keyedMap=qu(),this.sortedSet=new Dt(this.comparator)}static emptySet(e){return new ll(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof ll)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new ll;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m1{constructor(){this.Tu=new Dt(H.comparator)}track(e){const n=e.doc.key,r=this.Tu.get(n);r?e.type!==0&&r.type===3?this.Tu=this.Tu.insert(n,e):e.type===3&&r.type!==1?this.Tu=this.Tu.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.Tu=this.Tu.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.Tu=this.Tu.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.Tu=this.Tu.remove(n):e.type===1&&r.type===2?this.Tu=this.Tu.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.Tu=this.Tu.insert(n,{type:2,doc:e.doc}):ee():this.Tu=this.Tu.insert(n,e)}Eu(){const e=[];return this.Tu.inorderTraversal((n,r)=>{e.push(r)}),e}}class Pl{constructor(e,n,r,i,s,o,a,u,c){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=u,this.hasCachedResults=c}static fromInitialDocuments(e,n,r,i,s){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new Pl(e,n,ll.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Ph(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WH{constructor(){this.Au=void 0,this.listeners=[]}}class jH{constructor(){this.queries=new Zs(e=>qx(e),Ph),this.onlineState="Unknown",this.Ru=new Set}}async function Y0(t,e){const n=Y(t),r=e.query;let i=!1,s=n.queries.get(r);if(s||(i=!0,s=new WH),i)try{s.Au=await n.onListen(r)}catch(o){const a=su(o,`Initialization of query '${Kv(e.query)}' failed`);return void e.onError(a)}n.queries.set(r,s),s.listeners.push(e),e.bu(n.onlineState),s.Au&&e.Pu(s.Au)&&Q0(n)}async function K0(t,e){const n=Y(t),r=e.query;let i=!1;const s=n.queries.get(r);if(s){const o=s.listeners.indexOf(e);o>=0&&(s.listeners.splice(o,1),i=s.listeners.length===0)}if(i)return n.queries.delete(r),n.onUnlisten(r)}function zH(t,e){const n=Y(t);let r=!1;for(const i of e){const s=i.query,o=n.queries.get(s);if(o){for(const a of o.listeners)a.Pu(i)&&(r=!0);o.Au=i}}r&&Q0(n)}function qH(t,e,n){const r=Y(t),i=r.queries.get(e);if(i)for(const s of i.listeners)s.onError(n);r.queries.delete(e)}function Q0(t){t.Ru.forEach(e=>{e.next()})}class X0{constructor(e,n,r){this.query=e,this.vu=n,this.Vu=!1,this.Su=null,this.onlineState="Unknown",this.options=r||{}}Pu(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new Pl(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Vu?this.Du(e)&&(this.vu.next(e),n=!0):this.Cu(e,this.onlineState)&&(this.xu(e),n=!0),this.Su=e,n}onError(e){this.vu.error(e)}bu(e){this.onlineState=e;let n=!1;return this.Su&&!this.Vu&&this.Cu(this.Su,e)&&(this.xu(this.Su),n=!0),n}Cu(e,n){if(!e.fromCache)return!0;const r=n!=="Offline";return(!this.options.Nu||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Du(e){if(e.docChanges.length>0)return!0;const n=this.Su&&this.Su.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}xu(e){e=Pl.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Vu=!0,this.vu.next(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GH{constructor(e,n){this.ku=e,this.byteLength=n}Ou(){return"metadata"in this.ku}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g1{constructor(e){this.yt=e}Ji(e){return ii(this.yt,e)}Yi(e){return e.metadata.exists?pA(this.yt,e.document,!1):it.newNoDocument(this.Ji(e.metadata.name),this.Xi(e.metadata.readTime))}Xi(e){return Ot(e)}}class HH{constructor(e,n,r){this.Mu=e,this.localStore=n,this.yt=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=XA(e)}Fu(e){this.progress.bytesLoaded+=e.byteLength;let n=this.progress.documentsLoaded;if(e.ku.namedQuery)this.queries.push(e.ku.namedQuery);else if(e.ku.documentMetadata){this.documents.push({metadata:e.ku.documentMetadata}),e.ku.documentMetadata.exists||++n;const r=Me.fromString(e.ku.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.ku.document&&(this.documents[this.documents.length-1].document=e.ku.document,++n);return n!==this.progress.documentsLoaded?(this.progress.documentsLoaded=n,Object.assign({},this.progress)):null}$u(e){const n=new Map,r=new g1(this.yt);for(const i of e)if(i.metadata.queries){const s=r.Ji(i.metadata.name);for(const o of i.metadata.queries){const a=(n.get(o)||Ee()).add(s);n.set(o,a)}}return n}async complete(){const e=await IH(this.localStore,new g1(this.yt),this.documents,this.Mu.id),n=this.$u(this.documents);for(const r of this.queries)await EH(this.localStore,r,n.get(r.name));return this.progress.taskState="Success",{progress:this.progress,Bu:this.collectionGroups,Lu:e}}}function XA(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JA{constructor(e){this.key=e}}class ZA{constructor(e){this.key=e}}class eR{constructor(e,n){this.query=e,this.qu=n,this.Uu=null,this.hasCachedResults=!1,this.current=!1,this.Ku=Ee(),this.mutatedKeys=Ee(),this.Gu=Hx(e),this.Qu=new ll(this.Gu)}get ju(){return this.qu}Wu(e,n){const r=n?n.zu:new m1,i=n?n.Qu:this.Qu;let s=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1;const u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,c=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((d,f)=>{const g=i.get(d),v=Mh(this.query,f)?f:null,w=!!g&&this.mutatedKeys.has(g.key),T=!!v&&(v.hasLocalMutations||this.mutatedKeys.has(v.key)&&v.hasCommittedMutations);let C=!1;g&&v?g.data.isEqual(v.data)?w!==T&&(r.track({type:3,doc:v}),C=!0):this.Hu(g,v)||(r.track({type:2,doc:v}),C=!0,(u&&this.Gu(v,u)>0||c&&this.Gu(v,c)<0)&&(a=!0)):!g&&v?(r.track({type:0,doc:v}),C=!0):g&&!v&&(r.track({type:1,doc:g}),C=!0,(u||c)&&(a=!0)),C&&(v?(o=o.add(v),s=T?s.add(d):s.delete(d)):(o=o.delete(d),s=s.delete(d)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const d=this.query.limitType==="F"?o.last():o.first();o=o.delete(d.key),s=s.delete(d.key),r.track({type:1,doc:d})}return{Qu:o,zu:r,$i:a,mutatedKeys:s}}Hu(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r){const i=this.Qu;this.Qu=e.Qu,this.mutatedKeys=e.mutatedKeys;const s=e.zu.Eu();s.sort((c,d)=>function(f,g){const v=w=>{switch(w){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ee()}};return v(f)-v(g)}(c.type,d.type)||this.Gu(c.doc,d.doc)),this.Ju(r);const o=n?this.Yu():[],a=this.Ku.size===0&&this.current?1:0,u=a!==this.Uu;return this.Uu=a,s.length!==0||u?{snapshot:new Pl(this.query,e.Qu,i,s,e.mutatedKeys,a===0,u,!1,!!r&&r.resumeToken.approximateByteSize()>0),Xu:o}:{Xu:o}}bu(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Qu:this.Qu,zu:new m1,mutatedKeys:this.mutatedKeys,$i:!1},!1)):{Xu:[]}}Zu(e){return!this.qu.has(e)&&!!this.Qu.has(e)&&!this.Qu.get(e).hasLocalMutations}Ju(e){e&&(e.addedDocuments.forEach(n=>this.qu=this.qu.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.qu=this.qu.delete(n)),this.current=e.current)}Yu(){if(!this.current)return[];const e=this.Ku;this.Ku=Ee(),this.Qu.forEach(r=>{this.Zu(r.key)&&(this.Ku=this.Ku.add(r.key))});const n=[];return e.forEach(r=>{this.Ku.has(r)||n.push(new ZA(r))}),this.Ku.forEach(r=>{e.has(r)||n.push(new JA(r))}),n}tc(e){this.qu=e.Hi,this.Ku=Ee();const n=this.Wu(e.documents);return this.applyChanges(n,!0)}ec(){return Pl.fromInitialDocuments(this.query,this.Qu,this.mutatedKeys,this.Uu===0,this.hasCachedResults)}}class YH{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class KH{constructor(e){this.key=e,this.nc=!1}}class QH{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.sc={},this.ic=new Zs(a=>qx(a),Ph),this.rc=new Map,this.oc=new Set,this.uc=new Dt(H.comparator),this.cc=new Map,this.ac=new U0,this.hc={},this.lc=new Map,this.fc=ta.vn(),this.onlineState="Unknown",this.dc=void 0}get isPrimaryClient(){return this.dc===!0}}async function XH(t,e){const n=nI(t);let r,i;const s=n.ic.get(e);if(s)r=s.targetId,n.sharedClientState.addLocalQueryTarget(r),i=s.view.ec();else{const o=await Rl(n.localStore,Bn(e));n.isPrimaryClient&&Pm(n.remoteStore,o);const a=n.sharedClientState.addLocalQueryTarget(o.targetId);r=o.targetId,i=await J0(n,e,r,a==="current",o.resumeToken)}return i}async function J0(t,e,n,r,i){t._c=(f,g,v)=>async function(w,T,C,I){let _=T.view.Wu(C);_.$i&&(_=await vp(w.localStore,T.query,!1).then(({documents:O})=>T.view.Wu(O,_)));const E=I&&I.targetChanges.get(T.targetId),b=T.view.applyChanges(_,w.isPrimaryClient,E);return i_(w,T.targetId,b.Xu),b.snapshot}(t,f,g,v);const s=await vp(t.localStore,e,!0),o=new eR(e,s.Hi),a=o.Wu(s.documents),u=Uh.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),c=o.applyChanges(a,t.isPrimaryClient,u);i_(t,n,c.Xu);const d=new YH(e,n,o);return t.ic.set(e,d),t.rc.has(n)?t.rc.get(n).push(e):t.rc.set(n,[e]),c.snapshot}async function JH(t,e){const n=Y(t),r=n.ic.get(e),i=n.rc.get(r.targetId);if(i.length>1)return n.rc.set(r.targetId,i.filter(s=>!Ph(s,e))),void n.ic.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)||await Ol(n.localStore,r.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(r.targetId),sh(n.remoteStore,r.targetId),Ml(n,r.targetId)}).catch(Xs)):(Ml(n,r.targetId),await Ol(n.localStore,r.targetId,!0))}async function ZH(t,e,n){const r=rI(t);try{const i=await function(s,o){const a=Y(s),u=pt.now(),c=o.reduce((g,v)=>g.add(v.key),Ee());let d,f;return a.persistence.runTransaction("Locally write mutations","readwrite",g=>{let v=tr(),w=Ee();return a.Gi.getEntries(g,c).next(T=>{v=T,v.forEach((C,I)=>{I.isValidDocument()||(w=w.add(C))})}).next(()=>a.localDocuments.getOverlayedDocuments(g,v)).next(T=>{d=T;const C=[];for(const I of o){const _=aG(I,d.get(I.key).overlayedDocument);_!=null&&C.push(new Gi(I.key,_,jx(_.value.mapValue),ft.exists(!0)))}return a.mutationQueue.addMutationBatch(g,u,C,o)}).next(T=>{f=T;const C=T.applyToLocalDocumentSet(d,w);return a.documentOverlayCache.saveOverlays(g,T.batchId,C)})}).then(()=>({batchId:f.batchId,changes:oA(d)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(s,o,a){let u=s.hc[s.currentUser.toKey()];u||(u=new Dt(ye)),u=u.insert(o,a),s.hc[s.currentUser.toKey()]=u}(r,i.batchId,n),await Yi(r,i.changes),await ru(r.remoteStore)}catch(i){const s=su(i,"Failed to persist write");n.reject(s)}}async function tR(t,e){const n=Y(t);try{const r=await _H(n.localStore,e);e.targetChanges.forEach((i,s)=>{const o=n.cc.get(s);o&&(ie(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.nc=!0:i.modifiedDocuments.size>0?ie(o.nc):i.removedDocuments.size>0&&(ie(o.nc),o.nc=!1))}),await Yi(n,r,e)}catch(r){await Xs(r)}}function y1(t,e,n){const r=Y(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.ic.forEach((s,o)=>{const a=o.view.bu(e);a.snapshot&&i.push(a.snapshot)}),function(s,o){const a=Y(s);a.onlineState=o;let u=!1;a.queries.forEach((c,d)=>{for(const f of d.listeners)f.bu(o)&&(u=!0)}),u&&Q0(a)}(r.eventManager,e),i.length&&r.sc.Wo(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function eY(t,e,n){const r=Y(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.cc.get(e),s=i&&i.key;if(s){let o=new Dt(H.comparator);o=o.insert(s,it.newNoDocument(s,le.min()));const a=Ee().add(s),u=new Fh(le.min(),new Map,new Ge(ye),o,a);await tR(r,u),r.uc=r.uc.remove(s),r.cc.delete(e),tI(r)}else await Ol(r.localStore,e,!1).then(()=>Ml(r,e,n)).catch(Xs)}async function tY(t,e){const n=Y(t),r=e.batch.batchId;try{const i=await vH(n.localStore,e);eI(n,r,null),Z0(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Yi(n,i)}catch(i){await Xs(i)}}async function nY(t,e,n){const r=Y(t);try{const i=await function(s,o){const a=Y(s);return a.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let c;return a.mutationQueue.lookupMutationBatch(u,o).next(d=>(ie(d!==null),c=d.keys(),a.mutationQueue.removeMutationBatch(u,d))).next(()=>a.mutationQueue.performConsistencyCheck(u)).next(()=>a.documentOverlayCache.removeOverlaysForBatchId(u,c,o)).next(()=>a.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,c)).next(()=>a.localDocuments.getDocuments(u,c))})}(r.localStore,e);eI(r,e,n),Z0(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Yi(r,i)}catch(i){await Xs(i)}}async function rY(t,e){const n=Y(t);Hi(n.remoteStore)||F("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=await function(s){const o=Y(s);return o.persistence.runTransaction("Get highest unacknowledged batch id","readonly",a=>o.mutationQueue.getHighestUnacknowledgedBatchId(a))}(n.localStore);if(r===-1)return void e.resolve();const i=n.lc.get(r)||[];i.push(e),n.lc.set(r,i)}catch(r){const i=su(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}}function Z0(t,e){(t.lc.get(e)||[]).forEach(n=>{n.resolve()}),t.lc.delete(e)}function eI(t,e,n){const r=Y(t);let i=r.hc[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.hc[r.currentUser.toKey()]=i}}function Ml(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.rc.get(e))t.ic.delete(r),n&&t.sc.wc(r,n);t.rc.delete(e),t.isPrimaryClient&&t.ac.ls(e).forEach(r=>{t.ac.containsKey(r)||nR(t,r)})}function nR(t,e){t.oc.delete(e.path.canonicalString());const n=t.uc.get(e);n!==null&&(sh(t.remoteStore,n),t.uc=t.uc.remove(e),t.cc.delete(n),tI(t))}function i_(t,e,n){for(const r of n)r instanceof JA?(t.ac.addReference(r.key,e),iY(t,r)):r instanceof ZA?(F("SyncEngine","Document no longer in limbo: "+r.key),t.ac.removeReference(r.key,e),t.ac.containsKey(r.key)||nR(t,r.key)):ee()}function iY(t,e){const n=e.key,r=n.path.canonicalString();t.uc.get(n)||t.oc.has(r)||(F("SyncEngine","New document in limbo: "+n),t.oc.add(r),tI(t))}function tI(t){for(;t.oc.size>0&&t.uc.size<t.maxConcurrentLimboResolutions;){const e=t.oc.values().next().value;t.oc.delete(e);const n=new H(Me.fromString(e)),r=t.fc.next();t.cc.set(r,new KH(n)),t.uc=t.uc.insert(n,r),Pm(t.remoteStore,new As(Bn(Zl(n.path)),r,2,Zn.at))}}async function Yi(t,e,n){const r=Y(t),i=[],s=[],o=[];r.ic.isEmpty()||(r.ic.forEach((a,u)=>{o.push(r._c(u,e,n).then(c=>{if((c||n)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(u.targetId,c!=null&&c.fromCache?"not-current":"current"),c){i.push(c);const d=B0.Ci(u.targetId,c);s.push(d)}}))}),await Promise.all(o),r.sc.Wo(i),await async function(a,u){const c=Y(a);try{await c.persistence.runTransaction("notifyLocalViewChanges","readwrite",d=>N.forEach(u,f=>N.forEach(f.Si,g=>c.persistence.referenceDelegate.addReference(d,f.targetId,g)).next(()=>N.forEach(f.Di,g=>c.persistence.referenceDelegate.removeReference(d,f.targetId,g)))))}catch(d){if(!Js(d))throw d;F("LocalStore","Failed to update sequence numbers: "+d)}for(const d of u){const f=d.targetId;if(!d.fromCache){const g=c.qi.get(f),v=g.snapshotVersion,w=g.withLastLimboFreeSnapshotVersion(v);c.qi=c.qi.insert(f,w)}}}(r.localStore,s))}async function sY(t,e){const n=Y(t);if(!n.currentUser.isEqual(e)){F("SyncEngine","User change. New user:",e.toKey());const r=await FA(n.localStore,e);n.currentUser=e,function(i,s){i.lc.forEach(o=>{o.forEach(a=>{a.reject(new M(D.CANCELLED,s))})}),i.lc.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Yi(n,r.ji)}}function oY(t,e){const n=Y(t),r=n.cc.get(e);if(r&&r.nc)return Ee().add(r.key);{let i=Ee();const s=n.rc.get(e);if(!s)return i;for(const o of s){const a=n.ic.get(o);i=i.unionWith(a.view.ju)}return i}}async function aY(t,e){const n=Y(t),r=await vp(n.localStore,e.query,!0),i=e.view.tc(r);return n.isPrimaryClient&&i_(n,e.targetId,i.Xu),i}async function lY(t,e){const n=Y(t);return BA(n.localStore,e).then(r=>Yi(n,r))}async function uY(t,e,n,r){const i=Y(t),s=await function(o,a){const u=Y(o),c=Y(u.mutationQueue);return u.persistence.runTransaction("Lookup mutation documents","readonly",d=>c.Tn(d,a).next(f=>f?u.localDocuments.getDocuments(d,f):N.resolve(null)))}(i.localStore,e);s!==null?(n==="pending"?await ru(i.remoteStore):n==="acknowledged"||n==="rejected"?(eI(i,e,r||null),Z0(i,e),function(o,a){Y(Y(o).mutationQueue).An(a)}(i.localStore,e)):ee(),await Yi(i,s)):F("SyncEngine","Cannot apply mutation batch with id: "+e)}async function cY(t,e){const n=Y(t);if(nI(n),rI(n),e===!0&&n.dc!==!0){const r=n.sharedClientState.getAllActiveQueryTargets(),i=await v1(n,r.toArray());n.dc=!0,await r_(n.remoteStore,!0);for(const s of i)Pm(n.remoteStore,s)}else if(e===!1&&n.dc!==!1){const r=[];let i=Promise.resolve();n.rc.forEach((s,o)=>{n.sharedClientState.isLocalQueryTarget(o)?r.push(o):i=i.then(()=>(Ml(n,o),Ol(n.localStore,o,!0))),sh(n.remoteStore,o)}),await i,await v1(n,r),function(s){const o=Y(s);o.cc.forEach((a,u)=>{sh(o.remoteStore,u)}),o.ac.fs(),o.cc=new Map,o.uc=new Dt(H.comparator)}(n),n.dc=!1,await r_(n.remoteStore,!1)}}async function v1(t,e,n){const r=Y(t),i=[],s=[];for(const o of e){let a;const u=r.rc.get(o);if(u&&u.length!==0){a=await Rl(r.localStore,Bn(u[0]));for(const c of u){const d=r.ic.get(c),f=await aY(r,d);f.snapshot&&s.push(f.snapshot)}}else{const c=await $A(r.localStore,o);a=await Rl(r.localStore,c),await J0(r,rR(c),o,!1,a.resumeToken)}i.push(a)}return r.sc.Wo(s),i}function rR(t){return zx(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function hY(t){const e=Y(t);return Y(Y(e.localStore).persistence).vi()}async function dY(t,e,n,r){const i=Y(t);if(i.dc)return void F("SyncEngine","Ignoring unexpected query state notification.");const s=i.rc.get(e);if(s&&s.length>0)switch(n){case"current":case"not-current":{const o=await BA(i.localStore,Gx(s[0])),a=Fh.createSynthesizedRemoteEventForCurrentChange(e,n==="current",Kt.EMPTY_BYTE_STRING);await Yi(i,o,a);break}case"rejected":await Ol(i.localStore,e,!0),Ml(i,e,r);break;default:ee()}}async function fY(t,e,n){const r=nI(t);if(r.dc){for(const i of e){if(r.rc.has(i)){F("SyncEngine","Adding an already active target "+i);continue}const s=await $A(r.localStore,i),o=await Rl(r.localStore,s);await J0(r,rR(s),o.targetId,!1,o.resumeToken),Pm(r.remoteStore,o)}for(const i of n)r.rc.has(i)&&await Ol(r.localStore,i,!1).then(()=>{sh(r.remoteStore,i),Ml(r,i)}).catch(Xs)}}function nI(t){const e=Y(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=tR.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=oY.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=eY.bind(null,e),e.sc.Wo=zH.bind(null,e.eventManager),e.sc.wc=qH.bind(null,e.eventManager),e}function rI(t){const e=Y(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=tY.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=nY.bind(null,e),e}function pY(t,e,n){const r=Y(t);(async function(i,s,o){try{const a=await s.getMetadata();if(await function(f,g){const v=Y(f),w=Ot(g.createTime);return v.persistence.runTransaction("hasNewerBundle","readonly",T=>v.Ns.getBundleMetadata(T,g.id)).then(T=>!!T&&T.createTime.compareTo(w)>=0)}(i.localStore,a))return await s.close(),o._completeWith(function(f){return{taskState:"Success",documentsLoaded:f.totalDocuments,bytesLoaded:f.totalBytes,totalDocuments:f.totalDocuments,totalBytes:f.totalBytes}}(a)),Promise.resolve(new Set);o._updateProgress(XA(a));const u=new HH(a,i.localStore,s.yt);let c=await s.mc();for(;c;){const f=await u.Fu(c);f&&o._updateProgress(f),c=await s.mc()}const d=await u.complete();return await Yi(i,d.Lu,void 0),await function(f,g){const v=Y(f);return v.persistence.runTransaction("Save bundle","readwrite",w=>v.Ns.saveBundleMetadata(w,g))}(i.localStore,a),o._completeWith(d.progress),Promise.resolve(d.Bu)}catch(a){return Go("SyncEngine",`Loading bundle failed with ${a}`),o._failWith(a),Promise.resolve(new Set)}})(r,e,n).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}class iR{constructor(){this.synchronizeTabs=!1}async initialize(e){this.yt=Vh(e.databaseInfo.databaseId),this.sharedClientState=this.gc(e),this.persistence=this.yc(e),await this.persistence.start(),this.localStore=this.Ic(e),this.gcScheduler=this.Tc(e,this.localStore),this.indexBackfillerScheduler=this.Ec(e,this.localStore)}Tc(e,n){return null}Ec(e,n){return null}Ic(e){return LA(this.persistence,new MA,e.initialUser,this.yt)}yc(e){return new PA(Om.Bs,this.yt)}gc(e){return new jA}async terminate(){this.gcScheduler&&this.gcScheduler.stop(),await this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class sR extends iR{constructor(e,n,r){super(),this.Ac=e,this.cacheSizeBytes=n,this.forceOwnership=r,this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.Ac.initialize(this,e),await rI(this.Ac.syncEngine),await ru(this.Ac.remoteStore),await this.persistence.li(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))}Ic(e){return LA(this.persistence,new MA,e.initialUser,this.yt)}Tc(e,n){const r=this.persistence.referenceDelegate.garbageCollector;return new rH(r,e.asyncQueue,n)}Ec(e,n){const r=new B4(n,this.persistence);return new $4(e.asyncQueue,r)}yc(e){const n=$0(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?Kn.withCacheSize(this.cacheSizeBytes):Kn.DEFAULT;return new V0(this.synchronizeTabs,n,e.clientId,r,e.asyncQueue,zA(),af(),this.yt,this.sharedClientState,!!this.forceOwnership)}gc(e){return new jA}}class mY extends sR{constructor(e,n){super(e,n,!1),this.Ac=e,this.cacheSizeBytes=n,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const n=this.Ac.syncEngine;this.sharedClientState instanceof dy&&(this.sharedClientState.syncEngine={Fr:uY.bind(null,n),$r:dY.bind(null,n),Br:fY.bind(null,n),vi:hY.bind(null,n),Mr:lY.bind(null,n)},await this.sharedClientState.start()),await this.persistence.li(async r=>{await cY(this.Ac.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())})}gc(e){const n=zA();if(!dy.C(n))throw new M(D.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=$0(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new dy(n,e.asyncQueue,r,e.clientId,e.initialUser)}}class iI{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>y1(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=sY.bind(null,this.syncEngine),await r_(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new jH}createDatastore(e){const n=Vh(e.databaseInfo.databaseId),r=(i=e.databaseInfo,new CH(i));var i;return function(s,o,a,u){return new bH(s,o,a,u)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return n=this.localStore,r=this.datastore,i=e.asyncQueue,s=a=>y1(this.syncEngine,a,0),o=f1.C()?new f1:new SH,new RH(n,r,i,s,o);var n,r,i,s,o}createSyncEngine(e,n){return function(r,i,s,o,a,u,c){const d=new QH(r,i,s,o,a,u);return c&&(d.dc=!0),d}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}terminate(){return async function(e){const n=Y(e);F("RemoteStore","RemoteStore shutting down."),n._u.add(5),await nu(n),n.mu.shutdown(),n.gu.set("Unknown")}(this.remoteStore)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sI(t,e,n){if(!n)throw new M(D.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function oR(t,e,n,r){if(e===!0&&r===!0)throw new M(D.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function _1(t){if(!H.isDocumentKey(t))throw new M(D.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function w1(t){if(H.isDocumentKey(t))throw new M(D.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Mm(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(n){return n.constructor?n.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":ee()}function xe(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new M(D.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Mm(t);throw new M(D.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function aR(t,e){if(e<=0)throw new M(D.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I1=new Map;class E1{constructor(e){var n;if(e.host===void 0){if(e.ssl!==void 0)throw new M(D.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new M(D.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,oR("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bh{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new E1({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new M(D.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new M(D.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new E1(e),e.credentials!==void 0&&(this._authCredentials=function(n){if(!n)return new Tx;switch(n.type){case"gapi":const r=n.client;return new A4(r,n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new M(D.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const n=I1.get(e);n&&(F("ComponentProvider","Removing Datastore"),I1.delete(e),n.terminate())}(this),Promise.resolve()}}function lR(t,e,n,r={}){var i;const s=(t=xe(t,Bh))._getSettings();if(s.host!=="firestore.googleapis.com"&&s.host!==e&&Go("Host has been set in both settings() and useEmulator(), emulator host will be used"),t._setSettings(Object.assign(Object.assign({},s),{host:`${e}:${n}`,ssl:!1})),r.mockUserToken){let o,a;if(typeof r.mockUserToken=="string")o=r.mockUserToken,a=nn.MOCK_USER;else{o=HC(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);const u=r.mockUserToken.sub||r.mockUserToken.user_id;if(!u)throw new M(D.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");a=new nn(u)}t._authCredentials=new D4(new Sx(o,a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ct{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Wr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Ct(this.firestore,e,this._key)}}class on{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new on(this.firestore,e,this._query)}}class Wr extends on{constructor(e,n,r){super(e,n,Zl(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Ct(this.firestore,null,new H(e))}withConverter(e){return new Wr(this.firestore,e,this._path)}}function gY(t,e,...n){if(t=te(t),sI("collection","path",e),t instanceof Bh){const r=Me.fromString(e,...n);return w1(r),new Wr(t,null,r)}{if(!(t instanceof Ct||t instanceof Wr))throw new M(D.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Me.fromString(e,...n));return w1(r),new Wr(t.firestore,null,r)}}function yY(t,e){if(t=xe(t,Bh),sI("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new M(D.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new on(t,null,function(n){return new qi(Me.emptyPath(),n)}(e))}function uR(t,e,...n){if(t=te(t),arguments.length===1&&(e=Cx.R()),sI("doc","path",e),t instanceof Bh){const r=Me.fromString(e,...n);return _1(r),new Ct(t,null,new H(r))}{if(!(t instanceof Ct||t instanceof Wr))throw new M(D.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Me.fromString(e,...n));return _1(r),new Ct(t.firestore,t instanceof Wr?t.converter:null,new H(r))}}function vY(t,e){return t=te(t),e=te(e),(t instanceof Ct||t instanceof Wr)&&(e instanceof Ct||e instanceof Wr)&&t.firestore===e.firestore&&t.path===e.path&&t.converter===e.converter}function oI(t,e){return t=te(t),e=te(e),t instanceof on&&e instanceof on&&t.firestore===e.firestore&&Ph(t._query,e._query)&&t.converter===e.converter}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S1(t,e=10240){let n=0;return{async read(){if(n<t.byteLength){const r={value:t.slice(n,n+e),done:!1};return n+=e,r}return{done:!0}},async cancel(){},releaseLock(){},closed:Promise.reject("unimplemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lm{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Rc(this.observer.next,e)}error(e){this.observer.error?this.Rc(this.observer.error,e):Rt("Uncaught Error in snapshot listener:",e.toString())}bc(){this.muted=!0}Rc(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _Y{constructor(e,n){this.Pc=e,this.yt=n,this.metadata=new Gt,this.buffer=new Uint8Array,this.vc=new TextDecoder("utf-8"),this.Vc().then(r=>{r&&r.Ou()?this.metadata.resolve(r.ku.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(r==null?void 0:r.ku)}`))},r=>this.metadata.reject(r))}close(){return this.Pc.cancel()}async getMetadata(){return this.metadata.promise}async mc(){return await this.getMetadata(),this.Vc()}async Vc(){const e=await this.Sc();if(e===null)return null;const n=this.vc.decode(e),r=Number(n);isNaN(r)&&this.Dc(`length string (${n}) is not valid number`);const i=await this.Cc(r);return new GH(JSON.parse(i),e.length+r)}xc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}async Sc(){for(;this.xc()<0&&!await this.Nc(););if(this.buffer.length===0)return null;const e=this.xc();e<0&&this.Dc("Reached the end of bundle when a length string is expected.");const n=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),n}async Cc(e){for(;this.buffer.length<e;)await this.Nc()&&this.Dc("Reached the end of bundle when more is expected.");const n=this.vc.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),n}Dc(e){throw this.Pc.cancel(),new Error(`Invalid bundle format: ${e}`)}async Nc(){const e=await this.Pc.read();if(!e.done){const n=new Uint8Array(this.buffer.length+e.value.length);n.set(this.buffer),n.set(e.value,this.buffer.length),this.buffer=n}return e.done}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wY{constructor(){this.type="AggregateField"}}class cR{constructor(e,n){this._data=n,this.type="AggregateQuerySnapshot",this.query=e}data(){return this._data}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IY{constructor(e,n,r){this.query=e,this.datastore=n,this.userDataWriter=r}run(){return xH(this.datastore,this.query._query).then(e=>{ie(e[0]!==void 0);const n=Object.entries(e[0]).filter(([r,i])=>r==="count_alias").map(([r,i])=>this.userDataWriter.convertValue(i))[0];return ie(typeof n=="number"),Promise.resolve(new cR(this.query,{count:n}))})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EY{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw new M(D.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const n=await async function(r,i){const s=Y(r),o=rh(s.yt)+"/documents",a={documents:i.map(f=>nh(s.yt,f))},u=await s._o("BatchGetDocuments",o,a,i.length),c=new Map;u.forEach(f=>{const g=_G(s.yt,f);c.set(g.key.toString(),g)});const d=[];return i.forEach(f=>{const g=c.get(f.toString());ie(!!g),d.push(g)}),d}(this.datastore,e);return n.forEach(r=>this.recordVersion(r)),n}set(e,n){this.write(n.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,n){try{this.write(n.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new tu(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastWriteError)throw this.lastWriteError;const e=this.readVersions;this.mutations.forEach(n=>{e.delete(n.key.toString())}),e.forEach((n,r)=>{const i=H.fromPath(r);this.mutations.push(new b0(i,this.precondition(i)))}),await async function(n,r){const i=Y(n),s=rh(i.yt)+"/documents",o={writes:r.map(a=>ih(i.yt,a))};await i.ao("Commit",s,o)}(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let n;if(e.isFoundDocument())n=e.version;else{if(!e.isNoDocument())throw ee();n=le.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!n.isEqual(r))throw new M(D.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),n)}precondition(e){const n=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&n?n.isEqual(le.min())?ft.exists(!1):ft.updateTime(n):ft.none()}preconditionForUpdate(e){const n=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&n){if(n.isEqual(le.min()))throw new M(D.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return ft.updateTime(n)}return ft.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SY{constructor(e,n,r,i,s){this.asyncQueue=e,this.datastore=n,this.options=r,this.updateFunction=i,this.deferred=s,this.kc=r.maxAttempts,this.xo=new j0(this.asyncQueue,"transaction_retry")}run(){this.kc-=1,this.Oc()}Oc(){this.xo.Ro(async()=>{const e=new EY(this.datastore),n=this.Mc(e);n&&n.then(r=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(r)}).catch(i=>{this.Fc(i)}))}).catch(r=>{this.Fc(r)})})}Mc(e){try{const n=this.updateFunction(e);return!Rh(n)&&n.catch&&n.then?n:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(n){return this.deferred.reject(n),null}}Fc(e){this.kc>0&&this.$c(e)?(this.kc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Oc(),Promise.resolve()))):this.deferred.reject(e)}$c(e){if(e.name==="FirebaseError"){const n=e.code;return n==="aborted"||n==="failed-precondition"||n==="already-exists"||!rA(n)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TY{constructor(e,n,r,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=nn.UNAUTHENTICATED,this.clientId=Cx.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,async s=>{F("FirestoreClient","Received user=",s.uid),await this.authCredentialListener(s),this.user=s}),this.appCheckCredentials.start(r,s=>(F("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}async getConfiguration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new M(D.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Gt;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this.onlineComponents&&await this.onlineComponents.terminate(),this.offlineComponents&&await this.offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=su(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function hR(t,e){t.asyncQueue.verifyOperationInProgress(),F("FirestoreClient","Initializing OfflineComponentProvider");const n=await t.getConfiguration();await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await FA(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t.offlineComponents=e}async function dR(t,e){t.asyncQueue.verifyOperationInProgress();const n=await aI(t);F("FirestoreClient","Initializing OnlineComponentProvider");const r=await t.getConfiguration();await e.initialize(n,r),t.setCredentialChangeListener(i=>p1(e.remoteStore,i)),t.setAppCheckTokenChangeListener((i,s)=>p1(e.remoteStore,s)),t.onlineComponents=e}async function aI(t){return t.offlineComponents||(F("FirestoreClient","Using default OfflineComponentProvider"),await hR(t,new iR)),t.offlineComponents}async function Fm(t){return t.onlineComponents||(F("FirestoreClient","Using default OnlineComponentProvider"),await dR(t,new iI)),t.onlineComponents}function fR(t){return aI(t).then(e=>e.persistence)}function Um(t){return aI(t).then(e=>e.localStore)}function lI(t){return Fm(t).then(e=>e.remoteStore)}function uI(t){return Fm(t).then(e=>e.syncEngine)}function pR(t){return Fm(t).then(e=>e.datastore)}async function Ll(t){const e=await Fm(t),n=e.eventManager;return n.onListen=XH.bind(null,e.syncEngine),n.onUnlisten=JH.bind(null,e.syncEngine),n}function kY(t){return t.asyncQueue.enqueue(async()=>{const e=await fR(t),n=await lI(t);return e.setNetworkEnabled(!0),function(r){const i=Y(r);return i._u.delete(0),$h(i)}(n)})}function CY(t){return t.asyncQueue.enqueue(async()=>{const e=await fR(t),n=await lI(t);return e.setNetworkEnabled(!1),async function(r){const i=Y(r);i._u.add(0),await nu(i),i.gu.set("Offline")}(n)})}function NY(t,e){const n=new Gt;return t.asyncQueue.enqueueAndForget(async()=>async function(r,i,s){try{const o=await function(a,u){const c=Y(a);return c.persistence.runTransaction("read document","readonly",d=>c.localDocuments.getDocument(d,u))}(r,i);o.isFoundDocument()?s.resolve(o):o.isNoDocument()?s.resolve(null):s.reject(new M(D.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(o){const a=su(o,`Failed to get document '${i} from cache`);s.reject(a)}}(await Um(t),e,n)),n.promise}function mR(t,e,n={}){const r=new Gt;return t.asyncQueue.enqueueAndForget(async()=>function(i,s,o,a,u){const c=new Lm({next:f=>{s.enqueueAndForget(()=>K0(i,d));const g=f.docs.has(o);!g&&f.fromCache?u.reject(new M(D.UNAVAILABLE,"Failed to get document because the client is offline.")):g&&f.fromCache&&a&&a.source==="server"?u.reject(new M(D.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(f)},error:f=>u.reject(f)}),d=new X0(Zl(o.path),c,{includeMetadataChanges:!0,Nu:!0});return Y0(i,d)}(await Ll(t),t.asyncQueue,e,n,r)),r.promise}function DY(t,e){const n=new Gt;return t.asyncQueue.enqueueAndForget(async()=>async function(r,i,s){try{const o=await vp(r,i,!0),a=new eR(i,o.Hi),u=a.Wu(o.documents),c=a.applyChanges(u,!1);s.resolve(c.snapshot)}catch(o){const a=su(o,`Failed to execute query '${i} against cache`);s.reject(a)}}(await Um(t),e,n)),n.promise}function gR(t,e,n={}){const r=new Gt;return t.asyncQueue.enqueueAndForget(async()=>function(i,s,o,a,u){const c=new Lm({next:f=>{s.enqueueAndForget(()=>K0(i,d)),f.fromCache&&a.source==="server"?u.reject(new M(D.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(f)},error:f=>u.reject(f)}),d=new X0(o,c,{includeMetadataChanges:!0,Nu:!0});return Y0(i,d)}(await Ll(t),t.asyncQueue,e,n,r)),r.promise}function bY(t,e){const n=new Lm(e);return t.asyncQueue.enqueueAndForget(async()=>function(r,i){Y(r).Ru.add(i),i.next()}(await Ll(t),n)),()=>{n.bc(),t.asyncQueue.enqueueAndForget(async()=>function(r,i){Y(r).Ru.delete(i)}(await Ll(t),n))}}function xY(t,e,n,r){const i=function(s,o){let a;return a=typeof s=="string"?new TextEncoder().encode(s):s,function(u,c){return new _Y(u,c)}(function(u,c){if(u instanceof Uint8Array)return S1(u,c);if(u instanceof ArrayBuffer)return S1(new Uint8Array(u),c);if(u instanceof ReadableStream)return u.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(a),o)}(n,Vh(e));t.asyncQueue.enqueueAndForget(async()=>{pY(await uI(t),i,r)})}function AY(t,e){return t.asyncQueue.enqueue(async()=>function(n,r){const i=Y(n);return i.persistence.runTransaction("Get named query","readonly",s=>i.Ns.getNamedQuery(s,r))}(await Um(t),e))}class RY{constructor(){this.Bc=Promise.resolve(),this.Lc=[],this.qc=!1,this.Uc=[],this.Kc=null,this.Gc=!1,this.Qc=!1,this.jc=[],this.xo=new j0(this,"async_queue_retry"),this.Wc=()=>{const n=af();n&&F("AsyncQueue","Visibility state changed to "+n.visibilityState),this.xo.Po()};const e=af();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.Wc)}get isShuttingDown(){return this.qc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.zc(),this.Hc(e)}enterRestrictedMode(e){if(!this.qc){this.qc=!0,this.Qc=e||!1;const n=af();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Wc)}}enqueue(e){if(this.zc(),this.qc)return new Promise(()=>{});const n=new Gt;return this.Hc(()=>this.qc&&this.Qc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Lc.push(e),this.Jc()))}async Jc(){if(this.Lc.length!==0){try{await this.Lc[0](),this.Lc.shift(),this.xo.reset()}catch(e){if(!Js(e))throw e;F("AsyncQueue","Operation failed with retryable error: "+e)}this.Lc.length>0&&this.xo.Ro(()=>this.Jc())}}Hc(e){const n=this.Bc.then(()=>(this.Gc=!0,e().catch(r=>{this.Kc=r,this.Gc=!1;const i=function(s){let o=s.message||"";return s.stack&&(o=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),o}(r);throw Rt("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.Gc=!1,r))));return this.Bc=n,n}enqueueAfterDelay(e,n,r){this.zc(),this.jc.indexOf(e)>-1&&(n=0);const i=H0.createAndSchedule(this,e,n,r,s=>this.Yc(s));return this.Uc.push(i),i}zc(){this.Kc&&ee()}verifyOperationInProgress(){}async Xc(){let e;do e=this.Bc,await e;while(e!==this.Bc)}Zc(e){for(const n of this.Uc)if(n.timerId===e)return!0;return!1}ta(e){return this.Xc().then(()=>{this.Uc.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Uc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Xc()})}ea(e){this.jc.push(e)}Yc(e){const n=this.Uc.indexOf(e);this.Uc.splice(n,1)}}function s_(t){return function(e,n){if(typeof e!="object"||e===null)return!1;const r=e;for(const i of n)if(i in r&&typeof r[i]=="function")return!0;return!1}(t,["next","error","complete"])}class yR{constructor(){this._progressObserver={},this._taskCompletionResolver=new Gt,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,n,r){this._progressObserver={next:e,error:n,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,n){return this._taskCompletionResolver.promise.then(e,n)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OY=-1;class Je extends Bh{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new RY,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||vR(this),this._firestoreClient.terminate()}}function PY(t,e,n){n||(n="(default)");const r=Bl(t,"firestore");if(r.isInitialized(n)){const i=r.getImmediate({identifier:n}),s=r.getOptions(n);if(yl(s,e))return i;throw new M(D.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(e.cacheSizeBytes!==void 0&&e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new M(D.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return r.initialize({options:e,instanceIdentifier:n})}function MY(t,e){const n=typeof t=="object"?t:iw(),r=typeof t=="string"?t:e||"(default)",i=Bl(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const s=qC("firestore");s&&lR(i,...s)}return i}function Pt(t){return t._firestoreClient||vR(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function vR(t){var e;const n=t._freezeSettings(),r=function(i,s,o,a){return new W4(i,s,o,a.host,a.ssl,a.experimentalForceLongPolling,a.experimentalAutoDetectLongPolling,a.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,n);t._firestoreClient=new TY(t._authCredentials,t._appCheckCredentials,t._queue,r)}function LY(t,e){wR(t=xe(t,Je));const n=Pt(t),r=t._freezeSettings(),i=new iI;return _R(n,i,new sR(i,r.cacheSizeBytes,e==null?void 0:e.forceOwnership))}function FY(t){wR(t=xe(t,Je));const e=Pt(t),n=t._freezeSettings(),r=new iI;return _R(e,r,new mY(r,n.cacheSizeBytes))}function _R(t,e,n){const r=new Gt;return t.asyncQueue.enqueue(async()=>{try{await hR(t,n),await dR(t,e),r.resolve()}catch(i){const s=i;if(!function(o){return o.name==="FirebaseError"?o.code===D.FAILED_PRECONDITION||o.code===D.UNIMPLEMENTED:typeof DOMException<"u"&&o instanceof DOMException?o.code===22||o.code===20||o.code===11:!0}(s))throw s;Go("Error enabling offline persistence. Falling back to persistence disabled: "+s),r.reject(s)}}).then(()=>r.promise)}function UY(t){if(t._initialized&&!t._terminated)throw new M(D.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Gt;return t._queue.enqueueAndForgetEvenWhileRestricted(async()=>{try{await async function(n){if(!Ur.C())return Promise.resolve();const r=n+"main";await Ur.delete(r)}($0(t._databaseId,t._persistenceKey)),e.resolve()}catch(n){e.reject(n)}}),e.promise}function VY(t){return function(e){const n=new Gt;return e.asyncQueue.enqueueAndForget(async()=>rY(await uI(e),n)),n.promise}(Pt(t=xe(t,Je)))}function $Y(t){return kY(Pt(t=xe(t,Je)))}function BY(t){return CY(Pt(t=xe(t,Je)))}function WY(t){return hV(t.app,"firestore",t._databaseId.database),t._delete()}function jY(t,e){const n=Pt(t=xe(t,Je)),r=new yR;return xY(n,t._databaseId,e,r),r}function zY(t,e){return AY(Pt(t=xe(t,Je)),e).then(n=>n?new on(t,null,n.query):null)}function wR(t){if(t._initialized||t._terminated)throw new M(D.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zs{constructor(e){this._byteString=e}static fromBase64String(e){try{return new zs(Kt.fromBase64String(e))}catch(n){throw new M(D.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new zs(Kt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eo{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new M(D.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Tt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}function qY(){return new eo("__name__")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class to{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vm{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new M(D.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new M(D.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return ye(this._lat,e._lat)||ye(this._long,e._long)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GY=/^__.*__$/;class HY{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Gi(e,this.data,this.fieldMask,n,this.fieldTransforms):new eu(e,this.data,n,this.fieldTransforms)}}class IR{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Gi(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function ER(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ee()}}class $m{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.yt=r,this.ignoreUndefinedProperties=i,s===void 0&&this.na(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get sa(){return this.settings.sa}ia(e){return new $m(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.yt,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ra(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.ia({path:r,oa:!1});return i.ua(e),i}ca(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.ia({path:r,oa:!1});return i.na(),i}aa(e){return this.ia({path:void 0,oa:!0})}ha(e){return Ep(e,this.settings.methodName,this.settings.la||!1,this.path,this.settings.fa)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}na(){if(this.path)for(let e=0;e<this.path.length;e++)this.ua(this.path.get(e))}ua(e){if(e.length===0)throw this.ha("Document fields must not be empty");if(ER(this.sa)&&GY.test(e))throw this.ha('Document fields cannot begin and end with "__"')}}class YY{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.yt=r||Vh(e)}da(e,n,r,i=!1){return new $m({sa:e,methodName:n,fa:r,path:Tt.emptyPath(),oa:!1,la:i},this.databaseId,this.yt,this.ignoreUndefinedProperties)}}function da(t){const e=t._freezeSettings(),n=Vh(t._databaseId);return new YY(t._databaseId,!!e.ignoreUndefinedProperties,n)}function Bm(t,e,n,r,i,s={}){const o=t.da(s.merge||s.mergeFields?2:0,e,n,i);fI("Data must be an object, but it was:",o,r);const a=kR(r,o);let u,c;if(s.merge)u=new er(o.fieldMask),c=o.fieldTransforms;else if(s.mergeFields){const d=[];for(const f of s.mergeFields){const g=o_(e,f,n);if(!o.contains(g))throw new M(D.INVALID_ARGUMENT,`Field '${g}' is specified in your field mask but missing from your input data.`);NR(d,g)||d.push(g)}u=new er(d),c=o.fieldTransforms.filter(f=>u.covers(f.field))}else u=null,c=o.fieldTransforms;return new HY(new fn(a),u,c)}class Wh extends to{_toFieldTransform(e){if(e.sa!==2)throw e.sa===1?e.ha(`${this._methodName}() can only appear at the top level of your update data`):e.ha(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Wh}}function SR(t,e,n){return new $m({sa:3,fa:e.settings.fa,methodName:t._methodName,oa:n},e.databaseId,e.yt,e.ignoreUndefinedProperties)}class cI extends to{_toFieldTransform(e){return new Lh(e.path,new bl)}isEqual(e){return e instanceof cI}}class KY extends to{constructor(e,n){super(e),this._a=n}_toFieldTransform(e){const n=SR(this,e,!0),r=this._a.map(s=>fa(s,n)),i=new Xo(r);return new Lh(e.path,i)}isEqual(e){return this===e}}class QY extends to{constructor(e,n){super(e),this._a=n}_toFieldTransform(e){const n=SR(this,e,!0),r=this._a.map(s=>fa(s,n)),i=new Jo(r);return new Lh(e.path,i)}isEqual(e){return this===e}}class XY extends to{constructor(e,n){super(e),this.wa=n}_toFieldTransform(e){const n=new xl(e.yt,Qx(e.yt,this.wa));return new Lh(e.path,n)}isEqual(e){return this===e}}function hI(t,e,n,r){const i=t.da(1,e,n);fI("Data must be an object, but it was:",i,r);const s=[],o=fn.empty();ha(r,(u,c)=>{const d=Wm(e,u,n);c=te(c);const f=i.ca(d);if(c instanceof Wh)s.push(d);else{const g=fa(c,f);g!=null&&(s.push(d),o.set(d,g))}});const a=new er(s);return new IR(o,a,i.fieldTransforms)}function dI(t,e,n,r,i,s){const o=t.da(1,e,n),a=[o_(e,r,n)],u=[i];if(s.length%2!=0)throw new M(D.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let g=0;g<s.length;g+=2)a.push(o_(e,s[g])),u.push(s[g+1]);const c=[],d=fn.empty();for(let g=a.length-1;g>=0;--g)if(!NR(c,a[g])){const v=a[g];let w=u[g];w=te(w);const T=o.ca(v);if(w instanceof Wh)c.push(v);else{const C=fa(w,T);C!=null&&(c.push(v),d.set(v,C))}}const f=new er(c);return new IR(d,f,o.fieldTransforms)}function TR(t,e,n,r=!1){return fa(n,t.da(r?4:3,e))}function fa(t,e){if(CR(t=te(t)))return fI("Unsupported field value:",e,t),kR(t,e);if(t instanceof to)return function(n,r){if(!ER(r.sa))throw r.ha(`${n._methodName}() can only be used with update() and set()`);if(!r.path)throw r.ha(`${n._methodName}() is not currently supported inside arrays`);const i=n._toFieldTransform(r);i&&r.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.oa&&e.sa!==4)throw e.ha("Nested arrays are not supported");return function(n,r){const i=[];let s=0;for(const o of n){let a=fa(o,r.aa(s));a==null&&(a={nullValue:"NULL_VALUE"}),i.push(a),s++}return{arrayValue:{values:i}}}(t,e)}return function(n,r){if((n=te(n))===null)return{nullValue:"NULL_VALUE"};if(typeof n=="number")return Qx(r.yt,n);if(typeof n=="boolean")return{booleanValue:n};if(typeof n=="string")return{stringValue:n};if(n instanceof Date){const i=pt.fromDate(n);return{timestampValue:Al(r.yt,i)}}if(n instanceof pt){const i=new pt(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:Al(r.yt,i)}}if(n instanceof Vm)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof zs)return{bytesValue:cA(r.yt,n._byteString)};if(n instanceof Ct){const i=r.databaseId,s=n.firestore._databaseId;if(!s.isEqual(i))throw r.ha(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:x0(n.firestore._databaseId||r.databaseId,n._key.path)}}throw r.ha(`Unsupported field value: ${Mm(n)}`)}(t,e)}function kR(t,e){const n={};return Rx(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ha(t,(r,i)=>{const s=fa(i,e.ra(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function CR(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof pt||t instanceof Vm||t instanceof zs||t instanceof Ct||t instanceof to)}function fI(t,e,n){if(!CR(n)||!function(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}(n)){const r=Mm(n);throw r==="an object"?e.ha(t+" a custom object"):e.ha(t+" "+r)}}function o_(t,e,n){if((e=te(e))instanceof eo)return e._internalPath;if(typeof e=="string")return Wm(t,e);throw Ep("Field path arguments must be of type string or ",t,!1,void 0,n)}const JY=new RegExp("[~\\*/\\[\\]]");function Wm(t,e,n){if(e.search(JY)>=0)throw Ep(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new eo(...e.split("."))._internalPath}catch{throw Ep(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Ep(t,e,n,r,i){const s=r&&!r.isEmpty(),o=i!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let u="";return(s||o)&&(u+=" (found",s&&(u+=` in field ${r}`),o&&(u+=` in document ${i}`),u+=")"),new M(D.INVALID_ARGUMENT,a+t+u)}function NR(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oh{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Ct(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new ZY(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(jm("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class ZY extends oh{data(){return super.data()}}function jm(t,e){return typeof e=="string"?Wm(t,e):e instanceof eo?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DR(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new M(D.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class pI{}class ou extends pI{}function e6(t,e,...n){let r=[];e instanceof pI&&r.push(e),r=r.concat(n),function(i){const s=i.filter(a=>a instanceof pa).length,o=i.filter(a=>a instanceof au).length;if(s>1||s>0&&o>0)throw new M(D.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)t=i._apply(t);return t}class au extends ou{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new au(e,n,r)}_apply(e){const n=this._parse(e);return xR(e._query,n),new on(e.firestore,e.converter,Yv(e._query,n))}_parse(e){const n=da(e.firestore);return function(i,s,o,a,u,c,d){let f;if(u.isKeyField()){if(c==="array-contains"||c==="array-contains-any")throw new M(D.INVALID_ARGUMENT,`Invalid Query. You can't perform '${c}' queries on documentId().`);if(c==="in"||c==="not-in"){k1(d,c);const g=[];for(const v of d)g.push(T1(a,i,v));f={arrayValue:{values:g}}}else f=T1(a,i,d)}else c!=="in"&&c!=="not-in"&&c!=="array-contains-any"||k1(d,c),f=TR(o,s,d,c==="in"||c==="not-in");return be.create(u,c,f)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function t6(t,e,n){const r=e,i=jm("where",t);return au._create(i,r,n)}class pa extends pI{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new pa(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:We.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(r,i){let s=r;const o=i.getFlattenedFilters();for(const a of o)xR(s,a),s=Yv(s,a)}(e._query,n),new on(e.firestore,e.converter,Yv(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function n6(...t){return t.forEach(e=>RR("or",e)),pa._create("or",t)}function r6(...t){return t.forEach(e=>RR("and",e)),pa._create("and",t)}class zm extends ou{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new zm(e,n)}_apply(e){const n=function(r,i,s){if(r.startAt!==null)throw new M(D.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(r.endAt!==null)throw new M(D.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const o=new al(i,s);return function(a,u){if(N0(a)===null){const c=Nm(a);c!==null&&AR(a,c,u.field)}}(r,o),o}(e._query,this._field,this._direction);return new on(e.firestore,e.converter,function(r,i){const s=r.explicitOrderBy.concat([i]);return new qi(r.path,r.collectionGroup,s,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,n))}}function i6(t,e="asc"){const n=e,r=jm("orderBy",t);return zm._create(r,n)}class jh extends ou{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new jh(e,n,r)}_apply(e){return new on(e.firestore,e.converter,pp(e._query,this._limit,this._limitType))}}function s6(t){return aR("limit",t),jh._create("limit",t,"F")}function o6(t){return aR("limitToLast",t),jh._create("limitToLast",t,"L")}class zh extends ou{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new zh(e,n,r)}_apply(e){const n=bR(e,this.type,this._docOrFields,this._inclusive);return new on(e.firestore,e.converter,function(r,i){return new qi(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,i,r.endAt)}(e._query,n))}}function a6(...t){return zh._create("startAt",t,!0)}function l6(...t){return zh._create("startAfter",t,!1)}class qh extends ou{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new qh(e,n,r)}_apply(e){const n=bR(e,this.type,this._docOrFields,this._inclusive);return new on(e.firestore,e.converter,function(r,i){return new qi(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,i)}(e._query,n))}}function u6(...t){return qh._create("endBefore",t,!1)}function c6(...t){return qh._create("endAt",t,!0)}function bR(t,e,n,r){if(n[0]=te(n[0]),n[0]instanceof oh)return function(i,s,o,a,u){if(!a)throw new M(D.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${o}().`);const c=[];for(const d of Mo(i))if(d.field.isKeyField())c.push(Ko(s,a.key));else{const f=a.data.field(d.field);if(k0(f))throw new M(D.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+d.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(f===null){const g=d.field.canonicalString();throw new M(D.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${g}' (used as the orderBy) does not exist.`)}c.push(f)}return new Ws(c,u)}(t._query,t.firestore._databaseId,e,n[0]._document,r);{const i=da(t.firestore);return function(s,o,a,u,c,d){const f=s.explicitOrderBy;if(c.length>f.length)throw new M(D.INVALID_ARGUMENT,`Too many arguments provided to ${u}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const g=[];for(let v=0;v<c.length;v++){const w=c[v];if(f[v].field.isKeyField()){if(typeof w!="string")throw new M(D.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${u}(), but got a ${typeof w}`);if(!D0(s)&&w.indexOf("/")!==-1)throw new M(D.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${u}() must be a plain document ID, but '${w}' contains a slash.`);const T=s.path.child(Me.fromString(w));if(!H.isDocumentKey(T))throw new M(D.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${u}() must result in a valid document path, but '${T}' is not because it contains an odd number of segments.`);const C=new H(T);g.push(Ko(o,C))}else{const T=TR(a,u,w);g.push(T)}}return new Ws(g,d)}(t._query,t.firestore._databaseId,i,e,n,r)}}function T1(t,e,n){if(typeof(n=te(n))=="string"){if(n==="")throw new M(D.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!D0(e)&&n.indexOf("/")!==-1)throw new M(D.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(Me.fromString(n));if(!H.isDocumentKey(r))throw new M(D.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Ko(t,new H(r))}if(n instanceof Ct)return Ko(t,n._key);throw new M(D.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Mm(n)}.`)}function k1(t,e){if(!Array.isArray(t)||t.length===0)throw new M(D.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(t.length>10)throw new M(D.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function xR(t,e){if(e.isInequality()){const r=Nm(t),i=e.field;if(r!==null&&!r.isEqual(i))throw new M(D.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${r.toString()}' and '${i.toString()}'`);const s=N0(t);s!==null&&AR(t,i,s)}const n=function(r,i){for(const s of r)for(const o of s.getFlattenedFilters())if(i.indexOf(o.op)>=0)return o.op;return null}(t.filters,function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new M(D.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new M(D.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}function AR(t,e,n){if(!n.isEqual(e))throw new M(D.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${n.toString()}' instead.`)}function RR(t,e){if(!(e instanceof au||e instanceof pa))throw new M(D.INVALID_ARGUMENT,`Function ${t}() requires AppliableConstraints created with a call to 'where(...)', 'or(...)', or 'and(...)'.`)}class mI{convertValue(e,n="none"){switch(Yo(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Et(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Ho(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 10:return this.convertObject(e.mapValue,n);default:throw ee()}}convertObject(e,n){const r={};return ha(e.fields,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertGeoPoint(e){return new Vm(Et(e.latitude),Et(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Px(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Zc(e));default:return null}}convertTimestamp(e){const n=$s(e);return new pt(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Me.fromString(e);ie(_A(r));const i=new Vs(r.get(1),r.get(3)),s=new H(r.popFirst(5));return i.isEqual(n)||Rt(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qm(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class h6 extends mI{constructor(e){super(),this.firestore=e}convertBytes(e){return new zs(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Ct(this.firestore,null,n)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ys{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class na extends oh{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new pc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(jm("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class pc extends na{data(e={}){return super.data(e)}}class ra{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new ys(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new pc(this._firestore,this._userDataWriter,r.key,r,new ys(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new M(D.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(r,i){if(r._snapshot.oldDocs.isEmpty()){let s=0;return r._snapshot.docChanges.map(o=>{const a=new pc(r._firestore,r._userDataWriter,o.doc.key,o.doc,new ys(r._snapshot.mutatedKeys.has(o.doc.key),r._snapshot.fromCache),r.query.converter);return o.doc,{type:"added",doc:a,oldIndex:-1,newIndex:s++}})}{let s=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(o=>i||o.type!==3).map(o=>{const a=new pc(r._firestore,r._userDataWriter,o.doc.key,o.doc,new ys(r._snapshot.mutatedKeys.has(o.doc.key),r._snapshot.fromCache),r.query.converter);let u=-1,c=-1;return o.type!==0&&(u=s.indexOf(o.doc.key),s=s.delete(o.doc.key)),o.type!==1&&(s=s.add(o.doc),c=s.indexOf(o.doc.key)),{type:d6(o.type),doc:a,oldIndex:u,newIndex:c}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function d6(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ee()}}function f6(t,e){return t instanceof na&&e instanceof na?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(t._document===null?e._document===null:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof ra&&e instanceof ra&&t._firestore===e._firestore&&oI(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function p6(t){t=xe(t,Ct);const e=xe(t.firestore,Je);return mR(Pt(e),t._key).then(n=>gI(e,t,n))}class no extends mI{constructor(e){super(),this.firestore=e}convertBytes(e){return new zs(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Ct(this.firestore,null,n)}}function m6(t){t=xe(t,Ct);const e=xe(t.firestore,Je),n=Pt(e),r=new no(e);return NY(n,t._key).then(i=>new na(e,r,t._key,i,new ys(i!==null&&i.hasLocalMutations,!0),t.converter))}function g6(t){t=xe(t,Ct);const e=xe(t.firestore,Je);return mR(Pt(e),t._key,{source:"server"}).then(n=>gI(e,t,n))}function y6(t){t=xe(t,on);const e=xe(t.firestore,Je),n=Pt(e),r=new no(e);return DR(t._query),gR(n,t._query).then(i=>new ra(e,r,t,i))}function v6(t){t=xe(t,on);const e=xe(t.firestore,Je),n=Pt(e),r=new no(e);return DY(n,t._query).then(i=>new ra(e,r,t,i))}function _6(t){t=xe(t,on);const e=xe(t.firestore,Je),n=Pt(e),r=new no(e);return gR(n,t._query,{source:"server"}).then(i=>new ra(e,r,t,i))}function w6(t,e,n){t=xe(t,Ct);const r=xe(t.firestore,Je),i=qm(t.converter,e,n);return lu(r,[Bm(da(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,ft.none())])}function I6(t,e,n,...r){t=xe(t,Ct);const i=xe(t.firestore,Je),s=da(i);let o;return o=typeof(e=te(e))=="string"||e instanceof eo?dI(s,"updateDoc",t._key,e,n,r):hI(s,"updateDoc",t._key,e),lu(i,[o.toMutation(t._key,ft.exists(!0))])}function E6(t){return lu(xe(t.firestore,Je),[new tu(t._key,ft.none())])}function S6(t,e){const n=xe(t.firestore,Je),r=uR(t),i=qm(t.converter,e);return lu(n,[Bm(da(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,ft.exists(!1))]).then(()=>r)}function T6(t,...e){var n,r,i;t=te(t);let s={includeMetadataChanges:!1},o=0;typeof e[o]!="object"||s_(e[o])||(s=e[o],o++);const a={includeMetadataChanges:s.includeMetadataChanges};if(s_(e[o])){const f=e[o];e[o]=(n=f.next)===null||n===void 0?void 0:n.bind(f),e[o+1]=(r=f.error)===null||r===void 0?void 0:r.bind(f),e[o+2]=(i=f.complete)===null||i===void 0?void 0:i.bind(f)}let u,c,d;if(t instanceof Ct)c=xe(t.firestore,Je),d=Zl(t._key.path),u={next:f=>{e[o]&&e[o](gI(c,t,f))},error:e[o+1],complete:e[o+2]};else{const f=xe(t,on);c=xe(f.firestore,Je),d=f._query;const g=new no(c);u={next:v=>{e[o]&&e[o](new ra(c,g,f,v))},error:e[o+1],complete:e[o+2]},DR(t._query)}return function(f,g,v,w){const T=new Lm(w),C=new X0(g,T,v);return f.asyncQueue.enqueueAndForget(async()=>Y0(await Ll(f),C)),()=>{T.bc(),f.asyncQueue.enqueueAndForget(async()=>K0(await Ll(f),C))}}(Pt(c),d,a,u)}function k6(t,e){return bY(Pt(t=xe(t,Je)),s_(e)?e:{next:e})}function lu(t,e){return function(n,r){const i=new Gt;return n.asyncQueue.enqueueAndForget(async()=>ZH(await uI(n),r,i)),i.promise}(Pt(t),e)}function gI(t,e,n){const r=n.docs.get(e._key),i=new no(t);return new na(t,i,e._key,r,new ys(n.hasPendingWrites,n.fromCache),e.converter)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function C6(t,e){return oI(t.query,e.query)&&yl(t.data(),e.data())}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function N6(t){const e=xe(t.firestore,Je);return function(n,r,i){const s=new Gt;return n.asyncQueue.enqueueAndForget(async()=>{try{if(Hi(await lI(n))){const o=await pR(n),a=new IY(r,o,i).run();s.resolve(a)}else s.reject(new M(D.UNAVAILABLE,"Failed to get count result because the client is offline."))}catch(o){s.reject(o)}}),s.promise}(Pt(e),t,new no(e))}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D6={maxAttempts:5};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OR{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=da(e)}set(e,n,r){this._verifyNotCommitted();const i=ds(e,this._firestore),s=qm(i.converter,n,r),o=Bm(this._dataReader,"WriteBatch.set",i._key,s,i.converter!==null,r);return this._mutations.push(o.toMutation(i._key,ft.none())),this}update(e,n,r,...i){this._verifyNotCommitted();const s=ds(e,this._firestore);let o;return o=typeof(n=te(n))=="string"||n instanceof eo?dI(this._dataReader,"WriteBatch.update",s._key,n,r,i):hI(this._dataReader,"WriteBatch.update",s._key,n),this._mutations.push(o.toMutation(s._key,ft.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=ds(e,this._firestore);return this._mutations=this._mutations.concat(new tu(n._key,ft.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new M(D.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function ds(t,e){if((t=te(t)).firestore!==e)throw new M(D.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PR extends class{constructor(e,n){this._firestore=e,this._transaction=n,this._dataReader=da(e)}get(e){const n=ds(e,this._firestore),r=new h6(this._firestore);return this._transaction.lookup([n._key]).then(i=>{if(!i||i.length!==1)return ee();const s=i[0];if(s.isFoundDocument())return new oh(this._firestore,r,s.key,s,n.converter);if(s.isNoDocument())return new oh(this._firestore,r,n._key,null,n.converter);throw ee()})}set(e,n,r){const i=ds(e,this._firestore),s=qm(i.converter,n,r),o=Bm(this._dataReader,"Transaction.set",i._key,s,i.converter!==null,r);return this._transaction.set(i._key,o),this}update(e,n,r,...i){const s=ds(e,this._firestore);let o;return o=typeof(n=te(n))=="string"||n instanceof eo?dI(this._dataReader,"Transaction.update",s._key,n,r,i):hI(this._dataReader,"Transaction.update",s._key,n),this._transaction.update(s._key,o),this}delete(e){const n=ds(e,this._firestore);return this._transaction.delete(n._key),this}}{constructor(e,n){super(e,n),this._firestore=e}get(e){const n=ds(e,this._firestore),r=new no(this._firestore);return super.get(e).then(i=>new na(this._firestore,r,n._key,i._document,new ys(!1,!1),n.converter))}}function b6(t,e,n){t=xe(t,Je);const r=Object.assign(Object.assign({},D6),n);return function(i){if(i.maxAttempts<1)throw new M(D.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(i,s,o){const a=new Gt;return i.asyncQueue.enqueueAndForget(async()=>{const u=await pR(i);new SY(i.asyncQueue,u,o,s,a).run()}),a.promise}(Pt(t),i=>e(new PR(t,i)),r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x6(){return new Wh("deleteField")}function A6(){return new cI("serverTimestamp")}function R6(...t){return new KY("arrayUnion",t)}function O6(...t){return new QY("arrayRemove",t)}function P6(t){return new XY("increment",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function M6(t){return Pt(t=xe(t,Je)),new OR(t,e=>lu(t,e))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function L6(t,e){var n;const r=Pt(t=xe(t,Je));if(!(!((n=r.offlineComponents)===null||n===void 0)&&n.indexBackfillerScheduler))return Go("Cannot enable indexes when persistence is disabled"),Promise.resolve();const i=function(s){const o=typeof s=="string"?function(u){try{return JSON.parse(u)}catch(c){throw new M(D.INVALID_ARGUMENT,"Failed to parse JSON: "+(c==null?void 0:c.message))}}(s):s,a=[];if(Array.isArray(o.indexes))for(const u of o.indexes){const c=C1(u,"collectionGroup"),d=[];if(Array.isArray(u.fields))for(const f of u.fields){const g=Wm("setIndexConfiguration",C1(f,"fieldPath"));f.arrayConfig==="CONTAINS"?d.push(new ef(g,2)):f.order==="ASCENDING"?d.push(new ef(g,0)):f.order==="DESCENDING"&&d.push(new ef(g,1))}a.push(new hp(hp.UNKNOWN_ID,c,d,Xc.empty()))}return a}(e);return Um(r).then(s=>async function(o,a){const u=Y(o),c=u.indexManager,d=[];return u.persistence.runTransaction("Configure indexes","readwrite",f=>c.getFieldIndexes(f).next(g=>function(v,w,T,C,I){v=[...v],w=[...w],v.sort(T),w.sort(T);const _=v.length,E=w.length;let b=0,O=0;for(;b<E&&O<_;){const P=T(v[O],w[b]);P<0?I(v[O++]):P>0?C(w[b++]):(b++,O++)}for(;b<E;)C(w[b++]);for(;O<_;)I(v[O++])}(g,a,L4,v=>{d.push(c.addFieldIndex(f,v))},v=>{d.push(c.deleteFieldIndex(f,v))})).next(()=>N.waitFor(d)))}(s,i))}function C1(t,e){if(typeof t[e]!="string")throw new M(D.INVALID_ARGUMENT,"Missing string value for: "+e);return t[e]}(function(t,e=!0){(function(n){Jl=n})(Wl),Wo(new Ps("firestore",(n,{instanceIdentifier:r,options:i})=>{const s=n.getProvider("app").getImmediate(),o=new Je(new b4(n.getProvider("auth-internal")),new R4(n.getProvider("app-check-internal")),function(a,u){if(!Object.prototype.hasOwnProperty.apply(a.options,["projectId"]))throw new M(D.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Vs(a.options.projectId,u)}(s,r),s);return i=Object.assign({useFetchStreams:e},i),o._setSettings(i),o},"PUBLIC").setMultipleInstances(!0)),ri(TT,"3.8.3",t),ri(TT,"3.8.3","esm2017")})();const F6=Object.freeze(Object.defineProperty({__proto__:null,AbstractUserDataWriter:mI,AggregateField:wY,AggregateQuerySnapshot:cR,Bytes:zs,CACHE_SIZE_UNLIMITED:OY,CollectionReference:Wr,DocumentReference:Ct,DocumentSnapshot:na,FieldPath:eo,FieldValue:to,Firestore:Je,FirestoreError:M,GeoPoint:Vm,LoadBundleTask:yR,Query:on,QueryCompositeFilterConstraint:pa,QueryConstraint:ou,QueryDocumentSnapshot:pc,QueryEndAtConstraint:qh,QueryFieldFilterConstraint:au,QueryLimitConstraint:jh,QueryOrderByConstraint:zm,QuerySnapshot:ra,QueryStartAtConstraint:zh,SnapshotMetadata:ys,Timestamp:pt,Transaction:PR,WriteBatch:OR,_DatabaseId:Vs,_DocumentKey:H,_EmptyAppCheckTokenProvider:O4,_EmptyAuthCredentialsProvider:Tx,_FieldPath:Tt,_cast:xe,_debugAssert:N4,_isBase64Available:j4,_logWarn:Go,_validateIsNotUsedTogether:oR,addDoc:S6,aggregateQuerySnapshotEqual:C6,and:r6,arrayRemove:O6,arrayUnion:R6,clearIndexedDbPersistence:UY,collection:gY,collectionGroup:yY,connectFirestoreEmulator:lR,deleteDoc:E6,deleteField:x6,disableNetwork:BY,doc:uR,documentId:qY,enableIndexedDbPersistence:LY,enableMultiTabIndexedDbPersistence:FY,enableNetwork:$Y,endAt:c6,endBefore:u6,ensureFirestoreConfigured:Pt,executeWrite:lu,getCountFromServer:N6,getDoc:p6,getDocFromCache:m6,getDocFromServer:g6,getDocs:y6,getDocsFromCache:v6,getDocsFromServer:_6,getFirestore:MY,increment:P6,initializeFirestore:PY,limit:s6,limitToLast:o6,loadBundle:jY,namedQuery:zY,onSnapshot:T6,onSnapshotsInSync:k6,or:n6,orderBy:i6,query:e6,queryEqual:oI,refEqual:vY,runTransaction:b6,serverTimestamp:A6,setDoc:w6,setIndexConfiguration:L6,setLogLevel:C4,snapshotEqual:f6,startAfter:l6,startAt:a6,terminate:WY,updateDoc:I6,waitForPendingWrites:VY,where:t6,writeBatch:M6},Symbol.toStringTag,{value:"Module"})),U6=x1(F6);Object.defineProperty(zi,"__esModule",{value:!0});var Cr=U6,zt=Vt;/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function MR(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(d){try{c(r.next(d))}catch(f){o(f)}}function u(d){try{c(r.throw(d))}catch(f){o(f)}}function c(d){d.done?s(d.value):i(d.value).then(a,u)}c((r=r.apply(t,e||[])).next())})}function LR(t,e){var n={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},r,i,s,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(c){return function(d){return u([c,d])}}function u(c){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,i&&(s=c[0]&2?i.return:c[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,c[1])).done)return s;switch(i=0,s&&(c=[c[0]&2,s.value]),c[0]){case 0:case 1:s=c;break;case 4:return n.label++,{value:c[1],done:!1};case 5:n.label++,i=c[1],c=[0];continue;case 7:c=n.ops.pop(),n.trys.pop();continue;default:if(s=n.trys,!(s=s.length>0&&s[s.length-1])&&(c[0]===6||c[0]===2)){n=0;continue}if(c[0]===3&&(!s||c[1]>s[0]&&c[1]<s[3])){n.label=c[1];break}if(c[0]===6&&n.label<s[1]){n.label=s[1],s=c;break}if(s&&n.label<s[2]){n.label=s[2],n.ops.push(c);break}s[2]&&n.ops.pop(),n.trys.pop();continue}c=e.call(t,n)}catch(d){c=[6,d],i=0}finally{r=s=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Ka=function(){return Ka=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},Ka.apply(this,arguments)},FR=function(t){return{loading:t==null,value:t}},V6=function(){return function(t,e){switch(e.type){case"error":return Ka(Ka({},t),{error:e.error,loading:!1,value:void 0});case"reset":return FR(e.defaultValue);case"value":return Ka(Ka({},t),{error:void 0,loading:!1,value:e.value});default:return t}}},Gm=function(t){var e=t?t():void 0,n=zt.useReducer(V6(),FR(e)),r=n[0],i=n[1],s=zt.useCallback(function(){var u=t?t():void 0;i({type:"reset",defaultValue:u})},[t]),o=zt.useCallback(function(u){i({type:"error",error:u})},[]),a=zt.useCallback(function(u){i({type:"value",value:u})},[]);return zt.useMemo(function(){return{error:r.error,loading:r.loading,reset:s,setError:o,setValue:a,value:r.value}},[r.error,r.loading,s,o,a,r.value])},UR=function(t,e,n){var r=zt.useRef(t);return zt.useEffect(function(){e(t,r.current)||(r.current=t,n&&n())}),r},VR=function(){var t=zt.useState(!0),e=t[0],n=t[1];return zt.useEffect(function(){return function(){n(!1)}},[]),e},$6=function(t,e){var n=!t&&!e,r=!!t&&!!e&&Cr.refEqual(t,e);return n||r},$R=function(t,e){return UR(t,$6,e)},B6=function(t,e){var n=!t&&!e,r=!!t&&!!e&&Cr.queryEqual(t,e);return n||r},BR=function(t,e){return UR(t,B6,e)},WR=function(t,e){var n=Gm(),r=n.error,i=n.loading,s=n.reset,o=n.setError,a=n.setValue,u=n.value,c=BR(t,s);return zt.useEffect(function(){if(!c.current){a(void 0);return}var d=e!=null&&e.snapshotListenOptions?Cr.onSnapshot(c.current,e.snapshotListenOptions,a,o):Cr.onSnapshot(c.current,a,o);return function(){d()}},[c.current]),[u,i,r]},jR=function(t,e){var n=Gm(),r=n.error,i=n.loading,s=n.reset,o=n.setError,a=n.setValue,u=n.value,c=VR(),d=BR(t,s),f=zt.useCallback(function(v,w){return MR(void 0,void 0,void 0,function(){var T,C,I;return LR(this,function(_){switch(_.label){case 0:if(!v)return a(void 0),[2];T=z6(w==null?void 0:w.getOptions),_.label=1;case 1:return _.trys.push([1,3,,4]),[4,T(v)];case 2:return C=_.sent(),c&&a(C),[3,4];case 3:return I=_.sent(),c&&o(I),[3,4];case 4:return[2]}})})},[]),g=zt.useCallback(function(){return f(d.current,e)},[f,d.current]);return zt.useEffect(function(){f(d.current,e)},[d.current]),[u,i,r,g]},W6=function(t,e){var n=WR(t,e),r=n[0],i=n[1],s=n[2],o=zR(r,e==null?void 0:e.snapshotOptions,e==null?void 0:e.initialValue);return[o,i,s,r]},j6=function(t,e){var n=jR(t,e),r=n[0],i=n[1],s=n[2],o=n[3],a=zR(r,e==null?void 0:e.snapshotOptions,e==null?void 0:e.initialValue);return[a,i,s,r,o]},zR=function(t,e,n){return zt.useMemo(function(){var r;return(r=t==null?void 0:t.docs.map(function(i){return i.data(e)}))!==null&&r!==void 0?r:n},[t,e])},z6=function(t){var e=t===void 0?{source:"default"}:t,n=e.source;switch(n){default:case"default":return Cr.getDocs;case"cache":return Cr.getDocsFromCache;case"server":return Cr.getDocsFromServer}},qR=function(t,e){var n=Gm(),r=n.error,i=n.loading,s=n.reset,o=n.setError,a=n.setValue,u=n.value,c=$R(t,s);return zt.useEffect(function(){if(!c.current){a(void 0);return}var d=e!=null&&e.snapshotListenOptions?Cr.onSnapshot(c.current,e.snapshotListenOptions,a,o):Cr.onSnapshot(c.current,a,o);return function(){d()}},[c.current]),[u,i,r]},GR=function(t,e){var n=Gm(),r=n.error,i=n.loading,s=n.reset,o=n.setError,a=n.setValue,u=n.value,c=VR(),d=$R(t,s),f=zt.useCallback(function(v,w){return MR(void 0,void 0,void 0,function(){var T,C,I;return LR(this,function(_){switch(_.label){case 0:if(!v)return a(void 0),[2];T=H6(w==null?void 0:w.getOptions),_.label=1;case 1:return _.trys.push([1,3,,4]),[4,T(v)];case 2:return C=_.sent(),c&&a(C),[3,4];case 3:return I=_.sent(),c&&o(I),[3,4];case 4:return[2]}})})},[]),g=zt.useCallback(function(){return f(d.current,e)},[f,d.current]);return zt.useEffect(function(){if(!d.current){a(void 0);return}f(d.current,e)},[d.current]),[u,i,r,g]},q6=function(t,e){var n=qR(t,e),r=n[0],i=n[1],s=n[2],o=HR(r,e==null?void 0:e.snapshotOptions,e==null?void 0:e.initialValue);return[o,i,s,r]},G6=function(t,e){var n=GR(t,e),r=n[0],i=n[1],s=n[2],o=n[3],a=HR(r,e==null?void 0:e.snapshotOptions,e==null?void 0:e.initialValue);return[a,i,s,r,o]},H6=function(t){var e=t===void 0?{source:"default"}:t,n=e.source;switch(n){default:case"default":return Cr.getDoc;case"cache":return Cr.getDocFromCache;case"server":return Cr.getDocFromServer}},HR=function(t,e,n){return zt.useMemo(function(){var r;return(r=t==null?void 0:t.data(e))!==null&&r!==void 0?r:n},[t,e,n])};zi.useCollection=WR;zi.useCollectionData=W6;zi.useCollectionDataOnce=j6;zi.useCollectionOnce=jR;zi.useDocument=qR;zi.useDocumentData=q6;zi.useDocumentDataOnce=G6;zi.useDocumentOnce=GR;const YR=eN({apiKey:"AIzaSyC2D0ck265uZEPfbUhZ2XcR6g6mJCxyfac",authDomain:"pie-chart-demo.firebaseapp.com",databaseURL:"https://pie-chart-demo-default-rtdb.firebaseio.com",projectId:"pie-chart-demo",storageBucket:"pie-chart-demo.appspot.com",messagingSenderId:"164237282596",appId:"1:164237282596:web:dc8c7ead80c411e36137b1"}),N1=sD(YR),Fd=X3(YR);function Y6(){const{brightness:t}=Vt.useContext(VC);Sq(N1);const[e,n]=Vt.useState("..."),[r,i]=Vt.useState(0),[s,o]=Vt.useState(0),[a,u]=Vt.useState(0),c=[r,s,a],d=c.reduce((I,_)=>I+_),f={".pieA":r,".pieB":s,".pieC":a},g=v(c);function v(I){if(I.every(P=>P===0))return["calc(1px/3) calc(2px/3) 0 0","0 calc(1px/3) calc(1px/3) calc(1px/3)","0 calc(2px/3) calc(1px/3), 0"];const _=[],E=I[0],b=I[I.length-1],O=I.slice(1,I.length-1);return _.push(`calc(${E}px/${d}) calc(${d-E}px/${d})`),O.forEach(P=>{let L="0",z=`calc(${E}px/${d})`,Te=`calc(${P}px/${d})`,xt=`calc(${d-(E+P)}px/${d})`;_.push([L,z,Te,xt].join(" "))}),_.push(`0 calc(${d-b}px/${d}) calc(${b}px/${d})`),_}function w(I){return I?Math.floor((I/d).toFixed(2)*100):0}function T(I,_){$3(Nd(Fd,"points"),{[I]:_})}Vt.useEffect(()=>{Object.keys(f).forEach((I,_)=>{let E=document.querySelector(`${I}`);E.style.strokeDasharray=`${g[_]}`})}),Vt.useEffect(()=>{DN(N1)},[]),Vt.useEffect(()=>{},[]),Vt.useEffect(()=>{B3(Nd(Fd,"points")).then(I=>{let _=I.val();i(_.red),o(_.purple),u(_.blue)})},[]);function C(I){I=30-+I%30,I===30&&(i(0),o(0),u(0),V3(Nd(Fd,"points"),{red:0,blue:0,purple:0})),n(I)}return Vt.useEffect(()=>{const I=Nd(Fd,"points/");j3(I,_=>{let E=_.val();E.red!=r&&i(E.red),E.purple!=s&&o(E.purple),E.blue!=a&&u(E.blue),console.log("DB Updated:",_.val())})}),ns("div",{className:"App",children:[Cn(HU,{style:{display:"none"},interval:1e3,format:"ss","aria-hidden":!0,onChange:I=>C(I)}),Cn("h1",{children:`${e}`}),Cn("div",{className:"chartDisplay",children:ns("svg",{width:"400",height:"400",className:"chart",children:[ns("defs",{children:[Cn("filter",{id:"blur",width:"3",height:"3",x:"-1",y:"-1",children:Cn("feGaussianBlur",{in:"SourceGraphic",stdDeviation:"2"})}),ns("filter",{id:"lighting",width:"3",height:"3",x:"-1",y:"-1",children:[Cn("feDiffuseLighting",{in:"SourceGraphic",result:"light",lightingColor:"white",children:Cn("fePointLight",{x:"-20",y:"200",z:`${t}`})}),Cn("feComposite",{in:"SourceGraphic",in2:"light",operator:"arithmetic",k1:"1",k2:"0",k3:"0",k4:"0"})]})]}),Cn("circle",{r:"100",cx:"200",cy:"200",className:"pieA",pathLength:"1",filter:"url(#lighting)"}),Cn("circle",{r:"100",cx:"200",cy:"200",className:"pieB",pathLength:"1",filter:"url(#lighting)"}),Cn("circle",{r:"100",cx:"200",cy:"200",className:"pieC",pathLength:"1",filter:"url(#lighting)"})]})}),Cn("h1",{children:"VOTE TIME"}),ns("div",{className:"card",children:[ns("button",{onClick:()=>{i(I=>I+1),T("red",r+1)},children:["Red is ",w(r),"%"]}),ns("button",{onClick:()=>{o(I=>I+1),T("purple",s+1)},children:["Purple is ",w(s),"%"]}),ns("button",{onClick:()=>{u(I=>I+1),T("blue",a+1)},children:["Blue is ",w(a),"%"]})]})]})}fy.createRoot(document.getElementById("root")).render(Cn(AL.StrictMode,{children:Cn(WU,{children:Cn(Y6,{})})}));
