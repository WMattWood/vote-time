(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerpolicy&&(s.referrerPolicy=i.referrerpolicy),i.crossorigin==="use-credentials"?s.credentials="include":i.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();var WT=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function DP(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function jT(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function r(){if(this instanceof r){var i=[null];i.push.apply(i,arguments);var s=Function.bind.apply(e,i);return new s}return e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var i=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return t[r]}})}),n}var Wd={},bP={get exports(){return Wd},set exports(t){Wd=t}},Jf={},Sn={},AP={get exports(){return Sn},set exports(t){Sn=t}},De={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Hc=Symbol.for("react.element"),RP=Symbol.for("react.portal"),xP=Symbol.for("react.fragment"),OP=Symbol.for("react.strict_mode"),MP=Symbol.for("react.profiler"),PP=Symbol.for("react.provider"),LP=Symbol.for("react.context"),FP=Symbol.for("react.forward_ref"),UP=Symbol.for("react.suspense"),$P=Symbol.for("react.memo"),VP=Symbol.for("react.lazy"),hI=Symbol.iterator;function BP(t){return t===null||typeof t!="object"?null:(t=hI&&t[hI]||t["@@iterator"],typeof t=="function"?t:null)}var zT={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},qT=Object.assign,GT={};function bl(t,e,n){this.props=t,this.context=e,this.refs=GT,this.updater=n||zT}bl.prototype.isReactComponent={};bl.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};bl.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function HT(){}HT.prototype=bl.prototype;function bv(t,e,n){this.props=t,this.context=e,this.refs=GT,this.updater=n||zT}var Av=bv.prototype=new HT;Av.constructor=bv;qT(Av,bl.prototype);Av.isPureReactComponent=!0;var dI=Array.isArray,YT=Object.prototype.hasOwnProperty,Rv={current:null},KT={key:!0,ref:!0,__self:!0,__source:!0};function QT(t,e,n){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)YT.call(e,r)&&!KT.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var u=Array(a),c=0;c<a;c++)u[c]=arguments[c+2];i.children=u}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:Hc,type:t,key:s,ref:o,props:i,_owner:Rv.current}}function WP(t,e){return{$$typeof:Hc,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function xv(t){return typeof t=="object"&&t!==null&&t.$$typeof===Hc}function jP(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var fI=/\/+/g;function Fm(t,e){return typeof t=="object"&&t!==null&&t.key!=null?jP(""+t.key):e.toString(36)}function _d(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Hc:case RP:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+Fm(o,0):r,dI(i)?(n="",t!=null&&(n=t.replace(fI,"$&/")+"/"),_d(i,e,n,"",function(c){return c})):i!=null&&(xv(i)&&(i=WP(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(fI,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",dI(t))for(var a=0;a<t.length;a++){s=t[a];var u=r+Fm(s,a);o+=_d(s,e,n,u,i)}else if(u=BP(t),typeof u=="function")for(t=u.call(t),a=0;!(s=t.next()).done;)s=s.value,u=r+Fm(s,a++),o+=_d(s,e,n,u,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function zh(t,e,n){if(t==null)return t;var r=[],i=0;return _d(t,r,"","",function(s){return e.call(n,s,i++)}),r}function zP(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Un={current:null},wd={transition:null},qP={ReactCurrentDispatcher:Un,ReactCurrentBatchConfig:wd,ReactCurrentOwner:Rv};De.Children={map:zh,forEach:function(t,e,n){zh(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return zh(t,function(){e++}),e},toArray:function(t){return zh(t,function(e){return e})||[]},only:function(t){if(!xv(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};De.Component=bl;De.Fragment=xP;De.Profiler=MP;De.PureComponent=bv;De.StrictMode=OP;De.Suspense=UP;De.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=qP;De.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=qT({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=Rv.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(u in e)YT.call(e,u)&&!KT.hasOwnProperty(u)&&(r[u]=e[u]===void 0&&a!==void 0?a[u]:e[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){a=Array(u);for(var c=0;c<u;c++)a[c]=arguments[c+2];r.children=a}return{$$typeof:Hc,type:t.type,key:i,ref:s,props:r,_owner:o}};De.createContext=function(t){return t={$$typeof:LP,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:PP,_context:t},t.Consumer=t};De.createElement=QT;De.createFactory=function(t){var e=QT.bind(null,t);return e.type=t,e};De.createRef=function(){return{current:null}};De.forwardRef=function(t){return{$$typeof:FP,render:t}};De.isValidElement=xv;De.lazy=function(t){return{$$typeof:VP,_payload:{_status:-1,_result:t},_init:zP}};De.memo=function(t,e){return{$$typeof:$P,type:t,compare:e===void 0?null:e}};De.startTransition=function(t){var e=wd.transition;wd.transition={};try{t()}finally{wd.transition=e}};De.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};De.useCallback=function(t,e){return Un.current.useCallback(t,e)};De.useContext=function(t){return Un.current.useContext(t)};De.useDebugValue=function(){};De.useDeferredValue=function(t){return Un.current.useDeferredValue(t)};De.useEffect=function(t,e){return Un.current.useEffect(t,e)};De.useId=function(){return Un.current.useId()};De.useImperativeHandle=function(t,e,n){return Un.current.useImperativeHandle(t,e,n)};De.useInsertionEffect=function(t,e){return Un.current.useInsertionEffect(t,e)};De.useLayoutEffect=function(t,e){return Un.current.useLayoutEffect(t,e)};De.useMemo=function(t,e){return Un.current.useMemo(t,e)};De.useReducer=function(t,e,n){return Un.current.useReducer(t,e,n)};De.useRef=function(t){return Un.current.useRef(t)};De.useState=function(t){return Un.current.useState(t)};De.useSyncExternalStore=function(t,e,n){return Un.current.useSyncExternalStore(t,e,n)};De.useTransition=function(){return Un.current.useTransition()};De.version="18.2.0";(function(t){t.exports=De})(AP);const GP=DP(Sn);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var HP=Sn,YP=Symbol.for("react.element"),KP=Symbol.for("react.fragment"),QP=Object.prototype.hasOwnProperty,XP=HP.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,JP={key:!0,ref:!0,__self:!0,__source:!0};function XT(t,e,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)QP.call(e,r)&&!JP.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:YP,type:t,key:s,ref:o,props:i,_owner:XP.current}}Jf.Fragment=KP;Jf.jsx=XT;Jf.jsxs=XT;(function(t){t.exports=Jf})(bP);const qn=Wd.jsx,ts=Wd.jsxs;var Fg={},Ug={},ZP={get exports(){return Ug},set exports(t){Ug=t}},mr={},$g={},eL={get exports(){return $g},set exports(t){$g=t}},JT={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(V,Q){var J=V.length;V.push(Q);e:for(;0<J;){var pe=J-1>>>1,ve=V[pe];if(0<i(ve,Q))V[pe]=Q,V[J]=ve,J=pe;else break e}}function n(V){return V.length===0?null:V[0]}function r(V){if(V.length===0)return null;var Q=V[0],J=V.pop();if(J!==Q){V[0]=J;e:for(var pe=0,ve=V.length,Qe=ve>>>1;pe<Qe;){var Pe=2*(pe+1)-1,Z=V[Pe],ot=Pe+1,Pt=V[ot];if(0>i(Z,J))ot<ve&&0>i(Pt,Z)?(V[pe]=Pt,V[ot]=J,pe=ot):(V[pe]=Z,V[Pe]=J,pe=Pe);else if(ot<ve&&0>i(Pt,J))V[pe]=Pt,V[ot]=J,pe=ot;else break e}}return Q}function i(V,Q){var J=V.sortIndex-Q.sortIndex;return J!==0?J:V.id-Q.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var u=[],c=[],d=1,f=null,g=3,v=!1,_=!1,T=!1,C=typeof setTimeout=="function"?setTimeout:null,I=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function S(V){for(var Q=n(c);Q!==null;){if(Q.callback===null)r(c);else if(Q.startTime<=V)r(c),Q.sortIndex=Q.expirationTime,e(u,Q);else break;Q=n(c)}}function A(V){if(T=!1,S(V),!_)if(n(u)!==null)_=!0,W(O);else{var Q=n(c);Q!==null&&re(A,Q.startTime-V)}}function O(V,Q){_=!1,T&&(T=!1,I(q),q=-1),v=!0;var J=g;try{for(S(Q),f=n(u);f!==null&&(!(f.expirationTime>Q)||V&&!Mt());){var pe=f.callback;if(typeof pe=="function"){f.callback=null,g=f.priorityLevel;var ve=pe(f.expirationTime<=Q);Q=t.unstable_now(),typeof ve=="function"?f.callback=ve:f===n(u)&&r(u),S(Q)}else r(u);f=n(u)}if(f!==null)var Qe=!0;else{var Pe=n(c);Pe!==null&&re(A,Pe.startTime-Q),Qe=!1}return Qe}finally{f=null,g=J,v=!1}}var L=!1,P=null,q=-1,Te=5,le=-1;function Mt(){return!(t.unstable_now()-le<Te)}function Ee(){if(P!==null){var V=t.unstable_now();le=V;var Q=!0;try{Q=P(!0,V)}finally{Q?K():(L=!1,P=null)}}else L=!1}var K;if(typeof w=="function")K=function(){w(Ee)};else if(typeof MessageChannel<"u"){var he=new MessageChannel,j=he.port2;he.port1.onmessage=Ee,K=function(){j.postMessage(null)}}else K=function(){C(Ee,0)};function W(V){P=V,L||(L=!0,K())}function re(V,Q){q=C(function(){V(t.unstable_now())},Q)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(V){V.callback=null},t.unstable_continueExecution=function(){_||v||(_=!0,W(O))},t.unstable_forceFrameRate=function(V){0>V||125<V?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Te=0<V?Math.floor(1e3/V):5},t.unstable_getCurrentPriorityLevel=function(){return g},t.unstable_getFirstCallbackNode=function(){return n(u)},t.unstable_next=function(V){switch(g){case 1:case 2:case 3:var Q=3;break;default:Q=g}var J=g;g=Q;try{return V()}finally{g=J}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(V,Q){switch(V){case 1:case 2:case 3:case 4:case 5:break;default:V=3}var J=g;g=V;try{return Q()}finally{g=J}},t.unstable_scheduleCallback=function(V,Q,J){var pe=t.unstable_now();switch(typeof J=="object"&&J!==null?(J=J.delay,J=typeof J=="number"&&0<J?pe+J:pe):J=pe,V){case 1:var ve=-1;break;case 2:ve=250;break;case 5:ve=1073741823;break;case 4:ve=1e4;break;default:ve=5e3}return ve=J+ve,V={id:d++,callback:Q,priorityLevel:V,startTime:J,expirationTime:ve,sortIndex:-1},J>pe?(V.sortIndex=J,e(c,V),n(u)===null&&V===n(c)&&(T?(I(q),q=-1):T=!0,re(A,J-pe))):(V.sortIndex=ve,e(u,V),_||v||(_=!0,W(O))),V},t.unstable_shouldYield=Mt,t.unstable_wrapCallback=function(V){var Q=g;return function(){var J=g;g=Q;try{return V.apply(this,arguments)}finally{g=J}}}})(JT);(function(t){t.exports=JT})(eL);/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ZT=Sn,dr=$g;function U(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var e1=new Set,oc={};function ea(t,e){sl(t,e),sl(t+"Capture",e)}function sl(t,e){for(oc[t]=e,t=0;t<e.length;t++)e1.add(e[t])}var bi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Vg=Object.prototype.hasOwnProperty,tL=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,pI={},mI={};function nL(t){return Vg.call(mI,t)?!0:Vg.call(pI,t)?!1:tL.test(t)?mI[t]=!0:(pI[t]=!0,!1)}function rL(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function iL(t,e,n,r){if(e===null||typeof e>"u"||rL(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function $n(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var fn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){fn[t]=new $n(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];fn[e]=new $n(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){fn[t]=new $n(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){fn[t]=new $n(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){fn[t]=new $n(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){fn[t]=new $n(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){fn[t]=new $n(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){fn[t]=new $n(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){fn[t]=new $n(t,5,!1,t.toLowerCase(),null,!1,!1)});var Ov=/[\-:]([a-z])/g;function Mv(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Ov,Mv);fn[e]=new $n(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Ov,Mv);fn[e]=new $n(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Ov,Mv);fn[e]=new $n(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){fn[t]=new $n(t,1,!1,t.toLowerCase(),null,!1,!1)});fn.xlinkHref=new $n("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){fn[t]=new $n(t,1,!1,t.toLowerCase(),null,!0,!0)});function Pv(t,e,n,r){var i=fn.hasOwnProperty(e)?fn[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(iL(e,n,i,r)&&(n=null),r||i===null?nL(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Ui=ZT.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,qh=Symbol.for("react.element"),Aa=Symbol.for("react.portal"),Ra=Symbol.for("react.fragment"),Lv=Symbol.for("react.strict_mode"),Bg=Symbol.for("react.profiler"),t1=Symbol.for("react.provider"),n1=Symbol.for("react.context"),Fv=Symbol.for("react.forward_ref"),Wg=Symbol.for("react.suspense"),jg=Symbol.for("react.suspense_list"),Uv=Symbol.for("react.memo"),os=Symbol.for("react.lazy"),r1=Symbol.for("react.offscreen"),gI=Symbol.iterator;function uu(t){return t===null||typeof t!="object"?null:(t=gI&&t[gI]||t["@@iterator"],typeof t=="function"?t:null)}var vt=Object.assign,Um;function Du(t){if(Um===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Um=e&&e[1]||""}return`
`+Um+t}var $m=!1;function Vm(t,e){if(!t||$m)return"";$m=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var i=c.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var u=`
`+i[o].replace(" at new "," at ");return t.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",t.displayName)),u}while(1<=o&&0<=a);break}}}finally{$m=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Du(t):""}function sL(t){switch(t.tag){case 5:return Du(t.type);case 16:return Du("Lazy");case 13:return Du("Suspense");case 19:return Du("SuspenseList");case 0:case 2:case 15:return t=Vm(t.type,!1),t;case 11:return t=Vm(t.type.render,!1),t;case 1:return t=Vm(t.type,!0),t;default:return""}}function zg(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Ra:return"Fragment";case Aa:return"Portal";case Bg:return"Profiler";case Lv:return"StrictMode";case Wg:return"Suspense";case jg:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case n1:return(t.displayName||"Context")+".Consumer";case t1:return(t._context.displayName||"Context")+".Provider";case Fv:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Uv:return e=t.displayName||null,e!==null?e:zg(t.type)||"Memo";case os:e=t._payload,t=t._init;try{return zg(t(e))}catch{}}return null}function oL(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return zg(e);case 8:return e===Lv?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function bs(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function i1(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function aL(t){var e=i1(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Gh(t){t._valueTracker||(t._valueTracker=aL(t))}function s1(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=i1(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function jd(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function qg(t,e){var n=e.checked;return vt({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function yI(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=bs(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function o1(t,e){e=e.checked,e!=null&&Pv(t,"checked",e,!1)}function Gg(t,e){o1(t,e);var n=bs(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Hg(t,e.type,n):e.hasOwnProperty("defaultValue")&&Hg(t,e.type,bs(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function vI(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Hg(t,e,n){(e!=="number"||jd(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var bu=Array.isArray;function Ga(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+bs(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function Yg(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(U(91));return vt({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function _I(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(U(92));if(bu(n)){if(1<n.length)throw Error(U(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:bs(n)}}function a1(t,e){var n=bs(e.value),r=bs(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function wI(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function l1(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Kg(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?l1(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Hh,u1=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Hh=Hh||document.createElement("div"),Hh.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Hh.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function ac(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var $u={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},lL=["Webkit","ms","Moz","O"];Object.keys($u).forEach(function(t){lL.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),$u[e]=$u[t]})});function c1(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||$u.hasOwnProperty(t)&&$u[t]?(""+e).trim():e+"px"}function h1(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=c1(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var uL=vt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Qg(t,e){if(e){if(uL[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(U(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(U(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(U(61))}if(e.style!=null&&typeof e.style!="object")throw Error(U(62))}}function Xg(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Jg=null;function $v(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Zg=null,Ha=null,Ya=null;function II(t){if(t=Qc(t)){if(typeof Zg!="function")throw Error(U(280));var e=t.stateNode;e&&(e=rp(e),Zg(t.stateNode,t.type,e))}}function d1(t){Ha?Ya?Ya.push(t):Ya=[t]:Ha=t}function f1(){if(Ha){var t=Ha,e=Ya;if(Ya=Ha=null,II(t),e)for(t=0;t<e.length;t++)II(e[t])}}function p1(t,e){return t(e)}function m1(){}var Bm=!1;function g1(t,e,n){if(Bm)return t(e,n);Bm=!0;try{return p1(t,e,n)}finally{Bm=!1,(Ha!==null||Ya!==null)&&(m1(),f1())}}function lc(t,e){var n=t.stateNode;if(n===null)return null;var r=rp(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(U(231,e,typeof n));return n}var ey=!1;if(bi)try{var cu={};Object.defineProperty(cu,"passive",{get:function(){ey=!0}}),window.addEventListener("test",cu,cu),window.removeEventListener("test",cu,cu)}catch{ey=!1}function cL(t,e,n,r,i,s,o,a,u){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(d){this.onError(d)}}var Vu=!1,zd=null,qd=!1,ty=null,hL={onError:function(t){Vu=!0,zd=t}};function dL(t,e,n,r,i,s,o,a,u){Vu=!1,zd=null,cL.apply(hL,arguments)}function fL(t,e,n,r,i,s,o,a,u){if(dL.apply(this,arguments),Vu){if(Vu){var c=zd;Vu=!1,zd=null}else throw Error(U(198));qd||(qd=!0,ty=c)}}function ta(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function y1(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function SI(t){if(ta(t)!==t)throw Error(U(188))}function pL(t){var e=t.alternate;if(!e){if(e=ta(t),e===null)throw Error(U(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return SI(i),t;if(s===r)return SI(i),e;s=s.sibling}throw Error(U(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o)throw Error(U(189))}}if(n.alternate!==r)throw Error(U(190))}if(n.tag!==3)throw Error(U(188));return n.stateNode.current===n?t:e}function v1(t){return t=pL(t),t!==null?_1(t):null}function _1(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=_1(t);if(e!==null)return e;t=t.sibling}return null}var w1=dr.unstable_scheduleCallback,EI=dr.unstable_cancelCallback,mL=dr.unstable_shouldYield,gL=dr.unstable_requestPaint,Dt=dr.unstable_now,yL=dr.unstable_getCurrentPriorityLevel,Vv=dr.unstable_ImmediatePriority,I1=dr.unstable_UserBlockingPriority,Gd=dr.unstable_NormalPriority,vL=dr.unstable_LowPriority,S1=dr.unstable_IdlePriority,Zf=null,ei=null;function _L(t){if(ei&&typeof ei.onCommitFiberRoot=="function")try{ei.onCommitFiberRoot(Zf,t,void 0,(t.current.flags&128)===128)}catch{}}var Fr=Math.clz32?Math.clz32:SL,wL=Math.log,IL=Math.LN2;function SL(t){return t>>>=0,t===0?32:31-(wL(t)/IL|0)|0}var Yh=64,Kh=4194304;function Au(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Hd(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~i;a!==0?r=Au(a):(s&=o,s!==0&&(r=Au(s)))}else o=n&~i,o!==0?r=Au(o):s!==0&&(r=Au(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Fr(e),i=1<<n,r|=t[n],e&=~i;return r}function EL(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function TL(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-Fr(s),a=1<<o,u=i[o];u===-1?(!(a&n)||a&r)&&(i[o]=EL(a,e)):u<=e&&(t.expiredLanes|=a),s&=~a}}function ny(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function E1(){var t=Yh;return Yh<<=1,!(Yh&4194240)&&(Yh=64),t}function Wm(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Yc(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Fr(e),t[e]=n}function kL(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-Fr(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function Bv(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Fr(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var We=0;function T1(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var k1,Wv,C1,N1,D1,ry=!1,Qh=[],gs=null,ys=null,vs=null,uc=new Map,cc=new Map,ls=[],CL="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function TI(t,e){switch(t){case"focusin":case"focusout":gs=null;break;case"dragenter":case"dragleave":ys=null;break;case"mouseover":case"mouseout":vs=null;break;case"pointerover":case"pointerout":uc.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":cc.delete(e.pointerId)}}function hu(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=Qc(e),e!==null&&Wv(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function NL(t,e,n,r,i){switch(e){case"focusin":return gs=hu(gs,t,e,n,r,i),!0;case"dragenter":return ys=hu(ys,t,e,n,r,i),!0;case"mouseover":return vs=hu(vs,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return uc.set(s,hu(uc.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,cc.set(s,hu(cc.get(s)||null,t,e,n,r,i)),!0}return!1}function b1(t){var e=yo(t.target);if(e!==null){var n=ta(e);if(n!==null){if(e=n.tag,e===13){if(e=y1(n),e!==null){t.blockedOn=e,D1(t.priority,function(){C1(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Id(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=iy(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Jg=r,n.target.dispatchEvent(r),Jg=null}else return e=Qc(n),e!==null&&Wv(e),t.blockedOn=n,!1;e.shift()}return!0}function kI(t,e,n){Id(t)&&n.delete(e)}function DL(){ry=!1,gs!==null&&Id(gs)&&(gs=null),ys!==null&&Id(ys)&&(ys=null),vs!==null&&Id(vs)&&(vs=null),uc.forEach(kI),cc.forEach(kI)}function du(t,e){t.blockedOn===e&&(t.blockedOn=null,ry||(ry=!0,dr.unstable_scheduleCallback(dr.unstable_NormalPriority,DL)))}function hc(t){function e(i){return du(i,t)}if(0<Qh.length){du(Qh[0],t);for(var n=1;n<Qh.length;n++){var r=Qh[n];r.blockedOn===t&&(r.blockedOn=null)}}for(gs!==null&&du(gs,t),ys!==null&&du(ys,t),vs!==null&&du(vs,t),uc.forEach(e),cc.forEach(e),n=0;n<ls.length;n++)r=ls[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<ls.length&&(n=ls[0],n.blockedOn===null);)b1(n),n.blockedOn===null&&ls.shift()}var Ka=Ui.ReactCurrentBatchConfig,Yd=!0;function bL(t,e,n,r){var i=We,s=Ka.transition;Ka.transition=null;try{We=1,jv(t,e,n,r)}finally{We=i,Ka.transition=s}}function AL(t,e,n,r){var i=We,s=Ka.transition;Ka.transition=null;try{We=4,jv(t,e,n,r)}finally{We=i,Ka.transition=s}}function jv(t,e,n,r){if(Yd){var i=iy(t,e,n,r);if(i===null)Jm(t,e,r,Kd,n),TI(t,r);else if(NL(i,t,e,n,r))r.stopPropagation();else if(TI(t,r),e&4&&-1<CL.indexOf(t)){for(;i!==null;){var s=Qc(i);if(s!==null&&k1(s),s=iy(t,e,n,r),s===null&&Jm(t,e,r,Kd,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else Jm(t,e,r,null,n)}}var Kd=null;function iy(t,e,n,r){if(Kd=null,t=$v(r),t=yo(t),t!==null)if(e=ta(t),e===null)t=null;else if(n=e.tag,n===13){if(t=y1(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Kd=t,null}function A1(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(yL()){case Vv:return 1;case I1:return 4;case Gd:case vL:return 16;case S1:return 536870912;default:return 16}default:return 16}}var ds=null,zv=null,Sd=null;function R1(){if(Sd)return Sd;var t,e=zv,n=e.length,r,i="value"in ds?ds.value:ds.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[s-r];r++);return Sd=i.slice(t,1<r?1-r:void 0)}function Ed(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Xh(){return!0}function CI(){return!1}function gr(t){function e(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Xh:CI,this.isPropagationStopped=CI,this}return vt(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Xh)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Xh)},persist:function(){},isPersistent:Xh}),e}var Al={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},qv=gr(Al),Kc=vt({},Al,{view:0,detail:0}),RL=gr(Kc),jm,zm,fu,ep=vt({},Kc,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Gv,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==fu&&(fu&&t.type==="mousemove"?(jm=t.screenX-fu.screenX,zm=t.screenY-fu.screenY):zm=jm=0,fu=t),jm)},movementY:function(t){return"movementY"in t?t.movementY:zm}}),NI=gr(ep),xL=vt({},ep,{dataTransfer:0}),OL=gr(xL),ML=vt({},Kc,{relatedTarget:0}),qm=gr(ML),PL=vt({},Al,{animationName:0,elapsedTime:0,pseudoElement:0}),LL=gr(PL),FL=vt({},Al,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),UL=gr(FL),$L=vt({},Al,{data:0}),DI=gr($L),VL={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},BL={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},WL={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function jL(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=WL[t])?!!e[t]:!1}function Gv(){return jL}var zL=vt({},Kc,{key:function(t){if(t.key){var e=VL[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Ed(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?BL[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Gv,charCode:function(t){return t.type==="keypress"?Ed(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Ed(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),qL=gr(zL),GL=vt({},ep,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),bI=gr(GL),HL=vt({},Kc,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Gv}),YL=gr(HL),KL=vt({},Al,{propertyName:0,elapsedTime:0,pseudoElement:0}),QL=gr(KL),XL=vt({},ep,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),JL=gr(XL),ZL=[9,13,27,32],Hv=bi&&"CompositionEvent"in window,Bu=null;bi&&"documentMode"in document&&(Bu=document.documentMode);var eF=bi&&"TextEvent"in window&&!Bu,x1=bi&&(!Hv||Bu&&8<Bu&&11>=Bu),AI=String.fromCharCode(32),RI=!1;function O1(t,e){switch(t){case"keyup":return ZL.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function M1(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var xa=!1;function tF(t,e){switch(t){case"compositionend":return M1(e);case"keypress":return e.which!==32?null:(RI=!0,AI);case"textInput":return t=e.data,t===AI&&RI?null:t;default:return null}}function nF(t,e){if(xa)return t==="compositionend"||!Hv&&O1(t,e)?(t=R1(),Sd=zv=ds=null,xa=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return x1&&e.locale!=="ko"?null:e.data;default:return null}}var rF={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function xI(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!rF[t.type]:e==="textarea"}function P1(t,e,n,r){d1(r),e=Qd(e,"onChange"),0<e.length&&(n=new qv("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Wu=null,dc=null;function iF(t){G1(t,0)}function tp(t){var e=Pa(t);if(s1(e))return t}function sF(t,e){if(t==="change")return e}var L1=!1;if(bi){var Gm;if(bi){var Hm="oninput"in document;if(!Hm){var OI=document.createElement("div");OI.setAttribute("oninput","return;"),Hm=typeof OI.oninput=="function"}Gm=Hm}else Gm=!1;L1=Gm&&(!document.documentMode||9<document.documentMode)}function MI(){Wu&&(Wu.detachEvent("onpropertychange",F1),dc=Wu=null)}function F1(t){if(t.propertyName==="value"&&tp(dc)){var e=[];P1(e,dc,t,$v(t)),g1(iF,e)}}function oF(t,e,n){t==="focusin"?(MI(),Wu=e,dc=n,Wu.attachEvent("onpropertychange",F1)):t==="focusout"&&MI()}function aF(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return tp(dc)}function lF(t,e){if(t==="click")return tp(e)}function uF(t,e){if(t==="input"||t==="change")return tp(e)}function cF(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Br=typeof Object.is=="function"?Object.is:cF;function fc(t,e){if(Br(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!Vg.call(e,i)||!Br(t[i],e[i]))return!1}return!0}function PI(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function LI(t,e){var n=PI(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=PI(n)}}function U1(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?U1(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function $1(){for(var t=window,e=jd();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=jd(t.document)}return e}function Yv(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function hF(t){var e=$1(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&U1(n.ownerDocument.documentElement,n)){if(r!==null&&Yv(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=LI(n,s);var o=LI(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var dF=bi&&"documentMode"in document&&11>=document.documentMode,Oa=null,sy=null,ju=null,oy=!1;function FI(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;oy||Oa==null||Oa!==jd(r)||(r=Oa,"selectionStart"in r&&Yv(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),ju&&fc(ju,r)||(ju=r,r=Qd(sy,"onSelect"),0<r.length&&(e=new qv("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Oa)))}function Jh(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Ma={animationend:Jh("Animation","AnimationEnd"),animationiteration:Jh("Animation","AnimationIteration"),animationstart:Jh("Animation","AnimationStart"),transitionend:Jh("Transition","TransitionEnd")},Ym={},V1={};bi&&(V1=document.createElement("div").style,"AnimationEvent"in window||(delete Ma.animationend.animation,delete Ma.animationiteration.animation,delete Ma.animationstart.animation),"TransitionEvent"in window||delete Ma.transitionend.transition);function np(t){if(Ym[t])return Ym[t];if(!Ma[t])return t;var e=Ma[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in V1)return Ym[t]=e[n];return t}var B1=np("animationend"),W1=np("animationiteration"),j1=np("animationstart"),z1=np("transitionend"),q1=new Map,UI="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Vs(t,e){q1.set(t,e),ea(e,[t])}for(var Km=0;Km<UI.length;Km++){var Qm=UI[Km],fF=Qm.toLowerCase(),pF=Qm[0].toUpperCase()+Qm.slice(1);Vs(fF,"on"+pF)}Vs(B1,"onAnimationEnd");Vs(W1,"onAnimationIteration");Vs(j1,"onAnimationStart");Vs("dblclick","onDoubleClick");Vs("focusin","onFocus");Vs("focusout","onBlur");Vs(z1,"onTransitionEnd");sl("onMouseEnter",["mouseout","mouseover"]);sl("onMouseLeave",["mouseout","mouseover"]);sl("onPointerEnter",["pointerout","pointerover"]);sl("onPointerLeave",["pointerout","pointerover"]);ea("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));ea("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));ea("onBeforeInput",["compositionend","keypress","textInput","paste"]);ea("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));ea("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));ea("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ru="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),mF=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ru));function $I(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,fL(r,e,void 0,t),t.currentTarget=null}function G1(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],u=a.instance,c=a.currentTarget;if(a=a.listener,u!==s&&i.isPropagationStopped())break e;$I(i,a,c),s=u}else for(o=0;o<r.length;o++){if(a=r[o],u=a.instance,c=a.currentTarget,a=a.listener,u!==s&&i.isPropagationStopped())break e;$I(i,a,c),s=u}}}if(qd)throw t=ty,qd=!1,ty=null,t}function et(t,e){var n=e[hy];n===void 0&&(n=e[hy]=new Set);var r=t+"__bubble";n.has(r)||(H1(e,t,2,!1),n.add(r))}function Xm(t,e,n){var r=0;e&&(r|=4),H1(n,t,r,e)}var Zh="_reactListening"+Math.random().toString(36).slice(2);function pc(t){if(!t[Zh]){t[Zh]=!0,e1.forEach(function(n){n!=="selectionchange"&&(mF.has(n)||Xm(n,!1,t),Xm(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Zh]||(e[Zh]=!0,Xm("selectionchange",!1,e))}}function H1(t,e,n,r){switch(A1(e)){case 1:var i=bL;break;case 4:i=AL;break;default:i=jv}n=i.bind(null,e,n,t),i=void 0,!ey||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function Jm(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var u=o.tag;if((u===3||u===4)&&(u=o.stateNode.containerInfo,u===i||u.nodeType===8&&u.parentNode===i))return;o=o.return}for(;a!==null;){if(o=yo(a),o===null)return;if(u=o.tag,u===5||u===6){r=s=o;continue e}a=a.parentNode}}r=r.return}g1(function(){var c=s,d=$v(n),f=[];e:{var g=q1.get(t);if(g!==void 0){var v=qv,_=t;switch(t){case"keypress":if(Ed(n)===0)break e;case"keydown":case"keyup":v=qL;break;case"focusin":_="focus",v=qm;break;case"focusout":_="blur",v=qm;break;case"beforeblur":case"afterblur":v=qm;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":v=NI;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":v=OL;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":v=YL;break;case B1:case W1:case j1:v=LL;break;case z1:v=QL;break;case"scroll":v=RL;break;case"wheel":v=JL;break;case"copy":case"cut":case"paste":v=UL;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":v=bI}var T=(e&4)!==0,C=!T&&t==="scroll",I=T?g!==null?g+"Capture":null:g;T=[];for(var w=c,S;w!==null;){S=w;var A=S.stateNode;if(S.tag===5&&A!==null&&(S=A,I!==null&&(A=lc(w,I),A!=null&&T.push(mc(w,A,S)))),C)break;w=w.return}0<T.length&&(g=new v(g,_,null,n,d),f.push({event:g,listeners:T}))}}if(!(e&7)){e:{if(g=t==="mouseover"||t==="pointerover",v=t==="mouseout"||t==="pointerout",g&&n!==Jg&&(_=n.relatedTarget||n.fromElement)&&(yo(_)||_[Ai]))break e;if((v||g)&&(g=d.window===d?d:(g=d.ownerDocument)?g.defaultView||g.parentWindow:window,v?(_=n.relatedTarget||n.toElement,v=c,_=_?yo(_):null,_!==null&&(C=ta(_),_!==C||_.tag!==5&&_.tag!==6)&&(_=null)):(v=null,_=c),v!==_)){if(T=NI,A="onMouseLeave",I="onMouseEnter",w="mouse",(t==="pointerout"||t==="pointerover")&&(T=bI,A="onPointerLeave",I="onPointerEnter",w="pointer"),C=v==null?g:Pa(v),S=_==null?g:Pa(_),g=new T(A,w+"leave",v,n,d),g.target=C,g.relatedTarget=S,A=null,yo(d)===c&&(T=new T(I,w+"enter",_,n,d),T.target=S,T.relatedTarget=C,A=T),C=A,v&&_)t:{for(T=v,I=_,w=0,S=T;S;S=Ea(S))w++;for(S=0,A=I;A;A=Ea(A))S++;for(;0<w-S;)T=Ea(T),w--;for(;0<S-w;)I=Ea(I),S--;for(;w--;){if(T===I||I!==null&&T===I.alternate)break t;T=Ea(T),I=Ea(I)}T=null}else T=null;v!==null&&VI(f,g,v,T,!1),_!==null&&C!==null&&VI(f,C,_,T,!0)}}e:{if(g=c?Pa(c):window,v=g.nodeName&&g.nodeName.toLowerCase(),v==="select"||v==="input"&&g.type==="file")var O=sF;else if(xI(g))if(L1)O=uF;else{O=aF;var L=oF}else(v=g.nodeName)&&v.toLowerCase()==="input"&&(g.type==="checkbox"||g.type==="radio")&&(O=lF);if(O&&(O=O(t,c))){P1(f,O,n,d);break e}L&&L(t,g,c),t==="focusout"&&(L=g._wrapperState)&&L.controlled&&g.type==="number"&&Hg(g,"number",g.value)}switch(L=c?Pa(c):window,t){case"focusin":(xI(L)||L.contentEditable==="true")&&(Oa=L,sy=c,ju=null);break;case"focusout":ju=sy=Oa=null;break;case"mousedown":oy=!0;break;case"contextmenu":case"mouseup":case"dragend":oy=!1,FI(f,n,d);break;case"selectionchange":if(dF)break;case"keydown":case"keyup":FI(f,n,d)}var P;if(Hv)e:{switch(t){case"compositionstart":var q="onCompositionStart";break e;case"compositionend":q="onCompositionEnd";break e;case"compositionupdate":q="onCompositionUpdate";break e}q=void 0}else xa?O1(t,n)&&(q="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(q="onCompositionStart");q&&(x1&&n.locale!=="ko"&&(xa||q!=="onCompositionStart"?q==="onCompositionEnd"&&xa&&(P=R1()):(ds=d,zv="value"in ds?ds.value:ds.textContent,xa=!0)),L=Qd(c,q),0<L.length&&(q=new DI(q,t,null,n,d),f.push({event:q,listeners:L}),P?q.data=P:(P=M1(n),P!==null&&(q.data=P)))),(P=eF?tF(t,n):nF(t,n))&&(c=Qd(c,"onBeforeInput"),0<c.length&&(d=new DI("onBeforeInput","beforeinput",null,n,d),f.push({event:d,listeners:c}),d.data=P))}G1(f,e)})}function mc(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Qd(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=lc(t,n),s!=null&&r.unshift(mc(t,s,i)),s=lc(t,e),s!=null&&r.push(mc(t,s,i))),t=t.return}return r}function Ea(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function VI(t,e,n,r,i){for(var s=e._reactName,o=[];n!==null&&n!==r;){var a=n,u=a.alternate,c=a.stateNode;if(u!==null&&u===r)break;a.tag===5&&c!==null&&(a=c,i?(u=lc(n,s),u!=null&&o.unshift(mc(n,u,a))):i||(u=lc(n,s),u!=null&&o.push(mc(n,u,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var gF=/\r\n?/g,yF=/\u0000|\uFFFD/g;function BI(t){return(typeof t=="string"?t:""+t).replace(gF,`
`).replace(yF,"")}function ed(t,e,n){if(e=BI(e),BI(t)!==e&&n)throw Error(U(425))}function Xd(){}var ay=null,ly=null;function uy(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var cy=typeof setTimeout=="function"?setTimeout:void 0,vF=typeof clearTimeout=="function"?clearTimeout:void 0,WI=typeof Promise=="function"?Promise:void 0,_F=typeof queueMicrotask=="function"?queueMicrotask:typeof WI<"u"?function(t){return WI.resolve(null).then(t).catch(wF)}:cy;function wF(t){setTimeout(function(){throw t})}function Zm(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),hc(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);hc(e)}function _s(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function jI(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Rl=Math.random().toString(36).slice(2),Yr="__reactFiber$"+Rl,gc="__reactProps$"+Rl,Ai="__reactContainer$"+Rl,hy="__reactEvents$"+Rl,IF="__reactListeners$"+Rl,SF="__reactHandles$"+Rl;function yo(t){var e=t[Yr];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Ai]||n[Yr]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=jI(t);t!==null;){if(n=t[Yr])return n;t=jI(t)}return e}t=n,n=t.parentNode}return null}function Qc(t){return t=t[Yr]||t[Ai],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Pa(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(U(33))}function rp(t){return t[gc]||null}var dy=[],La=-1;function Bs(t){return{current:t}}function it(t){0>La||(t.current=dy[La],dy[La]=null,La--)}function Ye(t,e){La++,dy[La]=t.current,t.current=e}var As={},Dn=Bs(As),Zn=Bs(!1),xo=As;function ol(t,e){var n=t.type.contextTypes;if(!n)return As;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function er(t){return t=t.childContextTypes,t!=null}function Jd(){it(Zn),it(Dn)}function zI(t,e,n){if(Dn.current!==As)throw Error(U(168));Ye(Dn,e),Ye(Zn,n)}function Y1(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(U(108,oL(t)||"Unknown",i));return vt({},n,r)}function Zd(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||As,xo=Dn.current,Ye(Dn,t),Ye(Zn,Zn.current),!0}function qI(t,e,n){var r=t.stateNode;if(!r)throw Error(U(169));n?(t=Y1(t,e,xo),r.__reactInternalMemoizedMergedChildContext=t,it(Zn),it(Dn),Ye(Dn,t)):it(Zn),Ye(Zn,n)}var mi=null,ip=!1,eg=!1;function K1(t){mi===null?mi=[t]:mi.push(t)}function EF(t){ip=!0,K1(t)}function Ws(){if(!eg&&mi!==null){eg=!0;var t=0,e=We;try{var n=mi;for(We=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}mi=null,ip=!1}catch(i){throw mi!==null&&(mi=mi.slice(t+1)),w1(Vv,Ws),i}finally{We=e,eg=!1}}return null}var Fa=[],Ua=0,ef=null,tf=0,_r=[],wr=0,Oo=null,wi=1,Ii="";function ao(t,e){Fa[Ua++]=tf,Fa[Ua++]=ef,ef=t,tf=e}function Q1(t,e,n){_r[wr++]=wi,_r[wr++]=Ii,_r[wr++]=Oo,Oo=t;var r=wi;t=Ii;var i=32-Fr(r)-1;r&=~(1<<i),n+=1;var s=32-Fr(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,wi=1<<32-Fr(e)+i|n<<i|r,Ii=s+t}else wi=1<<s|n<<i|r,Ii=t}function Kv(t){t.return!==null&&(ao(t,1),Q1(t,1,0))}function Qv(t){for(;t===ef;)ef=Fa[--Ua],Fa[Ua]=null,tf=Fa[--Ua],Fa[Ua]=null;for(;t===Oo;)Oo=_r[--wr],_r[wr]=null,Ii=_r[--wr],_r[wr]=null,wi=_r[--wr],_r[wr]=null}var cr=null,ur=null,ht=!1,Or=null;function X1(t,e){var n=Ir(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function GI(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,cr=t,ur=_s(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,cr=t,ur=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Oo!==null?{id:wi,overflow:Ii}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Ir(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,cr=t,ur=null,!0):!1;default:return!1}}function fy(t){return(t.mode&1)!==0&&(t.flags&128)===0}function py(t){if(ht){var e=ur;if(e){var n=e;if(!GI(t,e)){if(fy(t))throw Error(U(418));e=_s(n.nextSibling);var r=cr;e&&GI(t,e)?X1(r,n):(t.flags=t.flags&-4097|2,ht=!1,cr=t)}}else{if(fy(t))throw Error(U(418));t.flags=t.flags&-4097|2,ht=!1,cr=t}}}function HI(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;cr=t}function td(t){if(t!==cr)return!1;if(!ht)return HI(t),ht=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!uy(t.type,t.memoizedProps)),e&&(e=ur)){if(fy(t))throw J1(),Error(U(418));for(;e;)X1(t,e),e=_s(e.nextSibling)}if(HI(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(U(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){ur=_s(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}ur=null}}else ur=cr?_s(t.stateNode.nextSibling):null;return!0}function J1(){for(var t=ur;t;)t=_s(t.nextSibling)}function al(){ur=cr=null,ht=!1}function Xv(t){Or===null?Or=[t]:Or.push(t)}var TF=Ui.ReactCurrentBatchConfig;function Rr(t,e){if(t&&t.defaultProps){e=vt({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}var nf=Bs(null),rf=null,$a=null,Jv=null;function Zv(){Jv=$a=rf=null}function e_(t){var e=nf.current;it(nf),t._currentValue=e}function my(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Qa(t,e){rf=t,Jv=$a=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Yn=!0),t.firstContext=null)}function kr(t){var e=t._currentValue;if(Jv!==t)if(t={context:t,memoizedValue:e,next:null},$a===null){if(rf===null)throw Error(U(308));$a=t,rf.dependencies={lanes:0,firstContext:t}}else $a=$a.next=t;return e}var vo=null;function t_(t){vo===null?vo=[t]:vo.push(t)}function Z1(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,t_(e)):(n.next=i.next,i.next=n),e.interleaved=n,Ri(t,r)}function Ri(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var as=!1;function n_(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function ek(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Ci(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function ws(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,Fe&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,Ri(t,n)}return i=r.interleaved,i===null?(e.next=e,t_(r)):(e.next=i.next,i.next=e),r.interleaved=e,Ri(t,n)}function Td(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Bv(t,n)}}function YI(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function sf(t,e,n,r){var i=t.updateQueue;as=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var u=a,c=u.next;u.next=null,o===null?s=c:o.next=c,o=u;var d=t.alternate;d!==null&&(d=d.updateQueue,a=d.lastBaseUpdate,a!==o&&(a===null?d.firstBaseUpdate=c:a.next=c,d.lastBaseUpdate=u))}if(s!==null){var f=i.baseState;o=0,d=c=u=null,a=s;do{var g=a.lane,v=a.eventTime;if((r&g)===g){d!==null&&(d=d.next={eventTime:v,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var _=t,T=a;switch(g=e,v=n,T.tag){case 1:if(_=T.payload,typeof _=="function"){f=_.call(v,f,g);break e}f=_;break e;case 3:_.flags=_.flags&-65537|128;case 0:if(_=T.payload,g=typeof _=="function"?_.call(v,f,g):_,g==null)break e;f=vt({},f,g);break e;case 2:as=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,g=i.effects,g===null?i.effects=[a]:g.push(a))}else v={eventTime:v,lane:g,tag:a.tag,payload:a.payload,callback:a.callback,next:null},d===null?(c=d=v,u=f):d=d.next=v,o|=g;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;g=a,a=g.next,g.next=null,i.lastBaseUpdate=g,i.shared.pending=null}}while(1);if(d===null&&(u=f),i.baseState=u,i.firstBaseUpdate=c,i.lastBaseUpdate=d,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);Po|=o,t.lanes=o,t.memoizedState=f}}function KI(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(U(191,i));i.call(r)}}}var tk=new ZT.Component().refs;function gy(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:vt({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var sp={isMounted:function(t){return(t=t._reactInternals)?ta(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Pn(),i=Ss(t),s=Ci(r,i);s.payload=e,n!=null&&(s.callback=n),e=ws(t,s,i),e!==null&&(Ur(e,t,i,r),Td(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Pn(),i=Ss(t),s=Ci(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=ws(t,s,i),e!==null&&(Ur(e,t,i,r),Td(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Pn(),r=Ss(t),i=Ci(n,r);i.tag=2,e!=null&&(i.callback=e),e=ws(t,i,r),e!==null&&(Ur(e,t,r,n),Td(e,t,r))}};function QI(t,e,n,r,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!fc(n,r)||!fc(i,s):!0}function nk(t,e,n){var r=!1,i=As,s=e.contextType;return typeof s=="object"&&s!==null?s=kr(s):(i=er(e)?xo:Dn.current,r=e.contextTypes,s=(r=r!=null)?ol(t,i):As),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=sp,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function XI(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&sp.enqueueReplaceState(e,e.state,null)}function yy(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs=tk,n_(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=kr(s):(s=er(e)?xo:Dn.current,i.context=ol(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(gy(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&sp.enqueueReplaceState(i,i.state,null),sf(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function pu(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(U(309));var r=n.stateNode}if(!r)throw Error(U(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=i.refs;a===tk&&(a=i.refs={}),o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(U(284));if(!n._owner)throw Error(U(290,t))}return t}function nd(t,e){throw t=Object.prototype.toString.call(e),Error(U(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function JI(t){var e=t._init;return e(t._payload)}function rk(t){function e(I,w){if(t){var S=I.deletions;S===null?(I.deletions=[w],I.flags|=16):S.push(w)}}function n(I,w){if(!t)return null;for(;w!==null;)e(I,w),w=w.sibling;return null}function r(I,w){for(I=new Map;w!==null;)w.key!==null?I.set(w.key,w):I.set(w.index,w),w=w.sibling;return I}function i(I,w){return I=Es(I,w),I.index=0,I.sibling=null,I}function s(I,w,S){return I.index=S,t?(S=I.alternate,S!==null?(S=S.index,S<w?(I.flags|=2,w):S):(I.flags|=2,w)):(I.flags|=1048576,w)}function o(I){return t&&I.alternate===null&&(I.flags|=2),I}function a(I,w,S,A){return w===null||w.tag!==6?(w=ag(S,I.mode,A),w.return=I,w):(w=i(w,S),w.return=I,w)}function u(I,w,S,A){var O=S.type;return O===Ra?d(I,w,S.props.children,A,S.key):w!==null&&(w.elementType===O||typeof O=="object"&&O!==null&&O.$$typeof===os&&JI(O)===w.type)?(A=i(w,S.props),A.ref=pu(I,w,S),A.return=I,A):(A=Ad(S.type,S.key,S.props,null,I.mode,A),A.ref=pu(I,w,S),A.return=I,A)}function c(I,w,S,A){return w===null||w.tag!==4||w.stateNode.containerInfo!==S.containerInfo||w.stateNode.implementation!==S.implementation?(w=lg(S,I.mode,A),w.return=I,w):(w=i(w,S.children||[]),w.return=I,w)}function d(I,w,S,A,O){return w===null||w.tag!==7?(w=Co(S,I.mode,A,O),w.return=I,w):(w=i(w,S),w.return=I,w)}function f(I,w,S){if(typeof w=="string"&&w!==""||typeof w=="number")return w=ag(""+w,I.mode,S),w.return=I,w;if(typeof w=="object"&&w!==null){switch(w.$$typeof){case qh:return S=Ad(w.type,w.key,w.props,null,I.mode,S),S.ref=pu(I,null,w),S.return=I,S;case Aa:return w=lg(w,I.mode,S),w.return=I,w;case os:var A=w._init;return f(I,A(w._payload),S)}if(bu(w)||uu(w))return w=Co(w,I.mode,S,null),w.return=I,w;nd(I,w)}return null}function g(I,w,S,A){var O=w!==null?w.key:null;if(typeof S=="string"&&S!==""||typeof S=="number")return O!==null?null:a(I,w,""+S,A);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case qh:return S.key===O?u(I,w,S,A):null;case Aa:return S.key===O?c(I,w,S,A):null;case os:return O=S._init,g(I,w,O(S._payload),A)}if(bu(S)||uu(S))return O!==null?null:d(I,w,S,A,null);nd(I,S)}return null}function v(I,w,S,A,O){if(typeof A=="string"&&A!==""||typeof A=="number")return I=I.get(S)||null,a(w,I,""+A,O);if(typeof A=="object"&&A!==null){switch(A.$$typeof){case qh:return I=I.get(A.key===null?S:A.key)||null,u(w,I,A,O);case Aa:return I=I.get(A.key===null?S:A.key)||null,c(w,I,A,O);case os:var L=A._init;return v(I,w,S,L(A._payload),O)}if(bu(A)||uu(A))return I=I.get(S)||null,d(w,I,A,O,null);nd(w,A)}return null}function _(I,w,S,A){for(var O=null,L=null,P=w,q=w=0,Te=null;P!==null&&q<S.length;q++){P.index>q?(Te=P,P=null):Te=P.sibling;var le=g(I,P,S[q],A);if(le===null){P===null&&(P=Te);break}t&&P&&le.alternate===null&&e(I,P),w=s(le,w,q),L===null?O=le:L.sibling=le,L=le,P=Te}if(q===S.length)return n(I,P),ht&&ao(I,q),O;if(P===null){for(;q<S.length;q++)P=f(I,S[q],A),P!==null&&(w=s(P,w,q),L===null?O=P:L.sibling=P,L=P);return ht&&ao(I,q),O}for(P=r(I,P);q<S.length;q++)Te=v(P,I,q,S[q],A),Te!==null&&(t&&Te.alternate!==null&&P.delete(Te.key===null?q:Te.key),w=s(Te,w,q),L===null?O=Te:L.sibling=Te,L=Te);return t&&P.forEach(function(Mt){return e(I,Mt)}),ht&&ao(I,q),O}function T(I,w,S,A){var O=uu(S);if(typeof O!="function")throw Error(U(150));if(S=O.call(S),S==null)throw Error(U(151));for(var L=O=null,P=w,q=w=0,Te=null,le=S.next();P!==null&&!le.done;q++,le=S.next()){P.index>q?(Te=P,P=null):Te=P.sibling;var Mt=g(I,P,le.value,A);if(Mt===null){P===null&&(P=Te);break}t&&P&&Mt.alternate===null&&e(I,P),w=s(Mt,w,q),L===null?O=Mt:L.sibling=Mt,L=Mt,P=Te}if(le.done)return n(I,P),ht&&ao(I,q),O;if(P===null){for(;!le.done;q++,le=S.next())le=f(I,le.value,A),le!==null&&(w=s(le,w,q),L===null?O=le:L.sibling=le,L=le);return ht&&ao(I,q),O}for(P=r(I,P);!le.done;q++,le=S.next())le=v(P,I,q,le.value,A),le!==null&&(t&&le.alternate!==null&&P.delete(le.key===null?q:le.key),w=s(le,w,q),L===null?O=le:L.sibling=le,L=le);return t&&P.forEach(function(Ee){return e(I,Ee)}),ht&&ao(I,q),O}function C(I,w,S,A){if(typeof S=="object"&&S!==null&&S.type===Ra&&S.key===null&&(S=S.props.children),typeof S=="object"&&S!==null){switch(S.$$typeof){case qh:e:{for(var O=S.key,L=w;L!==null;){if(L.key===O){if(O=S.type,O===Ra){if(L.tag===7){n(I,L.sibling),w=i(L,S.props.children),w.return=I,I=w;break e}}else if(L.elementType===O||typeof O=="object"&&O!==null&&O.$$typeof===os&&JI(O)===L.type){n(I,L.sibling),w=i(L,S.props),w.ref=pu(I,L,S),w.return=I,I=w;break e}n(I,L);break}else e(I,L);L=L.sibling}S.type===Ra?(w=Co(S.props.children,I.mode,A,S.key),w.return=I,I=w):(A=Ad(S.type,S.key,S.props,null,I.mode,A),A.ref=pu(I,w,S),A.return=I,I=A)}return o(I);case Aa:e:{for(L=S.key;w!==null;){if(w.key===L)if(w.tag===4&&w.stateNode.containerInfo===S.containerInfo&&w.stateNode.implementation===S.implementation){n(I,w.sibling),w=i(w,S.children||[]),w.return=I,I=w;break e}else{n(I,w);break}else e(I,w);w=w.sibling}w=lg(S,I.mode,A),w.return=I,I=w}return o(I);case os:return L=S._init,C(I,w,L(S._payload),A)}if(bu(S))return _(I,w,S,A);if(uu(S))return T(I,w,S,A);nd(I,S)}return typeof S=="string"&&S!==""||typeof S=="number"?(S=""+S,w!==null&&w.tag===6?(n(I,w.sibling),w=i(w,S),w.return=I,I=w):(n(I,w),w=ag(S,I.mode,A),w.return=I,I=w),o(I)):n(I,w)}return C}var ll=rk(!0),ik=rk(!1),Xc={},ti=Bs(Xc),yc=Bs(Xc),vc=Bs(Xc);function _o(t){if(t===Xc)throw Error(U(174));return t}function r_(t,e){switch(Ye(vc,e),Ye(yc,t),Ye(ti,Xc),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Kg(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Kg(e,t)}it(ti),Ye(ti,e)}function ul(){it(ti),it(yc),it(vc)}function sk(t){_o(vc.current);var e=_o(ti.current),n=Kg(e,t.type);e!==n&&(Ye(yc,t),Ye(ti,n))}function i_(t){yc.current===t&&(it(ti),it(yc))}var gt=Bs(0);function of(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var tg=[];function s_(){for(var t=0;t<tg.length;t++)tg[t]._workInProgressVersionPrimary=null;tg.length=0}var kd=Ui.ReactCurrentDispatcher,ng=Ui.ReactCurrentBatchConfig,Mo=0,yt=null,Ft=null,Qt=null,af=!1,zu=!1,_c=0,kF=0;function wn(){throw Error(U(321))}function o_(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Br(t[n],e[n]))return!1;return!0}function a_(t,e,n,r,i,s){if(Mo=s,yt=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,kd.current=t===null||t.memoizedState===null?bF:AF,t=n(r,i),zu){s=0;do{if(zu=!1,_c=0,25<=s)throw Error(U(301));s+=1,Qt=Ft=null,e.updateQueue=null,kd.current=RF,t=n(r,i)}while(zu)}if(kd.current=lf,e=Ft!==null&&Ft.next!==null,Mo=0,Qt=Ft=yt=null,af=!1,e)throw Error(U(300));return t}function l_(){var t=_c!==0;return _c=0,t}function Hr(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Qt===null?yt.memoizedState=Qt=t:Qt=Qt.next=t,Qt}function Cr(){if(Ft===null){var t=yt.alternate;t=t!==null?t.memoizedState:null}else t=Ft.next;var e=Qt===null?yt.memoizedState:Qt.next;if(e!==null)Qt=e,Ft=t;else{if(t===null)throw Error(U(310));Ft=t,t={memoizedState:Ft.memoizedState,baseState:Ft.baseState,baseQueue:Ft.baseQueue,queue:Ft.queue,next:null},Qt===null?yt.memoizedState=Qt=t:Qt=Qt.next=t}return Qt}function wc(t,e){return typeof e=="function"?e(t):e}function rg(t){var e=Cr(),n=e.queue;if(n===null)throw Error(U(311));n.lastRenderedReducer=t;var r=Ft,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,u=null,c=s;do{var d=c.lane;if((Mo&d)===d)u!==null&&(u=u.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var f={lane:d,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};u===null?(a=u=f,o=r):u=u.next=f,yt.lanes|=d,Po|=d}c=c.next}while(c!==null&&c!==s);u===null?o=r:u.next=a,Br(r,e.memoizedState)||(Yn=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=u,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,yt.lanes|=s,Po|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function ig(t){var e=Cr(),n=e.queue;if(n===null)throw Error(U(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);Br(s,e.memoizedState)||(Yn=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function ok(){}function ak(t,e){var n=yt,r=Cr(),i=e(),s=!Br(r.memoizedState,i);if(s&&(r.memoizedState=i,Yn=!0),r=r.queue,u_(ck.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||Qt!==null&&Qt.memoizedState.tag&1){if(n.flags|=2048,Ic(9,uk.bind(null,n,r,i,e),void 0,null),Zt===null)throw Error(U(349));Mo&30||lk(n,e,i)}return i}function lk(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=yt.updateQueue,e===null?(e={lastEffect:null,stores:null},yt.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function uk(t,e,n,r){e.value=n,e.getSnapshot=r,hk(e)&&dk(t)}function ck(t,e,n){return n(function(){hk(e)&&dk(t)})}function hk(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Br(t,n)}catch{return!0}}function dk(t){var e=Ri(t,1);e!==null&&Ur(e,t,1,-1)}function ZI(t){var e=Hr();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:wc,lastRenderedState:t},e.queue=t,t=t.dispatch=DF.bind(null,yt,t),[e.memoizedState,t]}function Ic(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=yt.updateQueue,e===null?(e={lastEffect:null,stores:null},yt.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function fk(){return Cr().memoizedState}function Cd(t,e,n,r){var i=Hr();yt.flags|=t,i.memoizedState=Ic(1|e,n,void 0,r===void 0?null:r)}function op(t,e,n,r){var i=Cr();r=r===void 0?null:r;var s=void 0;if(Ft!==null){var o=Ft.memoizedState;if(s=o.destroy,r!==null&&o_(r,o.deps)){i.memoizedState=Ic(e,n,s,r);return}}yt.flags|=t,i.memoizedState=Ic(1|e,n,s,r)}function eS(t,e){return Cd(8390656,8,t,e)}function u_(t,e){return op(2048,8,t,e)}function pk(t,e){return op(4,2,t,e)}function mk(t,e){return op(4,4,t,e)}function gk(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function yk(t,e,n){return n=n!=null?n.concat([t]):null,op(4,4,gk.bind(null,e,t),n)}function c_(){}function vk(t,e){var n=Cr();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&o_(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function _k(t,e){var n=Cr();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&o_(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function wk(t,e,n){return Mo&21?(Br(n,e)||(n=E1(),yt.lanes|=n,Po|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Yn=!0),t.memoizedState=n)}function CF(t,e){var n=We;We=n!==0&&4>n?n:4,t(!0);var r=ng.transition;ng.transition={};try{t(!1),e()}finally{We=n,ng.transition=r}}function Ik(){return Cr().memoizedState}function NF(t,e,n){var r=Ss(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Sk(t))Ek(e,n);else if(n=Z1(t,e,n,r),n!==null){var i=Pn();Ur(n,t,r,i),Tk(n,e,r)}}function DF(t,e,n){var r=Ss(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Sk(t))Ek(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,Br(a,o)){var u=e.interleaved;u===null?(i.next=i,t_(e)):(i.next=u.next,u.next=i),e.interleaved=i;return}}catch{}finally{}n=Z1(t,e,i,r),n!==null&&(i=Pn(),Ur(n,t,r,i),Tk(n,e,r))}}function Sk(t){var e=t.alternate;return t===yt||e!==null&&e===yt}function Ek(t,e){zu=af=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function Tk(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Bv(t,n)}}var lf={readContext:kr,useCallback:wn,useContext:wn,useEffect:wn,useImperativeHandle:wn,useInsertionEffect:wn,useLayoutEffect:wn,useMemo:wn,useReducer:wn,useRef:wn,useState:wn,useDebugValue:wn,useDeferredValue:wn,useTransition:wn,useMutableSource:wn,useSyncExternalStore:wn,useId:wn,unstable_isNewReconciler:!1},bF={readContext:kr,useCallback:function(t,e){return Hr().memoizedState=[t,e===void 0?null:e],t},useContext:kr,useEffect:eS,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Cd(4194308,4,gk.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Cd(4194308,4,t,e)},useInsertionEffect:function(t,e){return Cd(4,2,t,e)},useMemo:function(t,e){var n=Hr();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Hr();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=NF.bind(null,yt,t),[r.memoizedState,t]},useRef:function(t){var e=Hr();return t={current:t},e.memoizedState=t},useState:ZI,useDebugValue:c_,useDeferredValue:function(t){return Hr().memoizedState=t},useTransition:function(){var t=ZI(!1),e=t[0];return t=CF.bind(null,t[1]),Hr().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=yt,i=Hr();if(ht){if(n===void 0)throw Error(U(407));n=n()}else{if(n=e(),Zt===null)throw Error(U(349));Mo&30||lk(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,eS(ck.bind(null,r,s,t),[t]),r.flags|=2048,Ic(9,uk.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=Hr(),e=Zt.identifierPrefix;if(ht){var n=Ii,r=wi;n=(r&~(1<<32-Fr(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=_c++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=kF++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},AF={readContext:kr,useCallback:vk,useContext:kr,useEffect:u_,useImperativeHandle:yk,useInsertionEffect:pk,useLayoutEffect:mk,useMemo:_k,useReducer:rg,useRef:fk,useState:function(){return rg(wc)},useDebugValue:c_,useDeferredValue:function(t){var e=Cr();return wk(e,Ft.memoizedState,t)},useTransition:function(){var t=rg(wc)[0],e=Cr().memoizedState;return[t,e]},useMutableSource:ok,useSyncExternalStore:ak,useId:Ik,unstable_isNewReconciler:!1},RF={readContext:kr,useCallback:vk,useContext:kr,useEffect:u_,useImperativeHandle:yk,useInsertionEffect:pk,useLayoutEffect:mk,useMemo:_k,useReducer:ig,useRef:fk,useState:function(){return ig(wc)},useDebugValue:c_,useDeferredValue:function(t){var e=Cr();return Ft===null?e.memoizedState=t:wk(e,Ft.memoizedState,t)},useTransition:function(){var t=ig(wc)[0],e=Cr().memoizedState;return[t,e]},useMutableSource:ok,useSyncExternalStore:ak,useId:Ik,unstable_isNewReconciler:!1};function cl(t,e){try{var n="",r=e;do n+=sL(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function sg(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function vy(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var xF=typeof WeakMap=="function"?WeakMap:Map;function kk(t,e,n){n=Ci(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){cf||(cf=!0,Dy=r),vy(t,e)},n}function Ck(t,e,n){n=Ci(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){vy(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){vy(t,e),typeof r!="function"&&(Is===null?Is=new Set([this]):Is.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function tS(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new xF;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=GF.bind(null,t,e,n),e.then(t,t))}function nS(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function rS(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Ci(-1,1),e.tag=2,ws(n,e,1))),n.lanes|=1),t)}var OF=Ui.ReactCurrentOwner,Yn=!1;function On(t,e,n,r){e.child=t===null?ik(e,null,n,r):ll(e,t.child,n,r)}function iS(t,e,n,r,i){n=n.render;var s=e.ref;return Qa(e,i),r=a_(t,e,n,r,s,i),n=l_(),t!==null&&!Yn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,xi(t,e,i)):(ht&&n&&Kv(e),e.flags|=1,On(t,e,r,i),e.child)}function sS(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!v_(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,Nk(t,e,s,r,i)):(t=Ad(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:fc,n(o,r)&&t.ref===e.ref)return xi(t,e,i)}return e.flags|=1,t=Es(s,r),t.ref=e.ref,t.return=e,e.child=t}function Nk(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(fc(s,r)&&t.ref===e.ref)if(Yn=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(Yn=!0);else return e.lanes=t.lanes,xi(t,e,i)}return _y(t,e,n,r,i)}function Dk(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ye(Ba,lr),lr|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Ye(Ba,lr),lr|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,Ye(Ba,lr),lr|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,Ye(Ba,lr),lr|=r;return On(t,e,i,n),e.child}function bk(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function _y(t,e,n,r,i){var s=er(n)?xo:Dn.current;return s=ol(e,s),Qa(e,i),n=a_(t,e,n,r,s,i),r=l_(),t!==null&&!Yn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,xi(t,e,i)):(ht&&r&&Kv(e),e.flags|=1,On(t,e,n,i),e.child)}function oS(t,e,n,r,i){if(er(n)){var s=!0;Zd(e)}else s=!1;if(Qa(e,i),e.stateNode===null)Nd(t,e),nk(e,n,r),yy(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var u=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=kr(c):(c=er(n)?xo:Dn.current,c=ol(e,c));var d=n.getDerivedStateFromProps,f=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function";f||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||u!==c)&&XI(e,o,r,c),as=!1;var g=e.memoizedState;o.state=g,sf(e,r,o,i),u=e.memoizedState,a!==r||g!==u||Zn.current||as?(typeof d=="function"&&(gy(e,n,d,r),u=e.memoizedState),(a=as||QI(e,n,a,r,g,u,c))?(f||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=u),o.props=r,o.state=u,o.context=c,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,ek(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:Rr(e.type,a),o.props=c,f=e.pendingProps,g=o.context,u=n.contextType,typeof u=="object"&&u!==null?u=kr(u):(u=er(n)?xo:Dn.current,u=ol(e,u));var v=n.getDerivedStateFromProps;(d=typeof v=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==f||g!==u)&&XI(e,o,r,u),as=!1,g=e.memoizedState,o.state=g,sf(e,r,o,i);var _=e.memoizedState;a!==f||g!==_||Zn.current||as?(typeof v=="function"&&(gy(e,n,v,r),_=e.memoizedState),(c=as||QI(e,n,c,r,g,_,u)||!1)?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,_,u),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,_,u)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=_),o.props=r,o.state=_,o.context=u,r=c):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),r=!1)}return wy(t,e,n,r,s,i)}function wy(t,e,n,r,i,s){bk(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&qI(e,n,!1),xi(t,e,s);r=e.stateNode,OF.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=ll(e,t.child,null,s),e.child=ll(e,null,a,s)):On(t,e,a,s),e.memoizedState=r.state,i&&qI(e,n,!0),e.child}function Ak(t){var e=t.stateNode;e.pendingContext?zI(t,e.pendingContext,e.pendingContext!==e.context):e.context&&zI(t,e.context,!1),r_(t,e.containerInfo)}function aS(t,e,n,r,i){return al(),Xv(i),e.flags|=256,On(t,e,n,r),e.child}var Iy={dehydrated:null,treeContext:null,retryLane:0};function Sy(t){return{baseLanes:t,cachePool:null,transitions:null}}function Rk(t,e,n){var r=e.pendingProps,i=gt.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(i&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),Ye(gt,i&1),t===null)return py(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=up(o,r,0,null),t=Co(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=Sy(n),e.memoizedState=Iy,t):h_(e,o));if(i=t.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return MF(t,e,o,r,a,i,n);if(s){s=r.fallback,o=e.mode,i=t.child,a=i.sibling;var u={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=u,e.deletions=null):(r=Es(i,u),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=Es(a,s):(s=Co(s,o,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=t.child.memoizedState,o=o===null?Sy(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=Iy,r}return s=t.child,t=s.sibling,r=Es(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function h_(t,e){return e=up({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function rd(t,e,n,r){return r!==null&&Xv(r),ll(e,t.child,null,n),t=h_(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function MF(t,e,n,r,i,s,o){if(n)return e.flags&256?(e.flags&=-257,r=sg(Error(U(422))),rd(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=up({mode:"visible",children:r.children},i,0,null),s=Co(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&ll(e,t.child,null,o),e.child.memoizedState=Sy(o),e.memoizedState=Iy,s);if(!(e.mode&1))return rd(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(U(419)),r=sg(s,r,void 0),rd(t,e,o,r)}if(a=(o&t.childLanes)!==0,Yn||a){if(r=Zt,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,Ri(t,i),Ur(r,t,i,-1))}return y_(),r=sg(Error(U(421))),rd(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=HF.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,ur=_s(i.nextSibling),cr=e,ht=!0,Or=null,t!==null&&(_r[wr++]=wi,_r[wr++]=Ii,_r[wr++]=Oo,wi=t.id,Ii=t.overflow,Oo=e),e=h_(e,r.children),e.flags|=4096,e)}function lS(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),my(t.return,e,n)}function og(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function xk(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(On(t,e,r.children,n),r=gt.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&lS(t,n,e);else if(t.tag===19)lS(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Ye(gt,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&of(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),og(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&of(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}og(e,!0,n,null,s);break;case"together":og(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Nd(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function xi(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Po|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(U(153));if(e.child!==null){for(t=e.child,n=Es(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Es(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function PF(t,e,n){switch(e.tag){case 3:Ak(e),al();break;case 5:sk(e);break;case 1:er(e.type)&&Zd(e);break;case 4:r_(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;Ye(nf,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Ye(gt,gt.current&1),e.flags|=128,null):n&e.child.childLanes?Rk(t,e,n):(Ye(gt,gt.current&1),t=xi(t,e,n),t!==null?t.sibling:null);Ye(gt,gt.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return xk(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ye(gt,gt.current),r)break;return null;case 22:case 23:return e.lanes=0,Dk(t,e,n)}return xi(t,e,n)}var Ok,Ey,Mk,Pk;Ok=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Ey=function(){};Mk=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,_o(ti.current);var s=null;switch(n){case"input":i=qg(t,i),r=qg(t,r),s=[];break;case"select":i=vt({},i,{value:void 0}),r=vt({},r,{value:void 0}),s=[];break;case"textarea":i=Yg(t,i),r=Yg(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Xd)}Qg(n,r);var o;n=null;for(c in i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&i[c]!=null)if(c==="style"){var a=i[c];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(oc.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in r){var u=r[c];if(a=i!=null?i[c]:void 0,r.hasOwnProperty(c)&&u!==a&&(u!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in u)u.hasOwnProperty(o)&&a[o]!==u[o]&&(n||(n={}),n[o]=u[o])}else n||(s||(s=[]),s.push(c,n)),n=u;else c==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,a=a?a.__html:void 0,u!=null&&a!==u&&(s=s||[]).push(c,u)):c==="children"?typeof u!="string"&&typeof u!="number"||(s=s||[]).push(c,""+u):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(oc.hasOwnProperty(c)?(u!=null&&c==="onScroll"&&et("scroll",t),s||a===u||(s=[])):(s=s||[]).push(c,u))}n&&(s=s||[]).push("style",n);var c=s;(e.updateQueue=c)&&(e.flags|=4)}};Pk=function(t,e,n,r){n!==r&&(e.flags|=4)};function mu(t,e){if(!ht)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function In(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function LF(t,e,n){var r=e.pendingProps;switch(Qv(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return In(e),null;case 1:return er(e.type)&&Jd(),In(e),null;case 3:return r=e.stateNode,ul(),it(Zn),it(Dn),s_(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(td(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Or!==null&&(Ry(Or),Or=null))),Ey(t,e),In(e),null;case 5:i_(e);var i=_o(vc.current);if(n=e.type,t!==null&&e.stateNode!=null)Mk(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(U(166));return In(e),null}if(t=_o(ti.current),td(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[Yr]=e,r[gc]=s,t=(e.mode&1)!==0,n){case"dialog":et("cancel",r),et("close",r);break;case"iframe":case"object":case"embed":et("load",r);break;case"video":case"audio":for(i=0;i<Ru.length;i++)et(Ru[i],r);break;case"source":et("error",r);break;case"img":case"image":case"link":et("error",r),et("load",r);break;case"details":et("toggle",r);break;case"input":yI(r,s),et("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},et("invalid",r);break;case"textarea":_I(r,s),et("invalid",r)}Qg(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&ed(r.textContent,a,t),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&ed(r.textContent,a,t),i=["children",""+a]):oc.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&et("scroll",r)}switch(n){case"input":Gh(r),vI(r,s,!0);break;case"textarea":Gh(r),wI(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=Xd)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=l1(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[Yr]=e,t[gc]=r,Ok(t,e,!1,!1),e.stateNode=t;e:{switch(o=Xg(n,r),n){case"dialog":et("cancel",t),et("close",t),i=r;break;case"iframe":case"object":case"embed":et("load",t),i=r;break;case"video":case"audio":for(i=0;i<Ru.length;i++)et(Ru[i],t);i=r;break;case"source":et("error",t),i=r;break;case"img":case"image":case"link":et("error",t),et("load",t),i=r;break;case"details":et("toggle",t),i=r;break;case"input":yI(t,r),i=qg(t,r),et("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=vt({},r,{value:void 0}),et("invalid",t);break;case"textarea":_I(t,r),i=Yg(t,r),et("invalid",t);break;default:i=r}Qg(n,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var u=a[s];s==="style"?h1(t,u):s==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&u1(t,u)):s==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&ac(t,u):typeof u=="number"&&ac(t,""+u):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(oc.hasOwnProperty(s)?u!=null&&s==="onScroll"&&et("scroll",t):u!=null&&Pv(t,s,u,o))}switch(n){case"input":Gh(t),vI(t,r,!1);break;case"textarea":Gh(t),wI(t);break;case"option":r.value!=null&&t.setAttribute("value",""+bs(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?Ga(t,!!r.multiple,s,!1):r.defaultValue!=null&&Ga(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=Xd)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return In(e),null;case 6:if(t&&e.stateNode!=null)Pk(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(U(166));if(n=_o(vc.current),_o(ti.current),td(e)){if(r=e.stateNode,n=e.memoizedProps,r[Yr]=e,(s=r.nodeValue!==n)&&(t=cr,t!==null))switch(t.tag){case 3:ed(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&ed(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Yr]=e,e.stateNode=r}return In(e),null;case 13:if(it(gt),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(ht&&ur!==null&&e.mode&1&&!(e.flags&128))J1(),al(),e.flags|=98560,s=!1;else if(s=td(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(U(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(U(317));s[Yr]=e}else al(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;In(e),s=!1}else Or!==null&&(Ry(Or),Or=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||gt.current&1?Bt===0&&(Bt=3):y_())),e.updateQueue!==null&&(e.flags|=4),In(e),null);case 4:return ul(),Ey(t,e),t===null&&pc(e.stateNode.containerInfo),In(e),null;case 10:return e_(e.type._context),In(e),null;case 17:return er(e.type)&&Jd(),In(e),null;case 19:if(it(gt),s=e.memoizedState,s===null)return In(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)mu(s,!1);else{if(Bt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=of(t),o!==null){for(e.flags|=128,mu(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Ye(gt,gt.current&1|2),e.child}t=t.sibling}s.tail!==null&&Dt()>hl&&(e.flags|=128,r=!0,mu(s,!1),e.lanes=4194304)}else{if(!r)if(t=of(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),mu(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!ht)return In(e),null}else 2*Dt()-s.renderingStartTime>hl&&n!==1073741824&&(e.flags|=128,r=!0,mu(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=Dt(),e.sibling=null,n=gt.current,Ye(gt,r?n&1|2:n&1),e):(In(e),null);case 22:case 23:return g_(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?lr&1073741824&&(In(e),e.subtreeFlags&6&&(e.flags|=8192)):In(e),null;case 24:return null;case 25:return null}throw Error(U(156,e.tag))}function FF(t,e){switch(Qv(e),e.tag){case 1:return er(e.type)&&Jd(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return ul(),it(Zn),it(Dn),s_(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return i_(e),null;case 13:if(it(gt),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(U(340));al()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return it(gt),null;case 4:return ul(),null;case 10:return e_(e.type._context),null;case 22:case 23:return g_(),null;case 24:return null;default:return null}}var id=!1,En=!1,UF=typeof WeakSet=="function"?WeakSet:Set,te=null;function Va(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){It(t,e,r)}else n.current=null}function Ty(t,e,n){try{n()}catch(r){It(t,e,r)}}var uS=!1;function $F(t,e){if(ay=Yd,t=$1(),Yv(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,u=-1,c=0,d=0,f=t,g=null;t:for(;;){for(var v;f!==n||i!==0&&f.nodeType!==3||(a=o+i),f!==s||r!==0&&f.nodeType!==3||(u=o+r),f.nodeType===3&&(o+=f.nodeValue.length),(v=f.firstChild)!==null;)g=f,f=v;for(;;){if(f===t)break t;if(g===n&&++c===i&&(a=o),g===s&&++d===r&&(u=o),(v=f.nextSibling)!==null)break;f=g,g=f.parentNode}f=v}n=a===-1||u===-1?null:{start:a,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(ly={focusedElem:t,selectionRange:n},Yd=!1,te=e;te!==null;)if(e=te,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,te=t;else for(;te!==null;){e=te;try{var _=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(_!==null){var T=_.memoizedProps,C=_.memoizedState,I=e.stateNode,w=I.getSnapshotBeforeUpdate(e.elementType===e.type?T:Rr(e.type,T),C);I.__reactInternalSnapshotBeforeUpdate=w}break;case 3:var S=e.stateNode.containerInfo;S.nodeType===1?S.textContent="":S.nodeType===9&&S.documentElement&&S.removeChild(S.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(U(163))}}catch(A){It(e,e.return,A)}if(t=e.sibling,t!==null){t.return=e.return,te=t;break}te=e.return}return _=uS,uS=!1,_}function qu(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&Ty(e,n,s)}i=i.next}while(i!==r)}}function ap(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function ky(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function Lk(t){var e=t.alternate;e!==null&&(t.alternate=null,Lk(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Yr],delete e[gc],delete e[hy],delete e[IF],delete e[SF])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Fk(t){return t.tag===5||t.tag===3||t.tag===4}function cS(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Fk(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Cy(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Xd));else if(r!==4&&(t=t.child,t!==null))for(Cy(t,e,n),t=t.sibling;t!==null;)Cy(t,e,n),t=t.sibling}function Ny(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Ny(t,e,n),t=t.sibling;t!==null;)Ny(t,e,n),t=t.sibling}var on=null,xr=!1;function ns(t,e,n){for(n=n.child;n!==null;)Uk(t,e,n),n=n.sibling}function Uk(t,e,n){if(ei&&typeof ei.onCommitFiberUnmount=="function")try{ei.onCommitFiberUnmount(Zf,n)}catch{}switch(n.tag){case 5:En||Va(n,e);case 6:var r=on,i=xr;on=null,ns(t,e,n),on=r,xr=i,on!==null&&(xr?(t=on,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):on.removeChild(n.stateNode));break;case 18:on!==null&&(xr?(t=on,n=n.stateNode,t.nodeType===8?Zm(t.parentNode,n):t.nodeType===1&&Zm(t,n),hc(t)):Zm(on,n.stateNode));break;case 4:r=on,i=xr,on=n.stateNode.containerInfo,xr=!0,ns(t,e,n),on=r,xr=i;break;case 0:case 11:case 14:case 15:if(!En&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&Ty(n,e,o),i=i.next}while(i!==r)}ns(t,e,n);break;case 1:if(!En&&(Va(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){It(n,e,a)}ns(t,e,n);break;case 21:ns(t,e,n);break;case 22:n.mode&1?(En=(r=En)||n.memoizedState!==null,ns(t,e,n),En=r):ns(t,e,n);break;default:ns(t,e,n)}}function hS(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new UF),e.forEach(function(r){var i=YF.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function Ar(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:on=a.stateNode,xr=!1;break e;case 3:on=a.stateNode.containerInfo,xr=!0;break e;case 4:on=a.stateNode.containerInfo,xr=!0;break e}a=a.return}if(on===null)throw Error(U(160));Uk(s,o,i),on=null,xr=!1;var u=i.alternate;u!==null&&(u.return=null),i.return=null}catch(c){It(i,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)$k(e,t),e=e.sibling}function $k(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Ar(e,t),Gr(t),r&4){try{qu(3,t,t.return),ap(3,t)}catch(T){It(t,t.return,T)}try{qu(5,t,t.return)}catch(T){It(t,t.return,T)}}break;case 1:Ar(e,t),Gr(t),r&512&&n!==null&&Va(n,n.return);break;case 5:if(Ar(e,t),Gr(t),r&512&&n!==null&&Va(n,n.return),t.flags&32){var i=t.stateNode;try{ac(i,"")}catch(T){It(t,t.return,T)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,a=t.type,u=t.updateQueue;if(t.updateQueue=null,u!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&o1(i,s),Xg(a,o);var c=Xg(a,s);for(o=0;o<u.length;o+=2){var d=u[o],f=u[o+1];d==="style"?h1(i,f):d==="dangerouslySetInnerHTML"?u1(i,f):d==="children"?ac(i,f):Pv(i,d,f,c)}switch(a){case"input":Gg(i,s);break;case"textarea":a1(i,s);break;case"select":var g=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var v=s.value;v!=null?Ga(i,!!s.multiple,v,!1):g!==!!s.multiple&&(s.defaultValue!=null?Ga(i,!!s.multiple,s.defaultValue,!0):Ga(i,!!s.multiple,s.multiple?[]:"",!1))}i[gc]=s}catch(T){It(t,t.return,T)}}break;case 6:if(Ar(e,t),Gr(t),r&4){if(t.stateNode===null)throw Error(U(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(T){It(t,t.return,T)}}break;case 3:if(Ar(e,t),Gr(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{hc(e.containerInfo)}catch(T){It(t,t.return,T)}break;case 4:Ar(e,t),Gr(t);break;case 13:Ar(e,t),Gr(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(p_=Dt())),r&4&&hS(t);break;case 22:if(d=n!==null&&n.memoizedState!==null,t.mode&1?(En=(c=En)||d,Ar(e,t),En=c):Ar(e,t),Gr(t),r&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!d&&t.mode&1)for(te=t,d=t.child;d!==null;){for(f=te=d;te!==null;){switch(g=te,v=g.child,g.tag){case 0:case 11:case 14:case 15:qu(4,g,g.return);break;case 1:Va(g,g.return);var _=g.stateNode;if(typeof _.componentWillUnmount=="function"){r=g,n=g.return;try{e=r,_.props=e.memoizedProps,_.state=e.memoizedState,_.componentWillUnmount()}catch(T){It(r,n,T)}}break;case 5:Va(g,g.return);break;case 22:if(g.memoizedState!==null){fS(f);continue}}v!==null?(v.return=g,te=v):fS(f)}d=d.sibling}e:for(d=null,f=t;;){if(f.tag===5){if(d===null){d=f;try{i=f.stateNode,c?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=f.stateNode,u=f.memoizedProps.style,o=u!=null&&u.hasOwnProperty("display")?u.display:null,a.style.display=c1("display",o))}catch(T){It(t,t.return,T)}}}else if(f.tag===6){if(d===null)try{f.stateNode.nodeValue=c?"":f.memoizedProps}catch(T){It(t,t.return,T)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===t)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===t)break e;for(;f.sibling===null;){if(f.return===null||f.return===t)break e;d===f&&(d=null),f=f.return}d===f&&(d=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:Ar(e,t),Gr(t),r&4&&hS(t);break;case 21:break;default:Ar(e,t),Gr(t)}}function Gr(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(Fk(n)){var r=n;break e}n=n.return}throw Error(U(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(ac(i,""),r.flags&=-33);var s=cS(t);Ny(t,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=cS(t);Cy(t,a,o);break;default:throw Error(U(161))}}catch(u){It(t,t.return,u)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function VF(t,e,n){te=t,Vk(t)}function Vk(t,e,n){for(var r=(t.mode&1)!==0;te!==null;){var i=te,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||id;if(!o){var a=i.alternate,u=a!==null&&a.memoizedState!==null||En;a=id;var c=En;if(id=o,(En=u)&&!c)for(te=i;te!==null;)o=te,u=o.child,o.tag===22&&o.memoizedState!==null?pS(i):u!==null?(u.return=o,te=u):pS(i);for(;s!==null;)te=s,Vk(s),s=s.sibling;te=i,id=a,En=c}dS(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,te=s):dS(t)}}function dS(t){for(;te!==null;){var e=te;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:En||ap(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!En)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:Rr(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&KI(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}KI(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var d=c.memoizedState;if(d!==null){var f=d.dehydrated;f!==null&&hc(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(U(163))}En||e.flags&512&&ky(e)}catch(g){It(e,e.return,g)}}if(e===t){te=null;break}if(n=e.sibling,n!==null){n.return=e.return,te=n;break}te=e.return}}function fS(t){for(;te!==null;){var e=te;if(e===t){te=null;break}var n=e.sibling;if(n!==null){n.return=e.return,te=n;break}te=e.return}}function pS(t){for(;te!==null;){var e=te;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{ap(4,e)}catch(u){It(e,n,u)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(u){It(e,i,u)}}var s=e.return;try{ky(e)}catch(u){It(e,s,u)}break;case 5:var o=e.return;try{ky(e)}catch(u){It(e,o,u)}}}catch(u){It(e,e.return,u)}if(e===t){te=null;break}var a=e.sibling;if(a!==null){a.return=e.return,te=a;break}te=e.return}}var BF=Math.ceil,uf=Ui.ReactCurrentDispatcher,d_=Ui.ReactCurrentOwner,Er=Ui.ReactCurrentBatchConfig,Fe=0,Zt=null,Ot=null,hn=0,lr=0,Ba=Bs(0),Bt=0,Sc=null,Po=0,lp=0,f_=0,Gu=null,Hn=null,p_=0,hl=1/0,pi=null,cf=!1,Dy=null,Is=null,sd=!1,fs=null,hf=0,Hu=0,by=null,Dd=-1,bd=0;function Pn(){return Fe&6?Dt():Dd!==-1?Dd:Dd=Dt()}function Ss(t){return t.mode&1?Fe&2&&hn!==0?hn&-hn:TF.transition!==null?(bd===0&&(bd=E1()),bd):(t=We,t!==0||(t=window.event,t=t===void 0?16:A1(t.type)),t):1}function Ur(t,e,n,r){if(50<Hu)throw Hu=0,by=null,Error(U(185));Yc(t,n,r),(!(Fe&2)||t!==Zt)&&(t===Zt&&(!(Fe&2)&&(lp|=n),Bt===4&&us(t,hn)),tr(t,r),n===1&&Fe===0&&!(e.mode&1)&&(hl=Dt()+500,ip&&Ws()))}function tr(t,e){var n=t.callbackNode;TL(t,e);var r=Hd(t,t===Zt?hn:0);if(r===0)n!==null&&EI(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&EI(n),e===1)t.tag===0?EF(mS.bind(null,t)):K1(mS.bind(null,t)),_F(function(){!(Fe&6)&&Ws()}),n=null;else{switch(T1(r)){case 1:n=Vv;break;case 4:n=I1;break;case 16:n=Gd;break;case 536870912:n=S1;break;default:n=Gd}n=Yk(n,Bk.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function Bk(t,e){if(Dd=-1,bd=0,Fe&6)throw Error(U(327));var n=t.callbackNode;if(Xa()&&t.callbackNode!==n)return null;var r=Hd(t,t===Zt?hn:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=df(t,r);else{e=r;var i=Fe;Fe|=2;var s=jk();(Zt!==t||hn!==e)&&(pi=null,hl=Dt()+500,ko(t,e));do try{zF();break}catch(a){Wk(t,a)}while(1);Zv(),uf.current=s,Fe=i,Ot!==null?e=0:(Zt=null,hn=0,e=Bt)}if(e!==0){if(e===2&&(i=ny(t),i!==0&&(r=i,e=Ay(t,i))),e===1)throw n=Sc,ko(t,0),us(t,r),tr(t,Dt()),n;if(e===6)us(t,r);else{if(i=t.current.alternate,!(r&30)&&!WF(i)&&(e=df(t,r),e===2&&(s=ny(t),s!==0&&(r=s,e=Ay(t,s))),e===1))throw n=Sc,ko(t,0),us(t,r),tr(t,Dt()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(U(345));case 2:lo(t,Hn,pi);break;case 3:if(us(t,r),(r&130023424)===r&&(e=p_+500-Dt(),10<e)){if(Hd(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){Pn(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=cy(lo.bind(null,t,Hn,pi),e);break}lo(t,Hn,pi);break;case 4:if(us(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-Fr(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=Dt()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*BF(r/1960))-r,10<r){t.timeoutHandle=cy(lo.bind(null,t,Hn,pi),r);break}lo(t,Hn,pi);break;case 5:lo(t,Hn,pi);break;default:throw Error(U(329))}}}return tr(t,Dt()),t.callbackNode===n?Bk.bind(null,t):null}function Ay(t,e){var n=Gu;return t.current.memoizedState.isDehydrated&&(ko(t,e).flags|=256),t=df(t,e),t!==2&&(e=Hn,Hn=n,e!==null&&Ry(e)),t}function Ry(t){Hn===null?Hn=t:Hn.push.apply(Hn,t)}function WF(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!Br(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function us(t,e){for(e&=~f_,e&=~lp,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Fr(e),r=1<<n;t[n]=-1,e&=~r}}function mS(t){if(Fe&6)throw Error(U(327));Xa();var e=Hd(t,0);if(!(e&1))return tr(t,Dt()),null;var n=df(t,e);if(t.tag!==0&&n===2){var r=ny(t);r!==0&&(e=r,n=Ay(t,r))}if(n===1)throw n=Sc,ko(t,0),us(t,e),tr(t,Dt()),n;if(n===6)throw Error(U(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,lo(t,Hn,pi),tr(t,Dt()),null}function m_(t,e){var n=Fe;Fe|=1;try{return t(e)}finally{Fe=n,Fe===0&&(hl=Dt()+500,ip&&Ws())}}function Lo(t){fs!==null&&fs.tag===0&&!(Fe&6)&&Xa();var e=Fe;Fe|=1;var n=Er.transition,r=We;try{if(Er.transition=null,We=1,t)return t()}finally{We=r,Er.transition=n,Fe=e,!(Fe&6)&&Ws()}}function g_(){lr=Ba.current,it(Ba)}function ko(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,vF(n)),Ot!==null)for(n=Ot.return;n!==null;){var r=n;switch(Qv(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Jd();break;case 3:ul(),it(Zn),it(Dn),s_();break;case 5:i_(r);break;case 4:ul();break;case 13:it(gt);break;case 19:it(gt);break;case 10:e_(r.type._context);break;case 22:case 23:g_()}n=n.return}if(Zt=t,Ot=t=Es(t.current,null),hn=lr=e,Bt=0,Sc=null,f_=lp=Po=0,Hn=Gu=null,vo!==null){for(e=0;e<vo.length;e++)if(n=vo[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}vo=null}return t}function Wk(t,e){do{var n=Ot;try{if(Zv(),kd.current=lf,af){for(var r=yt.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}af=!1}if(Mo=0,Qt=Ft=yt=null,zu=!1,_c=0,d_.current=null,n===null||n.return===null){Bt=1,Sc=e,Ot=null;break}e:{var s=t,o=n.return,a=n,u=e;if(e=hn,a.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var c=u,d=a,f=d.tag;if(!(d.mode&1)&&(f===0||f===11||f===15)){var g=d.alternate;g?(d.updateQueue=g.updateQueue,d.memoizedState=g.memoizedState,d.lanes=g.lanes):(d.updateQueue=null,d.memoizedState=null)}var v=nS(o);if(v!==null){v.flags&=-257,rS(v,o,a,s,e),v.mode&1&&tS(s,c,e),e=v,u=c;var _=e.updateQueue;if(_===null){var T=new Set;T.add(u),e.updateQueue=T}else _.add(u);break e}else{if(!(e&1)){tS(s,c,e),y_();break e}u=Error(U(426))}}else if(ht&&a.mode&1){var C=nS(o);if(C!==null){!(C.flags&65536)&&(C.flags|=256),rS(C,o,a,s,e),Xv(cl(u,a));break e}}s=u=cl(u,a),Bt!==4&&(Bt=2),Gu===null?Gu=[s]:Gu.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var I=kk(s,u,e);YI(s,I);break e;case 1:a=u;var w=s.type,S=s.stateNode;if(!(s.flags&128)&&(typeof w.getDerivedStateFromError=="function"||S!==null&&typeof S.componentDidCatch=="function"&&(Is===null||!Is.has(S)))){s.flags|=65536,e&=-e,s.lanes|=e;var A=Ck(s,a,e);YI(s,A);break e}}s=s.return}while(s!==null)}qk(n)}catch(O){e=O,Ot===n&&n!==null&&(Ot=n=n.return);continue}break}while(1)}function jk(){var t=uf.current;return uf.current=lf,t===null?lf:t}function y_(){(Bt===0||Bt===3||Bt===2)&&(Bt=4),Zt===null||!(Po&268435455)&&!(lp&268435455)||us(Zt,hn)}function df(t,e){var n=Fe;Fe|=2;var r=jk();(Zt!==t||hn!==e)&&(pi=null,ko(t,e));do try{jF();break}catch(i){Wk(t,i)}while(1);if(Zv(),Fe=n,uf.current=r,Ot!==null)throw Error(U(261));return Zt=null,hn=0,Bt}function jF(){for(;Ot!==null;)zk(Ot)}function zF(){for(;Ot!==null&&!mL();)zk(Ot)}function zk(t){var e=Hk(t.alternate,t,lr);t.memoizedProps=t.pendingProps,e===null?qk(t):Ot=e,d_.current=null}function qk(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=FF(n,e),n!==null){n.flags&=32767,Ot=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Bt=6,Ot=null;return}}else if(n=LF(n,e,lr),n!==null){Ot=n;return}if(e=e.sibling,e!==null){Ot=e;return}Ot=e=t}while(e!==null);Bt===0&&(Bt=5)}function lo(t,e,n){var r=We,i=Er.transition;try{Er.transition=null,We=1,qF(t,e,n,r)}finally{Er.transition=i,We=r}return null}function qF(t,e,n,r){do Xa();while(fs!==null);if(Fe&6)throw Error(U(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(U(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(kL(t,s),t===Zt&&(Ot=Zt=null,hn=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||sd||(sd=!0,Yk(Gd,function(){return Xa(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=Er.transition,Er.transition=null;var o=We;We=1;var a=Fe;Fe|=4,d_.current=null,$F(t,n),$k(n,t),hF(ly),Yd=!!ay,ly=ay=null,t.current=n,VF(n),gL(),Fe=a,We=o,Er.transition=s}else t.current=n;if(sd&&(sd=!1,fs=t,hf=i),s=t.pendingLanes,s===0&&(Is=null),_L(n.stateNode),tr(t,Dt()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(cf)throw cf=!1,t=Dy,Dy=null,t;return hf&1&&t.tag!==0&&Xa(),s=t.pendingLanes,s&1?t===by?Hu++:(Hu=0,by=t):Hu=0,Ws(),null}function Xa(){if(fs!==null){var t=T1(hf),e=Er.transition,n=We;try{if(Er.transition=null,We=16>t?16:t,fs===null)var r=!1;else{if(t=fs,fs=null,hf=0,Fe&6)throw Error(U(331));var i=Fe;for(Fe|=4,te=t.current;te!==null;){var s=te,o=s.child;if(te.flags&16){var a=s.deletions;if(a!==null){for(var u=0;u<a.length;u++){var c=a[u];for(te=c;te!==null;){var d=te;switch(d.tag){case 0:case 11:case 15:qu(8,d,s)}var f=d.child;if(f!==null)f.return=d,te=f;else for(;te!==null;){d=te;var g=d.sibling,v=d.return;if(Lk(d),d===c){te=null;break}if(g!==null){g.return=v,te=g;break}te=v}}}var _=s.alternate;if(_!==null){var T=_.child;if(T!==null){_.child=null;do{var C=T.sibling;T.sibling=null,T=C}while(T!==null)}}te=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,te=o;else e:for(;te!==null;){if(s=te,s.flags&2048)switch(s.tag){case 0:case 11:case 15:qu(9,s,s.return)}var I=s.sibling;if(I!==null){I.return=s.return,te=I;break e}te=s.return}}var w=t.current;for(te=w;te!==null;){o=te;var S=o.child;if(o.subtreeFlags&2064&&S!==null)S.return=o,te=S;else e:for(o=w;te!==null;){if(a=te,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:ap(9,a)}}catch(O){It(a,a.return,O)}if(a===o){te=null;break e}var A=a.sibling;if(A!==null){A.return=a.return,te=A;break e}te=a.return}}if(Fe=i,Ws(),ei&&typeof ei.onPostCommitFiberRoot=="function")try{ei.onPostCommitFiberRoot(Zf,t)}catch{}r=!0}return r}finally{We=n,Er.transition=e}}return!1}function gS(t,e,n){e=cl(n,e),e=kk(t,e,1),t=ws(t,e,1),e=Pn(),t!==null&&(Yc(t,1,e),tr(t,e))}function It(t,e,n){if(t.tag===3)gS(t,t,n);else for(;e!==null;){if(e.tag===3){gS(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Is===null||!Is.has(r))){t=cl(n,t),t=Ck(e,t,1),e=ws(e,t,1),t=Pn(),e!==null&&(Yc(e,1,t),tr(e,t));break}}e=e.return}}function GF(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Pn(),t.pingedLanes|=t.suspendedLanes&n,Zt===t&&(hn&n)===n&&(Bt===4||Bt===3&&(hn&130023424)===hn&&500>Dt()-p_?ko(t,0):f_|=n),tr(t,e)}function Gk(t,e){e===0&&(t.mode&1?(e=Kh,Kh<<=1,!(Kh&130023424)&&(Kh=4194304)):e=1);var n=Pn();t=Ri(t,e),t!==null&&(Yc(t,e,n),tr(t,n))}function HF(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),Gk(t,n)}function YF(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(U(314))}r!==null&&r.delete(e),Gk(t,n)}var Hk;Hk=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Zn.current)Yn=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Yn=!1,PF(t,e,n);Yn=!!(t.flags&131072)}else Yn=!1,ht&&e.flags&1048576&&Q1(e,tf,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Nd(t,e),t=e.pendingProps;var i=ol(e,Dn.current);Qa(e,n),i=a_(null,e,r,t,i,n);var s=l_();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,er(r)?(s=!0,Zd(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,n_(e),i.updater=sp,e.stateNode=i,i._reactInternals=e,yy(e,r,t,n),e=wy(null,e,r,!0,s,n)):(e.tag=0,ht&&s&&Kv(e),On(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Nd(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=QF(r),t=Rr(r,t),i){case 0:e=_y(null,e,r,t,n);break e;case 1:e=oS(null,e,r,t,n);break e;case 11:e=iS(null,e,r,t,n);break e;case 14:e=sS(null,e,r,Rr(r.type,t),n);break e}throw Error(U(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Rr(r,i),_y(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Rr(r,i),oS(t,e,r,i,n);case 3:e:{if(Ak(e),t===null)throw Error(U(387));r=e.pendingProps,s=e.memoizedState,i=s.element,ek(t,e),sf(e,r,null,n);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=cl(Error(U(423)),e),e=aS(t,e,r,n,i);break e}else if(r!==i){i=cl(Error(U(424)),e),e=aS(t,e,r,n,i);break e}else for(ur=_s(e.stateNode.containerInfo.firstChild),cr=e,ht=!0,Or=null,n=ik(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(al(),r===i){e=xi(t,e,n);break e}On(t,e,r,n)}e=e.child}return e;case 5:return sk(e),t===null&&py(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,uy(r,i)?o=null:s!==null&&uy(r,s)&&(e.flags|=32),bk(t,e),On(t,e,o,n),e.child;case 6:return t===null&&py(e),null;case 13:return Rk(t,e,n);case 4:return r_(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=ll(e,null,r,n):On(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Rr(r,i),iS(t,e,r,i,n);case 7:return On(t,e,e.pendingProps,n),e.child;case 8:return On(t,e,e.pendingProps.children,n),e.child;case 12:return On(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,Ye(nf,r._currentValue),r._currentValue=o,s!==null)if(Br(s.value,o)){if(s.children===i.children&&!Zn.current){e=xi(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var u=a.firstContext;u!==null;){if(u.context===r){if(s.tag===1){u=Ci(-1,n&-n),u.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var d=c.pending;d===null?u.next=u:(u.next=d.next,d.next=u),c.pending=u}}s.lanes|=n,u=s.alternate,u!==null&&(u.lanes|=n),my(s.return,n,e),a.lanes|=n;break}u=u.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(U(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),my(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}On(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,Qa(e,n),i=kr(i),r=r(i),e.flags|=1,On(t,e,r,n),e.child;case 14:return r=e.type,i=Rr(r,e.pendingProps),i=Rr(r.type,i),sS(t,e,r,i,n);case 15:return Nk(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Rr(r,i),Nd(t,e),e.tag=1,er(r)?(t=!0,Zd(e)):t=!1,Qa(e,n),nk(e,r,i),yy(e,r,i,n),wy(null,e,r,!0,t,n);case 19:return xk(t,e,n);case 22:return Dk(t,e,n)}throw Error(U(156,e.tag))};function Yk(t,e){return w1(t,e)}function KF(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ir(t,e,n,r){return new KF(t,e,n,r)}function v_(t){return t=t.prototype,!(!t||!t.isReactComponent)}function QF(t){if(typeof t=="function")return v_(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Fv)return 11;if(t===Uv)return 14}return 2}function Es(t,e){var n=t.alternate;return n===null?(n=Ir(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Ad(t,e,n,r,i,s){var o=2;if(r=t,typeof t=="function")v_(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Ra:return Co(n.children,i,s,e);case Lv:o=8,i|=8;break;case Bg:return t=Ir(12,n,e,i|2),t.elementType=Bg,t.lanes=s,t;case Wg:return t=Ir(13,n,e,i),t.elementType=Wg,t.lanes=s,t;case jg:return t=Ir(19,n,e,i),t.elementType=jg,t.lanes=s,t;case r1:return up(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case t1:o=10;break e;case n1:o=9;break e;case Fv:o=11;break e;case Uv:o=14;break e;case os:o=16,r=null;break e}throw Error(U(130,t==null?t:typeof t,""))}return e=Ir(o,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function Co(t,e,n,r){return t=Ir(7,t,r,e),t.lanes=n,t}function up(t,e,n,r){return t=Ir(22,t,r,e),t.elementType=r1,t.lanes=n,t.stateNode={isHidden:!1},t}function ag(t,e,n){return t=Ir(6,t,null,e),t.lanes=n,t}function lg(t,e,n){return e=Ir(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function XF(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Wm(0),this.expirationTimes=Wm(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Wm(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function __(t,e,n,r,i,s,o,a,u){return t=new XF(t,e,n,a,u),e===1?(e=1,s===!0&&(e|=8)):e=0,s=Ir(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},n_(s),t}function JF(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Aa,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function Kk(t){if(!t)return As;t=t._reactInternals;e:{if(ta(t)!==t||t.tag!==1)throw Error(U(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(er(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(U(171))}if(t.tag===1){var n=t.type;if(er(n))return Y1(t,n,e)}return e}function Qk(t,e,n,r,i,s,o,a,u){return t=__(n,r,!0,t,i,s,o,a,u),t.context=Kk(null),n=t.current,r=Pn(),i=Ss(n),s=Ci(r,i),s.callback=e??null,ws(n,s,i),t.current.lanes=i,Yc(t,i,r),tr(t,r),t}function cp(t,e,n,r){var i=e.current,s=Pn(),o=Ss(i);return n=Kk(n),e.context===null?e.context=n:e.pendingContext=n,e=Ci(s,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=ws(i,e,o),t!==null&&(Ur(t,i,o,s),Td(t,i,o)),o}function ff(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function yS(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function w_(t,e){yS(t,e),(t=t.alternate)&&yS(t,e)}function ZF(){return null}var Xk=typeof reportError=="function"?reportError:function(t){console.error(t)};function I_(t){this._internalRoot=t}hp.prototype.render=I_.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(U(409));cp(t,e,null,null)};hp.prototype.unmount=I_.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Lo(function(){cp(null,t,null,null)}),e[Ai]=null}};function hp(t){this._internalRoot=t}hp.prototype.unstable_scheduleHydration=function(t){if(t){var e=N1();t={blockedOn:null,target:t,priority:e};for(var n=0;n<ls.length&&e!==0&&e<ls[n].priority;n++);ls.splice(n,0,t),n===0&&b1(t)}};function S_(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function dp(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function vS(){}function eU(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var c=ff(o);s.call(c)}}var o=Qk(e,r,t,0,null,!1,!1,"",vS);return t._reactRootContainer=o,t[Ai]=o.current,pc(t.nodeType===8?t.parentNode:t),Lo(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var c=ff(u);a.call(c)}}var u=__(t,0,!1,null,null,!1,!1,"",vS);return t._reactRootContainer=u,t[Ai]=u.current,pc(t.nodeType===8?t.parentNode:t),Lo(function(){cp(e,u,n,r)}),u}function fp(t,e,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var u=ff(o);a.call(u)}}cp(e,o,t,i)}else o=eU(n,e,t,i,r);return ff(o)}k1=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Au(e.pendingLanes);n!==0&&(Bv(e,n|1),tr(e,Dt()),!(Fe&6)&&(hl=Dt()+500,Ws()))}break;case 13:Lo(function(){var r=Ri(t,1);if(r!==null){var i=Pn();Ur(r,t,1,i)}}),w_(t,1)}};Wv=function(t){if(t.tag===13){var e=Ri(t,134217728);if(e!==null){var n=Pn();Ur(e,t,134217728,n)}w_(t,134217728)}};C1=function(t){if(t.tag===13){var e=Ss(t),n=Ri(t,e);if(n!==null){var r=Pn();Ur(n,t,e,r)}w_(t,e)}};N1=function(){return We};D1=function(t,e){var n=We;try{return We=t,e()}finally{We=n}};Zg=function(t,e,n){switch(e){case"input":if(Gg(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=rp(r);if(!i)throw Error(U(90));s1(r),Gg(r,i)}}}break;case"textarea":a1(t,n);break;case"select":e=n.value,e!=null&&Ga(t,!!n.multiple,e,!1)}};p1=m_;m1=Lo;var tU={usingClientEntryPoint:!1,Events:[Qc,Pa,rp,d1,f1,m_]},gu={findFiberByHostInstance:yo,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},nU={bundleType:gu.bundleType,version:gu.version,rendererPackageName:gu.rendererPackageName,rendererConfig:gu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ui.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=v1(t),t===null?null:t.stateNode},findFiberByHostInstance:gu.findFiberByHostInstance||ZF,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var od=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!od.isDisabled&&od.supportsFiber)try{Zf=od.inject(nU),ei=od}catch{}}mr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tU;mr.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!S_(e))throw Error(U(200));return JF(t,e,null,n)};mr.createRoot=function(t,e){if(!S_(t))throw Error(U(299));var n=!1,r="",i=Xk;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=__(t,1,!1,null,null,n,!1,r,i),t[Ai]=e.current,pc(t.nodeType===8?t.parentNode:t),new I_(e)};mr.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(U(188)):(t=Object.keys(t).join(","),Error(U(268,t)));return t=v1(e),t=t===null?null:t.stateNode,t};mr.flushSync=function(t){return Lo(t)};mr.hydrate=function(t,e,n){if(!dp(e))throw Error(U(200));return fp(null,t,e,!0,n)};mr.hydrateRoot=function(t,e,n){if(!S_(t))throw Error(U(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=Xk;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=Qk(e,null,t,1,n??null,i,!1,s,o),t[Ai]=e.current,pc(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new hp(e)};mr.render=function(t,e,n){if(!dp(e))throw Error(U(200));return fp(null,t,e,!1,n)};mr.unmountComponentAtNode=function(t){if(!dp(t))throw Error(U(40));return t._reactRootContainer?(Lo(function(){fp(null,null,t,!1,function(){t._reactRootContainer=null,t[Ai]=null})}),!0):!1};mr.unstable_batchedUpdates=m_;mr.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!dp(n))throw Error(U(200));if(t==null||t._reactInternals===void 0)throw Error(U(38));return fp(t,e,n,!1,r)};mr.version="18.2.0-next-9e3b772b8-20220608";(function(t){function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(n){console.error(n)}}e(),t.exports=mr})(ZP);var _S=Ug;Fg.createRoot=_S.createRoot,Fg.hydrateRoot=_S.hydrateRoot;const Jk=Sn.createContext(null),rU=({children:t})=>{let e=null;return navigator.userAgent.indexOf("Firefox")>-1?e=200:navigator.userAgent.indexOf("Chrome")>-1?e=60:navigator.userAgent.indexOf("Safari")>-1&&(e=160),qn(Jk.Provider,{value:{brightness:e},children:t})};var wS={},iU={get exports(){return wS},set exports(t){wS=t}};function sU(t){throw new Error('Could not dynamically require "'+t+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var pf={},oU={get exports(){return pf},set exports(t){pf=t}},IS;function aU(){return IS||(IS=1,function(t,e){(function(n,r){t.exports=r()})(WT,function(){var n;function r(){return n.apply(null,arguments)}function i(l){n=l}function s(l){return l instanceof Array||Object.prototype.toString.call(l)==="[object Array]"}function o(l){return l!=null&&Object.prototype.toString.call(l)==="[object Object]"}function a(l,h){return Object.prototype.hasOwnProperty.call(l,h)}function u(l){if(Object.getOwnPropertyNames)return Object.getOwnPropertyNames(l).length===0;var h;for(h in l)if(a(l,h))return!1;return!0}function c(l){return l===void 0}function d(l){return typeof l=="number"||Object.prototype.toString.call(l)==="[object Number]"}function f(l){return l instanceof Date||Object.prototype.toString.call(l)==="[object Date]"}function g(l,h){var p=[],m,y=l.length;for(m=0;m<y;++m)p.push(h(l[m],m));return p}function v(l,h){for(var p in h)a(h,p)&&(l[p]=h[p]);return a(h,"toString")&&(l.toString=h.toString),a(h,"valueOf")&&(l.valueOf=h.valueOf),l}function _(l,h,p,m){return j0(l,h,p,m,!0).utc()}function T(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidEra:null,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],era:null,meridiem:null,rfc2822:!1,weekdayMismatch:!1}}function C(l){return l._pf==null&&(l._pf=T()),l._pf}var I;Array.prototype.some?I=Array.prototype.some:I=function(l){var h=Object(this),p=h.length>>>0,m;for(m=0;m<p;m++)if(m in h&&l.call(this,h[m],m,h))return!0;return!1};function w(l){if(l._isValid==null){var h=C(l),p=I.call(h.parsedDateParts,function(y){return y!=null}),m=!isNaN(l._d.getTime())&&h.overflow<0&&!h.empty&&!h.invalidEra&&!h.invalidMonth&&!h.invalidWeekday&&!h.weekdayMismatch&&!h.nullInput&&!h.invalidFormat&&!h.userInvalidated&&(!h.meridiem||h.meridiem&&p);if(l._strict&&(m=m&&h.charsLeftOver===0&&h.unusedTokens.length===0&&h.bigHour===void 0),Object.isFrozen==null||!Object.isFrozen(l))l._isValid=m;else return m}return l._isValid}function S(l){var h=_(NaN);return l!=null?v(C(h),l):C(h).userInvalidated=!0,h}var A=r.momentProperties=[],O=!1;function L(l,h){var p,m,y,E=A.length;if(c(h._isAMomentObject)||(l._isAMomentObject=h._isAMomentObject),c(h._i)||(l._i=h._i),c(h._f)||(l._f=h._f),c(h._l)||(l._l=h._l),c(h._strict)||(l._strict=h._strict),c(h._tzm)||(l._tzm=h._tzm),c(h._isUTC)||(l._isUTC=h._isUTC),c(h._offset)||(l._offset=h._offset),c(h._pf)||(l._pf=C(h)),c(h._locale)||(l._locale=h._locale),E>0)for(p=0;p<E;p++)m=A[p],y=h[m],c(y)||(l[m]=y);return l}function P(l){L(this,l),this._d=new Date(l._d!=null?l._d.getTime():NaN),this.isValid()||(this._d=new Date(NaN)),O===!1&&(O=!0,r.updateOffset(this),O=!1)}function q(l){return l instanceof P||l!=null&&l._isAMomentObject!=null}function Te(l){r.suppressDeprecationWarnings===!1&&typeof console<"u"&&console.warn&&console.warn("Deprecation warning: "+l)}function le(l,h){var p=!0;return v(function(){if(r.deprecationHandler!=null&&r.deprecationHandler(null,l),p){var m=[],y,E,R,ue=arguments.length;for(E=0;E<ue;E++){if(y="",typeof arguments[E]=="object"){y+=`
[`+E+"] ";for(R in arguments[0])a(arguments[0],R)&&(y+=R+": "+arguments[0][R]+", ");y=y.slice(0,-2)}else y=arguments[E];m.push(y)}Te(l+`
Arguments: `+Array.prototype.slice.call(m).join("")+`
`+new Error().stack),p=!1}return h.apply(this,arguments)},h)}var Mt={};function Ee(l,h){r.deprecationHandler!=null&&r.deprecationHandler(l,h),Mt[l]||(Te(h),Mt[l]=!0)}r.suppressDeprecationWarnings=!1,r.deprecationHandler=null;function K(l){return typeof Function<"u"&&l instanceof Function||Object.prototype.toString.call(l)==="[object Function]"}function he(l){var h,p;for(p in l)a(l,p)&&(h=l[p],K(h)?this[p]=h:this["_"+p]=h);this._config=l,this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)}function j(l,h){var p=v({},l),m;for(m in h)a(h,m)&&(o(l[m])&&o(h[m])?(p[m]={},v(p[m],l[m]),v(p[m],h[m])):h[m]!=null?p[m]=h[m]:delete p[m]);for(m in l)a(l,m)&&!a(h,m)&&o(l[m])&&(p[m]=v({},p[m]));return p}function W(l){l!=null&&this.set(l)}var re;Object.keys?re=Object.keys:re=function(l){var h,p=[];for(h in l)a(l,h)&&p.push(h);return p};var V={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"};function Q(l,h,p){var m=this._calendar[l]||this._calendar.sameElse;return K(m)?m.call(h,p):m}function J(l,h,p){var m=""+Math.abs(l),y=h-m.length,E=l>=0;return(E?p?"+":"":"-")+Math.pow(10,Math.max(0,y)).toString().substr(1)+m}var pe=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,ve=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,Qe={},Pe={};function Z(l,h,p,m){var y=m;typeof m=="string"&&(y=function(){return this[m]()}),l&&(Pe[l]=y),h&&(Pe[h[0]]=function(){return J(y.apply(this,arguments),h[1],h[2])}),p&&(Pe[p]=function(){return this.localeData().ordinal(y.apply(this,arguments),l)})}function ot(l){return l.match(/\[[\s\S]/)?l.replace(/^\[|\]$/g,""):l.replace(/\\/g,"")}function Pt(l){var h=l.match(pe),p,m;for(p=0,m=h.length;p<m;p++)Pe[h[p]]?h[p]=Pe[h[p]]:h[p]=ot(h[p]);return function(y){var E="",R;for(R=0;R<m;R++)E+=K(h[R])?h[R].call(y,l):h[R];return E}}function mn(l,h){return l.isValid()?(h=yr(h,l.localeData()),Qe[h]=Qe[h]||Pt(h),Qe[h](l)):l.localeData().invalidDate()}function yr(l,h){var p=5;function m(y){return h.longDateFormat(y)||y}for(ve.lastIndex=0;p>=0&&ve.test(l);)l=l.replace(ve,m),ve.lastIndex=0,p-=1;return l}var ha={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"};function da(l){var h=this._longDateFormat[l],p=this._longDateFormat[l.toUpperCase()];return h||!p?h:(this._longDateFormat[l]=p.match(pe).map(function(m){return m==="MMMM"||m==="MM"||m==="DD"||m==="dddd"?m.slice(1):m}).join(""),this._longDateFormat[l])}var Wr="Invalid date";function x(){return this._invalidDate}var b="%d",B=/\d{1,2}/;function de(l){return this._ordinal.replace("%d",l)}var fe={future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",w:"a week",ww:"%d weeks",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function Ht(l,h,p,m){var y=this._relativeTime[p];return K(y)?y(l,h,p,m):y.replace(/%d/i,l)}function at(l,h){var p=this._relativeTime[l>0?"future":"past"];return K(p)?p(h):p.replace(/%s/i,h)}var ir={};function mt(l,h){var p=l.toLowerCase();ir[p]=ir[p+"s"]=ir[h]=l}function Xe(l){return typeof l=="string"?ir[l]||ir[l.toLowerCase()]:void 0}function jr(l){var h={},p,m;for(m in l)a(l,m)&&(p=Xe(m),p&&(h[p]=l[m]));return h}var bn={};function lt(l,h){bn[l]=h}function tu(l){var h=[],p;for(p in l)a(l,p)&&h.push({unit:p,priority:bn[p]});return h.sort(function(m,y){return m.priority-y.priority}),h}function gn(l){return l%4===0&&l%100!==0||l%400===0}function Je(l){return l<0?Math.ceil(l)||0:Math.floor(l)}function se(l){var h=+l,p=0;return h!==0&&isFinite(h)&&(p=Je(h)),p}function sr(l,h){return function(p){return p!=null?(Js(this,l,p),r.updateOffset(this,h),this):jn(this,l)}}function jn(l,h){return l.isValid()?l._d["get"+(l._isUTC?"UTC":"")+h]():NaN}function Js(l,h,p){l.isValid()&&!isNaN(p)&&(h==="FullYear"&&gn(l.year())&&l.month()===1&&l.date()===29?(p=se(p),l._d["set"+(l._isUTC?"UTC":"")+h](p,l.month(),_e(p,l.month()))):l._d["set"+(l._isUTC?"UTC":"")+h](p))}function An(l){return l=Xe(l),K(this[l])?this[l]():this}function or(l,h){if(typeof l=="object"){l=jr(l);var p=tu(l),m,y=p.length;for(m=0;m<y;m++)this[p[m].unit](l[p[m].unit])}else if(l=Xe(l),K(this[l]))return this[l](h);return this}var Yi=/\d/,je=/\d\d/,zr=/\d{3}/,_t=/\d{4}/,yn=/[+-]?\d{6}/,be=/\d\d?/,oi=/\d\d\d\d?/,Zs=/\d\d\d\d\d\d?/,vr=/\d{1,3}/,eo=/\d{1,4}/,fa=/[+-]?\d{1,6}/,Ki=/\d+/,pa=/[+-]?\d+/,sn=/Z|[+-]\d\d:?\d\d/gi,ai=/Z|[+-]\d\d(?::?\d\d)?/gi,ym=/[+-]?\d+(\.\d{1,3})?/,to=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i,no;no={};function X(l,h,p){no[l]=K(h)?h:function(m,y){return m&&p?p:h}}function ma(l,h){return a(no,l)?no[l](h._strict,h._locale):new RegExp(vm(l))}function vm(l){return Rn(l.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(h,p,m,y,E){return p||m||y||E}))}function Rn(l){return l.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}var nu={};function $e(l,h){var p,m=h,y;for(typeof l=="string"&&(l=[l]),d(h)&&(m=function(E,R){R[h]=se(E)}),y=l.length,p=0;p<y;p++)nu[l[p]]=m}function ro(l,h){$e(l,function(p,m,y,E){y._w=y._w||{},h(p,y._w,y,E)})}function bh(l,h,p){h!=null&&a(nu,l)&&nu[l](h,p._a,p,l)}var He=0,Lt=1,me=2,wt=3,vn=4,zn=5,ar=6,Ah=7,Rh=8;function _m(l,h){return(l%h+h)%h}var k;Array.prototype.indexOf?k=Array.prototype.indexOf:k=function(l){var h;for(h=0;h<this.length;++h)if(this[h]===l)return h;return-1};function _e(l,h){if(isNaN(l)||isNaN(h))return NaN;var p=_m(h,12);return l+=(h-p)/12,p===1?gn(l)?29:28:31-p%7%2}Z("M",["MM",2],"Mo",function(){return this.month()+1}),Z("MMM",0,0,function(l){return this.localeData().monthsShort(this,l)}),Z("MMMM",0,0,function(l){return this.localeData().months(this,l)}),mt("month","M"),lt("month",8),X("M",be),X("MM",be,je),X("MMM",function(l,h){return h.monthsShortRegex(l)}),X("MMMM",function(l,h){return h.monthsRegex(l)}),$e(["M","MM"],function(l,h){h[Lt]=se(l)-1}),$e(["MMM","MMMM"],function(l,h,p,m){var y=p._locale.monthsParse(l,m,p._strict);y!=null?h[Lt]=y:C(p).invalidMonth=l});var we="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ut="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),Qi=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,qr=to,ga=to;function Xi(l,h){return l?s(this._months)?this._months[l.month()]:this._months[(this._months.isFormat||Qi).test(h)?"format":"standalone"][l.month()]:s(this._months)?this._months:this._months.standalone}function _n(l,h){return l?s(this._monthsShort)?this._monthsShort[l.month()]:this._monthsShort[Qi.test(h)?"format":"standalone"][l.month()]:s(this._monthsShort)?this._monthsShort:this._monthsShort.standalone}function ya(l,h,p){var m,y,E,R=l.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],m=0;m<12;++m)E=_([2e3,m]),this._shortMonthsParse[m]=this.monthsShort(E,"").toLocaleLowerCase(),this._longMonthsParse[m]=this.months(E,"").toLocaleLowerCase();return p?h==="MMM"?(y=k.call(this._shortMonthsParse,R),y!==-1?y:null):(y=k.call(this._longMonthsParse,R),y!==-1?y:null):h==="MMM"?(y=k.call(this._shortMonthsParse,R),y!==-1?y:(y=k.call(this._longMonthsParse,R),y!==-1?y:null)):(y=k.call(this._longMonthsParse,R),y!==-1?y:(y=k.call(this._shortMonthsParse,R),y!==-1?y:null))}function xh(l,h,p){var m,y,E;if(this._monthsParseExact)return ya.call(this,l,h,p);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),m=0;m<12;m++){if(y=_([2e3,m]),p&&!this._longMonthsParse[m]&&(this._longMonthsParse[m]=new RegExp("^"+this.months(y,"").replace(".","")+"$","i"),this._shortMonthsParse[m]=new RegExp("^"+this.monthsShort(y,"").replace(".","")+"$","i")),!p&&!this._monthsParse[m]&&(E="^"+this.months(y,"")+"|^"+this.monthsShort(y,""),this._monthsParse[m]=new RegExp(E.replace(".",""),"i")),p&&h==="MMMM"&&this._longMonthsParse[m].test(l))return m;if(p&&h==="MMM"&&this._shortMonthsParse[m].test(l))return m;if(!p&&this._monthsParse[m].test(l))return m}}function A0(l,h){var p;if(!l.isValid())return l;if(typeof h=="string"){if(/^\d+$/.test(h))h=se(h);else if(h=l.localeData().monthsParse(h),!d(h))return l}return p=Math.min(l.date(),_e(l.year(),h)),l._d["set"+(l._isUTC?"UTC":"")+"Month"](h,p),l}function R0(l){return l!=null?(A0(this,l),r.updateOffset(this,!0),this):jn(this,"Month")}function ux(){return _e(this.year(),this.month())}function cx(l){return this._monthsParseExact?(a(this,"_monthsRegex")||x0.call(this),l?this._monthsShortStrictRegex:this._monthsShortRegex):(a(this,"_monthsShortRegex")||(this._monthsShortRegex=qr),this._monthsShortStrictRegex&&l?this._monthsShortStrictRegex:this._monthsShortRegex)}function hx(l){return this._monthsParseExact?(a(this,"_monthsRegex")||x0.call(this),l?this._monthsStrictRegex:this._monthsRegex):(a(this,"_monthsRegex")||(this._monthsRegex=ga),this._monthsStrictRegex&&l?this._monthsStrictRegex:this._monthsRegex)}function x0(){function l(R,ue){return ue.length-R.length}var h=[],p=[],m=[],y,E;for(y=0;y<12;y++)E=_([2e3,y]),h.push(this.monthsShort(E,"")),p.push(this.months(E,"")),m.push(this.months(E,"")),m.push(this.monthsShort(E,""));for(h.sort(l),p.sort(l),m.sort(l),y=0;y<12;y++)h[y]=Rn(h[y]),p[y]=Rn(p[y]);for(y=0;y<24;y++)m[y]=Rn(m[y]);this._monthsRegex=new RegExp("^("+m.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+p.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+h.join("|")+")","i")}Z("Y",0,0,function(){var l=this.year();return l<=9999?J(l,4):"+"+l}),Z(0,["YY",2],0,function(){return this.year()%100}),Z(0,["YYYY",4],0,"year"),Z(0,["YYYYY",5],0,"year"),Z(0,["YYYYYY",6,!0],0,"year"),mt("year","y"),lt("year",1),X("Y",pa),X("YY",be,je),X("YYYY",eo,_t),X("YYYYY",fa,yn),X("YYYYYY",fa,yn),$e(["YYYYY","YYYYYY"],He),$e("YYYY",function(l,h){h[He]=l.length===2?r.parseTwoDigitYear(l):se(l)}),$e("YY",function(l,h){h[He]=r.parseTwoDigitYear(l)}),$e("Y",function(l,h){h[He]=parseInt(l,10)});function ru(l){return gn(l)?366:365}r.parseTwoDigitYear=function(l){return se(l)+(se(l)>68?1900:2e3)};var O0=sr("FullYear",!0);function dx(){return gn(this.year())}function fx(l,h,p,m,y,E,R){var ue;return l<100&&l>=0?(ue=new Date(l+400,h,p,m,y,E,R),isFinite(ue.getFullYear())&&ue.setFullYear(l)):ue=new Date(l,h,p,m,y,E,R),ue}function iu(l){var h,p;return l<100&&l>=0?(p=Array.prototype.slice.call(arguments),p[0]=l+400,h=new Date(Date.UTC.apply(null,p)),isFinite(h.getUTCFullYear())&&h.setUTCFullYear(l)):h=new Date(Date.UTC.apply(null,arguments)),h}function Oh(l,h,p){var m=7+h-p,y=(7+iu(l,0,m).getUTCDay()-h)%7;return-y+m-1}function M0(l,h,p,m,y){var E=(7+p-m)%7,R=Oh(l,m,y),ue=1+7*(h-1)+E+R,Se,ze;return ue<=0?(Se=l-1,ze=ru(Se)+ue):ue>ru(l)?(Se=l+1,ze=ue-ru(l)):(Se=l,ze=ue),{year:Se,dayOfYear:ze}}function su(l,h,p){var m=Oh(l.year(),h,p),y=Math.floor((l.dayOfYear()-m-1)/7)+1,E,R;return y<1?(R=l.year()-1,E=y+li(R,h,p)):y>li(l.year(),h,p)?(E=y-li(l.year(),h,p),R=l.year()+1):(R=l.year(),E=y),{week:E,year:R}}function li(l,h,p){var m=Oh(l,h,p),y=Oh(l+1,h,p);return(ru(l)-m+y)/7}Z("w",["ww",2],"wo","week"),Z("W",["WW",2],"Wo","isoWeek"),mt("week","w"),mt("isoWeek","W"),lt("week",5),lt("isoWeek",5),X("w",be),X("ww",be,je),X("W",be),X("WW",be,je),ro(["w","ww","W","WW"],function(l,h,p,m){h[m.substr(0,1)]=se(l)});function px(l){return su(l,this._week.dow,this._week.doy).week}var mx={dow:0,doy:6};function gx(){return this._week.dow}function yx(){return this._week.doy}function vx(l){var h=this.localeData().week(this);return l==null?h:this.add((l-h)*7,"d")}function _x(l){var h=su(this,1,4).week;return l==null?h:this.add((l-h)*7,"d")}Z("d",0,"do","day"),Z("dd",0,0,function(l){return this.localeData().weekdaysMin(this,l)}),Z("ddd",0,0,function(l){return this.localeData().weekdaysShort(this,l)}),Z("dddd",0,0,function(l){return this.localeData().weekdays(this,l)}),Z("e",0,0,"weekday"),Z("E",0,0,"isoWeekday"),mt("day","d"),mt("weekday","e"),mt("isoWeekday","E"),lt("day",11),lt("weekday",11),lt("isoWeekday",11),X("d",be),X("e",be),X("E",be),X("dd",function(l,h){return h.weekdaysMinRegex(l)}),X("ddd",function(l,h){return h.weekdaysShortRegex(l)}),X("dddd",function(l,h){return h.weekdaysRegex(l)}),ro(["dd","ddd","dddd"],function(l,h,p,m){var y=p._locale.weekdaysParse(l,m,p._strict);y!=null?h.d=y:C(p).invalidWeekday=l}),ro(["d","e","E"],function(l,h,p,m){h[m]=se(l)});function wx(l,h){return typeof l!="string"?l:isNaN(l)?(l=h.weekdaysParse(l),typeof l=="number"?l:null):parseInt(l,10)}function Ix(l,h){return typeof l=="string"?h.weekdaysParse(l)%7||7:isNaN(l)?null:l}function wm(l,h){return l.slice(h,7).concat(l.slice(0,h))}var Sx="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),P0="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),Ex="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),Tx=to,kx=to,Cx=to;function Nx(l,h){var p=s(this._weekdays)?this._weekdays:this._weekdays[l&&l!==!0&&this._weekdays.isFormat.test(h)?"format":"standalone"];return l===!0?wm(p,this._week.dow):l?p[l.day()]:p}function Dx(l){return l===!0?wm(this._weekdaysShort,this._week.dow):l?this._weekdaysShort[l.day()]:this._weekdaysShort}function bx(l){return l===!0?wm(this._weekdaysMin,this._week.dow):l?this._weekdaysMin[l.day()]:this._weekdaysMin}function Ax(l,h,p){var m,y,E,R=l.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],m=0;m<7;++m)E=_([2e3,1]).day(m),this._minWeekdaysParse[m]=this.weekdaysMin(E,"").toLocaleLowerCase(),this._shortWeekdaysParse[m]=this.weekdaysShort(E,"").toLocaleLowerCase(),this._weekdaysParse[m]=this.weekdays(E,"").toLocaleLowerCase();return p?h==="dddd"?(y=k.call(this._weekdaysParse,R),y!==-1?y:null):h==="ddd"?(y=k.call(this._shortWeekdaysParse,R),y!==-1?y:null):(y=k.call(this._minWeekdaysParse,R),y!==-1?y:null):h==="dddd"?(y=k.call(this._weekdaysParse,R),y!==-1||(y=k.call(this._shortWeekdaysParse,R),y!==-1)?y:(y=k.call(this._minWeekdaysParse,R),y!==-1?y:null)):h==="ddd"?(y=k.call(this._shortWeekdaysParse,R),y!==-1||(y=k.call(this._weekdaysParse,R),y!==-1)?y:(y=k.call(this._minWeekdaysParse,R),y!==-1?y:null)):(y=k.call(this._minWeekdaysParse,R),y!==-1||(y=k.call(this._weekdaysParse,R),y!==-1)?y:(y=k.call(this._shortWeekdaysParse,R),y!==-1?y:null))}function Rx(l,h,p){var m,y,E;if(this._weekdaysParseExact)return Ax.call(this,l,h,p);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),m=0;m<7;m++){if(y=_([2e3,1]).day(m),p&&!this._fullWeekdaysParse[m]&&(this._fullWeekdaysParse[m]=new RegExp("^"+this.weekdays(y,"").replace(".","\\.?")+"$","i"),this._shortWeekdaysParse[m]=new RegExp("^"+this.weekdaysShort(y,"").replace(".","\\.?")+"$","i"),this._minWeekdaysParse[m]=new RegExp("^"+this.weekdaysMin(y,"").replace(".","\\.?")+"$","i")),this._weekdaysParse[m]||(E="^"+this.weekdays(y,"")+"|^"+this.weekdaysShort(y,"")+"|^"+this.weekdaysMin(y,""),this._weekdaysParse[m]=new RegExp(E.replace(".",""),"i")),p&&h==="dddd"&&this._fullWeekdaysParse[m].test(l))return m;if(p&&h==="ddd"&&this._shortWeekdaysParse[m].test(l))return m;if(p&&h==="dd"&&this._minWeekdaysParse[m].test(l))return m;if(!p&&this._weekdaysParse[m].test(l))return m}}function xx(l){if(!this.isValid())return l!=null?this:NaN;var h=this._isUTC?this._d.getUTCDay():this._d.getDay();return l!=null?(l=wx(l,this.localeData()),this.add(l-h,"d")):h}function Ox(l){if(!this.isValid())return l!=null?this:NaN;var h=(this.day()+7-this.localeData()._week.dow)%7;return l==null?h:this.add(l-h,"d")}function Mx(l){if(!this.isValid())return l!=null?this:NaN;if(l!=null){var h=Ix(l,this.localeData());return this.day(this.day()%7?h:h-7)}else return this.day()||7}function Px(l){return this._weekdaysParseExact?(a(this,"_weekdaysRegex")||Im.call(this),l?this._weekdaysStrictRegex:this._weekdaysRegex):(a(this,"_weekdaysRegex")||(this._weekdaysRegex=Tx),this._weekdaysStrictRegex&&l?this._weekdaysStrictRegex:this._weekdaysRegex)}function Lx(l){return this._weekdaysParseExact?(a(this,"_weekdaysRegex")||Im.call(this),l?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(a(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=kx),this._weekdaysShortStrictRegex&&l?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)}function Fx(l){return this._weekdaysParseExact?(a(this,"_weekdaysRegex")||Im.call(this),l?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(a(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=Cx),this._weekdaysMinStrictRegex&&l?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)}function Im(){function l(xn,fi){return fi.length-xn.length}var h=[],p=[],m=[],y=[],E,R,ue,Se,ze;for(E=0;E<7;E++)R=_([2e3,1]).day(E),ue=Rn(this.weekdaysMin(R,"")),Se=Rn(this.weekdaysShort(R,"")),ze=Rn(this.weekdays(R,"")),h.push(ue),p.push(Se),m.push(ze),y.push(ue),y.push(Se),y.push(ze);h.sort(l),p.sort(l),m.sort(l),y.sort(l),this._weekdaysRegex=new RegExp("^("+y.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+m.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+p.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+h.join("|")+")","i")}function Sm(){return this.hours()%12||12}function Ux(){return this.hours()||24}Z("H",["HH",2],0,"hour"),Z("h",["hh",2],0,Sm),Z("k",["kk",2],0,Ux),Z("hmm",0,0,function(){return""+Sm.apply(this)+J(this.minutes(),2)}),Z("hmmss",0,0,function(){return""+Sm.apply(this)+J(this.minutes(),2)+J(this.seconds(),2)}),Z("Hmm",0,0,function(){return""+this.hours()+J(this.minutes(),2)}),Z("Hmmss",0,0,function(){return""+this.hours()+J(this.minutes(),2)+J(this.seconds(),2)});function L0(l,h){Z(l,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),h)})}L0("a",!0),L0("A",!1),mt("hour","h"),lt("hour",13);function F0(l,h){return h._meridiemParse}X("a",F0),X("A",F0),X("H",be),X("h",be),X("k",be),X("HH",be,je),X("hh",be,je),X("kk",be,je),X("hmm",oi),X("hmmss",Zs),X("Hmm",oi),X("Hmmss",Zs),$e(["H","HH"],wt),$e(["k","kk"],function(l,h,p){var m=se(l);h[wt]=m===24?0:m}),$e(["a","A"],function(l,h,p){p._isPm=p._locale.isPM(l),p._meridiem=l}),$e(["h","hh"],function(l,h,p){h[wt]=se(l),C(p).bigHour=!0}),$e("hmm",function(l,h,p){var m=l.length-2;h[wt]=se(l.substr(0,m)),h[vn]=se(l.substr(m)),C(p).bigHour=!0}),$e("hmmss",function(l,h,p){var m=l.length-4,y=l.length-2;h[wt]=se(l.substr(0,m)),h[vn]=se(l.substr(m,2)),h[zn]=se(l.substr(y)),C(p).bigHour=!0}),$e("Hmm",function(l,h,p){var m=l.length-2;h[wt]=se(l.substr(0,m)),h[vn]=se(l.substr(m))}),$e("Hmmss",function(l,h,p){var m=l.length-4,y=l.length-2;h[wt]=se(l.substr(0,m)),h[vn]=se(l.substr(m,2)),h[zn]=se(l.substr(y))});function $x(l){return(l+"").toLowerCase().charAt(0)==="p"}var Vx=/[ap]\.?m?\.?/i,Bx=sr("Hours",!0);function Wx(l,h,p){return l>11?p?"pm":"PM":p?"am":"AM"}var U0={calendar:V,longDateFormat:ha,invalidDate:Wr,ordinal:b,dayOfMonthOrdinalParse:B,relativeTime:fe,months:we,monthsShort:ut,week:mx,weekdays:Sx,weekdaysMin:Ex,weekdaysShort:P0,meridiemParse:Vx},ct={},ou={},au;function jx(l,h){var p,m=Math.min(l.length,h.length);for(p=0;p<m;p+=1)if(l[p]!==h[p])return p;return m}function $0(l){return l&&l.toLowerCase().replace("_","-")}function zx(l){for(var h=0,p,m,y,E;h<l.length;){for(E=$0(l[h]).split("-"),p=E.length,m=$0(l[h+1]),m=m?m.split("-"):null;p>0;){if(y=Mh(E.slice(0,p).join("-")),y)return y;if(m&&m.length>=p&&jx(E,m)>=p-1)break;p--}h++}return au}function qx(l){return l.match("^[^/\\\\]*$")!=null}function Mh(l){var h=null,p;if(ct[l]===void 0&&t&&t.exports&&qx(l))try{h=au._abbr,p=sU,p("./locale/"+l),Ji(h)}catch{ct[l]=null}return ct[l]}function Ji(l,h){var p;return l&&(c(h)?p=ui(l):p=Em(l,h),p?au=p:typeof console<"u"&&console.warn&&console.warn("Locale "+l+" not found. Did you forget to load it?")),au._abbr}function Em(l,h){if(h!==null){var p,m=U0;if(h.abbr=l,ct[l]!=null)Ee("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),m=ct[l]._config;else if(h.parentLocale!=null)if(ct[h.parentLocale]!=null)m=ct[h.parentLocale]._config;else if(p=Mh(h.parentLocale),p!=null)m=p._config;else return ou[h.parentLocale]||(ou[h.parentLocale]=[]),ou[h.parentLocale].push({name:l,config:h}),null;return ct[l]=new W(j(m,h)),ou[l]&&ou[l].forEach(function(y){Em(y.name,y.config)}),Ji(l),ct[l]}else return delete ct[l],null}function Gx(l,h){if(h!=null){var p,m,y=U0;ct[l]!=null&&ct[l].parentLocale!=null?ct[l].set(j(ct[l]._config,h)):(m=Mh(l),m!=null&&(y=m._config),h=j(y,h),m==null&&(h.abbr=l),p=new W(h),p.parentLocale=ct[l],ct[l]=p),Ji(l)}else ct[l]!=null&&(ct[l].parentLocale!=null?(ct[l]=ct[l].parentLocale,l===Ji()&&Ji(l)):ct[l]!=null&&delete ct[l]);return ct[l]}function ui(l){var h;if(l&&l._locale&&l._locale._abbr&&(l=l._locale._abbr),!l)return au;if(!s(l)){if(h=Mh(l),h)return h;l=[l]}return zx(l)}function Hx(){return re(ct)}function Tm(l){var h,p=l._a;return p&&C(l).overflow===-2&&(h=p[Lt]<0||p[Lt]>11?Lt:p[me]<1||p[me]>_e(p[He],p[Lt])?me:p[wt]<0||p[wt]>24||p[wt]===24&&(p[vn]!==0||p[zn]!==0||p[ar]!==0)?wt:p[vn]<0||p[vn]>59?vn:p[zn]<0||p[zn]>59?zn:p[ar]<0||p[ar]>999?ar:-1,C(l)._overflowDayOfYear&&(h<He||h>me)&&(h=me),C(l)._overflowWeeks&&h===-1&&(h=Ah),C(l)._overflowWeekday&&h===-1&&(h=Rh),C(l).overflow=h),l}var Yx=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,Kx=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d|))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,Qx=/Z|[+-]\d\d(?::?\d\d)?/,Ph=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/],["YYYYMM",/\d{6}/,!1],["YYYY",/\d{4}/,!1]],km=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],Xx=/^\/?Date\((-?\d+)/i,Jx=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/,Zx={UT:0,GMT:0,EDT:-4*60,EST:-5*60,CDT:-5*60,CST:-6*60,MDT:-6*60,MST:-7*60,PDT:-7*60,PST:-8*60};function V0(l){var h,p,m=l._i,y=Yx.exec(m)||Kx.exec(m),E,R,ue,Se,ze=Ph.length,xn=km.length;if(y){for(C(l).iso=!0,h=0,p=ze;h<p;h++)if(Ph[h][1].exec(y[1])){R=Ph[h][0],E=Ph[h][2]!==!1;break}if(R==null){l._isValid=!1;return}if(y[3]){for(h=0,p=xn;h<p;h++)if(km[h][1].exec(y[3])){ue=(y[2]||" ")+km[h][0];break}if(ue==null){l._isValid=!1;return}}if(!E&&ue!=null){l._isValid=!1;return}if(y[4])if(Qx.exec(y[4]))Se="Z";else{l._isValid=!1;return}l._f=R+(ue||"")+(Se||""),Nm(l)}else l._isValid=!1}function eO(l,h,p,m,y,E){var R=[tO(l),ut.indexOf(h),parseInt(p,10),parseInt(m,10),parseInt(y,10)];return E&&R.push(parseInt(E,10)),R}function tO(l){var h=parseInt(l,10);return h<=49?2e3+h:h<=999?1900+h:h}function nO(l){return l.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s\s*/,"").replace(/\s\s*$/,"")}function rO(l,h,p){if(l){var m=P0.indexOf(l),y=new Date(h[0],h[1],h[2]).getDay();if(m!==y)return C(p).weekdayMismatch=!0,p._isValid=!1,!1}return!0}function iO(l,h,p){if(l)return Zx[l];if(h)return 0;var m=parseInt(p,10),y=m%100,E=(m-y)/100;return E*60+y}function B0(l){var h=Jx.exec(nO(l._i)),p;if(h){if(p=eO(h[4],h[3],h[2],h[5],h[6],h[7]),!rO(h[1],p,l))return;l._a=p,l._tzm=iO(h[8],h[9],h[10]),l._d=iu.apply(null,l._a),l._d.setUTCMinutes(l._d.getUTCMinutes()-l._tzm),C(l).rfc2822=!0}else l._isValid=!1}function sO(l){var h=Xx.exec(l._i);if(h!==null){l._d=new Date(+h[1]);return}if(V0(l),l._isValid===!1)delete l._isValid;else return;if(B0(l),l._isValid===!1)delete l._isValid;else return;l._strict?l._isValid=!1:r.createFromInputFallback(l)}r.createFromInputFallback=le("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",function(l){l._d=new Date(l._i+(l._useUTC?" UTC":""))});function va(l,h,p){return l??h??p}function oO(l){var h=new Date(r.now());return l._useUTC?[h.getUTCFullYear(),h.getUTCMonth(),h.getUTCDate()]:[h.getFullYear(),h.getMonth(),h.getDate()]}function Cm(l){var h,p,m=[],y,E,R;if(!l._d){for(y=oO(l),l._w&&l._a[me]==null&&l._a[Lt]==null&&aO(l),l._dayOfYear!=null&&(R=va(l._a[He],y[He]),(l._dayOfYear>ru(R)||l._dayOfYear===0)&&(C(l)._overflowDayOfYear=!0),p=iu(R,0,l._dayOfYear),l._a[Lt]=p.getUTCMonth(),l._a[me]=p.getUTCDate()),h=0;h<3&&l._a[h]==null;++h)l._a[h]=m[h]=y[h];for(;h<7;h++)l._a[h]=m[h]=l._a[h]==null?h===2?1:0:l._a[h];l._a[wt]===24&&l._a[vn]===0&&l._a[zn]===0&&l._a[ar]===0&&(l._nextDay=!0,l._a[wt]=0),l._d=(l._useUTC?iu:fx).apply(null,m),E=l._useUTC?l._d.getUTCDay():l._d.getDay(),l._tzm!=null&&l._d.setUTCMinutes(l._d.getUTCMinutes()-l._tzm),l._nextDay&&(l._a[wt]=24),l._w&&typeof l._w.d<"u"&&l._w.d!==E&&(C(l).weekdayMismatch=!0)}}function aO(l){var h,p,m,y,E,R,ue,Se,ze;h=l._w,h.GG!=null||h.W!=null||h.E!=null?(E=1,R=4,p=va(h.GG,l._a[He],su(Ze(),1,4).year),m=va(h.W,1),y=va(h.E,1),(y<1||y>7)&&(Se=!0)):(E=l._locale._week.dow,R=l._locale._week.doy,ze=su(Ze(),E,R),p=va(h.gg,l._a[He],ze.year),m=va(h.w,ze.week),h.d!=null?(y=h.d,(y<0||y>6)&&(Se=!0)):h.e!=null?(y=h.e+E,(h.e<0||h.e>6)&&(Se=!0)):y=E),m<1||m>li(p,E,R)?C(l)._overflowWeeks=!0:Se!=null?C(l)._overflowWeekday=!0:(ue=M0(p,m,y,E,R),l._a[He]=ue.year,l._dayOfYear=ue.dayOfYear)}r.ISO_8601=function(){},r.RFC_2822=function(){};function Nm(l){if(l._f===r.ISO_8601){V0(l);return}if(l._f===r.RFC_2822){B0(l);return}l._a=[],C(l).empty=!0;var h=""+l._i,p,m,y,E,R,ue=h.length,Se=0,ze,xn;for(y=yr(l._f,l._locale).match(pe)||[],xn=y.length,p=0;p<xn;p++)E=y[p],m=(h.match(ma(E,l))||[])[0],m&&(R=h.substr(0,h.indexOf(m)),R.length>0&&C(l).unusedInput.push(R),h=h.slice(h.indexOf(m)+m.length),Se+=m.length),Pe[E]?(m?C(l).empty=!1:C(l).unusedTokens.push(E),bh(E,m,l)):l._strict&&!m&&C(l).unusedTokens.push(E);C(l).charsLeftOver=ue-Se,h.length>0&&C(l).unusedInput.push(h),l._a[wt]<=12&&C(l).bigHour===!0&&l._a[wt]>0&&(C(l).bigHour=void 0),C(l).parsedDateParts=l._a.slice(0),C(l).meridiem=l._meridiem,l._a[wt]=lO(l._locale,l._a[wt],l._meridiem),ze=C(l).era,ze!==null&&(l._a[He]=l._locale.erasConvertYear(ze,l._a[He])),Cm(l),Tm(l)}function lO(l,h,p){var m;return p==null?h:l.meridiemHour!=null?l.meridiemHour(h,p):(l.isPM!=null&&(m=l.isPM(p),m&&h<12&&(h+=12),!m&&h===12&&(h=0)),h)}function uO(l){var h,p,m,y,E,R,ue=!1,Se=l._f.length;if(Se===0){C(l).invalidFormat=!0,l._d=new Date(NaN);return}for(y=0;y<Se;y++)E=0,R=!1,h=L({},l),l._useUTC!=null&&(h._useUTC=l._useUTC),h._f=l._f[y],Nm(h),w(h)&&(R=!0),E+=C(h).charsLeftOver,E+=C(h).unusedTokens.length*10,C(h).score=E,ue?E<m&&(m=E,p=h):(m==null||E<m||R)&&(m=E,p=h,R&&(ue=!0));v(l,p||h)}function cO(l){if(!l._d){var h=jr(l._i),p=h.day===void 0?h.date:h.day;l._a=g([h.year,h.month,p,h.hour,h.minute,h.second,h.millisecond],function(m){return m&&parseInt(m,10)}),Cm(l)}}function hO(l){var h=new P(Tm(W0(l)));return h._nextDay&&(h.add(1,"d"),h._nextDay=void 0),h}function W0(l){var h=l._i,p=l._f;return l._locale=l._locale||ui(l._l),h===null||p===void 0&&h===""?S({nullInput:!0}):(typeof h=="string"&&(l._i=h=l._locale.preparse(h)),q(h)?new P(Tm(h)):(f(h)?l._d=h:s(p)?uO(l):p?Nm(l):dO(l),w(l)||(l._d=null),l))}function dO(l){var h=l._i;c(h)?l._d=new Date(r.now()):f(h)?l._d=new Date(h.valueOf()):typeof h=="string"?sO(l):s(h)?(l._a=g(h.slice(0),function(p){return parseInt(p,10)}),Cm(l)):o(h)?cO(l):d(h)?l._d=new Date(h):r.createFromInputFallback(l)}function j0(l,h,p,m,y){var E={};return(h===!0||h===!1)&&(m=h,h=void 0),(p===!0||p===!1)&&(m=p,p=void 0),(o(l)&&u(l)||s(l)&&l.length===0)&&(l=void 0),E._isAMomentObject=!0,E._useUTC=E._isUTC=y,E._l=p,E._i=l,E._f=h,E._strict=m,hO(E)}function Ze(l,h,p,m){return j0(l,h,p,m,!1)}var fO=le("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var l=Ze.apply(null,arguments);return this.isValid()&&l.isValid()?l<this?this:l:S()}),pO=le("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var l=Ze.apply(null,arguments);return this.isValid()&&l.isValid()?l>this?this:l:S()});function z0(l,h){var p,m;if(h.length===1&&s(h[0])&&(h=h[0]),!h.length)return Ze();for(p=h[0],m=1;m<h.length;++m)(!h[m].isValid()||h[m][l](p))&&(p=h[m]);return p}function mO(){var l=[].slice.call(arguments,0);return z0("isBefore",l)}function gO(){var l=[].slice.call(arguments,0);return z0("isAfter",l)}var yO=function(){return Date.now?Date.now():+new Date},lu=["year","quarter","month","week","day","hour","minute","second","millisecond"];function vO(l){var h,p=!1,m,y=lu.length;for(h in l)if(a(l,h)&&!(k.call(lu,h)!==-1&&(l[h]==null||!isNaN(l[h]))))return!1;for(m=0;m<y;++m)if(l[lu[m]]){if(p)return!1;parseFloat(l[lu[m]])!==se(l[lu[m]])&&(p=!0)}return!0}function _O(){return this._isValid}function wO(){return br(NaN)}function Lh(l){var h=jr(l),p=h.year||0,m=h.quarter||0,y=h.month||0,E=h.week||h.isoWeek||0,R=h.day||0,ue=h.hour||0,Se=h.minute||0,ze=h.second||0,xn=h.millisecond||0;this._isValid=vO(h),this._milliseconds=+xn+ze*1e3+Se*6e4+ue*1e3*60*60,this._days=+R+E*7,this._months=+y+m*3+p*12,this._data={},this._locale=ui(),this._bubble()}function Fh(l){return l instanceof Lh}function Dm(l){return l<0?Math.round(-1*l)*-1:Math.round(l)}function IO(l,h,p){var m=Math.min(l.length,h.length),y=Math.abs(l.length-h.length),E=0,R;for(R=0;R<m;R++)(p&&l[R]!==h[R]||!p&&se(l[R])!==se(h[R]))&&E++;return E+y}function q0(l,h){Z(l,0,0,function(){var p=this.utcOffset(),m="+";return p<0&&(p=-p,m="-"),m+J(~~(p/60),2)+h+J(~~p%60,2)})}q0("Z",":"),q0("ZZ",""),X("Z",ai),X("ZZ",ai),$e(["Z","ZZ"],function(l,h,p){p._useUTC=!0,p._tzm=bm(ai,l)});var SO=/([\+\-]|\d\d)/gi;function bm(l,h){var p=(h||"").match(l),m,y,E;return p===null?null:(m=p[p.length-1]||[],y=(m+"").match(SO)||["-",0,0],E=+(y[1]*60)+se(y[2]),E===0?0:y[0]==="+"?E:-E)}function Am(l,h){var p,m;return h._isUTC?(p=h.clone(),m=(q(l)||f(l)?l.valueOf():Ze(l).valueOf())-p.valueOf(),p._d.setTime(p._d.valueOf()+m),r.updateOffset(p,!1),p):Ze(l).local()}function Rm(l){return-Math.round(l._d.getTimezoneOffset())}r.updateOffset=function(){};function EO(l,h,p){var m=this._offset||0,y;if(!this.isValid())return l!=null?this:NaN;if(l!=null){if(typeof l=="string"){if(l=bm(ai,l),l===null)return this}else Math.abs(l)<16&&!p&&(l=l*60);return!this._isUTC&&h&&(y=Rm(this)),this._offset=l,this._isUTC=!0,y!=null&&this.add(y,"m"),m!==l&&(!h||this._changeInProgress?K0(this,br(l-m,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,r.updateOffset(this,!0),this._changeInProgress=null)),this}else return this._isUTC?m:Rm(this)}function TO(l,h){return l!=null?(typeof l!="string"&&(l=-l),this.utcOffset(l,h),this):-this.utcOffset()}function kO(l){return this.utcOffset(0,l)}function CO(l){return this._isUTC&&(this.utcOffset(0,l),this._isUTC=!1,l&&this.subtract(Rm(this),"m")),this}function NO(){if(this._tzm!=null)this.utcOffset(this._tzm,!1,!0);else if(typeof this._i=="string"){var l=bm(sn,this._i);l!=null?this.utcOffset(l):this.utcOffset(0,!0)}return this}function DO(l){return this.isValid()?(l=l?Ze(l).utcOffset():0,(this.utcOffset()-l)%60===0):!1}function bO(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function AO(){if(!c(this._isDSTShifted))return this._isDSTShifted;var l={},h;return L(l,this),l=W0(l),l._a?(h=l._isUTC?_(l._a):Ze(l._a),this._isDSTShifted=this.isValid()&&IO(l._a,h.toArray())>0):this._isDSTShifted=!1,this._isDSTShifted}function RO(){return this.isValid()?!this._isUTC:!1}function xO(){return this.isValid()?this._isUTC:!1}function G0(){return this.isValid()?this._isUTC&&this._offset===0:!1}var OO=/^(-|\+)?(?:(\d*)[. ])?(\d+):(\d+)(?::(\d+)(\.\d*)?)?$/,MO=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;function br(l,h){var p=l,m=null,y,E,R;return Fh(l)?p={ms:l._milliseconds,d:l._days,M:l._months}:d(l)||!isNaN(+l)?(p={},h?p[h]=+l:p.milliseconds=+l):(m=OO.exec(l))?(y=m[1]==="-"?-1:1,p={y:0,d:se(m[me])*y,h:se(m[wt])*y,m:se(m[vn])*y,s:se(m[zn])*y,ms:se(Dm(m[ar]*1e3))*y}):(m=MO.exec(l))?(y=m[1]==="-"?-1:1,p={y:io(m[2],y),M:io(m[3],y),w:io(m[4],y),d:io(m[5],y),h:io(m[6],y),m:io(m[7],y),s:io(m[8],y)}):p==null?p={}:typeof p=="object"&&("from"in p||"to"in p)&&(R=PO(Ze(p.from),Ze(p.to)),p={},p.ms=R.milliseconds,p.M=R.months),E=new Lh(p),Fh(l)&&a(l,"_locale")&&(E._locale=l._locale),Fh(l)&&a(l,"_isValid")&&(E._isValid=l._isValid),E}br.fn=Lh.prototype,br.invalid=wO;function io(l,h){var p=l&&parseFloat(l.replace(",","."));return(isNaN(p)?0:p)*h}function H0(l,h){var p={};return p.months=h.month()-l.month()+(h.year()-l.year())*12,l.clone().add(p.months,"M").isAfter(h)&&--p.months,p.milliseconds=+h-+l.clone().add(p.months,"M"),p}function PO(l,h){var p;return l.isValid()&&h.isValid()?(h=Am(h,l),l.isBefore(h)?p=H0(l,h):(p=H0(h,l),p.milliseconds=-p.milliseconds,p.months=-p.months),p):{milliseconds:0,months:0}}function Y0(l,h){return function(p,m){var y,E;return m!==null&&!isNaN(+m)&&(Ee(h,"moment()."+h+"(period, number) is deprecated. Please use moment()."+h+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),E=p,p=m,m=E),y=br(p,m),K0(this,y,l),this}}function K0(l,h,p,m){var y=h._milliseconds,E=Dm(h._days),R=Dm(h._months);l.isValid()&&(m=m??!0,R&&A0(l,jn(l,"Month")+R*p),E&&Js(l,"Date",jn(l,"Date")+E*p),y&&l._d.setTime(l._d.valueOf()+y*p),m&&r.updateOffset(l,E||R))}var LO=Y0(1,"add"),FO=Y0(-1,"subtract");function Q0(l){return typeof l=="string"||l instanceof String}function UO(l){return q(l)||f(l)||Q0(l)||d(l)||VO(l)||$O(l)||l===null||l===void 0}function $O(l){var h=o(l)&&!u(l),p=!1,m=["years","year","y","months","month","M","days","day","d","dates","date","D","hours","hour","h","minutes","minute","m","seconds","second","s","milliseconds","millisecond","ms"],y,E,R=m.length;for(y=0;y<R;y+=1)E=m[y],p=p||a(l,E);return h&&p}function VO(l){var h=s(l),p=!1;return h&&(p=l.filter(function(m){return!d(m)&&Q0(l)}).length===0),h&&p}function BO(l){var h=o(l)&&!u(l),p=!1,m=["sameDay","nextDay","lastDay","nextWeek","lastWeek","sameElse"],y,E;for(y=0;y<m.length;y+=1)E=m[y],p=p||a(l,E);return h&&p}function WO(l,h){var p=l.diff(h,"days",!0);return p<-6?"sameElse":p<-1?"lastWeek":p<0?"lastDay":p<1?"sameDay":p<2?"nextDay":p<7?"nextWeek":"sameElse"}function jO(l,h){arguments.length===1&&(arguments[0]?UO(arguments[0])?(l=arguments[0],h=void 0):BO(arguments[0])&&(h=arguments[0],l=void 0):(l=void 0,h=void 0));var p=l||Ze(),m=Am(p,this).startOf("day"),y=r.calendarFormat(this,m)||"sameElse",E=h&&(K(h[y])?h[y].call(this,p):h[y]);return this.format(E||this.localeData().calendar(y,this,Ze(p)))}function zO(){return new P(this)}function qO(l,h){var p=q(l)?l:Ze(l);return this.isValid()&&p.isValid()?(h=Xe(h)||"millisecond",h==="millisecond"?this.valueOf()>p.valueOf():p.valueOf()<this.clone().startOf(h).valueOf()):!1}function GO(l,h){var p=q(l)?l:Ze(l);return this.isValid()&&p.isValid()?(h=Xe(h)||"millisecond",h==="millisecond"?this.valueOf()<p.valueOf():this.clone().endOf(h).valueOf()<p.valueOf()):!1}function HO(l,h,p,m){var y=q(l)?l:Ze(l),E=q(h)?h:Ze(h);return this.isValid()&&y.isValid()&&E.isValid()?(m=m||"()",(m[0]==="("?this.isAfter(y,p):!this.isBefore(y,p))&&(m[1]===")"?this.isBefore(E,p):!this.isAfter(E,p))):!1}function YO(l,h){var p=q(l)?l:Ze(l),m;return this.isValid()&&p.isValid()?(h=Xe(h)||"millisecond",h==="millisecond"?this.valueOf()===p.valueOf():(m=p.valueOf(),this.clone().startOf(h).valueOf()<=m&&m<=this.clone().endOf(h).valueOf())):!1}function KO(l,h){return this.isSame(l,h)||this.isAfter(l,h)}function QO(l,h){return this.isSame(l,h)||this.isBefore(l,h)}function XO(l,h,p){var m,y,E;if(!this.isValid())return NaN;if(m=Am(l,this),!m.isValid())return NaN;switch(y=(m.utcOffset()-this.utcOffset())*6e4,h=Xe(h),h){case"year":E=Uh(this,m)/12;break;case"month":E=Uh(this,m);break;case"quarter":E=Uh(this,m)/3;break;case"second":E=(this-m)/1e3;break;case"minute":E=(this-m)/6e4;break;case"hour":E=(this-m)/36e5;break;case"day":E=(this-m-y)/864e5;break;case"week":E=(this-m-y)/6048e5;break;default:E=this-m}return p?E:Je(E)}function Uh(l,h){if(l.date()<h.date())return-Uh(h,l);var p=(h.year()-l.year())*12+(h.month()-l.month()),m=l.clone().add(p,"months"),y,E;return h-m<0?(y=l.clone().add(p-1,"months"),E=(h-m)/(m-y)):(y=l.clone().add(p+1,"months"),E=(h-m)/(y-m)),-(p+E)||0}r.defaultFormat="YYYY-MM-DDTHH:mm:ssZ",r.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";function JO(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function ZO(l){if(!this.isValid())return null;var h=l!==!0,p=h?this.clone().utc():this;return p.year()<0||p.year()>9999?mn(p,h?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ"):K(Date.prototype.toISOString)?h?this.toDate().toISOString():new Date(this.valueOf()+this.utcOffset()*60*1e3).toISOString().replace("Z",mn(p,"Z")):mn(p,h?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")}function eM(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var l="moment",h="",p,m,y,E;return this.isLocal()||(l=this.utcOffset()===0?"moment.utc":"moment.parseZone",h="Z"),p="["+l+'("]',m=0<=this.year()&&this.year()<=9999?"YYYY":"YYYYYY",y="-MM-DD[T]HH:mm:ss.SSS",E=h+'[")]',this.format(p+m+y+E)}function tM(l){l||(l=this.isUtc()?r.defaultFormatUtc:r.defaultFormat);var h=mn(this,l);return this.localeData().postformat(h)}function nM(l,h){return this.isValid()&&(q(l)&&l.isValid()||Ze(l).isValid())?br({to:this,from:l}).locale(this.locale()).humanize(!h):this.localeData().invalidDate()}function rM(l){return this.from(Ze(),l)}function iM(l,h){return this.isValid()&&(q(l)&&l.isValid()||Ze(l).isValid())?br({from:this,to:l}).locale(this.locale()).humanize(!h):this.localeData().invalidDate()}function sM(l){return this.to(Ze(),l)}function X0(l){var h;return l===void 0?this._locale._abbr:(h=ui(l),h!=null&&(this._locale=h),this)}var J0=le("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(l){return l===void 0?this.localeData():this.locale(l)});function Z0(){return this._locale}var $h=1e3,_a=60*$h,Vh=60*_a,eI=(365*400+97)*24*Vh;function wa(l,h){return(l%h+h)%h}function tI(l,h,p){return l<100&&l>=0?new Date(l+400,h,p)-eI:new Date(l,h,p).valueOf()}function nI(l,h,p){return l<100&&l>=0?Date.UTC(l+400,h,p)-eI:Date.UTC(l,h,p)}function oM(l){var h,p;if(l=Xe(l),l===void 0||l==="millisecond"||!this.isValid())return this;switch(p=this._isUTC?nI:tI,l){case"year":h=p(this.year(),0,1);break;case"quarter":h=p(this.year(),this.month()-this.month()%3,1);break;case"month":h=p(this.year(),this.month(),1);break;case"week":h=p(this.year(),this.month(),this.date()-this.weekday());break;case"isoWeek":h=p(this.year(),this.month(),this.date()-(this.isoWeekday()-1));break;case"day":case"date":h=p(this.year(),this.month(),this.date());break;case"hour":h=this._d.valueOf(),h-=wa(h+(this._isUTC?0:this.utcOffset()*_a),Vh);break;case"minute":h=this._d.valueOf(),h-=wa(h,_a);break;case"second":h=this._d.valueOf(),h-=wa(h,$h);break}return this._d.setTime(h),r.updateOffset(this,!0),this}function aM(l){var h,p;if(l=Xe(l),l===void 0||l==="millisecond"||!this.isValid())return this;switch(p=this._isUTC?nI:tI,l){case"year":h=p(this.year()+1,0,1)-1;break;case"quarter":h=p(this.year(),this.month()-this.month()%3+3,1)-1;break;case"month":h=p(this.year(),this.month()+1,1)-1;break;case"week":h=p(this.year(),this.month(),this.date()-this.weekday()+7)-1;break;case"isoWeek":h=p(this.year(),this.month(),this.date()-(this.isoWeekday()-1)+7)-1;break;case"day":case"date":h=p(this.year(),this.month(),this.date()+1)-1;break;case"hour":h=this._d.valueOf(),h+=Vh-wa(h+(this._isUTC?0:this.utcOffset()*_a),Vh)-1;break;case"minute":h=this._d.valueOf(),h+=_a-wa(h,_a)-1;break;case"second":h=this._d.valueOf(),h+=$h-wa(h,$h)-1;break}return this._d.setTime(h),r.updateOffset(this,!0),this}function lM(){return this._d.valueOf()-(this._offset||0)*6e4}function uM(){return Math.floor(this.valueOf()/1e3)}function cM(){return new Date(this.valueOf())}function hM(){var l=this;return[l.year(),l.month(),l.date(),l.hour(),l.minute(),l.second(),l.millisecond()]}function dM(){var l=this;return{years:l.year(),months:l.month(),date:l.date(),hours:l.hours(),minutes:l.minutes(),seconds:l.seconds(),milliseconds:l.milliseconds()}}function fM(){return this.isValid()?this.toISOString():null}function pM(){return w(this)}function mM(){return v({},C(this))}function gM(){return C(this).overflow}function yM(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}}Z("N",0,0,"eraAbbr"),Z("NN",0,0,"eraAbbr"),Z("NNN",0,0,"eraAbbr"),Z("NNNN",0,0,"eraName"),Z("NNNNN",0,0,"eraNarrow"),Z("y",["y",1],"yo","eraYear"),Z("y",["yy",2],0,"eraYear"),Z("y",["yyy",3],0,"eraYear"),Z("y",["yyyy",4],0,"eraYear"),X("N",xm),X("NN",xm),X("NNN",xm),X("NNNN",DM),X("NNNNN",bM),$e(["N","NN","NNN","NNNN","NNNNN"],function(l,h,p,m){var y=p._locale.erasParse(l,m,p._strict);y?C(p).era=y:C(p).invalidEra=l}),X("y",Ki),X("yy",Ki),X("yyy",Ki),X("yyyy",Ki),X("yo",AM),$e(["y","yy","yyy","yyyy"],He),$e(["yo"],function(l,h,p,m){var y;p._locale._eraYearOrdinalRegex&&(y=l.match(p._locale._eraYearOrdinalRegex)),p._locale.eraYearOrdinalParse?h[He]=p._locale.eraYearOrdinalParse(l,y):h[He]=parseInt(l,10)});function vM(l,h){var p,m,y,E=this._eras||ui("en")._eras;for(p=0,m=E.length;p<m;++p){switch(typeof E[p].since){case"string":y=r(E[p].since).startOf("day"),E[p].since=y.valueOf();break}switch(typeof E[p].until){case"undefined":E[p].until=1/0;break;case"string":y=r(E[p].until).startOf("day").valueOf(),E[p].until=y.valueOf();break}}return E}function _M(l,h,p){var m,y,E=this.eras(),R,ue,Se;for(l=l.toUpperCase(),m=0,y=E.length;m<y;++m)if(R=E[m].name.toUpperCase(),ue=E[m].abbr.toUpperCase(),Se=E[m].narrow.toUpperCase(),p)switch(h){case"N":case"NN":case"NNN":if(ue===l)return E[m];break;case"NNNN":if(R===l)return E[m];break;case"NNNNN":if(Se===l)return E[m];break}else if([R,ue,Se].indexOf(l)>=0)return E[m]}function wM(l,h){var p=l.since<=l.until?1:-1;return h===void 0?r(l.since).year():r(l.since).year()+(h-l.offset)*p}function IM(){var l,h,p,m=this.localeData().eras();for(l=0,h=m.length;l<h;++l)if(p=this.clone().startOf("day").valueOf(),m[l].since<=p&&p<=m[l].until||m[l].until<=p&&p<=m[l].since)return m[l].name;return""}function SM(){var l,h,p,m=this.localeData().eras();for(l=0,h=m.length;l<h;++l)if(p=this.clone().startOf("day").valueOf(),m[l].since<=p&&p<=m[l].until||m[l].until<=p&&p<=m[l].since)return m[l].narrow;return""}function EM(){var l,h,p,m=this.localeData().eras();for(l=0,h=m.length;l<h;++l)if(p=this.clone().startOf("day").valueOf(),m[l].since<=p&&p<=m[l].until||m[l].until<=p&&p<=m[l].since)return m[l].abbr;return""}function TM(){var l,h,p,m,y=this.localeData().eras();for(l=0,h=y.length;l<h;++l)if(p=y[l].since<=y[l].until?1:-1,m=this.clone().startOf("day").valueOf(),y[l].since<=m&&m<=y[l].until||y[l].until<=m&&m<=y[l].since)return(this.year()-r(y[l].since).year())*p+y[l].offset;return this.year()}function kM(l){return a(this,"_erasNameRegex")||Om.call(this),l?this._erasNameRegex:this._erasRegex}function CM(l){return a(this,"_erasAbbrRegex")||Om.call(this),l?this._erasAbbrRegex:this._erasRegex}function NM(l){return a(this,"_erasNarrowRegex")||Om.call(this),l?this._erasNarrowRegex:this._erasRegex}function xm(l,h){return h.erasAbbrRegex(l)}function DM(l,h){return h.erasNameRegex(l)}function bM(l,h){return h.erasNarrowRegex(l)}function AM(l,h){return h._eraYearOrdinalRegex||Ki}function Om(){var l=[],h=[],p=[],m=[],y,E,R=this.eras();for(y=0,E=R.length;y<E;++y)h.push(Rn(R[y].name)),l.push(Rn(R[y].abbr)),p.push(Rn(R[y].narrow)),m.push(Rn(R[y].name)),m.push(Rn(R[y].abbr)),m.push(Rn(R[y].narrow));this._erasRegex=new RegExp("^("+m.join("|")+")","i"),this._erasNameRegex=new RegExp("^("+h.join("|")+")","i"),this._erasAbbrRegex=new RegExp("^("+l.join("|")+")","i"),this._erasNarrowRegex=new RegExp("^("+p.join("|")+")","i")}Z(0,["gg",2],0,function(){return this.weekYear()%100}),Z(0,["GG",2],0,function(){return this.isoWeekYear()%100});function Bh(l,h){Z(0,[l,l.length],0,h)}Bh("gggg","weekYear"),Bh("ggggg","weekYear"),Bh("GGGG","isoWeekYear"),Bh("GGGGG","isoWeekYear"),mt("weekYear","gg"),mt("isoWeekYear","GG"),lt("weekYear",1),lt("isoWeekYear",1),X("G",pa),X("g",pa),X("GG",be,je),X("gg",be,je),X("GGGG",eo,_t),X("gggg",eo,_t),X("GGGGG",fa,yn),X("ggggg",fa,yn),ro(["gggg","ggggg","GGGG","GGGGG"],function(l,h,p,m){h[m.substr(0,2)]=se(l)}),ro(["gg","GG"],function(l,h,p,m){h[m]=r.parseTwoDigitYear(l)});function RM(l){return rI.call(this,l,this.week(),this.weekday(),this.localeData()._week.dow,this.localeData()._week.doy)}function xM(l){return rI.call(this,l,this.isoWeek(),this.isoWeekday(),1,4)}function OM(){return li(this.year(),1,4)}function MM(){return li(this.isoWeekYear(),1,4)}function PM(){var l=this.localeData()._week;return li(this.year(),l.dow,l.doy)}function LM(){var l=this.localeData()._week;return li(this.weekYear(),l.dow,l.doy)}function rI(l,h,p,m,y){var E;return l==null?su(this,m,y).year:(E=li(l,m,y),h>E&&(h=E),FM.call(this,l,h,p,m,y))}function FM(l,h,p,m,y){var E=M0(l,h,p,m,y),R=iu(E.year,0,E.dayOfYear);return this.year(R.getUTCFullYear()),this.month(R.getUTCMonth()),this.date(R.getUTCDate()),this}Z("Q",0,"Qo","quarter"),mt("quarter","Q"),lt("quarter",7),X("Q",Yi),$e("Q",function(l,h){h[Lt]=(se(l)-1)*3});function UM(l){return l==null?Math.ceil((this.month()+1)/3):this.month((l-1)*3+this.month()%3)}Z("D",["DD",2],"Do","date"),mt("date","D"),lt("date",9),X("D",be),X("DD",be,je),X("Do",function(l,h){return l?h._dayOfMonthOrdinalParse||h._ordinalParse:h._dayOfMonthOrdinalParseLenient}),$e(["D","DD"],me),$e("Do",function(l,h){h[me]=se(l.match(be)[0])});var iI=sr("Date",!0);Z("DDD",["DDDD",3],"DDDo","dayOfYear"),mt("dayOfYear","DDD"),lt("dayOfYear",4),X("DDD",vr),X("DDDD",zr),$e(["DDD","DDDD"],function(l,h,p){p._dayOfYear=se(l)});function $M(l){var h=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return l==null?h:this.add(l-h,"d")}Z("m",["mm",2],0,"minute"),mt("minute","m"),lt("minute",14),X("m",be),X("mm",be,je),$e(["m","mm"],vn);var VM=sr("Minutes",!1);Z("s",["ss",2],0,"second"),mt("second","s"),lt("second",15),X("s",be),X("ss",be,je),$e(["s","ss"],zn);var BM=sr("Seconds",!1);Z("S",0,0,function(){return~~(this.millisecond()/100)}),Z(0,["SS",2],0,function(){return~~(this.millisecond()/10)}),Z(0,["SSS",3],0,"millisecond"),Z(0,["SSSS",4],0,function(){return this.millisecond()*10}),Z(0,["SSSSS",5],0,function(){return this.millisecond()*100}),Z(0,["SSSSSS",6],0,function(){return this.millisecond()*1e3}),Z(0,["SSSSSSS",7],0,function(){return this.millisecond()*1e4}),Z(0,["SSSSSSSS",8],0,function(){return this.millisecond()*1e5}),Z(0,["SSSSSSSSS",9],0,function(){return this.millisecond()*1e6}),mt("millisecond","ms"),lt("millisecond",16),X("S",vr,Yi),X("SS",vr,je),X("SSS",vr,zr);var Zi,sI;for(Zi="SSSS";Zi.length<=9;Zi+="S")X(Zi,Ki);function WM(l,h){h[ar]=se(("0."+l)*1e3)}for(Zi="S";Zi.length<=9;Zi+="S")$e(Zi,WM);sI=sr("Milliseconds",!1),Z("z",0,0,"zoneAbbr"),Z("zz",0,0,"zoneName");function jM(){return this._isUTC?"UTC":""}function zM(){return this._isUTC?"Coordinated Universal Time":""}var $=P.prototype;$.add=LO,$.calendar=jO,$.clone=zO,$.diff=XO,$.endOf=aM,$.format=tM,$.from=nM,$.fromNow=rM,$.to=iM,$.toNow=sM,$.get=An,$.invalidAt=gM,$.isAfter=qO,$.isBefore=GO,$.isBetween=HO,$.isSame=YO,$.isSameOrAfter=KO,$.isSameOrBefore=QO,$.isValid=pM,$.lang=J0,$.locale=X0,$.localeData=Z0,$.max=pO,$.min=fO,$.parsingFlags=mM,$.set=or,$.startOf=oM,$.subtract=FO,$.toArray=hM,$.toObject=dM,$.toDate=cM,$.toISOString=ZO,$.inspect=eM,typeof Symbol<"u"&&Symbol.for!=null&&($[Symbol.for("nodejs.util.inspect.custom")]=function(){return"Moment<"+this.format()+">"}),$.toJSON=fM,$.toString=JO,$.unix=uM,$.valueOf=lM,$.creationData=yM,$.eraName=IM,$.eraNarrow=SM,$.eraAbbr=EM,$.eraYear=TM,$.year=O0,$.isLeapYear=dx,$.weekYear=RM,$.isoWeekYear=xM,$.quarter=$.quarters=UM,$.month=R0,$.daysInMonth=ux,$.week=$.weeks=vx,$.isoWeek=$.isoWeeks=_x,$.weeksInYear=PM,$.weeksInWeekYear=LM,$.isoWeeksInYear=OM,$.isoWeeksInISOWeekYear=MM,$.date=iI,$.day=$.days=xx,$.weekday=Ox,$.isoWeekday=Mx,$.dayOfYear=$M,$.hour=$.hours=Bx,$.minute=$.minutes=VM,$.second=$.seconds=BM,$.millisecond=$.milliseconds=sI,$.utcOffset=EO,$.utc=kO,$.local=CO,$.parseZone=NO,$.hasAlignedHourOffset=DO,$.isDST=bO,$.isLocal=RO,$.isUtcOffset=xO,$.isUtc=G0,$.isUTC=G0,$.zoneAbbr=jM,$.zoneName=zM,$.dates=le("dates accessor is deprecated. Use date instead.",iI),$.months=le("months accessor is deprecated. Use month instead",R0),$.years=le("years accessor is deprecated. Use year instead",O0),$.zone=le("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",TO),$.isDSTShifted=le("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",AO);function qM(l){return Ze(l*1e3)}function GM(){return Ze.apply(null,arguments).parseZone()}function oI(l){return l}var Ue=W.prototype;Ue.calendar=Q,Ue.longDateFormat=da,Ue.invalidDate=x,Ue.ordinal=de,Ue.preparse=oI,Ue.postformat=oI,Ue.relativeTime=Ht,Ue.pastFuture=at,Ue.set=he,Ue.eras=vM,Ue.erasParse=_M,Ue.erasConvertYear=wM,Ue.erasAbbrRegex=CM,Ue.erasNameRegex=kM,Ue.erasNarrowRegex=NM,Ue.months=Xi,Ue.monthsShort=_n,Ue.monthsParse=xh,Ue.monthsRegex=hx,Ue.monthsShortRegex=cx,Ue.week=px,Ue.firstDayOfYear=yx,Ue.firstDayOfWeek=gx,Ue.weekdays=Nx,Ue.weekdaysMin=bx,Ue.weekdaysShort=Dx,Ue.weekdaysParse=Rx,Ue.weekdaysRegex=Px,Ue.weekdaysShortRegex=Lx,Ue.weekdaysMinRegex=Fx,Ue.isPM=$x,Ue.meridiem=Wx;function Wh(l,h,p,m){var y=ui(),E=_().set(m,h);return y[p](E,l)}function aI(l,h,p){if(d(l)&&(h=l,l=void 0),l=l||"",h!=null)return Wh(l,h,p,"month");var m,y=[];for(m=0;m<12;m++)y[m]=Wh(l,m,p,"month");return y}function Mm(l,h,p,m){typeof l=="boolean"?(d(h)&&(p=h,h=void 0),h=h||""):(h=l,p=h,l=!1,d(h)&&(p=h,h=void 0),h=h||"");var y=ui(),E=l?y._week.dow:0,R,ue=[];if(p!=null)return Wh(h,(p+E)%7,m,"day");for(R=0;R<7;R++)ue[R]=Wh(h,(R+E)%7,m,"day");return ue}function HM(l,h){return aI(l,h,"months")}function YM(l,h){return aI(l,h,"monthsShort")}function KM(l,h,p){return Mm(l,h,p,"weekdays")}function QM(l,h,p){return Mm(l,h,p,"weekdaysShort")}function XM(l,h,p){return Mm(l,h,p,"weekdaysMin")}Ji("en",{eras:[{since:"0001-01-01",until:1/0,offset:1,name:"Anno Domini",narrow:"AD",abbr:"AD"},{since:"0000-12-31",until:-1/0,offset:1,name:"Before Christ",narrow:"BC",abbr:"BC"}],dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(l){var h=l%10,p=se(l%100/10)===1?"th":h===1?"st":h===2?"nd":h===3?"rd":"th";return l+p}}),r.lang=le("moment.lang is deprecated. Use moment.locale instead.",Ji),r.langData=le("moment.langData is deprecated. Use moment.localeData instead.",ui);var ci=Math.abs;function JM(){var l=this._data;return this._milliseconds=ci(this._milliseconds),this._days=ci(this._days),this._months=ci(this._months),l.milliseconds=ci(l.milliseconds),l.seconds=ci(l.seconds),l.minutes=ci(l.minutes),l.hours=ci(l.hours),l.months=ci(l.months),l.years=ci(l.years),this}function lI(l,h,p,m){var y=br(h,p);return l._milliseconds+=m*y._milliseconds,l._days+=m*y._days,l._months+=m*y._months,l._bubble()}function ZM(l,h){return lI(this,l,h,1)}function eP(l,h){return lI(this,l,h,-1)}function uI(l){return l<0?Math.floor(l):Math.ceil(l)}function tP(){var l=this._milliseconds,h=this._days,p=this._months,m=this._data,y,E,R,ue,Se;return l>=0&&h>=0&&p>=0||l<=0&&h<=0&&p<=0||(l+=uI(Pm(p)+h)*864e5,h=0,p=0),m.milliseconds=l%1e3,y=Je(l/1e3),m.seconds=y%60,E=Je(y/60),m.minutes=E%60,R=Je(E/60),m.hours=R%24,h+=Je(R/24),Se=Je(cI(h)),p+=Se,h-=uI(Pm(Se)),ue=Je(p/12),p%=12,m.days=h,m.months=p,m.years=ue,this}function cI(l){return l*4800/146097}function Pm(l){return l*146097/4800}function nP(l){if(!this.isValid())return NaN;var h,p,m=this._milliseconds;if(l=Xe(l),l==="month"||l==="quarter"||l==="year")switch(h=this._days+m/864e5,p=this._months+cI(h),l){case"month":return p;case"quarter":return p/3;case"year":return p/12}else switch(h=this._days+Math.round(Pm(this._months)),l){case"week":return h/7+m/6048e5;case"day":return h+m/864e5;case"hour":return h*24+m/36e5;case"minute":return h*1440+m/6e4;case"second":return h*86400+m/1e3;case"millisecond":return Math.floor(h*864e5)+m;default:throw new Error("Unknown unit "+l)}}function rP(){return this.isValid()?this._milliseconds+this._days*864e5+this._months%12*2592e6+se(this._months/12)*31536e6:NaN}function hi(l){return function(){return this.as(l)}}var iP=hi("ms"),sP=hi("s"),oP=hi("m"),aP=hi("h"),lP=hi("d"),uP=hi("w"),cP=hi("M"),hP=hi("Q"),dP=hi("y");function fP(){return br(this)}function pP(l){return l=Xe(l),this.isValid()?this[l+"s"]():NaN}function so(l){return function(){return this.isValid()?this._data[l]:NaN}}var mP=so("milliseconds"),gP=so("seconds"),yP=so("minutes"),vP=so("hours"),_P=so("days"),wP=so("months"),IP=so("years");function SP(){return Je(this.days()/7)}var di=Math.round,Ia={ss:44,s:45,m:45,h:22,d:26,w:null,M:11};function EP(l,h,p,m,y){return y.relativeTime(h||1,!!p,l,m)}function TP(l,h,p,m){var y=br(l).abs(),E=di(y.as("s")),R=di(y.as("m")),ue=di(y.as("h")),Se=di(y.as("d")),ze=di(y.as("M")),xn=di(y.as("w")),fi=di(y.as("y")),es=E<=p.ss&&["s",E]||E<p.s&&["ss",E]||R<=1&&["m"]||R<p.m&&["mm",R]||ue<=1&&["h"]||ue<p.h&&["hh",ue]||Se<=1&&["d"]||Se<p.d&&["dd",Se];return p.w!=null&&(es=es||xn<=1&&["w"]||xn<p.w&&["ww",xn]),es=es||ze<=1&&["M"]||ze<p.M&&["MM",ze]||fi<=1&&["y"]||["yy",fi],es[2]=h,es[3]=+l>0,es[4]=m,EP.apply(null,es)}function kP(l){return l===void 0?di:typeof l=="function"?(di=l,!0):!1}function CP(l,h){return Ia[l]===void 0?!1:h===void 0?Ia[l]:(Ia[l]=h,l==="s"&&(Ia.ss=h-1),!0)}function NP(l,h){if(!this.isValid())return this.localeData().invalidDate();var p=!1,m=Ia,y,E;return typeof l=="object"&&(h=l,l=!1),typeof l=="boolean"&&(p=l),typeof h=="object"&&(m=Object.assign({},Ia,h),h.s!=null&&h.ss==null&&(m.ss=h.s-1)),y=this.localeData(),E=TP(this,!p,m,y),p&&(E=y.pastFuture(+this,E)),y.postformat(E)}var Lm=Math.abs;function Sa(l){return(l>0)-(l<0)||+l}function jh(){if(!this.isValid())return this.localeData().invalidDate();var l=Lm(this._milliseconds)/1e3,h=Lm(this._days),p=Lm(this._months),m,y,E,R,ue=this.asSeconds(),Se,ze,xn,fi;return ue?(m=Je(l/60),y=Je(m/60),l%=60,m%=60,E=Je(p/12),p%=12,R=l?l.toFixed(3).replace(/\.?0+$/,""):"",Se=ue<0?"-":"",ze=Sa(this._months)!==Sa(ue)?"-":"",xn=Sa(this._days)!==Sa(ue)?"-":"",fi=Sa(this._milliseconds)!==Sa(ue)?"-":"",Se+"P"+(E?ze+E+"Y":"")+(p?ze+p+"M":"")+(h?xn+h+"D":"")+(y||m||l?"T":"")+(y?fi+y+"H":"")+(m?fi+m+"M":"")+(l?fi+R+"S":"")):"P0D"}var Re=Lh.prototype;Re.isValid=_O,Re.abs=JM,Re.add=ZM,Re.subtract=eP,Re.as=nP,Re.asMilliseconds=iP,Re.asSeconds=sP,Re.asMinutes=oP,Re.asHours=aP,Re.asDays=lP,Re.asWeeks=uP,Re.asMonths=cP,Re.asQuarters=hP,Re.asYears=dP,Re.valueOf=rP,Re._bubble=tP,Re.clone=fP,Re.get=pP,Re.milliseconds=mP,Re.seconds=gP,Re.minutes=yP,Re.hours=vP,Re.days=_P,Re.weeks=SP,Re.months=wP,Re.years=IP,Re.humanize=NP,Re.toISOString=jh,Re.toString=jh,Re.toJSON=jh,Re.locale=X0,Re.localeData=Z0,Re.toIsoString=le("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",jh),Re.lang=J0,Z("X",0,0,"unix"),Z("x",0,0,"valueOf"),X("x",pa),X("X",ym),$e("X",function(l,h,p){p._d=new Date(parseFloat(l)*1e3)}),$e("x",function(l,h,p){p._d=new Date(se(l))});//! moment.js
return r.version="2.29.4",i(Ze),r.fn=$,r.min=mO,r.max=gO,r.now=yO,r.utc=_,r.unix=qM,r.months=HM,r.isDate=f,r.locale=Ji,r.invalid=S,r.duration=br,r.isMoment=q,r.weekdays=KM,r.parseZone=GM,r.localeData=ui,r.isDuration=Fh,r.monthsShort=YM,r.weekdaysMin=XM,r.defineLocale=Em,r.updateLocale=Gx,r.locales=Hx,r.weekdaysShort=QM,r.normalizeUnits=Xe,r.relativeTimeRounding=kP,r.relativeTimeThreshold=CP,r.calendarFormat=WO,r.prototype=$,r.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"GGGG-[W]WW",MONTH:"YYYY-MM"},r})}(oU)),pf}(function(t,e){(function(n,r){t.exports=r(aU(),Sn)})(WT,function(n,r){return function(i){var s={};function o(a){if(s[a])return s[a].exports;var u=s[a]={i:a,l:!1,exports:{}};return i[a].call(u.exports,u,u.exports,o),u.l=!0,u.exports}return o.m=i,o.c=s,o.d=function(a,u,c){o.o(a,u)||Object.defineProperty(a,u,{enumerable:!0,get:c})},o.r=function(a){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(a,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(a,"__esModule",{value:!0})},o.t=function(a,u){if(1&u&&(a=o(a)),8&u||4&u&&typeof a=="object"&&a&&a.__esModule)return a;var c=Object.create(null);if(o.r(c),Object.defineProperty(c,"default",{enumerable:!0,value:a}),2&u&&typeof a!="string")for(var d in a)o.d(c,d,function(f){return a[f]}.bind(null,d));return c},o.n=function(a){var u=a&&a.__esModule?function(){return a.default}:function(){return a};return o.d(u,"a",u),u},o.o=function(a,u){return Object.prototype.hasOwnProperty.call(a,u)},o.p="",o(o.s=6)}([function(i,s,o){i.exports=o(3)()},function(i,s){i.exports=n},function(i,s){i.exports=r},function(i,s,o){var a=o(4);function u(){}function c(){}c.resetWarningCache=u,i.exports=function(){function d(v,_,T,C,I,w){if(w!==a){var S=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw S.name="Invariant Violation",S}}function f(){return d}d.isRequired=d;var g={array:d,bool:d,func:d,number:d,object:d,string:d,symbol:d,any:d,arrayOf:f,element:d,elementType:d,instanceOf:f,node:d,objectOf:f,oneOf:f,oneOfType:f,shape:f,exact:f,checkPropTypes:c,resetWarningCache:u};return g.PropTypes=g,g}},function(i,s,o){i.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},function(i,s,o){var a,u,c,d,f;/*! Moment Duration Format v2.2.2
 *  https://github.com/jsmreese/moment-duration-format
 *  Date: 2018-02-16
 *
 *  Duration format plugin function for the Moment.js library
 *  http://momentjs.com/
 *
 *  Copyright 2018 John Madhavan-Reese
 *  Released under the MIT license
 */d=this,f=function(g){var v=!1,_=!1,T=!1,C=!1,I="escape years months weeks days hours minutes seconds milliseconds general".split(" "),w=[{type:"seconds",targets:[{type:"minutes",value:60},{type:"hours",value:3600},{type:"days",value:86400},{type:"weeks",value:604800},{type:"months",value:2678400},{type:"years",value:31536e3}]},{type:"minutes",targets:[{type:"hours",value:60},{type:"days",value:1440},{type:"weeks",value:10080},{type:"months",value:44640},{type:"years",value:525600}]},{type:"hours",targets:[{type:"days",value:24},{type:"weeks",value:168},{type:"months",value:744},{type:"years",value:8760}]},{type:"days",targets:[{type:"weeks",value:7},{type:"months",value:31},{type:"years",value:365}]},{type:"months",targets:[{type:"years",value:12}]}];function S(x,b){return!(b.length>x.length)&&x.indexOf(b)!==-1}function A(x){for(var b="";x;)b+="0",x-=1;return b}function O(x,b){var B=x+"+"+he(ve(b).sort(),function(de){return de+":"+b[de]}).join(",");return O.cache[B]||(O.cache[B]=Intl.NumberFormat(x,b)),O.cache[B]}function L(x,b,B){var de,fe,Ht,at=b.useToLocaleString,ir=b.useGrouping,mt=ir&&b.grouping.slice(),Xe=b.maximumSignificantDigits,jr=b.minimumIntegerDigits||1,bn=b.fractionDigits||0,lt=b.groupingSeparator,tu=b.decimalSeparator;if(at&&B){var gn,Je={minimumIntegerDigits:jr,useGrouping:ir};return bn&&(Je.maximumFractionDigits=bn,Je.minimumFractionDigits=bn),Xe&&x>0&&(Je.maximumSignificantDigits=Xe),T?(C||((gn=pe({},b)).useGrouping=!1,gn.decimalSeparator=".",x=parseFloat(L(x,gn),10)),O(B,Je).format(x)):(_||((gn=pe({},b)).useGrouping=!1,gn.decimalSeparator=".",x=parseFloat(L(x,gn),10)),x.toLocaleString(B,Je))}var se=(Xe?x.toPrecision(Xe+1):x.toFixed(bn+1)).split("e");Ht=se[1]||"",fe=(se=se[0].split("."))[1]||"";var sr=(de=se[0]||"").length,jn=fe.length,Js=sr+jn,An=de+fe;(Xe&&Js===Xe+1||!Xe&&jn===bn+1)&&((An=function(zr){for(var _t=zr.split("").reverse(),yn=0,be=!0;be&&yn<_t.length;)yn?_t[yn]==="9"?_t[yn]="0":(_t[yn]=(parseInt(_t[yn],10)+1).toString(),be=!1):(parseInt(_t[yn],10)<5&&(be=!1),_t[yn]="0"),yn+=1;return be&&_t.push("1"),_t.reverse().join("")}(An)).length===Js+1&&(sr+=1),jn&&(An=An.slice(0,-1)),de=An.slice(0,sr),fe=An.slice(sr)),Xe&&(fe=fe.replace(/0*$/,""));var or=parseInt(Ht,10);or>0?fe.length<=or?(de+=fe+=A(or-fe.length),fe=""):(de+=fe.slice(0,or),fe=fe.slice(or)):or<0&&(fe=A(Math.abs(or)-de.length)+de+fe,de="0"),Xe||((fe=fe.slice(0,bn)).length<bn&&(fe+=A(bn-fe.length)),de.length<jr&&(de=A(jr-de.length)+de));var Yi,je="";if(ir)for(se=de;se.length;)mt.length&&(Yi=mt.shift()),je&&(je=lt+je),je=se.slice(-Yi)+je,se=se.slice(0,-Yi);else je=de;return fe&&(je=je+tu+fe),je}function P(x,b){return x.label.length>b.label.length?-1:x.label.length<b.label.length?1:0}function q(x,b){var B=[];return K(ve(b),function(de){if(de.slice(0,15)==="_durationLabels"){var fe=de.slice(15).toLowerCase();K(ve(b[de]),function(Ht){Ht.slice(0,1)===x&&B.push({type:fe,key:Ht,label:b[de][Ht]})})}}),B}O.cache={};var Te={durationLabelsStandard:{S:"millisecond",SS:"milliseconds",s:"second",ss:"seconds",m:"minute",mm:"minutes",h:"hour",hh:"hours",d:"day",dd:"days",w:"week",ww:"weeks",M:"month",MM:"months",y:"year",yy:"years"},durationLabelsShort:{S:"msec",SS:"msecs",s:"sec",ss:"secs",m:"min",mm:"mins",h:"hr",hh:"hrs",d:"dy",dd:"dys",w:"wk",ww:"wks",M:"mo",MM:"mos",y:"yr",yy:"yrs"},durationTimeTemplates:{HMS:"h:mm:ss",HM:"h:mm",MS:"m:ss"},durationLabelTypes:[{type:"standard",string:"__"},{type:"short",string:"_"}],durationPluralKey:function(x,b,B){return b===1&&B===null?x:x+x}};function le(x){return Object.prototype.toString.call(x)==="[object Array]"}function Mt(x){return Object.prototype.toString.call(x)==="[object Object]"}function Ee(x,b){var B,de=0,fe=x&&x.length||0;for(typeof b!="function"&&(B=b,b=function(Ht){return Ht===B});de<fe;){if(b(x[de]))return x[de];de+=1}}function K(x,b){var B=0,de=x.length;if(x&&de)for(;B<de;){if(b(x[B],B)===!1)return;B+=1}}function he(x,b){var B=0,de=x.length,fe=[];if(!x||!de)return fe;for(;B<de;)fe[B]=b(x[B],B),B+=1;return fe}function j(x,b){return he(x,function(B){return B[b]})}function W(x){var b=[];return K(x,function(B){B&&b.push(B)}),b}function re(x){var b=[];return K(x,function(B){Ee(b,B)||b.push(B)}),b}function V(x,b){var B=[];return K(x,function(de){K(b,function(fe){de===fe&&B.push(de)})}),re(B)}function Q(x,b){var B=[];return K(x,function(de,fe){if(!b(de))return B=x.slice(fe),!1}),B}function J(x,b){return Q(x.slice().reverse(),b).reverse()}function pe(x,b){for(var B in b)b.hasOwnProperty(B)&&(x[B]=b[B]);return x}function ve(x){var b=[];for(var B in x)x.hasOwnProperty(B)&&b.push(B);return b}function Qe(x,b){var B=0,de=x.length;if(!x||!de)return!1;for(;B<de;){if(b(x[B],B)===!0)return!0;B+=1}return!1}function Pe(x){var b=[];return K(x,function(B){b=b.concat(B)}),b}function Z(x){return x(3.55,"en",{useGrouping:!1,minimumIntegerDigits:1,minimumFractionDigits:1,maximumFractionDigits:1})==="3.6"}function ot(x){var b=!0;return!!((b=(b=(b=b&&x(1,"en",{minimumIntegerDigits:1})==="1")&&x(1,"en",{minimumIntegerDigits:2})==="01")&&x(1,"en",{minimumIntegerDigits:3})==="001")&&(b=(b=(b=(b=b&&x(99.99,"en",{maximumFractionDigits:0,minimumFractionDigits:0})==="100")&&x(99.99,"en",{maximumFractionDigits:1,minimumFractionDigits:1})==="100.0")&&x(99.99,"en",{maximumFractionDigits:2,minimumFractionDigits:2})==="99.99")&&x(99.99,"en",{maximumFractionDigits:3,minimumFractionDigits:3})==="99.990")&&(b=(b=(b=(b=(b=b&&x(99.99,"en",{maximumSignificantDigits:1})==="100")&&x(99.99,"en",{maximumSignificantDigits:2})==="100")&&x(99.99,"en",{maximumSignificantDigits:3})==="100")&&x(99.99,"en",{maximumSignificantDigits:4})==="99.99")&&x(99.99,"en",{maximumSignificantDigits:5})==="99.99")&&(b=(b=b&&x(1e3,"en",{useGrouping:!0})==="1,000")&&x(1e3,"en",{useGrouping:!1})==="1000"))}function Pt(){var x,b=[].slice.call(arguments),B={};if(K(b,function(at,ir){if(!ir){if(!le(at))throw"Expected array as the first argument to durationsFormat.";x=at}typeof at!="string"&&typeof at!="function"?typeof at!="number"?Mt(at)&&pe(B,at):B.precision=at:B.template=at}),!x||!x.length)return[];B.returnMomentTypes=!0;var de=he(x,function(at){return at.format(B)}),fe=V(I,re(j(Pe(de),"type"))),Ht=B.largest;return Ht&&(fe=fe.slice(0,Ht)),B.returnMomentTypes=!1,B.outputTypes=fe,he(x,function(at){return at.format(B)})}function mn(){var x=[].slice.call(arguments),b=pe({},this.format.defaults),B=this.asMilliseconds(),de=this.asMonths();typeof this.isValid=="function"&&this.isValid()===!1&&(B=0,de=0);var fe=B<0,Ht=g.duration(Math.abs(B),"milliseconds"),at=g.duration(Math.abs(de),"months");K(x,function(k){typeof k!="string"&&typeof k!="function"?typeof k!="number"?Mt(k)&&pe(b,k):b.precision=k:b.template=k});var ir={years:"y",months:"M",weeks:"w",days:"d",hours:"h",minutes:"m",seconds:"s",milliseconds:"S"},mt={escape:/\[(.+?)\]/,years:/\*?[Yy]+/,months:/\*?M+/,weeks:/\*?[Ww]+/,days:/\*?[Dd]+/,hours:/\*?[Hh]+/,minutes:/\*?m+/,seconds:/\*?s+/,milliseconds:/\*?S+/,general:/.+?/};b.types=I;var Xe=function(k){return Ee(I,function(_e){return mt[_e].test(k)})},jr=new RegExp(he(I,function(k){return mt[k].source}).join("|"),"g");b.duration=this;var bn=typeof b.template=="function"?b.template.apply(b):b.template,lt=b.outputTypes,tu=b.returnMomentTypes,gn=b.largest,Je=[];lt||(le(b.stopTrim)&&(b.stopTrim=b.stopTrim.join("")),b.stopTrim&&K(b.stopTrim.match(jr),function(k){var _e=Xe(k);_e!=="escape"&&_e!=="general"&&Je.push(_e)}));var se=g.localeData();se||(se={}),K(ve(Te),function(k){typeof Te[k]!="function"?se["_"+k]||(se["_"+k]=Te[k]):se[k]||(se[k]=Te[k])}),K(ve(se._durationTimeTemplates),function(k){bn=bn.replace("_"+k+"_",se._durationTimeTemplates[k])});var sr=b.userLocale||g.locale(),jn=b.useLeftUnits,Js=b.usePlural,An=b.precision,or=b.forceLength,Yi=b.useGrouping,je=b.trunc,zr=b.useSignificantDigits&&An>0,_t=zr?b.precision:0,yn=_t,be=b.minValue,oi=!1,Zs=b.maxValue,vr=!1,eo=b.useToLocaleString,fa=b.groupingSeparator,Ki=b.decimalSeparator,pa=b.grouping;eo=eo&&(v||T);var sn=b.trim;le(sn)&&(sn=sn.join(" ")),sn===null&&(gn||Zs||zr)&&(sn="all"),sn!==null&&sn!==!0&&sn!=="left"&&sn!=="right"||(sn="large"),sn===!1&&(sn="");var ai=function(k){return k.test(sn)},ym=/large/,to=/small/,no=/both/,X=/mid/,ma=/^all|[^sm]all/,vm=/final/,Rn=gn>0||Qe([ym,no,ma],ai),nu=Qe([to,no,ma],ai),$e=Qe([X,ma],ai),ro=Qe([vm,ma],ai),bh=he(bn.match(jr),function(k,_e){var we=Xe(k);return k.slice(0,1)==="*"&&(k=k.slice(1),we!=="escape"&&we!=="general"&&Je.push(we)),{index:_e,length:k.length,text:"",token:we==="escape"?k.replace(mt.escape,"$1"):k,type:we==="escape"||we==="general"?null:we}}),He={index:0,length:0,token:"",text:"",type:null},Lt=[];jn&&bh.reverse(),K(bh,function(k){if(k.type)return(He.type||He.text)&&Lt.push(He),void(He=k);jn?He.text=k.token+He.text:He.text+=k.token}),(He.type||He.text)&&Lt.push(He),jn&&Lt.reverse();var me=V(I,re(W(j(Lt,"type"))));if(!me.length)return j(Lt,"text").join("");me=he(me,function(k,_e){var we,ut=_e+1===me.length,Qi=!_e;we=k==="years"||k==="months"?at.as(k):Ht.as(k);var qr=Math.floor(we),ga=we-qr,Xi=Ee(Lt,function(_n){return k===_n.type});return Qi&&Zs&&we>Zs&&(vr=!0),ut&&be&&Math.abs(b.duration.as(k))<be&&(oi=!0),Qi&&or===null&&Xi.length>1&&(or=!0),Ht.subtract(qr,k),at.subtract(qr,k),{rawValue:we,wholeValue:qr,decimalValue:ut?ga:0,isSmallest:ut,isLargest:Qi,type:k,tokenLength:Xi.length}});var wt=je?Math.floor:Math.round,vn=function(k,_e){var we=Math.pow(10,_e);return wt(k*we)/we},zn=!1,ar=!1,Ah=function(k,_e){var we={useGrouping:Yi,groupingSeparator:fa,decimalSeparator:Ki,grouping:pa,useToLocaleString:eo};return zr&&(_t<=0?(k.rawValue=0,k.wholeValue=0,k.decimalValue=0):(we.maximumSignificantDigits=_t,k.significantDigits=_t)),vr&&!ar&&(k.isLargest?(k.wholeValue=Zs,k.decimalValue=0):(k.wholeValue=0,k.decimalValue=0)),oi&&!ar&&(k.isSmallest?(k.wholeValue=be,k.decimalValue=0):(k.wholeValue=0,k.decimalValue=0)),k.isSmallest||k.significantDigits&&k.significantDigits-k.wholeValue.toString().length<=0?An<0?k.value=vn(k.wholeValue,An):An===0?k.value=wt(k.wholeValue+k.decimalValue):zr?(k.value=je?vn(k.rawValue,_t-k.wholeValue.toString().length):k.rawValue,k.wholeValue&&(_t-=k.wholeValue.toString().length)):(we.fractionDigits=An,k.value=je?k.wholeValue+vn(k.decimalValue,An):k.wholeValue+k.decimalValue):zr&&k.wholeValue?(k.value=Math.round(vn(k.wholeValue,k.significantDigits-k.wholeValue.toString().length)),_t-=k.wholeValue.toString().length):k.value=k.wholeValue,k.tokenLength>1&&(or||zn)&&(we.minimumIntegerDigits=k.tokenLength,ar&&we.maximumSignificantDigits<k.tokenLength&&delete we.maximumSignificantDigits),!zn&&(k.value>0||sn===""||Ee(Je,k.type)||Ee(lt,k.type))&&(zn=!0),k.formattedValue=L(k.value,we,sr),we.useGrouping=!1,we.decimalSeparator=".",k.formattedValueEn=L(k.value,we,"en"),k.tokenLength===2&&k.type==="milliseconds"&&(k.formattedValueMS=L(k.value,{minimumIntegerDigits:3,useGrouping:!1},"en").slice(0,2)),k};if((me=W(me=he(me,Ah))).length>1){var Rh=function(k){return Ee(me,function(_e){return _e.type===k})},_m=function(k){var _e=Rh(k.type);_e&&K(k.targets,function(we){var ut=Rh(we.type);ut&&parseInt(_e.formattedValueEn,10)===we.value&&(_e.rawValue=0,_e.wholeValue=0,_e.decimalValue=0,ut.rawValue+=1,ut.wholeValue+=1,ut.decimalValue=0,ut.formattedValueEn=ut.wholeValue.toString(),ar=!0)})};K(w,_m)}return ar&&(zn=!1,_t=yn,me=W(me=he(me,Ah))),!lt||vr&&!b.trim?(Rn&&(me=Q(me,function(k){return!k.isSmallest&&!k.wholeValue&&!Ee(Je,k.type)})),gn&&me.length&&(me=me.slice(0,gn)),nu&&me.length>1&&(me=J(me,function(k){return!k.wholeValue&&!Ee(Je,k.type)&&!k.isLargest})),$e&&(me=W(me=he(me,function(k,_e){return _e>0&&_e<me.length-1&&!k.wholeValue?null:k}))),!ro||me.length!==1||me[0].wholeValue||!je&&me[0].isSmallest&&me[0].rawValue<be||(me=[])):me=W(me=he(me,function(k){return Ee(lt,function(_e){return k.type===_e})?k:null})),tu?me:(K(Lt,function(k){var _e=ir[k.type],we=Ee(me,function(_n){return _n.type===k.type});if(_e&&we){var ut=we.formattedValueEn.split(".");ut[0]=parseInt(ut[0],10),ut[1]?ut[1]=parseFloat("0."+ut[1],10):ut[1]=null;var Qi=se.durationPluralKey(_e,ut[0],ut[1]),qr=q(_e,se),ga=!1,Xi={};K(se._durationLabelTypes,function(_n){var ya=Ee(qr,function(xh){return xh.type===_n.type&&xh.key===Qi});ya&&(Xi[ya.type]=ya.label,S(k.text,_n.string)&&(k.text=k.text.replace(_n.string,ya.label),ga=!0))}),Js&&!ga&&(qr.sort(P),K(qr,function(_n){return Xi[_n.type]===_n.label?!S(k.text,_n.label)&&void 0:S(k.text,_n.label)?(k.text=k.text.replace(_n.label,Xi[_n.type]),!1):void 0}))}}),(Lt=he(Lt,function(k){if(!k.type)return k.text;var _e=Ee(me,function(ut){return ut.type===k.type});if(!_e)return"";var we="";return jn&&(we+=k.text),(fe&&vr||!fe&&oi)&&(we+="< ",vr=!1,oi=!1),(fe&&oi||!fe&&vr)&&(we+="> ",vr=!1,oi=!1),fe&&(_e.value>0||sn===""||Ee(Je,_e.type)||Ee(lt,_e.type))&&(we+="-",fe=!1),k.type==="milliseconds"&&_e.formattedValueMS?we+=_e.formattedValueMS:we+=_e.formattedValue,jn||(we+=k.text),we})).join("").replace(/(,| |:|\.)*$/,"").replace(/^(,| |:|\.)*/,""))}function yr(){var x=this.duration,b=function(fe){return x._data[fe]},B=Ee(this.types,b),de=function(fe,Ht){for(var at=fe.length;at-=1;)if(Ht(fe[at]))return fe[at]}(this.types,b);switch(B){case"milliseconds":return"S __";case"seconds":case"minutes":return"*_MS_";case"hours":return"_HMS_";case"days":if(B===de)return"d __";case"weeks":return B===de?"w __":(this.trim===null&&(this.trim="both"),"w __, d __, h __");case"months":if(B===de)return"M __";case"years":return B===de?"y __":(this.trim===null&&(this.trim="both"),"y __, M __, d __");default:return this.trim===null&&(this.trim="both"),"y __, d __, h __, m __, s __"}}function ha(x){if(!x)throw"Moment Duration Format init cannot find moment instance.";x.duration.format=Pt,x.duration.fn.format=mn,x.duration.fn.format.defaults={trim:null,stopTrim:null,largest:null,maxValue:null,minValue:null,precision:0,trunc:!1,forceLength:null,userLocale:null,usePlural:!0,useLeftUnits:!1,useGrouping:!0,useSignificantDigits:!1,template:yr,useToLocaleString:!0,groupingSeparator:",",decimalSeparator:".",grouping:[3]},x.updateLocale("en",Te)}var da=function(x,b,B){return x.toLocaleString(b,B)};v=function(){try{0 .toLocaleString("i")}catch(x){return x.name==="RangeError"}return!1}()&&ot(da),_=v&&Z(da);var Wr=function(x,b,B){if(typeof window<"u"&&window&&window.Intl&&window.Intl.NumberFormat)return window.Intl.NumberFormat(b,B).format(x)};return T=ot(Wr),C=T&&Z(Wr),ha(g),ha},u=[o(1)],(c=typeof(a=f)=="function"?a.apply(s,u):a)===void 0||(i.exports=c),d&&(d.momentDurationFormatSetup=d.moment?f(d.moment):f)},function(i,s,o){o.r(s),o.d(s,"default",function(){return Ee});var a=o(2),u=o.n(a),c=o(0),d=o.n(c),f=o(1),g=o.n(f);o(5);function v(K){return(v=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(he){return typeof he}:function(he){return he&&typeof Symbol=="function"&&he.constructor===Symbol&&he!==Symbol.prototype?"symbol":typeof he})(K)}function _(K,he){var j=Object.keys(K);if(Object.getOwnPropertySymbols){var W=Object.getOwnPropertySymbols(K);he&&(W=W.filter(function(re){return Object.getOwnPropertyDescriptor(K,re).enumerable})),j.push.apply(j,W)}return j}function T(K,he){if(K==null)return{};var j,W,re=function(Q,J){if(Q==null)return{};var pe,ve,Qe={},Pe=Object.keys(Q);for(ve=0;ve<Pe.length;ve++)pe=Pe[ve],J.indexOf(pe)>=0||(Qe[pe]=Q[pe]);return Qe}(K,he);if(Object.getOwnPropertySymbols){var V=Object.getOwnPropertySymbols(K);for(W=0;W<V.length;W++)j=V[W],he.indexOf(j)>=0||Object.prototype.propertyIsEnumerable.call(K,j)&&(re[j]=K[j])}return re}function C(K,he){for(var j=0;j<he.length;j++){var W=he[j];W.enumerable=W.enumerable||!1,W.configurable=!0,"value"in W&&(W.writable=!0),Object.defineProperty(K,W.key,W)}}function I(K,he,j){return he&&C(K.prototype,he),j&&C(K,j),K}function w(K,he){return(w=Object.setPrototypeOf||function(j,W){return j.__proto__=W,j})(K,he)}function S(K){var he=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}();return function(){var j,W=L(K);if(he){var re=L(this).constructor;j=Reflect.construct(W,arguments,re)}else j=W.apply(this,arguments);return A(this,j)}}function A(K,he){return!he||v(he)!=="object"&&typeof he!="function"?O(K):he}function O(K){if(K===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return K}function L(K){return(L=Object.setPrototypeOf?Object.getPrototypeOf:function(he){return he.__proto__||Object.getPrototypeOf(he)})(K)}function P(K,he,j){return he in K?Object.defineProperty(K,he,{value:j,enumerable:!0,configurable:!0,writable:!0}):K[he]=j,K}var q=[d.a.string,d.a.number,d.a.array,d.a.object],Te=[d.a.string,d.a.array],le=[d.a.object,d.a.bool],Mt=[d.a.string,d.a.bool],Ee=function(K){(function(W,re){if(typeof re!="function"&&re!==null)throw new TypeError("Super expression must either be null or a function");W.prototype=Object.create(re&&re.prototype,{constructor:{value:W,writable:!0,configurable:!0}}),re&&w(W,re)})(j,K);var he=S(j);function j(W){var re;return function(V,Q){if(!(V instanceof Q))throw new TypeError("Cannot call a class as a function")}(this,j),P(O(re=he.call(this,W)),"setTimer",function(){var V=re.props.interval;re.clearTimer(),j.pooledTimer||V===0||(re.timer=setInterval(function(){re.update(re.props)},V))}),P(O(re),"getTitle",function(){var V=re.props.titleFormat,Q=j.getDatetime(re.props),J=V||j.globalFormat;return Q.format(J)}),P(O(re),"clearTimer",function(){!j.pooledTimer&&re.timer&&(clearInterval(re.timer),re.timer=null),j.pooledTimer&&!re.timer&&j.removePooledElement(O(re))}),j.globalMoment||(j.globalMoment=g.a),re.state={content:""},re.timer=null,re}return I(j,null,[{key:"startPooledTimer",value:function(){var W=arguments.length>0&&arguments[0]!==void 0?arguments[0]:6e4;j.clearPooledTimer(),j.pooledTimer=setInterval(function(){j.pooledElements.forEach(function(re){re.props.interval!==0&&re.update()})},W)}},{key:"clearPooledTimer",value:function(){j.pooledTimer&&(clearInterval(j.pooledTimer),j.pooledTimer=null,j.pooledElements=[])}},{key:"pushPooledElement",value:function(W){W instanceof j?j.pooledElements.indexOf(W)===-1&&j.pooledElements.push(W):console.error("Element not an instance of Moment.")}},{key:"removePooledElement",value:function(W){var re=j.pooledElements.indexOf(W);re!==-1&&j.pooledElements.splice(re,1)}},{key:"getDatetime",value:function(W){var re=W.utc,V=W.unix,Q=W.date,J=W.locale,pe=W.parse,ve=W.tz,Qe=W.local;Q=Q||W.children,pe=pe||j.globalParse,Qe=Qe||j.globalLocal,ve=ve||j.globalTimezone,J=j.globalLocale?j.globalLocale:J||j.globalMoment.locale();var Pe=null;return Pe=re?j.globalMoment.utc(Q,pe,J):V?j.globalMoment(1e3*Q,pe,J):j.globalMoment(Q,pe,J),ve?Pe=Pe.tz(ve):Qe&&(Pe=Pe.local()),Pe}},{key:"getContent",value:function(W){var re=W.fromNow,V=W.fromNowDuring,Q=W.from,J=W.add,pe=W.subtract,ve=W.toNow,Qe=W.to,Pe=W.ago,Z=W.calendar,ot=W.diff,Pt=W.duration,mn=W.durationFromNow,yr=W.unit,ha=W.decimal,da=W.trim,Wr=W.format;Wr=Wr||j.globalFormat;var x=j.getDatetime(W);J&&x.add(J),pe&&x.subtract(pe);var b=Boolean(V)&&-x.diff(g()())<V,B="";return B=!Wr||b||mn||Pt?Q?x.from(Q,Pe):re||b?x.fromNow(Pe):Qe?x.to(Qe,Pe):ve?x.toNow(Pe):Z?x.calendar(null,Z):ot?x.diff(ot,yr,ha):Pt?x.diff(Pt):mn?g()().diff(x):x.toString():x.format(Wr),(Pt||mn)&&(B=(B=g.a.duration(B)).format(Wr,{trim:da})),B=(j.globalFilter||W.filter)(B)}}]),I(j,[{key:"componentDidMount",value:function(){this.setTimer(),j.pooledTimer&&j.pushPooledElement(this)}},{key:"componentDidUpdate",value:function(W){var re=this.props.interval;W.interval!==re&&this.setTimer()}},{key:"componentWillUnmount",value:function(){this.clearTimer()}},{key:"update",value:function(W){var re=W||this.props,V=re.onChange,Q=j.getContent(re);this.setState({content:Q},function(){V(Q)})}},{key:"render",value:function(){var W,re,V,Q,J=this.props,pe=J.withTitle,ve=J.element,Qe=T(J,["withTitle","element"]),Pe=this.state.content,Z=(W=Qe,re=j.propTypes,V=Object.keys(re),Q=Object.assign({},W),Object.keys(Q).filter(function(ot){return V.indexOf(ot)!==-1}).forEach(function(ot){return delete Q[ot]}),Q);return pe&&(Z.title=this.getTitle()),u.a.createElement(ve||j.globalElement,function(ot){for(var Pt=1;Pt<arguments.length;Pt++){var mn=arguments[Pt]!=null?arguments[Pt]:{};Pt%2?_(Object(mn),!0).forEach(function(yr){P(ot,yr,mn[yr])}):Object.getOwnPropertyDescriptors?Object.defineProperties(ot,Object.getOwnPropertyDescriptors(mn)):_(Object(mn)).forEach(function(yr){Object.defineProperty(ot,yr,Object.getOwnPropertyDescriptor(mn,yr))})}return ot}({dateTime:j.getDatetime(this.props)},Z),Pe)}}],[{key:"getDerivedStateFromProps",value:function(W){return{content:j.getContent(W)}}}]),j}(u.a.Component);P(Ee,"propTypes",{element:d.a.any,date:d.a.oneOfType(q),parse:d.a.oneOfType(Te),format:d.a.string,add:d.a.object,subtract:d.a.object,ago:d.a.bool,fromNow:d.a.bool,fromNowDuring:d.a.number,from:d.a.oneOfType(q),toNow:d.a.bool,to:d.a.oneOfType(q),calendar:d.a.oneOfType(le),unix:d.a.bool,utc:d.a.bool,local:d.a.bool,tz:d.a.string,withTitle:d.a.bool,titleFormat:d.a.string,locale:d.a.string,interval:d.a.number,diff:d.a.oneOfType(q),duration:d.a.oneOfType(q),durationFromNow:d.a.bool,trim:d.a.oneOfType(Mt),unit:d.a.string,decimal:d.a.bool,filter:d.a.func,onChange:d.a.func}),P(Ee,"defaultProps",{element:null,fromNow:!1,toNow:!1,calendar:!1,ago:!1,unix:!1,utc:!1,local:!1,unit:null,withTitle:!1,trim:!1,decimal:!1,titleFormat:"",interval:6e4,filter:function(K){return K},onChange:function(){}}),P(Ee,"globalMoment",null),P(Ee,"globalLocale",null),P(Ee,"globalLocal",null),P(Ee,"globalFormat",null),P(Ee,"globalParse",null),P(Ee,"globalFilter",null),P(Ee,"globalElement","time"),P(Ee,"globalTimezone",null),P(Ee,"pooledElements",[]),P(Ee,"pooledTimer",null)}])})})(iU);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zk={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y=function(t,e){if(!t)throw xl(e)},xl=function(t){return new Error("Firebase Database ("+Zk.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eC=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},lU=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[n++],o=t[n++],a=t[n++],u=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{const s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},E_={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],o=i+1<t.length,a=o?t[i+1]:0,u=i+2<t.length,c=u?t[i+2]:0,d=s>>2,f=(s&3)<<4|a>>4;let g=(a&15)<<2|c>>6,v=c&63;u||(v=64,o||(g=64)),r.push(n[d],n[f],n[g],n[v])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(eC(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):lU(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;const c=i<t.length?n[t.charAt(i)]:64;++i;const f=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||a==null||c==null||f==null)throw Error();const g=s<<2|a>>4;if(r.push(g),c!==64){const v=a<<4&240|c>>2;if(r.push(v),f!==64){const _=c<<6&192|f;r.push(_)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},tC=function(t){const e=eC(t);return E_.encodeByteArray(e,!0)},mf=function(t){return tC(t).replace(/\./g,"")},gf=function(t){try{return E_.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uU(t){return nC(void 0,t)}function nC(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(const n in e)!e.hasOwnProperty(n)||!cU(n)||(t[n]=nC(t[n],e[n]));return t}function cU(t){return t!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hU(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dU=()=>hU().__FIREBASE_DEFAULTS__,fU=()=>{if(typeof process>"u"||typeof process.env>"u")return;const t={}.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},pU=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&gf(t[1]);return e&&JSON.parse(e)},pp=()=>{try{return dU()||fU()||pU()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},rC=t=>{var e,n;return(n=(e=pp())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},iC=t=>{const e=rC(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},mU=()=>{var t;return(t=pp())===null||t===void 0?void 0:t.config},sC=t=>{var e;return(e=pp())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mp{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oC(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t),a="";return[mf(JSON.stringify(n)),mf(JSON.stringify(o)),a].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function T_(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(jt())}function gU(){var t;const e=(t=pp())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function yU(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function aC(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function vU(){const t=jt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function lC(){return Zk.NODE_ADMIN===!0}function _U(){return!gU()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function uC(){try{return typeof indexedDB=="object"}catch{return!1}}function wU(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IU="FirebaseError";class $i extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=IU,Object.setPrototypeOf(this,$i.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Jc.prototype.create)}}class Jc{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?SU(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new $i(i,a,r)}}function SU(t,e){return t.replace(EU,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const EU=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ec(t){return JSON.parse(t)}function un(t){return JSON.stringify(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cC=function(t){let e={},n={},r={},i="";try{const s=t.split(".");e=Ec(gf(s[0])||""),n=Ec(gf(s[1])||""),i=s[2],r=n.d||{},delete n.d}catch{}return{header:e,claims:n,data:r,signature:i}},TU=function(t){const e=cC(t),n=e.claims;return!!n&&typeof n=="object"&&n.hasOwnProperty("iat")},kU=function(t){const e=cC(t).claims;return typeof e=="object"&&e.admin===!0};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vi(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function dl(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]}function xy(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function yf(t,e,n){const r={};for(const i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=e.call(n,t[i],i,t));return r}function fl(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],o=e[i];if(SS(s)&&SS(o)){if(!fl(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function SS(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function na(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function xu(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,s]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(s)}}),e}function Ou(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CU{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,n){n||(n=0);const r=this.W_;if(typeof e=="string")for(let f=0;f<16;f++)r[f]=e.charCodeAt(n)<<24|e.charCodeAt(n+1)<<16|e.charCodeAt(n+2)<<8|e.charCodeAt(n+3),n+=4;else for(let f=0;f<16;f++)r[f]=e[n]<<24|e[n+1]<<16|e[n+2]<<8|e[n+3],n+=4;for(let f=16;f<80;f++){const g=r[f-3]^r[f-8]^r[f-14]^r[f-16];r[f]=(g<<1|g>>>31)&4294967295}let i=this.chain_[0],s=this.chain_[1],o=this.chain_[2],a=this.chain_[3],u=this.chain_[4],c,d;for(let f=0;f<80;f++){f<40?f<20?(c=a^s&(o^a),d=1518500249):(c=s^o^a,d=1859775393):f<60?(c=s&o|a&(s|o),d=2400959708):(c=s^o^a,d=3395469782);const g=(i<<5|i>>>27)+c+u+d+r[f]&4294967295;u=a,a=o,o=(s<<30|s>>>2)&4294967295,s=i,i=g}this.chain_[0]=this.chain_[0]+i&4294967295,this.chain_[1]=this.chain_[1]+s&4294967295,this.chain_[2]=this.chain_[2]+o&4294967295,this.chain_[3]=this.chain_[3]+a&4294967295,this.chain_[4]=this.chain_[4]+u&4294967295}update(e,n){if(e==null)return;n===void 0&&(n=e.length);const r=n-this.blockSize;let i=0;const s=this.buf_;let o=this.inbuf_;for(;i<n;){if(o===0)for(;i<=r;)this.compress_(e,i),i+=this.blockSize;if(typeof e=="string"){for(;i<n;)if(s[o]=e.charCodeAt(i),++o,++i,o===this.blockSize){this.compress_(s),o=0;break}}else for(;i<n;)if(s[o]=e[i],++o,++i,o===this.blockSize){this.compress_(s),o=0;break}}this.inbuf_=o,this.total_+=n}digest(){const e=[];let n=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let i=this.blockSize-1;i>=56;i--)this.buf_[i]=n&255,n/=256;this.compress_(this.buf_);let r=0;for(let i=0;i<5;i++)for(let s=24;s>=0;s-=8)e[r]=this.chain_[i]>>s&255,++r;return e}}function NU(t,e){const n=new DU(t,e);return n.subscribe.bind(n)}class DU{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");bU(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=ug),i.error===void 0&&(i.error=ug),i.complete===void 0&&(i.complete=ug);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function bU(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function ug(){}function k_(t,e){return`${t} failed: ${e} argument `}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AU=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);if(i>=55296&&i<=56319){const s=i-55296;r++,Y(r<t.length,"Surrogate pair missing trail surrogate.");const o=t.charCodeAt(r)-56320;i=65536+(s<<10)+o}i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):i<65536?(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},gp=function(t){let e=0;for(let n=0;n<t.length;n++){const r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,n++):e+=3}return e};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ne(t){return t&&t._delegate?t._delegate:t}class Rs{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uo="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RU{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new mp;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(OU(e))try{this.getOrInitializeService({instanceIdentifier:uo})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=uo){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=uo){return this.instances.has(e)}getOptions(e=uo){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:xU(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=uo){return this.component?this.component.multipleInstances?e:uo:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function xU(t){return t===uo?void 0:t}function OU(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MU{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new RU(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Le;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Le||(Le={}));const PU={debug:Le.DEBUG,verbose:Le.VERBOSE,info:Le.INFO,warn:Le.WARN,error:Le.ERROR,silent:Le.SILENT},LU=Le.INFO,FU={[Le.DEBUG]:"log",[Le.VERBOSE]:"log",[Le.INFO]:"info",[Le.WARN]:"warn",[Le.ERROR]:"error"},UU=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=FU[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class yp{constructor(e){this.name=e,this._logLevel=LU,this._logHandler=UU,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Le))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?PU[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Le.DEBUG,...e),this._logHandler(this,Le.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Le.VERBOSE,...e),this._logHandler(this,Le.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Le.INFO,...e),this._logHandler(this,Le.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Le.WARN,...e),this._logHandler(this,Le.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Le.ERROR,...e),this._logHandler(this,Le.ERROR,...e)}}const $U=(t,e)=>e.some(n=>t instanceof n);let ES,TS;function VU(){return ES||(ES=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function BU(){return TS||(TS=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const hC=new WeakMap,Oy=new WeakMap,dC=new WeakMap,cg=new WeakMap,C_=new WeakMap;function WU(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(Ts(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&hC.set(n,t)}).catch(()=>{}),C_.set(e,t),e}function jU(t){if(Oy.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});Oy.set(t,e)}let My={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Oy.get(t);if(e==="objectStoreNames")return t.objectStoreNames||dC.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Ts(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function zU(t){My=t(My)}function qU(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(hg(this),e,...n);return dC.set(r,e.sort?e.sort():[e]),Ts(r)}:BU().includes(t)?function(...e){return t.apply(hg(this),e),Ts(hC.get(this))}:function(...e){return Ts(t.apply(hg(this),e))}}function GU(t){return typeof t=="function"?qU(t):(t instanceof IDBTransaction&&jU(t),$U(t,VU())?new Proxy(t,My):t)}function Ts(t){if(t instanceof IDBRequest)return WU(t);if(cg.has(t))return cg.get(t);const e=GU(t);return e!==t&&(cg.set(t,e),C_.set(e,t)),e}const hg=t=>C_.get(t);function HU(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(t,e),a=Ts(o);return r&&o.addEventListener("upgradeneeded",u=>{r(Ts(o.result),u.oldVersion,u.newVersion,Ts(o.transaction))}),n&&o.addEventListener("blocked",()=>n()),a.then(u=>{s&&u.addEventListener("close",()=>s()),i&&u.addEventListener("versionchange",()=>i())}).catch(()=>{}),a}const YU=["get","getKey","getAll","getAllKeys","count"],KU=["put","add","delete","clear"],dg=new Map;function kS(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(dg.get(e))return dg.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=KU.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||YU.includes(n)))return;const s=async function(o,...a){const u=this.transaction(o,i?"readwrite":"readonly");let c=u.store;return r&&(c=c.index(a.shift())),(await Promise.all([c[n](...a),i&&u.done]))[0]};return dg.set(e,s),s}zU(t=>({...t,get:(e,n,r)=>kS(e,n)||t.get(e,n,r),has:(e,n)=>!!kS(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QU{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(XU(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function XU(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Py="@firebase/app",CS="0.9.3";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fo=new yp("@firebase/app"),JU="@firebase/app-compat",ZU="@firebase/analytics-compat",e2="@firebase/analytics",t2="@firebase/app-check-compat",n2="@firebase/app-check",r2="@firebase/auth",i2="@firebase/auth-compat",s2="@firebase/database",o2="@firebase/database-compat",a2="@firebase/functions",l2="@firebase/functions-compat",u2="@firebase/installations",c2="@firebase/installations-compat",h2="@firebase/messaging",d2="@firebase/messaging-compat",f2="@firebase/performance",p2="@firebase/performance-compat",m2="@firebase/remote-config",g2="@firebase/remote-config-compat",y2="@firebase/storage",v2="@firebase/storage-compat",_2="@firebase/firestore",w2="@firebase/firestore-compat",I2="firebase",S2="9.17.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vf="[DEFAULT]",E2={[Py]:"fire-core",[JU]:"fire-core-compat",[e2]:"fire-analytics",[ZU]:"fire-analytics-compat",[n2]:"fire-app-check",[t2]:"fire-app-check-compat",[r2]:"fire-auth",[i2]:"fire-auth-compat",[s2]:"fire-rtdb",[o2]:"fire-rtdb-compat",[a2]:"fire-fn",[l2]:"fire-fn-compat",[u2]:"fire-iid",[c2]:"fire-iid-compat",[h2]:"fire-fcm",[d2]:"fire-fcm-compat",[f2]:"fire-perf",[p2]:"fire-perf-compat",[m2]:"fire-rc",[g2]:"fire-rc-compat",[y2]:"fire-gcs",[v2]:"fire-gcs-compat",[_2]:"fire-fst",[w2]:"fire-fst-compat","fire-js":"fire-js",[I2]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _f=new Map,Ly=new Map;function T2(t,e){try{t.container.addComponent(e)}catch(n){Fo.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Uo(t){const e=t.name;if(Ly.has(e))return Fo.debug(`There were multiple attempts to register component ${e}.`),!1;Ly.set(e,t);for(const n of _f.values())T2(n,t);return!0}function Ol(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function k2(t,e,n=vf){Ol(t,e).clearInstance(n)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C2={["no-app"]:"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",["bad-app-name"]:"Illegal App name: '{$appName}",["duplicate-app"]:"Firebase App named '{$appName}' already exists with different options or config",["app-deleted"]:"Firebase App named '{$appName}' already deleted",["no-options"]:"Need to provide options, when not being deployed to hosting via source.",["invalid-app-argument"]:"firebase.{$appName}() takes either no argument or a Firebase App instance.",["invalid-log-argument"]:"First argument to `onLog` must be null or a function.",["idb-open"]:"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.",["idb-get"]:"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.",["idb-set"]:"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.",["idb-delete"]:"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."},ks=new Jc("app","Firebase",C2);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N2{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Rs("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ks.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ml=S2;function fC(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:vf,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw ks.create("bad-app-name",{appName:String(i)});if(n||(n=mU()),!n)throw ks.create("no-options");const s=_f.get(i);if(s){if(fl(n,s.options)&&fl(r,s.config))return s;throw ks.create("duplicate-app",{appName:i})}const o=new MU(i);for(const u of Ly.values())o.addComponent(u);const a=new N2(n,r,o);return _f.set(i,a),a}function N_(t=vf){const e=_f.get(t);if(!e&&t===vf)return fC();if(!e)throw ks.create("no-app",{appName:t});return e}function ni(t,e,n){var r;let i=(r=E2[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const a=[`Unable to register library "${i}" with version "${e}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Fo.warn(a.join(" "));return}Uo(new Rs(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D2="firebase-heartbeat-database",b2=1,Tc="firebase-heartbeat-store";let fg=null;function pC(){return fg||(fg=HU(D2,b2,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(Tc)}}}).catch(t=>{throw ks.create("idb-open",{originalErrorMessage:t.message})})),fg}async function A2(t){try{return(await pC()).transaction(Tc).objectStore(Tc).get(mC(t))}catch(e){if(e instanceof $i)Fo.warn(e.message);else{const n=ks.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Fo.warn(n.message)}}}async function NS(t,e){try{const r=(await pC()).transaction(Tc,"readwrite");return await r.objectStore(Tc).put(e,mC(t)),r.done}catch(n){if(n instanceof $i)Fo.warn(n.message);else{const r=ks.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Fo.warn(r.message)}}}function mC(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R2=1024,x2=30*24*60*60*1e3;class O2{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new P2(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=DS();if(this._heartbeatsCache===null&&(this._heartbeatsCache=await this._heartbeatsCachePromise),!(this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(i=>i.date===r)))return this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(i=>{const s=new Date(i.date).valueOf();return Date.now()-s<=x2}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache===null||this._heartbeatsCache.heartbeats.length===0)return"";const e=DS(),{heartbeatsToSend:n,unsentEntries:r}=M2(this._heartbeatsCache.heartbeats),i=mf(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}}function DS(){return new Date().toISOString().substring(0,10)}function M2(t,e=R2){const n=[];let r=t.slice();for(const i of t){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),bS(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),bS(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class P2{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return uC()?wU().then(()=>!0).catch(()=>!1):!1}async read(){return await this._canUseIndexedDBPromise?await A2(this.app)||{heartbeats:[]}:{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return NS(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return NS(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function bS(t){return mf(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function L2(t){Uo(new Rs("platform-logger",e=>new QU(e),"PRIVATE")),Uo(new Rs("heartbeat",e=>new O2(e),"PRIVATE")),ni(Py,CS,t),ni(Py,CS,"esm2017"),ni("fire-js","")}L2("");var F2="firebase",U2="9.17.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ni(F2,U2,"app");function D_(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $2={PHONE:"phone"},V2={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},B2={EMAIL_LINK:"emailLink",EMAIL_PASSWORD:"password",FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PHONE:"phone",TWITTER:"twitter.com"},W2={LINK:"link",REAUTHENTICATE:"reauthenticate",SIGN_IN:"signIn"},j2={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function z2(){return{["admin-restricted-operation"]:"This operation is restricted to administrators only.",["argument-error"]:"",["app-not-authorized"]:"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.",["app-not-installed"]:"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.",["captcha-check-failed"]:"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.",["code-expired"]:"The SMS code has expired. Please re-send the verification code to try again.",["cordova-not-ready"]:"Cordova framework is not ready.",["cors-unsupported"]:"This browser is not supported.",["credential-already-in-use"]:"This credential is already associated with a different user account.",["custom-token-mismatch"]:"The custom token corresponds to a different audience.",["requires-recent-login"]:"This operation is sensitive and requires recent authentication. Log in again before retrying this request.",["dependent-sdk-initialized-before-auth"]:"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.",["dynamic-link-not-activated"]:"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.",["email-change-needs-verification"]:"Multi-factor users must always have a verified email.",["email-already-in-use"]:"The email address is already in use by another account.",["emulator-config-failed"]:'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',["expired-action-code"]:"The action code has expired.",["cancelled-popup-request"]:"This operation has been cancelled due to another conflicting popup being opened.",["internal-error"]:"An internal AuthError has occurred.",["invalid-app-credential"]:"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.",["invalid-app-id"]:"The mobile app identifier is not registed for the current project.",["invalid-user-token"]:"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.",["invalid-auth-event"]:"An internal AuthError has occurred.",["invalid-verification-code"]:"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.",["invalid-continue-uri"]:"The continue URL provided in the request is invalid.",["invalid-cordova-configuration"]:"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.",["invalid-custom-token"]:"The custom token format is incorrect. Please check the documentation.",["invalid-dynamic-link-domain"]:"The provided dynamic link domain is not configured or authorized for the current project.",["invalid-email"]:"The email address is badly formatted.",["invalid-emulator-scheme"]:"Emulator URL must start with a valid scheme (http:// or https://).",["invalid-api-key"]:"Your API key is invalid, please check you have copied it correctly.",["invalid-cert-hash"]:"The SHA-1 certificate hash provided is invalid.",["invalid-credential"]:"The supplied auth credential is malformed or has expired.",["invalid-message-payload"]:"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.",["invalid-multi-factor-session"]:"The request does not contain a valid proof of first factor successful sign-in.",["invalid-oauth-provider"]:"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.",["invalid-oauth-client-id"]:"The OAuth client ID provided is either invalid or does not match the specified API key.",["unauthorized-domain"]:"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.",["invalid-action-code"]:"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.",["wrong-password"]:"The password is invalid or the user does not have a password.",["invalid-persistence-type"]:"The specified persistence type is invalid. It can only be local, session or none.",["invalid-phone-number"]:"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].",["invalid-provider-id"]:"The specified provider ID is invalid.",["invalid-recipient-email"]:"The email corresponding to this action failed to send as the provided recipient email address is invalid.",["invalid-sender"]:"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.",["invalid-verification-id"]:"The verification ID used to create the phone auth credential is invalid.",["invalid-tenant-id"]:"The Auth instance's tenant ID is invalid.",["login-blocked"]:"Login blocked by user-provided method: {$originalMessage}",["missing-android-pkg-name"]:"An Android Package Name must be provided if the Android App is required to be installed.",["auth-domain-config-required"]:"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.",["missing-app-credential"]:"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.",["missing-verification-code"]:"The phone auth credential was created with an empty SMS verification code.",["missing-continue-uri"]:"A continue URL must be provided in the request.",["missing-iframe-start"]:"An internal AuthError has occurred.",["missing-ios-bundle-id"]:"An iOS Bundle ID must be provided if an App Store ID is provided.",["missing-or-invalid-nonce"]:"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.",["missing-multi-factor-info"]:"No second factor identifier is provided.",["missing-multi-factor-session"]:"The request is missing proof of first factor successful sign-in.",["missing-phone-number"]:"To send verification codes, provide a phone number for the recipient.",["missing-verification-id"]:"The phone auth credential was created with an empty verification ID.",["app-deleted"]:"This instance of FirebaseApp has been deleted.",["multi-factor-info-not-found"]:"The user does not have a second factor matching the identifier provided.",["multi-factor-auth-required"]:"Proof of ownership of a second factor is required to complete sign-in.",["account-exists-with-different-credential"]:"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.",["network-request-failed"]:"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.",["no-auth-event"]:"An internal AuthError has occurred.",["no-such-provider"]:"User was not linked to an account with the given provider.",["null-user"]:"A null user object was provided as the argument for an operation which requires a non-null user object.",["operation-not-allowed"]:"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.",["operation-not-supported-in-this-environment"]:'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',["popup-blocked"]:"Unable to establish a connection with the popup. It may have been blocked by the browser.",["popup-closed-by-user"]:"The popup has been closed by the user before finalizing the operation.",["provider-already-linked"]:"User can only be linked to one identity for the given provider.",["quota-exceeded"]:"The project's quota for this operation has been exceeded.",["redirect-cancelled-by-user"]:"The redirect operation has been cancelled by the user before finalizing.",["redirect-operation-pending"]:"A redirect sign-in operation is already pending.",["rejected-credential"]:"The request contains malformed or mismatching credentials.",["second-factor-already-in-use"]:"The second factor is already enrolled on this account.",["maximum-second-factor-count-exceeded"]:"The maximum allowed number of second factors on a user has been exceeded.",["tenant-id-mismatch"]:"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.",["user-token-expired"]:"The user's credential is no longer valid. The user must sign in again.",["too-many-requests"]:"We have blocked all requests from this device due to unusual activity. Try again later.",["unauthorized-continue-uri"]:"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.",["unsupported-first-factor"]:"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.",["unsupported-persistence-type"]:"The current environment does not support the specified persistence type.",["unsupported-tenant-operation"]:"This operation is not supported in a multi-tenant context.",["unverified-email"]:"The operation requires a verified email.",["user-cancelled"]:"The user did not grant your application the permissions it requested.",["user-not-found"]:"There is no user record corresponding to this identifier. The user may have been deleted.",["user-disabled"]:"The user account has been disabled by an administrator.",["user-mismatch"]:"The supplied credentials do not correspond to the previously signed in user.",["user-signed-out"]:"",["weak-password"]:"The password must be 6 characters long or more.",["web-storage-unsupported"]:"This browser is not supported or 3rd party cookies and data may be disabled.",["already-initialized"]:"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}}function gC(){return{["dependent-sdk-initialized-before-auth"]:"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const q2=z2,yC=gC,vC=new Jc("auth","Firebase",gC()),G2={ADMIN_ONLY_OPERATION:"auth/admin-restricted-operation",ARGUMENT_ERROR:"auth/argument-error",APP_NOT_AUTHORIZED:"auth/app-not-authorized",APP_NOT_INSTALLED:"auth/app-not-installed",CAPTCHA_CHECK_FAILED:"auth/captcha-check-failed",CODE_EXPIRED:"auth/code-expired",CORDOVA_NOT_READY:"auth/cordova-not-ready",CORS_UNSUPPORTED:"auth/cors-unsupported",CREDENTIAL_ALREADY_IN_USE:"auth/credential-already-in-use",CREDENTIAL_MISMATCH:"auth/custom-token-mismatch",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"auth/requires-recent-login",DEPENDENT_SDK_INIT_BEFORE_AUTH:"auth/dependent-sdk-initialized-before-auth",DYNAMIC_LINK_NOT_ACTIVATED:"auth/dynamic-link-not-activated",EMAIL_CHANGE_NEEDS_VERIFICATION:"auth/email-change-needs-verification",EMAIL_EXISTS:"auth/email-already-in-use",EMULATOR_CONFIG_FAILED:"auth/emulator-config-failed",EXPIRED_OOB_CODE:"auth/expired-action-code",EXPIRED_POPUP_REQUEST:"auth/cancelled-popup-request",INTERNAL_ERROR:"auth/internal-error",INVALID_API_KEY:"auth/invalid-api-key",INVALID_APP_CREDENTIAL:"auth/invalid-app-credential",INVALID_APP_ID:"auth/invalid-app-id",INVALID_AUTH:"auth/invalid-user-token",INVALID_AUTH_EVENT:"auth/invalid-auth-event",INVALID_CERT_HASH:"auth/invalid-cert-hash",INVALID_CODE:"auth/invalid-verification-code",INVALID_CONTINUE_URI:"auth/invalid-continue-uri",INVALID_CORDOVA_CONFIGURATION:"auth/invalid-cordova-configuration",INVALID_CUSTOM_TOKEN:"auth/invalid-custom-token",INVALID_DYNAMIC_LINK_DOMAIN:"auth/invalid-dynamic-link-domain",INVALID_EMAIL:"auth/invalid-email",INVALID_EMULATOR_SCHEME:"auth/invalid-emulator-scheme",INVALID_IDP_RESPONSE:"auth/invalid-credential",INVALID_MESSAGE_PAYLOAD:"auth/invalid-message-payload",INVALID_MFA_SESSION:"auth/invalid-multi-factor-session",INVALID_OAUTH_CLIENT_ID:"auth/invalid-oauth-client-id",INVALID_OAUTH_PROVIDER:"auth/invalid-oauth-provider",INVALID_OOB_CODE:"auth/invalid-action-code",INVALID_ORIGIN:"auth/unauthorized-domain",INVALID_PASSWORD:"auth/wrong-password",INVALID_PERSISTENCE:"auth/invalid-persistence-type",INVALID_PHONE_NUMBER:"auth/invalid-phone-number",INVALID_PROVIDER_ID:"auth/invalid-provider-id",INVALID_RECIPIENT_EMAIL:"auth/invalid-recipient-email",INVALID_SENDER:"auth/invalid-sender",INVALID_SESSION_INFO:"auth/invalid-verification-id",INVALID_TENANT_ID:"auth/invalid-tenant-id",MFA_INFO_NOT_FOUND:"auth/multi-factor-info-not-found",MFA_REQUIRED:"auth/multi-factor-auth-required",MISSING_ANDROID_PACKAGE_NAME:"auth/missing-android-pkg-name",MISSING_APP_CREDENTIAL:"auth/missing-app-credential",MISSING_AUTH_DOMAIN:"auth/auth-domain-config-required",MISSING_CODE:"auth/missing-verification-code",MISSING_CONTINUE_URI:"auth/missing-continue-uri",MISSING_IFRAME_START:"auth/missing-iframe-start",MISSING_IOS_BUNDLE_ID:"auth/missing-ios-bundle-id",MISSING_OR_INVALID_NONCE:"auth/missing-or-invalid-nonce",MISSING_MFA_INFO:"auth/missing-multi-factor-info",MISSING_MFA_SESSION:"auth/missing-multi-factor-session",MISSING_PHONE_NUMBER:"auth/missing-phone-number",MISSING_SESSION_INFO:"auth/missing-verification-id",MODULE_DESTROYED:"auth/app-deleted",NEED_CONFIRMATION:"auth/account-exists-with-different-credential",NETWORK_REQUEST_FAILED:"auth/network-request-failed",NULL_USER:"auth/null-user",NO_AUTH_EVENT:"auth/no-auth-event",NO_SUCH_PROVIDER:"auth/no-such-provider",OPERATION_NOT_ALLOWED:"auth/operation-not-allowed",OPERATION_NOT_SUPPORTED:"auth/operation-not-supported-in-this-environment",POPUP_BLOCKED:"auth/popup-blocked",POPUP_CLOSED_BY_USER:"auth/popup-closed-by-user",PROVIDER_ALREADY_LINKED:"auth/provider-already-linked",QUOTA_EXCEEDED:"auth/quota-exceeded",REDIRECT_CANCELLED_BY_USER:"auth/redirect-cancelled-by-user",REDIRECT_OPERATION_PENDING:"auth/redirect-operation-pending",REJECTED_CREDENTIAL:"auth/rejected-credential",SECOND_FACTOR_ALREADY_ENROLLED:"auth/second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"auth/maximum-second-factor-count-exceeded",TENANT_ID_MISMATCH:"auth/tenant-id-mismatch",TIMEOUT:"auth/timeout",TOKEN_EXPIRED:"auth/user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"auth/too-many-requests",UNAUTHORIZED_DOMAIN:"auth/unauthorized-continue-uri",UNSUPPORTED_FIRST_FACTOR:"auth/unsupported-first-factor",UNSUPPORTED_PERSISTENCE:"auth/unsupported-persistence-type",UNSUPPORTED_TENANT_OPERATION:"auth/unsupported-tenant-operation",UNVERIFIED_EMAIL:"auth/unverified-email",USER_CANCELLED:"auth/user-cancelled",USER_DELETED:"auth/user-not-found",USER_DISABLED:"auth/user-disabled",USER_MISMATCH:"auth/user-mismatch",USER_SIGNED_OUT:"auth/user-signed-out",WEAK_PASSWORD:"auth/weak-password",WEB_STORAGE_UNSUPPORTED:"auth/web-storage-unsupported",ALREADY_INITIALIZED:"auth/already-initialized"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AS=new yp("@firebase/auth");function Rd(t,...e){AS.logLevel<=Le.ERROR&&AS.error(`Auth (${Ml}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rr(t,...e){throw b_(t,...e)}function hr(t,...e){return b_(t,...e)}function _C(t,e,n){const r=Object.assign(Object.assign({},yC()),{[e]:n});return new Jc("auth","Firebase",r).create(e,{appName:t.name})}function Pl(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&rr(t,"argument-error"),_C(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function b_(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return vC.create(t,...e)}function z(t,e,...n){if(!t)throw b_(e,...n)}function Qr(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Rd(e),new Error(e)}function Oi(t,e){t||Qr(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RS=new Map;function Si(t){Oi(t instanceof Function,"Expected a class definition");let e=RS.get(t);return e?(Oi(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,RS.set(t,e),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wC(t,e){const n=Ol(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),s=n.getOptions();if(fl(s,e??{}))return i;rr(i,"already-initialized")}return n.initialize({options:e})}function H2(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Si);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kc(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function A_(){return xS()==="http:"||xS()==="https:"}function xS(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y2(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(A_()||yU()||"connection"in navigator)?navigator.onLine:!0}function K2(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zc{constructor(e,n){this.shortDelay=e,this.longDelay=n,Oi(n>e,"Short delay should be less than long delay!"),this.isMobile=T_()||aC()}get(){return Y2()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function R_(t,e){Oi(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IC{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;Qr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;Qr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;Qr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q2={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X2=new Zc(3e4,6e4);function Gt(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function nn(t,e,n,r,i={}){return SC(t,i,async()=>{let s={},o={};r&&(e==="GET"?o=r:s={body:JSON.stringify(r)});const a=na(Object.assign({key:t.config.apiKey},o)).slice(1),u=await t._getAdditionalHeaders();return u["Content-Type"]="application/json",t.languageCode&&(u["X-Firebase-Locale"]=t.languageCode),IC.fetch()(EC(t,t.config.apiHost,n,a),Object.assign({method:e,headers:u,referrerPolicy:"no-referrer"},s))})}async function SC(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},Q2),e);try{const i=new J2(t),s=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw Mu(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const a=s.ok?o.errorMessage:o.error.message,[u,c]=a.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw Mu(t,"credential-already-in-use",o);if(u==="EMAIL_EXISTS")throw Mu(t,"email-already-in-use",o);if(u==="USER_DISABLED")throw Mu(t,"user-disabled",o);const d=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw _C(t,d,c);rr(t,d)}}catch(i){if(i instanceof $i)throw i;rr(t,"network-request-failed")}}async function Bi(t,e,n,r,i={}){const s=await nn(t,e,n,r,i);return"mfaPendingCredential"in s&&rr(t,"multi-factor-auth-required",{_serverResponse:s}),s}function EC(t,e,n,r){const i=`${e}${n}?${r}`;return t.config.emulator?R_(t.config,i):`${t.config.apiScheme}://${i}`}class J2{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(hr(this.auth,"network-request-failed")),X2.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Mu(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=hr(t,e,r);return i.customData._tokenResponse=n,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Z2(t,e){return nn(t,"POST","/v1/accounts:delete",e)}async function e$(t,e){return nn(t,"POST","/v1/accounts:update",e)}async function t$(t,e){return nn(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yu(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function n$(t,e=!1){return ne(t).getIdToken(e)}async function TC(t,e=!1){const n=ne(t),r=await n.getIdToken(e),i=vp(r);z(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:Yu(pg(i.auth_time)),issuedAtTime:Yu(pg(i.iat)),expirationTime:Yu(pg(i.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function pg(t){return Number(t)*1e3}function vp(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Rd("JWT malformed, contained fewer than 3 sections"),null;try{const i=gf(n);return i?JSON.parse(i):(Rd("Failed to decode base64 JWT payload"),null)}catch(i){return Rd("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function r$(t){const e=vp(t);return z(e,"internal-error"),z(typeof e.exp<"u","internal-error"),z(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Mi(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof $i&&i$(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function i$({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s${constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kC{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Yu(this.lastLoginAt),this.creationTime=Yu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Cc(t){var e;const n=t.auth,r=await t.getIdToken(),i=await Mi(t,t$(n,{idToken:r}));z(i==null?void 0:i.users.length,n,"internal-error");const s=i.users[0];t._notifyReloadListener(s);const o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?a$(s.providerUserInfo):[],a=o$(t.providerData,o),u=t.isAnonymous,c=!(t.email&&s.passwordHash)&&!(a!=null&&a.length),d=u?c:!1,f={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new kC(s.createdAt,s.lastLoginAt),isAnonymous:d};Object.assign(t,f)}async function CC(t){const e=ne(t);await Cc(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function o$(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function a$(t){return t.map(e=>{var{providerId:n}=e,r=D_(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function l$(t,e){const n=await SC(t,{},async()=>{const r=na({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,o=EC(t,i,"/v1/token",`key=${s}`),a=await t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",IC.fetch()(o,{method:"POST",headers:a,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nc{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){z(e.idToken,"internal-error"),z(typeof e.idToken<"u","internal-error"),z(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):r$(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}async getToken(e,n=!1){return z(!this.accessToken||this.refreshToken,e,"user-token-expired"),!n&&this.accessToken&&!this.isExpired?this.accessToken:this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:s}=await l$(e,n);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new Nc;return r&&(z(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(z(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(z(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Nc,this.toJSON())}_performRefresh(){return Qr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rs(t,e){z(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class No{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,s=D_(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new s$(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new kC(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await Mi(this,this.stsTokenManager.getToken(this.auth,e));return z(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return TC(this,e)}reload(){return CC(this)}_assign(e){this!==e&&(z(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){return new No(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(e){z(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Cc(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){const e=await this.getIdToken();return await Mi(this,Z2(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,s,o,a,u,c,d;const f=(r=n.displayName)!==null&&r!==void 0?r:void 0,g=(i=n.email)!==null&&i!==void 0?i:void 0,v=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,_=(o=n.photoURL)!==null&&o!==void 0?o:void 0,T=(a=n.tenantId)!==null&&a!==void 0?a:void 0,C=(u=n._redirectEventId)!==null&&u!==void 0?u:void 0,I=(c=n.createdAt)!==null&&c!==void 0?c:void 0,w=(d=n.lastLoginAt)!==null&&d!==void 0?d:void 0,{uid:S,emailVerified:A,isAnonymous:O,providerData:L,stsTokenManager:P}=n;z(S&&P,e,"internal-error");const q=Nc.fromJSON(this.name,P);z(typeof S=="string",e,"internal-error"),rs(f,e.name),rs(g,e.name),z(typeof A=="boolean",e,"internal-error"),z(typeof O=="boolean",e,"internal-error"),rs(v,e.name),rs(_,e.name),rs(T,e.name),rs(C,e.name),rs(I,e.name),rs(w,e.name);const Te=new No({uid:S,auth:e,email:g,emailVerified:A,displayName:f,isAnonymous:O,photoURL:_,phoneNumber:v,tenantId:T,stsTokenManager:q,createdAt:I,lastLoginAt:w});return L&&Array.isArray(L)&&(Te.providerData=L.map(le=>Object.assign({},le))),C&&(Te._redirectEventId=C),Te}static async _fromIdTokenResponse(e,n,r=!1){const i=new Nc;i.updateFromServerResponse(n);const s=new No({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await Cc(s),s}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NC{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}NC.type="NONE";const Fy=NC;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xd(t,e,n){return`firebase:${t}:${e}:${n}`}class Ja{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=xd(this.userKey,i.apiKey,s),this.fullPersistenceKey=xd("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?No._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Ja(Si(Fy),e,r);const i=(await Promise.all(n.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let s=i[0]||Si(Fy);const o=xd(r,e.config.apiKey,e.name);let a=null;for(const c of n)try{const d=await c._get(o);if(d){const f=No._fromJSON(e,d);c!==s&&(a=f),s=c;break}}catch{}const u=i.filter(c=>c._shouldAllowMigration);return!s._shouldAllowMigration||!u.length?new Ja(s,e,r):(s=u[0],a&&await s._set(o,a.toJSON()),await Promise.all(n.map(async c=>{if(c!==s)try{await c._remove(o)}catch{}})),new Ja(s,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OS(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(AC(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(DC(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(xC(e))return"Blackberry";if(OC(e))return"Webos";if(x_(e))return"Safari";if((e.includes("chrome/")||bC(e))&&!e.includes("edge/"))return"Chrome";if(RC(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function DC(t=jt()){return/firefox\//i.test(t)}function x_(t=jt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function bC(t=jt()){return/crios\//i.test(t)}function AC(t=jt()){return/iemobile/i.test(t)}function RC(t=jt()){return/android/i.test(t)}function xC(t=jt()){return/blackberry/i.test(t)}function OC(t=jt()){return/webos/i.test(t)}function _p(t=jt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function u$(t=jt()){var e;return _p(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function c$(){return vU()&&document.documentMode===10}function MC(t=jt()){return _p(t)||RC(t)||OC(t)||xC(t)||/windows phone/i.test(t)||AC(t)}function h$(){try{return!!(window&&window!==window.top)}catch{return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PC(t,e=[]){let n;switch(t){case"Browser":n=OS(jt());break;case"Worker":n=`${OS(jt())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Ml}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d${constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=s=>new Promise((o,a)=>{try{const u=e(s);o(u)}catch(u){a(u)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f${constructor(e,n,r){this.app=e,this.heartbeatServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new MS(this),this.idTokenSubscription=new MS(this),this.beforeStateQueue=new d$(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=vC,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Si(n)),this._initializationPromise=this.queue(async()=>{var r,i;if(!this._deleted&&(this.persistenceManager=await Ja.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUser(e){var n;const r=await this.assertedPersistence.getCurrentUser();let i=r,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=i==null?void 0:i._redirectEventId,u=await this.tryRedirectSignIn(e);(!o||o===a)&&(u!=null&&u.user)&&(i=u.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return z(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Cc(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=K2()}async _delete(){this._deleted=!0}async updateCurrentUser(e){const n=e?ne(e):null;return n&&z(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&z(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0)}setPersistence(e){return this.queue(async()=>{await this.assertedPersistence.setPersistence(Si(e))})}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Jc("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Si(e)||this._popupRedirectResolver;z(n,this,"argument-error"),this.redirectPersistenceManager=await Ja.create(this,[Si(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n),o=this._isInitialized?Promise.resolve():this._initializationPromise;return z(o,this,"internal-error"),o.then(()=>s(this.currentUser)),typeof n=="function"?e.addObserver(n,r,i):e.addObserver(n)}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return z(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=PC(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={["X-Client-Version"]:this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());return r&&(n["X-Firebase-Client"]=r),n}}function Vn(t){return ne(t)}class MS{constructor(e){this.auth=e,this.observer=null,this.addObserver=NU(n=>this.observer=n)}get next(){return z(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function LC(t,e,n){const r=Vn(t);z(r._canInitEmulator,r,"emulator-config-failed"),z(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!!(n!=null&&n.disableWarnings),s=FC(e),{host:o,port:a}=p$(e),u=a===null?"":`:${a}`;r.config.emulator={url:`${s}//${o}${u}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||m$()}function FC(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function p$(t){const e=FC(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:PS(r.substr(s.length+1))}}else{const[s,o]=r.split(":");return{host:s,port:PS(o)}}}function PS(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function m$(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ll{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Qr("not implemented")}_getIdTokenResponse(e){return Qr("not implemented")}_linkToIdToken(e,n){return Qr("not implemented")}_getReauthenticationResolver(e){return Qr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function UC(t,e){return nn(t,"POST","/v1/accounts:resetPassword",Gt(t,e))}async function $C(t,e){return nn(t,"POST","/v1/accounts:update",e)}async function g$(t,e){return nn(t,"POST","/v1/accounts:update",Gt(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function y$(t,e){return Bi(t,"POST","/v1/accounts:signInWithPassword",Gt(t,e))}async function wp(t,e){return nn(t,"POST","/v1/accounts:sendOobCode",Gt(t,e))}async function v$(t,e){return wp(t,e)}async function _$(t,e){return wp(t,e)}async function w$(t,e){return wp(t,e)}async function I$(t,e){return wp(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function S$(t,e){return Bi(t,"POST","/v1/accounts:signInWithEmailLink",Gt(t,e))}async function E$(t,e){return Bi(t,"POST","/v1/accounts:signInWithEmailLink",Gt(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pl extends Ll{constructor(e,n,r,i=null){super("password",r),this._email=e,this._password=n,this._tenantId=i}static _fromEmailAndPassword(e,n){return new pl(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new pl(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":return y$(e,{returnSecureToken:!0,email:this._email,password:this._password});case"emailLink":return S$(e,{email:this._email,oobCode:this._password});default:rr(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":return $C(e,{idToken:n,returnSecureToken:!0,email:this._email,password:this._password});case"emailLink":return E$(e,{idToken:n,email:this._email,oobCode:this._password});default:rr(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ni(t,e){return Bi(t,"POST","/v1/accounts:signInWithIdp",Gt(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T$="http://localhost";class ii extends Ll{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new ii(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):rr("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=n,s=D_(n,["providerId","signInMethod"]);if(!r||!i)return null;const o=new ii(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return Ni(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Ni(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Ni(e,n)}buildRequest(){const e={requestUri:T$,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=na(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function k$(t,e){return nn(t,"POST","/v1/accounts:sendVerificationCode",Gt(t,e))}async function C$(t,e){return Bi(t,"POST","/v1/accounts:signInWithPhoneNumber",Gt(t,e))}async function N$(t,e){const n=await Bi(t,"POST","/v1/accounts:signInWithPhoneNumber",Gt(t,e));if(n.temporaryProof)throw Mu(t,"account-exists-with-different-credential",n);return n}const D$={USER_NOT_FOUND:"user-not-found"};async function b$(t,e){const n=Object.assign(Object.assign({},e),{operation:"REAUTH"});return Bi(t,"POST","/v1/accounts:signInWithPhoneNumber",Gt(t,n),D$)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cs extends Ll{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,n){return new Cs({verificationId:e,verificationCode:n})}static _fromTokenResponse(e,n){return new Cs({phoneNumber:e,temporaryProof:n})}_getIdTokenResponse(e){return C$(e,this._makeVerificationRequest())}_linkToIdToken(e,n){return N$(e,Object.assign({idToken:n},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return b$(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:n,verificationId:r,verificationCode:i}=this.params;return e&&n?{temporaryProof:e,phoneNumber:n}:{sessionInfo:r,code:i}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){typeof e=="string"&&(e=JSON.parse(e));const{verificationId:n,verificationCode:r,phoneNumber:i,temporaryProof:s}=e;return!r&&!n&&!i&&!s?null:new Cs({verificationId:n,verificationCode:r,phoneNumber:i,temporaryProof:s})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function A$(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function R$(t){const e=xu(Ou(t)).link,n=e?xu(Ou(e)).deep_link_id:null,r=xu(Ou(t)).deep_link_id;return(r?xu(Ou(r)).link:null)||r||n||e||t}class Fl{constructor(e){var n,r,i,s,o,a;const u=xu(Ou(e)),c=(n=u.apiKey)!==null&&n!==void 0?n:null,d=(r=u.oobCode)!==null&&r!==void 0?r:null,f=A$((i=u.mode)!==null&&i!==void 0?i:null);z(c&&d&&f,"argument-error"),this.apiKey=c,this.operation=f,this.code=d,this.continueUrl=(s=u.continueUrl)!==null&&s!==void 0?s:null,this.languageCode=(o=u.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(a=u.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){const n=R$(e);try{return new Fl(n)}catch{return null}}}function x$(t){return Fl.parseLink(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class js{constructor(){this.providerId=js.PROVIDER_ID}static credential(e,n){return pl._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=Fl.parseLink(n);return z(r,"argument-error"),pl._fromEmailAndCode(e,r.code,r.tenantId)}}js.PROVIDER_ID="password";js.EMAIL_PASSWORD_SIGN_IN_METHOD="password";js.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wi{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ul extends Wi{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class Ku extends Ul{static credentialFromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;return z("providerId"in n&&"signInMethod"in n,"argument-error"),ii._fromParams(n)}credential(e){return this._credential(Object.assign(Object.assign({},e),{nonce:e.rawNonce}))}_credential(e){return z(e.idToken||e.accessToken,"argument-error"),ii._fromParams(Object.assign(Object.assign({},e),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(e){return Ku.oauthCredentialFromTaggedObject(e)}static credentialFromError(e){return Ku.oauthCredentialFromTaggedObject(e.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r,oauthTokenSecret:i,pendingToken:s,nonce:o,providerId:a}=e;if(!r&&!i&&!n&&!s||!a)return null;try{return new Ku(a)._credential({idToken:n,accessToken:r,nonce:o,pendingToken:s})}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gi extends Ul{constructor(){super("facebook.com")}static credential(e){return ii._fromParams({providerId:gi.PROVIDER_ID,signInMethod:gi.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return gi.credentialFromTaggedObject(e)}static credentialFromError(e){return gi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return gi.credential(e.oauthAccessToken)}catch{return null}}}gi.FACEBOOK_SIGN_IN_METHOD="facebook.com";gi.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yi extends Ul{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return ii._fromParams({providerId:yi.PROVIDER_ID,signInMethod:yi.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return yi.credentialFromTaggedObject(e)}static credentialFromError(e){return yi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return yi.credential(n,r)}catch{return null}}}yi.GOOGLE_SIGN_IN_METHOD="google.com";yi.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vi extends Ul{constructor(){super("github.com")}static credential(e){return ii._fromParams({providerId:vi.PROVIDER_ID,signInMethod:vi.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return vi.credentialFromTaggedObject(e)}static credentialFromError(e){return vi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return vi.credential(e.oauthAccessToken)}catch{return null}}}vi.GITHUB_SIGN_IN_METHOD="github.com";vi.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O$="http://localhost";class Dc extends Ll{constructor(e,n){super(e,e),this.pendingToken=n}_getIdTokenResponse(e){const n=this.buildRequest();return Ni(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Ni(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Ni(e,n)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i,pendingToken:s}=n;return!r||!i||!s||r!==i?null:new Dc(r,s)}static _create(e,n){return new Dc(e,n)}buildRequest(){return{requestUri:O$,returnSecureToken:!0,pendingToken:this.pendingToken}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M$="saml.";class wf extends Wi{constructor(e){z(e.startsWith(M$),"argument-error"),super(e)}static credentialFromResult(e){return wf.samlCredentialFromTaggedObject(e)}static credentialFromError(e){return wf.samlCredentialFromTaggedObject(e.customData||{})}static credentialFromJSON(e){const n=Dc.fromJSON(e);return z(n,"argument-error"),n}static samlCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{pendingToken:n,providerId:r}=e;if(!n||!r)return null;try{return Dc._create(r,n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _i extends Ul{constructor(){super("twitter.com")}static credential(e,n){return ii._fromParams({providerId:_i.PROVIDER_ID,signInMethod:_i.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return _i.credentialFromTaggedObject(e)}static credentialFromError(e){return _i.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return _i.credential(n,r)}catch{return null}}}_i.TWITTER_SIGN_IN_METHOD="twitter.com";_i.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function VC(t,e){return Bi(t,"POST","/v1/accounts:signUp",Gt(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nr{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const s=await No._fromIdTokenResponse(e,r,i),o=LS(r);return new Nr({user:s,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=LS(r);return new Nr({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function LS(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function P$(t){var e;const n=Vn(t);if(await n._initializationPromise,!((e=n.currentUser)===null||e===void 0)&&e.isAnonymous)return new Nr({user:n.currentUser,providerId:null,operationType:"signIn"});const r=await VC(n,{returnSecureToken:!0}),i=await Nr._fromIdTokenResponse(n,"signIn",r,!0);return await n._updateCurrentUser(i.user),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class If extends $i{constructor(e,n,r,i){var s;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,If.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new If(e,n,r,i)}}function BC(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?If._fromErrorAndOperation(t,s,e,r):s})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WC(t){return new Set(t.map(({providerId:e})=>e).filter(e=>!!e))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function L$(t,e){const n=ne(t);await Ip(!0,n,e);const{providerUserInfo:r}=await e$(n.auth,{idToken:await n.getIdToken(),deleteProvider:[e]}),i=WC(r||[]);return n.providerData=n.providerData.filter(s=>i.has(s.providerId)),i.has("phone")||(n.phoneNumber=null),await n.auth._persistUserIfCurrent(n),n}async function O_(t,e,n=!1){const r=await Mi(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Nr._forOperation(t,"link",r)}async function Ip(t,e,n){await Cc(e);const r=WC(e.providerData),i=t===!1?"provider-already-linked":"no-such-provider";z(r.has(n)===t,e.auth,i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jC(t,e,n=!1){const{auth:r}=t,i="reauthenticate";try{const s=await Mi(t,BC(r,i,e,t),n);z(s.idToken,r,"internal-error");const o=vp(s.idToken);z(o,r,"internal-error");const{sub:a}=o;return z(t.uid===a,r,"user-mismatch"),Nr._forOperation(t,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&rr(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zC(t,e,n=!1){const r="signIn",i=await BC(t,r,e),s=await Nr._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(s.user),s}async function Sp(t,e){return zC(Vn(t),e)}async function qC(t,e){const n=ne(t);return await Ip(!1,n,e.providerId),O_(n,e)}async function GC(t,e){return jC(ne(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function F$(t,e){return Bi(t,"POST","/v1/accounts:signInWithCustomToken",Gt(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function U$(t,e){const n=Vn(t),r=await F$(n,{token:e,returnSecureToken:!0}),i=await Nr._fromIdTokenResponse(n,"signIn",r);return await n._updateCurrentUser(i.user),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ep{constructor(e,n){this.factorId=e,this.uid=n.mfaEnrollmentId,this.enrollmentTime=new Date(n.enrolledAt).toUTCString(),this.displayName=n.displayName}static _fromServerResponse(e,n){return"phoneInfo"in n?M_._fromServerResponse(e,n):rr(e,"internal-error")}}class M_ extends Ep{constructor(e){super("phone",e),this.phoneNumber=e.phoneInfo}static _fromServerResponse(e,n){return new M_(n)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tp(t,e,n){var r;z(((r=n.url)===null||r===void 0?void 0:r.length)>0,t,"invalid-continue-uri"),z(typeof n.dynamicLinkDomain>"u"||n.dynamicLinkDomain.length>0,t,"invalid-dynamic-link-domain"),e.continueUrl=n.url,e.dynamicLinkDomain=n.dynamicLinkDomain,e.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(z(n.iOS.bundleId.length>0,t,"missing-ios-bundle-id"),e.iOSBundleId=n.iOS.bundleId),n.android&&(z(n.android.packageName.length>0,t,"missing-android-pkg-name"),e.androidInstallApp=n.android.installApp,e.androidMinimumVersionCode=n.android.minimumVersion,e.androidPackageName=n.android.packageName)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $$(t,e,n){const r=ne(t),i={requestType:"PASSWORD_RESET",email:e};n&&Tp(r,i,n),await _$(r,i)}async function V$(t,e,n){await UC(ne(t),{oobCode:e,newPassword:n})}async function B$(t,e){await g$(ne(t),{oobCode:e})}async function HC(t,e){const n=ne(t),r=await UC(n,{oobCode:e}),i=r.requestType;switch(z(i,n,"internal-error"),i){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":z(r.newEmail,n,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":z(r.mfaInfo,n,"internal-error");default:z(r.email,n,"internal-error")}let s=null;return r.mfaInfo&&(s=Ep._fromServerResponse(Vn(n),r.mfaInfo)),{data:{email:(r.requestType==="VERIFY_AND_CHANGE_EMAIL"?r.newEmail:r.email)||null,previousEmail:(r.requestType==="VERIFY_AND_CHANGE_EMAIL"?r.email:r.newEmail)||null,multiFactorInfo:s},operation:i}}async function W$(t,e){const{data:n}=await HC(ne(t),e);return n.email}async function j$(t,e,n){const r=Vn(t),i=await VC(r,{returnSecureToken:!0,email:e,password:n}),s=await Nr._fromIdTokenResponse(r,"signIn",i);return await r._updateCurrentUser(s.user),s}function z$(t,e,n){return Sp(ne(t),js.credential(e,n))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function q$(t,e,n){const r=ne(t),i={requestType:"EMAIL_SIGNIN",email:e};z(n.handleCodeInApp,r,"argument-error"),n&&Tp(r,i,n),await w$(r,i)}function G$(t,e){const n=Fl.parseLink(e);return(n==null?void 0:n.operation)==="EMAIL_SIGNIN"}async function H$(t,e,n){const r=ne(t),i=js.credentialWithLink(e,n||kc());return z(i._tenantId===(r.tenantId||null),r,"tenant-id-mismatch"),Sp(r,i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Y$(t,e){return nn(t,"POST","/v1/accounts:createAuthUri",Gt(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function K$(t,e){const n=A_()?kc():"http://localhost",r={identifier:e,continueUri:n},{signinMethods:i}=await Y$(ne(t),r);return i||[]}async function Q$(t,e){const n=ne(t),i={requestType:"VERIFY_EMAIL",idToken:await t.getIdToken()};e&&Tp(n.auth,i,e);const{email:s}=await v$(n.auth,i);s!==t.email&&await t.reload()}async function X$(t,e,n){const r=ne(t),s={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:await t.getIdToken(),newEmail:e};n&&Tp(r.auth,s,n);const{email:o}=await I$(r.auth,s);o!==t.email&&await t.reload()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function J$(t,e){return nn(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Z$(t,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const r=ne(t),s={idToken:await r.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},o=await Mi(r,J$(r.auth,s));r.displayName=o.displayName||null,r.photoURL=o.photoUrl||null;const a=r.providerData.find(({providerId:u})=>u==="password");a&&(a.displayName=r.displayName,a.photoURL=r.photoURL),await r._updateTokensIfNecessary(o)}function eV(t,e){return YC(ne(t),e,null)}function tV(t,e){return YC(ne(t),null,e)}async function YC(t,e,n){const{auth:r}=t,s={idToken:await t.getIdToken(),returnSecureToken:!0};e&&(s.email=e),n&&(s.password=n);const o=await Mi(t,$C(r,s));await t._updateTokensIfNecessary(o,!0)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nV(t){var e,n;if(!t)return null;const{providerId:r}=t,i=t.rawUserInfo?JSON.parse(t.rawUserInfo):{},s=t.isNewUser||t.kind==="identitytoolkit#SignupNewUserResponse";if(!r&&(t!=null&&t.idToken)){const o=(n=(e=vp(t.idToken))===null||e===void 0?void 0:e.firebase)===null||n===void 0?void 0:n.sign_in_provider;if(o){const a=o!=="anonymous"&&o!=="custom"?o:null;return new Za(s,a)}}if(!r)return null;switch(r){case"facebook.com":return new rV(s,i);case"github.com":return new iV(s,i);case"google.com":return new sV(s,i);case"twitter.com":return new oV(s,i,t.screenName||null);case"custom":case"anonymous":return new Za(s,null);default:return new Za(s,r,i)}}class Za{constructor(e,n,r={}){this.isNewUser=e,this.providerId=n,this.profile=r}}class KC extends Za{constructor(e,n,r,i){super(e,n,r),this.username=i}}class rV extends Za{constructor(e,n){super(e,"facebook.com",n)}}class iV extends KC{constructor(e,n){super(e,"github.com",n,typeof(n==null?void 0:n.login)=="string"?n==null?void 0:n.login:null)}}class sV extends Za{constructor(e,n){super(e,"google.com",n)}}class oV extends KC{constructor(e,n,r){super(e,"twitter.com",n,r)}}function aV(t){const{user:e,_tokenResponse:n}=t;return e.isAnonymous&&!n?{providerId:null,isNewUser:!1,profile:null}:nV(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lV(t,e){return ne(t).setPersistence(e)}function QC(t,e,n,r){return ne(t).onIdTokenChanged(e,n,r)}function XC(t,e,n){return ne(t).beforeAuthStateChanged(e,n)}function uV(t,e,n,r){return ne(t).onAuthStateChanged(e,n,r)}function cV(t){ne(t).useDeviceLanguage()}function hV(t,e){return ne(t).updateCurrentUser(e)}function dV(t){return ne(t).signOut()}async function fV(t){return ne(t).delete()}class wo{constructor(e,n,r){this.type=e,this.credential=n,this.auth=r}static _fromIdtoken(e,n){return new wo("enroll",e,n)}static _fromMfaPendingCredential(e){return new wo("signin",e)}toJSON(){return{multiFactorSession:{[this.type==="enroll"?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(e){var n,r;if(e!=null&&e.multiFactorSession){if(!((n=e.multiFactorSession)===null||n===void 0)&&n.pendingCredential)return wo._fromMfaPendingCredential(e.multiFactorSession.pendingCredential);if(!((r=e.multiFactorSession)===null||r===void 0)&&r.idToken)return wo._fromIdtoken(e.multiFactorSession.idToken)}return null}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P_{constructor(e,n,r){this.session=e,this.hints=n,this.signInResolver=r}static _fromError(e,n){const r=Vn(e),i=n.customData._serverResponse,s=(i.mfaInfo||[]).map(a=>Ep._fromServerResponse(r,a));z(i.mfaPendingCredential,r,"internal-error");const o=wo._fromMfaPendingCredential(i.mfaPendingCredential);return new P_(o,s,async a=>{const u=await a._process(r,o);delete i.mfaInfo,delete i.mfaPendingCredential;const c=Object.assign(Object.assign({},i),{idToken:u.idToken,refreshToken:u.refreshToken});switch(n.operationType){case"signIn":const d=await Nr._fromIdTokenResponse(r,n.operationType,c);return await r._updateCurrentUser(d.user),d;case"reauthenticate":return z(n.user,r,"internal-error"),Nr._forOperation(n.user,n.operationType,c);default:rr(r,"internal-error")}})}async resolveSignIn(e){const n=e;return this.signInResolver(n)}}function pV(t,e){var n;const r=ne(t),i=e;return z(e.customData.operationType,r,"argument-error"),z((n=i.customData._serverResponse)===null||n===void 0?void 0:n.mfaPendingCredential,r,"argument-error"),P_._fromError(r,i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mV(t,e){return nn(t,"POST","/v2/accounts/mfaEnrollment:start",Gt(t,e))}function gV(t,e){return nn(t,"POST","/v2/accounts/mfaEnrollment:finalize",Gt(t,e))}function yV(t,e){return nn(t,"POST","/v2/accounts/mfaEnrollment:withdraw",Gt(t,e))}class L_{constructor(e){this.user=e,this.enrolledFactors=[],e._onReload(n=>{n.mfaInfo&&(this.enrolledFactors=n.mfaInfo.map(r=>Ep._fromServerResponse(e.auth,r)))})}static _fromUser(e){return new L_(e)}async getSession(){return wo._fromIdtoken(await this.user.getIdToken(),this.user.auth)}async enroll(e,n){const r=e,i=await this.getSession(),s=await Mi(this.user,r._process(this.user.auth,i,n));return await this.user._updateTokensIfNecessary(s),this.user.reload()}async unenroll(e){const n=typeof e=="string"?e:e.uid,r=await this.user.getIdToken();try{const i=await Mi(this.user,yV(this.user.auth,{idToken:r,mfaEnrollmentId:n}));this.enrolledFactors=this.enrolledFactors.filter(({uid:s})=>s!==n),await this.user._updateTokensIfNecessary(i),await this.user.reload()}catch(i){throw i}}}const mg=new WeakMap;function vV(t){const e=ne(t);return mg.has(e)||mg.set(e,L_._fromUser(e)),mg.get(e)}const Sf="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JC{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Sf,"1"),this.storage.removeItem(Sf),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _V(){const t=jt();return x_(t)||_p(t)}const wV=1e3,IV=10;class ZC extends JC{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=_V()&&h$(),this.fallbackToPolling=MC(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,u)=>{this.notifyListeners(o,u)});return}const r=e.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const o=this.storage.getItem(r);if(e.newValue!==o)e.newValue!==null?this.storage.setItem(r,e.newValue):this.storage.removeItem(r);else if(this.localCache[r]===e.newValue&&!n)return}const i=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},s=this.storage.getItem(r);c$()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,IV):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},wV)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}ZC.type="LOCAL";const eN=ZC;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tN extends JC{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}tN.type="SESSION";const F_=tN;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SV(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kp{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new kp(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:s}=n.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const a=Array.from(o).map(async c=>c(n.origin,s)),u=await SV(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:u})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}kp.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cp(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EV{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,u)=>{const c=Cp("",20);i.port1.start();const d=setTimeout(()=>{u(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(f){const g=f;if(g.data.eventId===c)switch(g.data.status){case"ack":clearTimeout(d),s=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(g.data.response);break;default:clearTimeout(d),clearTimeout(s),u(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:c,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ut(){return window}function TV(t){Ut().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function U_(){return typeof Ut().WorkerGlobalScope<"u"&&typeof Ut().importScripts=="function"}async function kV(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function CV(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function NV(){return U_()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nN="firebaseLocalStorageDb",DV=1,Ef="firebaseLocalStorage",rN="fbase_key";class eh{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Np(t,e){return t.transaction([Ef],e?"readwrite":"readonly").objectStore(Ef)}function bV(){const t=indexedDB.deleteDatabase(nN);return new eh(t).toPromise()}function Uy(){const t=indexedDB.open(nN,DV);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Ef,{keyPath:rN})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Ef)?e(r):(r.close(),await bV(),e(await Uy()))})})}async function FS(t,e,n){const r=Np(t,!0).put({[rN]:e,value:n});return new eh(r).toPromise()}async function AV(t,e){const n=Np(t,!1).get(e),r=await new eh(n).toPromise();return r===void 0?null:r.value}function US(t,e){const n=Np(t,!0).delete(e);return new eh(n).toPromise()}const RV=800,xV=3;class iN{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Uy(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>xV)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return U_()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=kp._getInstance(NV()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await kV(),!this.activeServiceWorker)return;this.sender=new EV(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||CV()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Uy();return await FS(e,Sf,"1"),await US(e,Sf),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>FS(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>AV(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>US(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const s=Np(i,!1).getAll();return new eh(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;for(const{fbase_key:i,value:s}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),RV)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}iN.type="LOCAL";const sN=iN;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OV(t,e){return nn(t,"POST","/v2/accounts/mfaSignIn:start",Gt(t,e))}function MV(t,e){return nn(t,"POST","/v2/accounts/mfaSignIn:finalize",Gt(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function PV(t){return(await nn(t,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LV(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}function oN(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const s=hr("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",LV().appendChild(r)})}function aN(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FV=500,UV=6e4,ad=1e12;class $V{constructor(e){this.auth=e,this.counter=ad,this._widgets=new Map}render(e,n){const r=this.counter;return this._widgets.set(r,new VV(e,this.auth.name,n||{})),this.counter++,r}reset(e){var n;const r=e||ad;(n=this._widgets.get(r))===null||n===void 0||n.delete(),this._widgets.delete(r)}getResponse(e){var n;const r=e||ad;return((n=this._widgets.get(r))===null||n===void 0?void 0:n.getResponse())||""}async execute(e){var n;const r=e||ad;return(n=this._widgets.get(r))===null||n===void 0||n.execute(),""}}class VV{constructor(e,n,r){this.params=r,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const i=typeof e=="string"?document.getElementById(e):e;z(i,"argument-error",{appName:n}),this.container=i,this.isVisible=this.params.size!=="invisible",this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=BV(50);const{callback:e,"expired-callback":n}=this.params;if(e)try{e(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,n)try{n()}catch{}this.isVisible&&this.execute()},UV)},FV))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}function BV(t){const e=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let r=0;r<t;r++)e.push(n.charAt(Math.floor(Math.random()*n.length)));return e.join("")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gg=aN("rcb"),WV=new Zc(3e4,6e4),jV="https://www.google.com/recaptcha/api.js?";class zV{constructor(){var e;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!(!((e=Ut().grecaptcha)===null||e===void 0)&&e.render)}load(e,n=""){return z(qV(n),e,"argument-error"),this.shouldResolveImmediately(n)?Promise.resolve(Ut().grecaptcha):new Promise((r,i)=>{const s=Ut().setTimeout(()=>{i(hr(e,"network-request-failed"))},WV.get());Ut()[gg]=()=>{Ut().clearTimeout(s),delete Ut()[gg];const a=Ut().grecaptcha;if(!a){i(hr(e,"internal-error"));return}const u=a.render;a.render=(c,d)=>{const f=u(c,d);return this.counter++,f},this.hostLanguage=n,r(a)};const o=`${jV}?${na({onload:gg,render:"explicit",hl:n})}`;oN(o).catch(()=>{clearTimeout(s),i(hr(e,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(e){var n;return!!(!((n=Ut().grecaptcha)===null||n===void 0)&&n.render)&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}function qV(t){return t.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(t)}class GV{async load(e){return new $V(e)}clearedOneInstance(){}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lN="recaptcha",HV={theme:"light",type:"image"};class YV{constructor(e,n=Object.assign({},HV),r){this.parameters=n,this.type=lN,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Vn(r),this.isInvisible=this.parameters.size==="invisible",z(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const i=typeof e=="string"?document.getElementById(e):e;z(i,this.auth,"argument-error"),this.container=i,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new GV:new zV,this.validateStartingState()}async verify(){this.assertNotDestroyed();const e=await this.render(),n=this.getAssertedRecaptcha(),r=n.getResponse(e);return r||new Promise(i=>{const s=o=>{o&&(this.tokenChangeListeners.delete(s),i(o))};this.tokenChangeListeners.add(s),this.isInvisible&&n.execute(e)})}render(){try{this.assertNotDestroyed()}catch(e){return Promise.reject(e)}return this.renderPromise?this.renderPromise:(this.renderPromise=this.makeRenderPromise().catch(e=>{throw this.renderPromise=null,e}),this.renderPromise)}_reset(){this.assertNotDestroyed(),this.widgetId!==null&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(e=>{this.container.removeChild(e)})}validateStartingState(){z(!this.parameters.sitekey,this.auth,"argument-error"),z(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),z(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(e){return n=>{if(this.tokenChangeListeners.forEach(r=>r(n)),typeof e=="function")e(n);else if(typeof e=="string"){const r=Ut()[e];typeof r=="function"&&r(n)}}}assertNotDestroyed(){z(!this.destroyed,this.auth,"internal-error")}async makeRenderPromise(){if(await this.init(),!this.widgetId){let e=this.container;if(!this.isInvisible){const n=document.createElement("div");e.appendChild(n),e=n}this.widgetId=this.getAssertedRecaptcha().render(e,this.parameters)}return this.widgetId}async init(){z(A_()&&!U_(),this.auth,"internal-error"),await KV(),this.recaptcha=await this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);const e=await PV(this.auth);z(e,this.auth,"internal-error"),this.parameters.sitekey=e}getAssertedRecaptcha(){return z(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}function KV(){let t=null;return new Promise(e=>{if(document.readyState==="complete"){e();return}t=()=>e(),window.addEventListener("load",t)}).catch(e=>{throw t&&window.removeEventListener("load",t),e})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $_{constructor(e,n){this.verificationId=e,this.onConfirmation=n}confirm(e){const n=Cs._fromVerification(this.verificationId,e);return this.onConfirmation(n)}}async function QV(t,e,n){const r=Vn(t),i=await Dp(r,e,ne(n));return new $_(i,s=>Sp(r,s))}async function XV(t,e,n){const r=ne(t);await Ip(!1,r,"phone");const i=await Dp(r.auth,e,ne(n));return new $_(i,s=>qC(r,s))}async function JV(t,e,n){const r=ne(t),i=await Dp(r.auth,e,ne(n));return new $_(i,s=>GC(r,s))}async function Dp(t,e,n){var r;const i=await n.verify();try{z(typeof i=="string",t,"argument-error"),z(n.type===lN,t,"argument-error");let s;if(typeof e=="string"?s={phoneNumber:e}:s=e,"session"in s){const o=s.session;if("phoneNumber"in s)return z(o.type==="enroll",t,"internal-error"),(await mV(t,{idToken:o.credential,phoneEnrollmentInfo:{phoneNumber:s.phoneNumber,recaptchaToken:i}})).phoneSessionInfo.sessionInfo;{z(o.type==="signin",t,"internal-error");const a=((r=s.multiFactorHint)===null||r===void 0?void 0:r.uid)||s.multiFactorUid;return z(a,t,"missing-multi-factor-info"),(await OV(t,{mfaPendingCredential:o.credential,mfaEnrollmentId:a,phoneSignInInfo:{recaptchaToken:i}})).phoneResponseInfo.sessionInfo}}else{const{sessionInfo:o}=await k$(t,{phoneNumber:s.phoneNumber,recaptchaToken:i});return o}}finally{n._reset()}}async function ZV(t,e){await O_(ne(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Do{constructor(e){this.providerId=Do.PROVIDER_ID,this.auth=Vn(e)}verifyPhoneNumber(e,n){return Dp(this.auth,e,ne(n))}static credential(e,n){return Cs._fromVerification(e,n)}static credentialFromResult(e){const n=e;return Do.credentialFromTaggedObject(n)}static credentialFromError(e){return Do.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{phoneNumber:n,temporaryProof:r}=e;return n&&r?Cs._fromTokenResponse(n,r):null}}Do.PROVIDER_ID="phone";Do.PHONE_SIGN_IN_METHOD="phone";/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ra(t,e){return e?Si(e):(z(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V_ extends Ll{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Ni(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Ni(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Ni(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function eB(t){return zC(t.auth,new V_(t),t.bypassAuthState)}function tB(t){const{auth:e,user:n}=t;return z(n,e,"internal-error"),jC(n,new V_(t),t.bypassAuthState)}async function nB(t){const{auth:e,user:n}=t;return z(n,e,"internal-error"),O_(n,new V_(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uN{constructor(e,n,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}const u={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(u))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return eB;case"linkViaPopup":case"linkViaRedirect":return nB;case"reauthViaPopup":case"reauthViaRedirect":return tB;default:rr(this.auth,"internal-error")}}resolve(e){Oi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Oi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rB=new Zc(2e3,1e4);async function iB(t,e,n){const r=Vn(t);Pl(t,e,Wi);const i=ra(r,n);return new Ei(r,"signInViaPopup",e,i).executeNotNull()}async function sB(t,e,n){const r=ne(t);Pl(r.auth,e,Wi);const i=ra(r.auth,n);return new Ei(r.auth,"reauthViaPopup",e,i,r).executeNotNull()}async function oB(t,e,n){const r=ne(t);Pl(r.auth,e,Wi);const i=ra(r.auth,n);return new Ei(r.auth,"linkViaPopup",e,i,r).executeNotNull()}class Ei extends uN{constructor(e,n,r,i,s){super(e,n,i,s),this.provider=r,this.authWindow=null,this.pollId=null,Ei.currentPopupAction&&Ei.currentPopupAction.cancel(),Ei.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return z(e,this.auth,"internal-error"),e}async onExecution(){Oi(this.filter.length===1,"Popup operations only handle one event");const e=Cp();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(hr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(hr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ei.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(hr(this.auth,"popup-closed-by-user"))},2e3);return}this.pollId=window.setTimeout(e,rB.get())};e()}}Ei.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aB="pendingRedirect",Od=new Map;class lB extends uN{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Od.get(this.auth._key());if(!e){try{const r=await uB(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Od.set(this.auth._key(),e)}return this.bypassAuthState||Od.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function uB(t,e){const n=hN(e),r=cN(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}async function B_(t,e){return cN(t)._set(hN(e),"true")}function cB(t,e){Od.set(t._key(),e)}function cN(t){return Si(t._redirectPersistence)}function hN(t){return xd(aB,t.config.apiKey,t.name)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hB(t,e,n){return dB(t,e,n)}async function dB(t,e,n){const r=Vn(t);Pl(t,e,Wi),await r._initializationPromise;const i=ra(r,n);return await B_(i,r),i._openRedirect(r,e,"signInViaRedirect")}function fB(t,e,n){return pB(t,e,n)}async function pB(t,e,n){const r=ne(t);Pl(r.auth,e,Wi),await r.auth._initializationPromise;const i=ra(r.auth,n);await B_(i,r.auth);const s=await fN(r);return i._openRedirect(r.auth,e,"reauthViaRedirect",s)}function mB(t,e,n){return gB(t,e,n)}async function gB(t,e,n){const r=ne(t);Pl(r.auth,e,Wi),await r.auth._initializationPromise;const i=ra(r.auth,n);await Ip(!1,r,e.providerId),await B_(i,r.auth);const s=await fN(r);return i._openRedirect(r.auth,e,"linkViaRedirect",s)}async function yB(t,e){return await Vn(t)._initializationPromise,dN(t,e,!1)}async function dN(t,e,n=!1){const r=Vn(t),i=ra(r,e),o=await new lB(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}async function fN(t){const e=Cp(`${t.uid}:::`);return t._redirectEventId=e,await t.auth._setRedirectUser(t),await t.auth._persistUserIfCurrent(t),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vB=10*60*1e3;class _B{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!wB(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!pN(e)){const i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(hr(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=vB&&this.cachedEventUids.clear(),this.cachedEventUids.has($S(e))}saveEventToCache(e){this.cachedEventUids.add($S(e)),this.lastProcessedEventTime=Date.now()}}function $S(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function pN({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function wB(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return pN(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function IB(t,e={}){return nn(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SB=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,EB=/^https?/;async function TB(t){if(t.config.emulator)return;const{authorizedDomains:e}=await IB(t);for(const n of e)try{if(kB(n))return}catch{}rr(t,"unauthorized-domain")}function kB(t){const e=kc(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!EB.test(n))return!1;if(SB.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CB=new Zc(3e4,6e4);function VS(){const t=Ut().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function NB(t){return new Promise((e,n)=>{var r,i,s;function o(){VS(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{VS(),n(hr(t,"network-request-failed"))},timeout:CB.get()})}if(!((i=(r=Ut().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=Ut().gapi)===null||s===void 0)&&s.load)o();else{const a=aN("iframefcb");return Ut()[a]=()=>{gapi.load?o():n(hr(t,"network-request-failed"))},oN(`https://apis.google.com/js/api.js?onload=${a}`).catch(u=>n(u))}}).catch(e=>{throw Md=null,e})}let Md=null;function DB(t){return Md=Md||NB(t),Md}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bB=new Zc(5e3,15e3),AB="__/auth/iframe",RB="emulator/auth/iframe",xB={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},OB=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function MB(t){const e=t.config;z(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?R_(e,RB):`https://${t.config.authDomain}/${AB}`,r={apiKey:e.apiKey,appName:t.name,v:Ml},i=OB.get(t.config.apiHost);i&&(r.eid=i);const s=t._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${na(r).slice(1)}`}async function PB(t){const e=await DB(t),n=Ut().gapi;return z(n,t,"internal-error"),e.open({where:document.body,url:MB(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:xB,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const o=hr(t,"network-request-failed"),a=Ut().setTimeout(()=>{s(o)},bB.get());function u(){Ut().clearTimeout(a),i(r)}r.ping(u).then(u,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LB={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},FB=500,UB=600,$B="_blank",VB="http://localhost";class BS{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function BB(t,e,n,r=FB,i=UB){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const u=Object.assign(Object.assign({},LB),{width:r.toString(),height:i.toString(),top:s,left:o}),c=jt().toLowerCase();n&&(a=bC(c)?$B:n),DC(c)&&(e=e||VB,u.scrollbars="yes");const d=Object.entries(u).reduce((g,[v,_])=>`${g}${v}=${_},`,"");if(u$(c)&&a!=="_self")return WB(e||"",a),new BS(null);const f=window.open(e||"",a,d);z(f,t,"popup-blocked");try{f.focus()}catch{}return new BS(f)}function WB(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jB="__/auth/handler",zB="emulator/auth/handler";function WS(t,e,n,r,i,s){z(t.config.authDomain,t,"auth-domain-config-required"),z(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Ml,eventId:i};if(e instanceof Wi){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",xy(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[u,c]of Object.entries(s||{}))o[u]=c}if(e instanceof Ul){const u=e.getScopes().filter(c=>c!=="");u.length>0&&(o.scopes=u.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const u of Object.keys(a))a[u]===void 0&&delete a[u];return`${qB(t)}?${na(a).slice(1)}`}function qB({config:t}){return t.emulator?R_(t,zB):`https://${t.authDomain}/${jB}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yg="webStorageSupport";class GB{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=F_,this._completeRedirectFn=dN,this._overrideRedirectResult=cB}async _openPopup(e,n,r,i){var s;Oi((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const o=WS(e,n,r,kc(),i);return BB(e,o,Cp())}async _openRedirect(e,n,r,i){return await this._originValidation(e),TV(WS(e,n,r,kc(),i)),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(Oi(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await PB(e),r=new _B(e);return n.register("authEvent",i=>(z(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(yg,{type:yg},i=>{var s;const o=(s=i==null?void 0:i[0])===null||s===void 0?void 0:s[yg];o!==void 0&&n(!!o),rr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=TB(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return MC()||x_()||_p()}}const mN=GB;class HB{constructor(e){this.factorId=e}_process(e,n,r){switch(n.type){case"enroll":return this._finalizeEnroll(e,n.credential,r);case"signin":return this._finalizeSignIn(e,n.credential);default:return Qr("unexpected MultiFactorSessionType")}}}class W_ extends HB{constructor(e){super("phone"),this.credential=e}static _fromCredential(e){return new W_(e)}_finalizeEnroll(e,n,r){return gV(e,{idToken:n,displayName:r,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(e,n){return MV(e,{mfaPendingCredential:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}class gN{constructor(){}static assertion(e){return W_._fromCredential(e)}}gN.FACTOR_ID="phone";var jS="@firebase/auth",zS="0.21.3";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YB{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){z(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KB(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}function QB(t){Uo(new Rs("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),{apiKey:s,authDomain:o}=r.options;return((a,u)=>{z(s&&!s.includes(":"),"invalid-api-key",{appName:a.name}),z(!(o!=null&&o.includes(":")),"argument-error",{appName:a.name});const c={apiKey:s,authDomain:o,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:PC(t)},d=new f$(a,u,c);return H2(d,n),d})(r,i)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Uo(new Rs("auth-internal",e=>{const n=Vn(e.getProvider("auth").getImmediate());return(r=>new YB(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),ni(jS,zS,KB(t)),ni(jS,zS,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XB=5*60,JB=sC("authIdTokenMaxAge")||XB;let qS=null;const ZB=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>JB)return;const i=n==null?void 0:n.token;qS!==i&&(qS=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function yN(t=N_()){const e=Ol(t,"auth");if(e.isInitialized())return e.getImmediate();const n=wC(t,{popupRedirectResolver:mN,persistence:[sN,eN,F_]}),r=sC("authTokenSyncURL");if(r){const s=ZB(r);XC(n,s,()=>s(n.currentUser)),QC(n,o=>s(o))}const i=rC("auth");return i&&LC(n,`http://${i}`),n}QB("Browser");const eW=Object.freeze(Object.defineProperty({__proto__:null,ActionCodeOperation:j2,ActionCodeURL:Fl,AuthCredential:Ll,AuthErrorCodes:G2,EmailAuthCredential:pl,EmailAuthProvider:js,FacebookAuthProvider:gi,FactorId:$2,GithubAuthProvider:vi,GoogleAuthProvider:yi,OAuthCredential:ii,OAuthProvider:Ku,OperationType:W2,PhoneAuthCredential:Cs,PhoneAuthProvider:Do,PhoneMultiFactorGenerator:gN,ProviderId:V2,RecaptchaVerifier:YV,SAMLAuthProvider:wf,SignInMethod:B2,TwitterAuthProvider:_i,applyActionCode:B$,beforeAuthStateChanged:XC,browserLocalPersistence:eN,browserPopupRedirectResolver:mN,browserSessionPersistence:F_,checkActionCode:HC,confirmPasswordReset:V$,connectAuthEmulator:LC,createUserWithEmailAndPassword:j$,debugErrorMap:q2,deleteUser:fV,fetchSignInMethodsForEmail:K$,getAdditionalUserInfo:aV,getAuth:yN,getIdToken:n$,getIdTokenResult:TC,getMultiFactorResolver:pV,getRedirectResult:yB,inMemoryPersistence:Fy,indexedDBLocalPersistence:sN,initializeAuth:wC,isSignInWithEmailLink:G$,linkWithCredential:qC,linkWithPhoneNumber:XV,linkWithPopup:oB,linkWithRedirect:mB,multiFactor:vV,onAuthStateChanged:uV,onIdTokenChanged:QC,parseActionCodeURL:x$,prodErrorMap:yC,reauthenticateWithCredential:GC,reauthenticateWithPhoneNumber:JV,reauthenticateWithPopup:sB,reauthenticateWithRedirect:fB,reload:CC,sendEmailVerification:Q$,sendPasswordResetEmail:$$,sendSignInLinkToEmail:q$,setPersistence:lV,signInAnonymously:P$,signInWithCredential:Sp,signInWithCustomToken:U$,signInWithEmailAndPassword:z$,signInWithEmailLink:H$,signInWithPhoneNumber:QV,signInWithPopup:iB,signInWithRedirect:hB,signOut:dV,unlink:L$,updateCurrentUser:hV,updateEmail:eV,updatePassword:tV,updatePhoneNumber:ZV,updateProfile:Z$,useDeviceLanguage:cV,verifyBeforeUpdateEmail:X$,verifyPasswordResetCode:W$},Symbol.toStringTag,{value:"Module"})),GS="@firebase/database",HS="0.14.3";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let vN="";function tW(t){vN=t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nW{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,n){n==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),un(n))}get(e){const n=this.domStorage_.getItem(this.prefixedName_(e));return n==null?null:Ec(n)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rW{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,n){n==null?delete this.cache_[e]:this.cache_[e]=n}get(e){return Vi(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _N=function(t){try{if(typeof window<"u"&&typeof window[t]<"u"){const e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new nW(e)}}catch{}return new rW},Io=_N("localStorage"),$y=_N("sessionStorage");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const el=new yp("@firebase/database"),iW=function(){let t=1;return function(){return t++}}(),wN=function(t){const e=AU(t),n=new CU;n.update(e);const r=n.digest();return E_.encodeByteArray(r)},th=function(...t){let e="";for(let n=0;n<t.length;n++){const r=t[n];Array.isArray(r)||r&&typeof r=="object"&&typeof r.length=="number"?e+=th.apply(null,r):typeof r=="object"?e+=un(r):e+=r,e+=" "}return e};let bo=null,YS=!0;const sW=function(t,e){Y(!e||t===!0||t===!1,"Can't turn on custom loggers persistently."),t===!0?(el.logLevel=Le.VERBOSE,bo=el.log.bind(el),e&&$y.set("logging_enabled",!0)):typeof t=="function"?bo=t:(bo=null,$y.remove("logging_enabled"))},Tn=function(...t){if(YS===!0&&(YS=!1,bo===null&&$y.get("logging_enabled")===!0&&sW(!0)),bo){const e=th.apply(null,t);bo(e)}},nh=function(t){return function(...e){Tn(t,...e)}},Vy=function(...t){const e="FIREBASE INTERNAL ERROR: "+th(...t);el.error(e)},Pi=function(...t){const e=`FIREBASE FATAL ERROR: ${th(...t)}`;throw el.error(e),new Error(e)},nr=function(...t){const e="FIREBASE WARNING: "+th(...t);el.warn(e)},oW=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&nr("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},IN=function(t){return typeof t=="number"&&(t!==t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},aW=function(t){if(document.readyState==="complete")t();else{let e=!1;const n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}e||(e=!0,t())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&n()}),window.attachEvent("onload",n))}},ml="[MIN_NAME]",$o="[MAX_NAME]",$l=function(t,e){if(t===e)return 0;if(t===ml||e===$o)return-1;if(e===ml||t===$o)return 1;{const n=KS(t),r=KS(e);return n!==null?r!==null?n-r===0?t.length-e.length:n-r:-1:r!==null?1:t<e?-1:1}},lW=function(t,e){return t===e?0:t<e?-1:1},yu=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+un(e))},j_=function(t){if(typeof t!="object"||t===null)return un(t);const e=[];for(const r in t)e.push(r);e.sort();let n="{";for(let r=0;r<e.length;r++)r!==0&&(n+=","),n+=un(e[r]),n+=":",n+=j_(t[e[r]]);return n+="}",n},SN=function(t,e){const n=t.length;if(n<=e)return[t];const r=[];for(let i=0;i<n;i+=e)i+e>n?r.push(t.substring(i,n)):r.push(t.substring(i,i+e));return r};function Dr(t,e){for(const n in t)t.hasOwnProperty(n)&&e(n,t[n])}const EN=function(t){Y(!IN(t),"Invalid JSON number");const e=11,n=52,r=(1<<e-1)-1;let i,s,o,a,u;t===0?(s=0,o=0,i=1/t===-1/0?1:0):(i=t<0,t=Math.abs(t),t>=Math.pow(2,1-r)?(a=Math.min(Math.floor(Math.log(t)/Math.LN2),r),s=a+r,o=Math.round(t*Math.pow(2,n-a)-Math.pow(2,n))):(s=0,o=Math.round(t/Math.pow(2,1-r-n))));const c=[];for(u=n;u;u-=1)c.push(o%2?1:0),o=Math.floor(o/2);for(u=e;u;u-=1)c.push(s%2?1:0),s=Math.floor(s/2);c.push(i?1:0),c.reverse();const d=c.join("");let f="";for(u=0;u<64;u+=8){let g=parseInt(d.substr(u,8),2).toString(16);g.length===1&&(g="0"+g),f=f+g}return f.toLowerCase()},uW=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},cW=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"},hW=new RegExp("^-?(0*)\\d{1,10}$"),dW=-2147483648,fW=2147483647,KS=function(t){if(hW.test(t)){const e=Number(t);if(e>=dW&&e<=fW)return e}return null},Vl=function(t){try{t()}catch(e){setTimeout(()=>{const n=e.stack||"";throw nr("Exception was thrown by user callback.",n),e},Math.floor(0))}},pW=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},Qu=function(t,e){const n=setTimeout(t,e);return typeof n=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(n):typeof n=="object"&&n.unref&&n.unref(),n};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mW{constructor(e,n){this.appName_=e,this.appCheckProvider=n,this.appCheck=n==null?void 0:n.getImmediate({optional:!0}),this.appCheck||n==null||n.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((n,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){var n;(n=this.appCheckProvider)===null||n===void 0||n.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){nr(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gW{constructor(e,n,r){this.appName_=e,this.firebaseOptions_=n,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(n=>n&&n.code==="auth/token-not-initialized"?(Tn("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(n=>n.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(n=>n.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',nr(e)}}class tl{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}tl.OWNER="owner";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z_="5",TN="v",kN="s",CN="r",NN="f",DN=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,bN="ls",AN="p",By="ac",RN="websocket",xN="long_polling";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ON{constructor(e,n,r,i,s=!1,o="",a=!1,u=!1){this.secure=n,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=s,this.persistenceKey=o,this.includeNamespaceInQueryParams=a,this.isUsingEmulator=u,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Io.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&Io.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",n=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${n}`}}function yW(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams}function MN(t,e,n){Y(typeof e=="string","typeof type must == string"),Y(typeof n=="object","typeof params must == object");let r;if(e===RN)r=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else if(e===xN)r=(t.secure?"https://":"http://")+t.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);yW(t)&&(n.ns=t.namespace);const i=[];return Dr(n,(s,o)=>{i.push(s+"="+o)}),r+i.join("&")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vW{constructor(){this.counters_={}}incrementCounter(e,n=1){Vi(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=n}get(){return uU(this.counters_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vg={},_g={};function q_(t){const e=t.toString();return vg[e]||(vg[e]=new vW),vg[e]}function _W(t,e){const n=t.toString();return _g[n]||(_g[n]=e()),_g[n]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wW{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,n){this.closeAfterResponse=e,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,n){for(this.pendingResponses[e]=n;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&Vl(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QS="start",IW="close",SW="pLPCommand",EW="pRTLPCB",PN="id",LN="pw",FN="ser",TW="cb",kW="seg",CW="ts",NW="d",DW="dframe",UN=1870,$N=30,bW=UN-$N,AW=25e3,RW=3e4;class Wa{constructor(e,n,r,i,s,o,a){this.connId=e,this.repoInfo=n,this.applicationId=r,this.appCheckToken=i,this.authToken=s,this.transportSessionId=o,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=nh(e),this.stats_=q_(n),this.urlFn=u=>(this.appCheckToken&&(u[By]=this.appCheckToken),MN(n,xN,u))}open(e,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new wW(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(RW)),aW(()=>{if(this.isClosed_)return;this.scriptTagHolder=new G_((...s)=>{const[o,a,u,c,d]=s;if(this.incrementIncomingBytes_(s),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,o===QS)this.id=a,this.password=u;else if(o===IW)a?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(a,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+o)},(...s)=>{const[o,a]=s;this.incrementIncomingBytes_(s),this.myPacketOrderer.handleResponse(o,a)},()=>{this.onClosed_()},this.urlFn);const r={};r[QS]="t",r[FN]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(r[TW]=this.scriptTagHolder.uniqueCallbackIdentifier),r[TN]=z_,this.transportSessionId&&(r[kN]=this.transportSessionId),this.lastSessionId&&(r[bN]=this.lastSessionId),this.applicationId&&(r[AN]=this.applicationId),this.appCheckToken&&(r[By]=this.appCheckToken),typeof location<"u"&&location.hostname&&DN.test(location.hostname)&&(r[CN]=NN);const i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){Wa.forceAllow_=!0}static forceDisallow(){Wa.forceDisallow_=!0}static isAvailable(){return Wa.forceAllow_?!0:!Wa.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!uW()&&!cW()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const n=un(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const r=tC(n),i=SN(r,bW);for(let s=0;s<i.length;s++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[s]),this.curSegmentNum++}addDisconnectPingFrame(e,n){this.myDisconnFrame=document.createElement("iframe");const r={};r[DW]="t",r[PN]=e,r[LN]=n,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const n=un(e).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}}class G_{constructor(e,n,r,i){this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=iW(),window[SW+this.uniqueCallbackIdentifier]=e,window[EW+this.uniqueCallbackIdentifier]=n,this.myIFrame=G_.createIFrame_();let s="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(s='<script>document.domain="'+document.domain+'";<\/script>');const o="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(a){Tn("frame writing exception"),a.stack&&Tn(a.stack),Tn(a)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||Tn("No IE domain setting required")}catch{const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,n){for(this.myID=e,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e[PN]=this.myID,e[LN]=this.myPW,e[FN]=this.currentSerial;let n=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+$N+r.length<=UN;){const o=this.pendingSegs.shift();r=r+"&"+kW+i+"="+o.seg+"&"+CW+i+"="+o.ts+"&"+NW+i+"="+o.d,i++}return n=n+r,this.addLongPollTag_(n,this.currentSerial),!0}else return!1}enqueueSegment(e,n,r){this.pendingSegs.push({seg:e,ts:n,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,n){this.outstandingRequests.add(n);const r=()=>{this.outstandingRequests.delete(n),this.newRequest_()},i=setTimeout(r,Math.floor(AW)),s=()=>{clearTimeout(i),r()};this.addTag(e,s)}addTag(e,n){setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const i=r.readyState;(!i||i==="loaded"||i==="complete")&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),n())},r.onerror=()=>{Tn("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xW=16384,OW=45e3;let Tf=null;typeof MozWebSocket<"u"?Tf=MozWebSocket:typeof WebSocket<"u"&&(Tf=WebSocket);class Mr{constructor(e,n,r,i,s,o,a){this.connId=e,this.applicationId=r,this.appCheckToken=i,this.authToken=s,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=nh(this.connId),this.stats_=q_(n),this.connURL=Mr.connectionURL_(n,o,a,i,r),this.nodeAdmin=n.nodeAdmin}static connectionURL_(e,n,r,i,s){const o={};return o[TN]=z_,typeof location<"u"&&location.hostname&&DN.test(location.hostname)&&(o[CN]=NN),n&&(o[kN]=n),r&&(o[bN]=r),i&&(o[By]=i),s&&(o[AN]=s),MN(e,RN,o)}open(e,n){this.onDisconnect=n,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Io.set("previous_websocket_failure",!0);try{let r;lC(),this.mySock=new Tf(this.connURL,[],r)}catch(r){this.log_("Error instantiating WebSocket.");const i=r.message||r.data;i&&this.log_(i),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=r=>{this.handleIncomingFrame(r)},this.mySock.onerror=r=>{this.log_("WebSocket error.  Closing connection.");const i=r.message||r.data;i&&this.log_(i),this.onClosed_()}}start(){}static forceDisallow(){Mr.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator<"u"&&navigator.userAgent){const n=/Android ([0-9]{0,}\.[0-9]{0,})/,r=navigator.userAgent.match(n);r&&r.length>1&&parseFloat(r[1])<4.4&&(e=!0)}return!e&&Tf!==null&&!Mr.forceDisallow_}static previouslyFailed(){return Io.isInMemoryStorage||Io.get("previous_websocket_failure")===!0}markConnectionHealthy(){Io.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const n=this.frames.join("");this.frames=null;const r=Ec(n);this.onMessage(r)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(Y(this.frames===null,"We already have a frame buffer"),e.length<=6){const n=Number(e);if(!isNaN(n))return this.handleNewFrameCount_(n),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(this.mySock===null)return;const n=e.data;if(this.bytesReceived+=n.length,this.stats_.incrementCounter("bytes_received",n.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(n);else{const r=this.extractFrameCount_(n);r!==null&&this.appendFrame_(r)}}send(e){this.resetKeepAlive();const n=un(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const r=SN(n,xW);r.length>1&&this.sendString_(String(r.length));for(let i=0;i<r.length;i++)this.sendString_(r[i])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(OW))}sendString_(e){try{this.mySock.send(e)}catch(n){this.log_("Exception thrown from WebSocket.send():",n.message||n.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}Mr.responsesRequiredToBeHealthy=2;Mr.healthyTimeout=3e4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bc{constructor(e){this.initTransports_(e)}static get ALL_TRANSPORTS(){return[Wa,Mr]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(e){const n=Mr&&Mr.isAvailable();let r=n&&!Mr.previouslyFailed();if(e.webSocketOnly&&(n||nr("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[Mr];else{const i=this.transports_=[];for(const s of bc.ALL_TRANSPORTS)s&&s.isAvailable()&&i.push(s);bc.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}bc.globalTransportInitialized_=!1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MW=6e4,PW=5e3,LW=10*1024,FW=100*1024,wg="t",XS="d",UW="s",JS="r",$W="e",ZS="o",eE="a",tE="n",nE="p",VW="h";class BW{constructor(e,n,r,i,s,o,a,u,c,d){this.id=e,this.repoInfo_=n,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=s,this.onMessage_=o,this.onReady_=a,this.onDisconnect_=u,this.onKill_=c,this.lastSessionId=d,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=nh("c:"+this.id+":"),this.transportManager_=new bc(n),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,r)},Math.floor(0));const i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=Qu(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>FW?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>LW?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return n=>{e===this.conn_?this.onConnectionLost_(n):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return n=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(n):e===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(e){const n={t:"d",d:e};this.sendData_(n)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(wg in e){const n=e[wg];n===eE?this.upgradeIfSecondaryHealthy_():n===JS?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):n===ZS&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const n=yu("t",e),r=yu("d",e);if(n==="c")this.onSecondaryControl_(r);else if(n==="d")this.pendingDataMessages.push(r);else throw new Error("Unknown protocol layer: "+n)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:nE,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:eE,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:tE,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const n=yu("t",e),r=yu("d",e);n==="c"?this.onControl_(r):n==="d"&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const n=yu(wg,e);if(XS in e){const r=e[XS];if(n===VW){const i=Object.assign({},r);this.repoInfo_.isUsingEmulator&&(i.h=this.repoInfo_.host),this.onHandshake_(i)}else if(n===tE){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else n===UW?this.onConnectionShutdown_(r):n===JS?this.onReset_(r):n===$W?Vy("Server Error: "+r):n===ZS?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):Vy("Unknown control packet command: "+n)}}onHandshake_(e){const n=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),z_!==r&&nr("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),Qu(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(MW))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,n){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Qu(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(PW))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:nE,d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Io.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VN{put(e,n,r,i){}merge(e,n,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,n,r){}onDisconnectMerge(e,n,r){}onDisconnectCancel(e,n){}reportStats(e){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BN{constructor(e){this.allowedEvents_=e,this.listeners_={},Y(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...n){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,n)}}on(e,n,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:n,context:r});const i=this.getInitialEvent(e);i&&n.apply(r,i)}off(e,n,r){this.validateEventType_(e);const i=this.listeners_[e]||[];for(let s=0;s<i.length;s++)if(i[s].callback===n&&(!r||r===i[s].context)){i.splice(s,1);return}}validateEventType_(e){Y(this.allowedEvents_.find(n=>n===e),"Unknown event: "+e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kf extends BN{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!T_()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new kf}getInitialEvent(e){return Y(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rE=32,iE=768;class st{constructor(e,n){if(n===void 0){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=n}toString(){let e="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)this.pieces_[n]!==""&&(e+="/"+this.pieces_[n]);return e||"/"}}function qe(){return new st("")}function ke(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function xs(t){return t.pieces_.length-t.pieceNum_}function nt(t){let e=t.pieceNum_;return e<t.pieces_.length&&e++,new st(t.pieces_,e)}function WN(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function WW(t){let e="";for(let n=t.pieceNum_;n<t.pieces_.length;n++)t.pieces_[n]!==""&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}function jN(t,e=0){return t.pieces_.slice(t.pieceNum_+e)}function zN(t){if(t.pieceNum_>=t.pieces_.length)return null;const e=[];for(let n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new st(e,0)}function $t(t,e){const n=[];for(let r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);if(e instanceof st)for(let r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);else{const r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&n.push(r[i])}return new st(n,0)}function Ae(t){return t.pieceNum_>=t.pieces_.length}function Sr(t,e){const n=ke(t),r=ke(e);if(n===null)return e;if(n===r)return Sr(nt(t),nt(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function qN(t,e){if(xs(t)!==xs(e))return!1;for(let n=t.pieceNum_,r=e.pieceNum_;n<=t.pieces_.length;n++,r++)if(t.pieces_[n]!==e.pieces_[r])return!1;return!0}function Pr(t,e){let n=t.pieceNum_,r=e.pieceNum_;if(xs(t)>xs(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[r])return!1;++n,++r}return!0}class jW{constructor(e,n){this.errorPrefix_=n,this.parts_=jN(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=gp(this.parts_[r]);GN(this)}}function zW(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=gp(e),GN(t)}function qW(t){const e=t.parts_.pop();t.byteLength_-=gp(e),t.parts_.length>0&&(t.byteLength_-=1)}function GN(t){if(t.byteLength_>iE)throw new Error(t.errorPrefix_+"has a key path longer than "+iE+" bytes ("+t.byteLength_+").");if(t.parts_.length>rE)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+rE+") or object contains a cycle "+co(t))}function co(t){return t.parts_.length===0?"":"in property '"+t.parts_.join(".")+"'"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H_ extends BN{constructor(){super(["visible"]);let e,n;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(n="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(n="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(n="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(n="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new H_}getInitialEvent(e){return Y(e==="visible","Unknown event type: "+e),[this.visible_]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vu=1e3,GW=60*5*1e3,sE=30*1e3,HW=1.3,YW=3e4,KW="server_kill",oE=3;class Di extends VN{constructor(e,n,r,i,s,o,a,u){if(super(),this.repoInfo_=e,this.applicationId_=n,this.onDataUpdate_=r,this.onConnectStatus_=i,this.onServerInfoUpdate_=s,this.authTokenProvider_=o,this.appCheckTokenProvider_=a,this.authOverride_=u,this.id=Di.nextPersistentConnectionId_++,this.log_=nh("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=vu,this.maxReconnectDelay_=GW,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,u&&!lC())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");H_.getInstance().on("visible",this.onVisible_,this),e.host.indexOf("fblocal")===-1&&kf.getInstance().on("online",this.onOnline_,this)}sendRequest(e,n,r){const i=++this.requestNumber_,s={r:i,a:e,b:n};this.log_(un(s)),Y(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(s),r&&(this.requestCBHash_[i]=r)}get(e){this.initConnection_();const n=new mp,i={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:o=>{const a=o.d;o.s==="ok"?n.resolve(a):n.reject(a)}};this.outstandingGets_.push(i),this.outstandingGetCount_++;const s=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(s),n.promise}listen(e,n,r,i){this.initConnection_();const s=e._queryIdentifier,o=e._path.toString();this.log_("Listen called for "+o+" "+s),this.listens.has(o)||this.listens.set(o,new Map),Y(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),Y(!this.listens.get(o).has(s),"listen() called twice for same path/queryId.");const a={onComplete:i,hashFn:n,query:e,tag:r};this.listens.get(o).set(s,a),this.connected_&&this.sendListen_(a)}sendGet_(e){const n=this.outstandingGets_[e];this.sendRequest("g",n.request,r=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),n.onComplete&&n.onComplete(r)})}sendListen_(e){const n=e.query,r=n._path.toString(),i=n._queryIdentifier;this.log_("Listen on "+r+" for "+i);const s={p:r},o="q";e.tag&&(s.q=n._queryObject,s.t=e.tag),s.h=e.hashFn(),this.sendRequest(o,s,a=>{const u=a.d,c=a.s;Di.warnOnListenWarnings_(u,n),(this.listens.get(r)&&this.listens.get(r).get(i))===e&&(this.log_("listen response",a),c!=="ok"&&this.removeListen_(r,i),e.onComplete&&e.onComplete(c,u))})}static warnOnListenWarnings_(e,n){if(e&&typeof e=="object"&&Vi(e,"w")){const r=dl(e,"w");if(Array.isArray(r)&&~r.indexOf("no_index")){const i='".indexOn": "'+n._queryParams.getIndex().toString()+'"',s=n._path.toString();nr(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${i} at ${s} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&e.length===40||kU(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=sE)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,n=TU(e)?"auth":"gauth",r={cred:e};this.authOverride_===null?r.noauth=!0:typeof this.authOverride_=="object"&&(r.authvar=this.authOverride_),this.sendRequest(n,r,i=>{const s=i.s,o=i.d||"error";this.authToken_===e&&(s==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(s,o))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const n=e.s,r=e.d||"error";n==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(n,r)})}unlisten(e,n){const r=e._path.toString(),i=e._queryIdentifier;this.log_("Unlisten called for "+r+" "+i),Y(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(r,i)&&this.connected_&&this.sendUnlisten_(r,i,e._queryObject,n)}sendUnlisten_(e,n,r,i){this.log_("Unlisten on "+e+" for "+n);const s={p:e},o="n";i&&(s.q=r,s.t=i),this.sendRequest(o,s)}onDisconnectPut(e,n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,n,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:n,onComplete:r})}onDisconnectMerge(e,n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,n,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:n,onComplete:r})}onDisconnectCancel(e,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:n})}sendOnDisconnect_(e,n,r,i){const s={p:n,d:r};this.log_("onDisconnect "+e,s),this.sendRequest(e,s,o=>{i&&setTimeout(()=>{i(o.s,o.d)},Math.floor(0))})}put(e,n,r,i){this.putInternal("p",e,n,r,i)}merge(e,n,r,i){this.putInternal("m",e,n,r,i)}putInternal(e,n,r,i,s){this.initConnection_();const o={p:n,d:r};s!==void 0&&(o.h=s),this.outstandingPuts_.push({action:e,request:o,onComplete:i}),this.outstandingPutCount_++;const a=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(a):this.log_("Buffering put: "+n)}sendPut_(e){const n=this.outstandingPuts_[e].action,r=this.outstandingPuts_[e].request,i=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(n,r,s=>{this.log_(n+" response",s),delete this.outstandingPuts_[e],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),i&&i(s.s,s.d)})}reportStats(e){if(this.connected_){const n={c:e};this.log_("reportStats",n),this.sendRequest("s",n,r=>{if(r.s!=="ok"){const s=r.d;this.log_("reportStats","Error sending stats: "+s)}})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+un(e));const n=e.r,r=this.requestCBHash_[n];r&&(delete this.requestCBHash_[n],r(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,n){this.log_("handleServerMessage",e,n),e==="d"?this.onDataUpdate_(n.p,n.d,!1,n.t):e==="m"?this.onDataUpdate_(n.p,n.d,!0,n.t):e==="c"?this.onListenRevoked_(n.p,n.q):e==="ac"?this.onAuthRevoked_(n.s,n.d):e==="apc"?this.onAppCheckRevoked_(n.s,n.d):e==="sd"?this.onSecurityDebugPacket_(n):Vy("Unrecognized action received from server: "+un(e)+`
Are you using the latest client?`)}onReady_(e,n){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(e),this.lastSessionId=n,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){Y(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=vu,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=vu,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>YW&&(this.reconnectDelay_=vu),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const e=new Date().getTime()-this.lastConnectionAttemptTime_;let n=Math.max(0,this.reconnectDelay_-e);n=Math.random()*n,this.log_("Trying to reconnect in "+n+"ms"),this.scheduleConnect_(n),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*HW)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),r=this.onRealtimeDisconnect_.bind(this),i=this.id+":"+Di.nextConnectionId_++,s=this.lastSessionId;let o=!1,a=null;const u=function(){a?a.close():(o=!0,r())},c=function(f){Y(a,"sendRequest call when we're not connected not allowed."),a.sendRequest(f)};this.realtime_={close:u,sendRequest:c};const d=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[f,g]=await Promise.all([this.authTokenProvider_.getToken(d),this.appCheckTokenProvider_.getToken(d)]);o?Tn("getToken() completed but was canceled"):(Tn("getToken() completed. Creating connection."),this.authToken_=f&&f.accessToken,this.appCheckToken_=g&&g.token,a=new BW(i,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,n,r,v=>{nr(v+" ("+this.repoInfo_.toString()+")"),this.interrupt(KW)},s))}catch(f){this.log_("Failed to get token: "+f),o||(this.repoInfo_.nodeAdmin&&nr(f),u())}}}interrupt(e){Tn("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){Tn("Resuming connection for reason: "+e),delete this.interruptReasons_[e],xy(this.interruptReasons_)&&(this.reconnectDelay_=vu,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const n=e-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:n})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const n=this.outstandingPuts_[e];n&&"h"in n.request&&n.queued&&(n.onComplete&&n.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(e,n){let r;n?r=n.map(s=>j_(s)).join("$"):r="default";const i=this.removeListen_(e,r);i&&i.onComplete&&i.onComplete("permission_denied")}removeListen_(e,n){const r=new st(e).toString();let i;if(this.listens.has(r)){const s=this.listens.get(r);i=s.get(n),s.delete(n),s.size===0&&this.listens.delete(r)}else i=void 0;return i}onAuthRevoked_(e,n){Tn("Auth token revoked: "+e+"/"+n),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(e==="invalid_token"||e==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=oE&&(this.reconnectDelay_=sE,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,n){Tn("App check token revoked: "+e+"/"+n),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(e==="invalid_token"||e==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=oE&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const n of e.values())this.sendListen_(n);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let n="js";e["sdk."+n+"."+vN.replace(/\./g,"-")]=1,T_()?e["framework.cordova"]=1:aC()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=kf.getInstance().currentlyOnline();return xy(this.interruptReasons_)&&e}}Di.nextPersistentConnectionId_=0;Di.nextConnectionId_=0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oe{constructor(e,n){this.name=e,this.node=n}static Wrap(e,n){return new Oe(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bp{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,n){const r=new Oe(ml,e),i=new Oe(ml,n);return this.compare(r,i)!==0}minPost(){return Oe.MIN}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ld;class HN extends bp{static get __EMPTY_NODE(){return ld}static set __EMPTY_NODE(e){ld=e}compare(e,n){return $l(e.name,n.name)}isDefinedOn(e){throw xl("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,n){return!1}minPost(){return Oe.MIN}maxPost(){return new Oe($o,ld)}makePost(e,n){return Y(typeof e=="string","KeyIndex indexValue must always be a string."),new Oe(e,ld)}toString(){return".key"}}const nl=new HN;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ud{constructor(e,n,r,i,s=null){this.isReverse_=i,this.resultGenerator_=s,this.nodeStack_=[];let o=1;for(;!e.isEmpty();)if(e=e,o=n?r(e.key,n):1,i&&(o*=-1),o<0)this.isReverse_?e=e.left:e=e.right;else if(o===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),n;if(this.resultGenerator_?n=this.resultGenerator_(e.key,e.value):n={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}class Xt{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??Xt.RED,this.left=i??Kn.EMPTY_NODE,this.right=s??Kn.EMPTY_NODE}copy(e,n,r,i,s){return new Xt(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return s<0?i=i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i=i.copy(null,n,null,null,null):i=i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp_()}removeMin_(){if(this.left.isEmpty())return Kn.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,n){let r,i;if(r=this,n(e,r.key)<0)!r.left.isEmpty()&&!r.left.isRed_()&&!r.left.left.isRed_()&&(r=r.moveRedLeft_()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed_()&&(r=r.rotateRight_()),!r.right.isEmpty()&&!r.right.isRed_()&&!r.right.left.isRed_()&&(r=r.moveRedRight_()),n(e,r.key)===0){if(r.right.isEmpty())return Kn.EMPTY_NODE;i=r.right.min_(),r=r.copy(i.key,i.value,null,null,r.right.removeMin_())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,Xt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,Xt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}Xt.RED=!0;Xt.BLACK=!1;class QW{copy(e,n,r,i,s){return this}insert(e,n,r){return new Xt(e,n,null)}remove(e,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}class Kn{constructor(e,n=Kn.EMPTY_NODE){this.comparator_=e,this.root_=n}insert(e,n){return new Kn(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,Xt.BLACK,null,null))}remove(e){return new Kn(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Xt.BLACK,null,null))}get(e){let n,r=this.root_;for(;!r.isEmpty();){if(n=this.comparator_(e,r.key),n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}getPredecessorKey(e){let n,r=this.root_,i=null;for(;!r.isEmpty();)if(n=this.comparator_(e,r.key),n===0){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}else n<0?r=r.left:n>0&&(i=r,r=r.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new ud(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,n){return new ud(this.root_,e,this.comparator_,!1,n)}getReverseIteratorFrom(e,n){return new ud(this.root_,e,this.comparator_,!0,n)}getReverseIterator(e){return new ud(this.root_,null,this.comparator_,!0,e)}}Kn.EMPTY_NODE=new QW;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XW(t,e){return $l(t.name,e.name)}function Y_(t,e){return $l(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Wy;function JW(t){Wy=t}const YN=function(t){return typeof t=="number"?"number:"+EN(t):"string:"+t},KN=function(t){if(t.isLeafNode()){const e=t.val();Y(typeof e=="string"||typeof e=="number"||typeof e=="object"&&Vi(e,".sv"),"Priority must be a string or number.")}else Y(t===Wy||t.isEmpty(),"priority of unexpected type.");Y(t===Wy||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let aE;class Yt{constructor(e,n=Yt.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=n,this.lazyHash_=null,Y(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),KN(this.priorityNode_)}static set __childrenNodeConstructor(e){aE=e}static get __childrenNodeConstructor(){return aE}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new Yt(this.value_,e)}getImmediateChild(e){return e===".priority"?this.priorityNode_:Yt.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return Ae(e)?this:ke(e)===".priority"?this.priorityNode_:Yt.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,n){return null}updateImmediateChild(e,n){return e===".priority"?this.updatePriority(n):n.isEmpty()&&e!==".priority"?this:Yt.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)}updateChild(e,n){const r=ke(e);return r===null?n:n.isEmpty()&&r!==".priority"?this:(Y(r!==".priority"||xs(e)===1,".priority must be the last token in a path"),this.updateImmediateChild(r,Yt.__childrenNodeConstructor.EMPTY_NODE.updateChild(nt(e),n)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,n){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+YN(this.priorityNode_.val())+":");const n=typeof this.value_;e+=n+":",n==="number"?e+=EN(this.value_):e+=this.value_,this.lazyHash_=wN(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===Yt.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof Yt.__childrenNodeConstructor?-1:(Y(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const n=typeof e.value_,r=typeof this.value_,i=Yt.VALUE_TYPE_ORDER.indexOf(n),s=Yt.VALUE_TYPE_ORDER.indexOf(r);return Y(i>=0,"Unknown leaf type: "+n),Y(s>=0,"Unknown leaf type: "+r),i===s?r==="object"?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:s-i}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const n=e;return this.value_===n.value_&&this.priorityNode_.equals(n.priorityNode_)}else return!1}}Yt.VALUE_TYPE_ORDER=["object","boolean","number","string"];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let QN,XN;function ZW(t){QN=t}function ej(t){XN=t}class tj extends bp{compare(e,n){const r=e.node.getPriority(),i=n.node.getPriority(),s=r.compareTo(i);return s===0?$l(e.name,n.name):s}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,n){return!e.getPriority().equals(n.getPriority())}minPost(){return Oe.MIN}maxPost(){return new Oe($o,new Yt("[PRIORITY-POST]",XN))}makePost(e,n){const r=QN(e);return new Oe(n,new Yt("[PRIORITY-POST]",r))}toString(){return".priority"}}const kn=new tj;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nj=Math.log(2);class rj{constructor(e){const n=s=>parseInt(Math.log(s)/nj,10),r=s=>parseInt(Array(s+1).join("1"),2);this.count=n(e+1),this.current_=this.count-1;const i=r(this.count);this.bits_=e+1&i}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const Cf=function(t,e,n,r){t.sort(e);const i=function(u,c){const d=c-u;let f,g;if(d===0)return null;if(d===1)return f=t[u],g=n?n(f):f,new Xt(g,f.node,Xt.BLACK,null,null);{const v=parseInt(d/2,10)+u,_=i(u,v),T=i(v+1,c);return f=t[v],g=n?n(f):f,new Xt(g,f.node,Xt.BLACK,_,T)}},s=function(u){let c=null,d=null,f=t.length;const g=function(_,T){const C=f-_,I=f;f-=_;const w=i(C+1,I),S=t[C],A=n?n(S):S;v(new Xt(A,S.node,T,null,w))},v=function(_){c?(c.left=_,c=_):(d=_,c=_)};for(let _=0;_<u.count;++_){const T=u.nextBitIsOne(),C=Math.pow(2,u.count-(_+1));T?g(C,Xt.BLACK):(g(C,Xt.BLACK),g(C,Xt.RED))}return d},o=new rj(t.length),a=s(o);return new Kn(r||e,a)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ig;const Ta={};class Ti{constructor(e,n){this.indexes_=e,this.indexSet_=n}static get Default(){return Y(Ta&&kn,"ChildrenNode.ts has not been loaded"),Ig=Ig||new Ti({".priority":Ta},{".priority":kn}),Ig}get(e){const n=dl(this.indexes_,e);if(!n)throw new Error("No index defined for "+e);return n instanceof Kn?n:null}hasIndex(e){return Vi(this.indexSet_,e.toString())}addIndex(e,n){Y(e!==nl,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let i=!1;const s=n.getIterator(Oe.Wrap);let o=s.getNext();for(;o;)i=i||e.isDefinedOn(o.node),r.push(o),o=s.getNext();let a;i?a=Cf(r,e.getCompare()):a=Ta;const u=e.toString(),c=Object.assign({},this.indexSet_);c[u]=e;const d=Object.assign({},this.indexes_);return d[u]=a,new Ti(d,c)}addToIndexes(e,n){const r=yf(this.indexes_,(i,s)=>{const o=dl(this.indexSet_,s);if(Y(o,"Missing index implementation for "+s),i===Ta)if(o.isDefinedOn(e.node)){const a=[],u=n.getIterator(Oe.Wrap);let c=u.getNext();for(;c;)c.name!==e.name&&a.push(c),c=u.getNext();return a.push(e),Cf(a,o.getCompare())}else return Ta;else{const a=n.get(e.name);let u=i;return a&&(u=u.remove(new Oe(e.name,a))),u.insert(e,e.node)}});return new Ti(r,this.indexSet_)}removeFromIndexes(e,n){const r=yf(this.indexes_,i=>{if(i===Ta)return i;{const s=n.get(e.name);return s?i.remove(new Oe(e.name,s)):i}});return new Ti(r,this.indexSet_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let _u;class Ve{constructor(e,n,r){this.children_=e,this.priorityNode_=n,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&KN(this.priorityNode_),this.children_.isEmpty()&&Y(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return _u||(_u=new Ve(new Kn(Y_),null,Ti.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||_u}updatePriority(e){return this.children_.isEmpty()?this:new Ve(this.children_,e,this.indexMap_)}getImmediateChild(e){if(e===".priority")return this.getPriority();{const n=this.children_.get(e);return n===null?_u:n}}getChild(e){const n=ke(e);return n===null?this:this.getImmediateChild(n).getChild(nt(e))}hasChild(e){return this.children_.get(e)!==null}updateImmediateChild(e,n){if(Y(n,"We should always be passing snapshot nodes"),e===".priority")return this.updatePriority(n);{const r=new Oe(e,n);let i,s;n.isEmpty()?(i=this.children_.remove(e),s=this.indexMap_.removeFromIndexes(r,this.children_)):(i=this.children_.insert(e,n),s=this.indexMap_.addToIndexes(r,this.children_));const o=i.isEmpty()?_u:this.priorityNode_;return new Ve(i,o,s)}}updateChild(e,n){const r=ke(e);if(r===null)return n;{Y(ke(e)!==".priority"||xs(e)===1,".priority must be the last token in a path");const i=this.getImmediateChild(r).updateChild(nt(e),n);return this.updateImmediateChild(r,i)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const n={};let r=0,i=0,s=!0;if(this.forEachChild(kn,(o,a)=>{n[o]=a.val(e),r++,s&&Ve.INTEGER_REGEXP_.test(o)?i=Math.max(i,Number(o)):s=!1}),!e&&s&&i<2*r){const o=[];for(const a in n)o[a]=n[a];return o}else return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n}hash(){if(this.lazyHash_===null){let e="";this.getPriority().isEmpty()||(e+="priority:"+YN(this.getPriority().val())+":"),this.forEachChild(kn,(n,r)=>{const i=r.hash();i!==""&&(e+=":"+n+":"+i)}),this.lazyHash_=e===""?"":wN(e)}return this.lazyHash_}getPredecessorChildName(e,n,r){const i=this.resolveIndex_(r);if(i){const s=i.getPredecessorKey(new Oe(e,n));return s?s.name:null}else return this.children_.getPredecessorKey(e)}getFirstChildName(e){const n=this.resolveIndex_(e);if(n){const r=n.minKey();return r&&r.name}else return this.children_.minKey()}getFirstChild(e){const n=this.getFirstChildName(e);return n?new Oe(n,this.children_.get(n)):null}getLastChildName(e){const n=this.resolveIndex_(e);if(n){const r=n.maxKey();return r&&r.name}else return this.children_.maxKey()}getLastChild(e){const n=this.getLastChildName(e);return n?new Oe(n,this.children_.get(n)):null}forEachChild(e,n){const r=this.resolveIndex_(e);return r?r.inorderTraversal(i=>n(i.name,i.node)):this.children_.inorderTraversal(n)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,n){const r=this.resolveIndex_(n);if(r)return r.getIteratorFrom(e,i=>i);{const i=this.children_.getIteratorFrom(e.name,Oe.Wrap);let s=i.peek();for(;s!=null&&n.compare(s,e)<0;)i.getNext(),s=i.peek();return i}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,n){const r=this.resolveIndex_(n);if(r)return r.getReverseIteratorFrom(e,i=>i);{const i=this.children_.getReverseIteratorFrom(e.name,Oe.Wrap);let s=i.peek();for(;s!=null&&n.compare(s,e)>0;)i.getNext(),s=i.peek();return i}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===rh?-1:0}withIndex(e){if(e===nl||this.indexMap_.hasIndex(e))return this;{const n=this.indexMap_.addIndex(e,this.children_);return new Ve(this.children_,this.priorityNode_,n)}}isIndexed(e){return e===nl||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const n=e;if(this.getPriority().equals(n.getPriority()))if(this.children_.count()===n.children_.count()){const r=this.getIterator(kn),i=n.getIterator(kn);let s=r.getNext(),o=i.getNext();for(;s&&o;){if(s.name!==o.name||!s.node.equals(o.node))return!1;s=r.getNext(),o=i.getNext()}return s===null&&o===null}else return!1;else return!1}}resolveIndex_(e){return e===nl?null:this.indexMap_.get(e.toString())}}Ve.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class ij extends Ve{constructor(){super(new Kn(Y_),Ve.EMPTY_NODE,Ti.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return Ve.EMPTY_NODE}isEmpty(){return!1}}const rh=new ij;Object.defineProperties(Oe,{MIN:{value:new Oe(ml,Ve.EMPTY_NODE)},MAX:{value:new Oe($o,rh)}});HN.__EMPTY_NODE=Ve.EMPTY_NODE;Yt.__childrenNodeConstructor=Ve;JW(rh);ej(rh);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sj=!0;function ln(t,e=null){if(t===null)return Ve.EMPTY_NODE;if(typeof t=="object"&&".priority"in t&&(e=t[".priority"]),Y(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof t=="object"&&".value"in t&&t[".value"]!==null&&(t=t[".value"]),typeof t!="object"||".sv"in t){const n=t;return new Yt(n,ln(e))}if(!(t instanceof Array)&&sj){const n=[];let r=!1;if(Dr(t,(o,a)=>{if(o.substring(0,1)!=="."){const u=ln(a);u.isEmpty()||(r=r||!u.getPriority().isEmpty(),n.push(new Oe(o,u)))}}),n.length===0)return Ve.EMPTY_NODE;const s=Cf(n,XW,o=>o.name,Y_);if(r){const o=Cf(n,kn.getCompare());return new Ve(s,ln(e),new Ti({".priority":o},{".priority":kn}))}else return new Ve(s,ln(e),Ti.Default)}else{let n=Ve.EMPTY_NODE;return Dr(t,(r,i)=>{if(Vi(t,r)&&r.substring(0,1)!=="."){const s=ln(i);(s.isLeafNode()||!s.isEmpty())&&(n=n.updateImmediateChild(r,s))}}),n.updatePriority(ln(e))}}ZW(ln);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oj extends bp{constructor(e){super(),this.indexPath_=e,Y(!Ae(e)&&ke(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,n){const r=this.extractChild(e.node),i=this.extractChild(n.node),s=r.compareTo(i);return s===0?$l(e.name,n.name):s}makePost(e,n){const r=ln(e),i=Ve.EMPTY_NODE.updateChild(this.indexPath_,r);return new Oe(n,i)}maxPost(){const e=Ve.EMPTY_NODE.updateChild(this.indexPath_,rh);return new Oe($o,e)}toString(){return jN(this.indexPath_,0).join("/")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aj extends bp{compare(e,n){const r=e.node.compareTo(n.node);return r===0?$l(e.name,n.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,n){return!e.equals(n)}minPost(){return Oe.MIN}maxPost(){return Oe.MAX}makePost(e,n){const r=ln(e);return new Oe(n,r)}toString(){return".value"}}const lj=new aj;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uj(t){return{type:"value",snapshotNode:t}}function cj(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function hj(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function lE(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}function dj(t,e){return{type:"child_moved",snapshotNode:e,childName:t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K_{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=kn}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return Y(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return Y(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:ml}hasEnd(){return this.endSet_}getIndexEndValue(){return Y(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return Y(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:$o}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return Y(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===kn}copy(){const e=new K_;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function uE(t){const e={};if(t.isDefault())return e;let n;if(t.index_===kn?n="$priority":t.index_===lj?n="$value":t.index_===nl?n="$key":(Y(t.index_ instanceof oj,"Unrecognized index type!"),n=t.index_.toString()),e.orderBy=un(n),t.startSet_){const r=t.startAfterSet_?"startAfter":"startAt";e[r]=un(t.indexStartValue_),t.startNameSet_&&(e[r]+=","+un(t.indexStartName_))}if(t.endSet_){const r=t.endBeforeSet_?"endBefore":"endAt";e[r]=un(t.indexEndValue_),t.endNameSet_&&(e[r]+=","+un(t.indexEndName_))}return t.limitSet_&&(t.isViewFromLeft()?e.limitToFirst=t.limit_:e.limitToLast=t.limit_),e}function cE(t){const e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_),e.sin=!t.startAfterSet_),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_),e.ein=!t.endBeforeSet_),t.limitSet_){e.l=t.limit_;let n=t.viewFrom_;n===""&&(t.isViewFromLeft()?n="l":n="r"),e.vf=n}return t.index_!==kn&&(e.i=t.index_.toString()),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nf extends VN{constructor(e,n,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=n,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=nh("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,n){return n!==void 0?"tag$"+n:(Y(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,n,r,i){const s=e._path.toString();this.log_("Listen called for "+s+" "+e._queryIdentifier);const o=Nf.getListenId_(e,r),a={};this.listens_[o]=a;const u=uE(e._queryParams);this.restRequest_(s+".json",u,(c,d)=>{let f=d;if(c===404&&(f=null,c=null),c===null&&this.onDataUpdate_(s,f,!1,r),dl(this.listens_,o)===a){let g;c?c===401?g="permission_denied":g="rest_error:"+c:g="ok",i(g,null)}})}unlisten(e,n){const r=Nf.getListenId_(e,n);delete this.listens_[r]}get(e){const n=uE(e._queryParams),r=e._path.toString(),i=new mp;return this.restRequest_(r+".json",n,(s,o)=>{let a=o;s===404&&(a=null,s=null),s===null?(this.onDataUpdate_(r,a,!1,null),i.resolve(a)):i.reject(new Error(a))}),i.promise}refreshAuthToken(e){}restRequest_(e,n={},r){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,s])=>{i&&i.accessToken&&(n.auth=i.accessToken),s&&s.token&&(n.ac=s.token);const o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+na(n);this.log_("Sending REST request for "+o);const a=new XMLHttpRequest;a.onreadystatechange=()=>{if(r&&a.readyState===4){this.log_("REST Response for "+o+" received. status:",a.status,"response:",a.responseText);let u=null;if(a.status>=200&&a.status<300){try{u=Ec(a.responseText)}catch{nr("Failed to parse JSON response for "+o+": "+a.responseText)}r(null,u)}else a.status!==401&&a.status!==404&&nr("Got unsuccessful REST response for "+o+" Status: "+a.status),r(a.status);r=null}},a.open("GET",o,!0),a.send()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fj{constructor(){this.rootNode_=Ve.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,n){this.rootNode_=this.rootNode_.updateChild(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Df(){return{value:null,children:new Map}}function JN(t,e,n){if(Ae(e))t.value=n,t.children.clear();else if(t.value!==null)t.value=t.value.updateChild(e,n);else{const r=ke(e);t.children.has(r)||t.children.set(r,Df());const i=t.children.get(r);e=nt(e),JN(i,e,n)}}function jy(t,e,n){t.value!==null?n(e,t.value):pj(t,(r,i)=>{const s=new st(e.toString()+"/"+r);jy(i,s,n)})}function pj(t,e){t.children.forEach((n,r)=>{e(r,n)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mj{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),n=Object.assign({},e);return this.last_&&Dr(this.last_,(r,i)=>{n[r]=n[r]-i}),this.last_=e,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hE=10*1e3,gj=30*1e3,yj=5*60*1e3;class vj{constructor(e,n){this.server_=n,this.statsToReport_={},this.statsListener_=new mj(e);const r=hE+(gj-hE)*Math.random();Qu(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),n={};let r=!1;Dr(e,(i,s)=>{s>0&&Vi(this.statsToReport_,i)&&(n[i]=s,r=!0)}),r&&this.server_.reportStats(n),Qu(this.reportStats_.bind(this),Math.floor(Math.random()*2*yj))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Xr;(function(t){t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(Xr||(Xr={}));function ZN(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function eD(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function tD(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bf{constructor(e,n,r){this.path=e,this.affectedTree=n,this.revert=r,this.type=Xr.ACK_USER_WRITE,this.source=ZN()}operationForChild(e){if(Ae(this.path)){if(this.affectedTree.value!=null)return Y(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const n=this.affectedTree.subtree(new st(e));return new bf(qe(),n,this.revert)}}else return Y(ke(this.path)===e,"operationForChild called for unrelated child."),new bf(nt(this.path),this.affectedTree,this.revert)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vo{constructor(e,n,r){this.source=e,this.path=n,this.snap=r,this.type=Xr.OVERWRITE}operationForChild(e){return Ae(this.path)?new Vo(this.source,qe(),this.snap.getImmediateChild(e)):new Vo(this.source,nt(this.path),this.snap)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ac{constructor(e,n,r){this.source=e,this.path=n,this.children=r,this.type=Xr.MERGE}operationForChild(e){if(Ae(this.path)){const n=this.children.subtree(new st(e));return n.isEmpty()?null:n.value?new Vo(this.source,qe(),n.value):new Ac(this.source,qe(),n)}else return Y(ke(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new Ac(this.source,nt(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q_{constructor(e,n,r){this.node_=e,this.fullyInitialized_=n,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(Ae(e))return this.isFullyInitialized()&&!this.filtered_;const n=ke(e);return this.isCompleteForChild(n)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}function _j(t,e,n,r){const i=[],s=[];return e.forEach(o=>{o.type==="child_changed"&&t.index_.indexedValueChanged(o.oldSnap,o.snapshotNode)&&s.push(dj(o.childName,o.snapshotNode))}),wu(t,i,"child_removed",e,r,n),wu(t,i,"child_added",e,r,n),wu(t,i,"child_moved",s,r,n),wu(t,i,"child_changed",e,r,n),wu(t,i,"value",e,r,n),i}function wu(t,e,n,r,i,s){const o=r.filter(a=>a.type===n);o.sort((a,u)=>Ij(t,a,u)),o.forEach(a=>{const u=wj(t,a,s);i.forEach(c=>{c.respondsTo(a.type)&&e.push(c.createEvent(u,t.query_))})})}function wj(t,e,n){return e.type==="value"||e.type==="child_removed"||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}function Ij(t,e,n){if(e.childName==null||n.childName==null)throw xl("Should only compare child_ events.");const r=new Oe(e.childName,e.snapshotNode),i=new Oe(n.childName,n.snapshotNode);return t.index_.compare(r,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nD(t,e){return{eventCache:t,serverCache:e}}function Xu(t,e,n,r){return nD(new Q_(e,n,r),t.serverCache)}function rD(t,e,n,r){return nD(t.eventCache,new Q_(e,n,r))}function zy(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function Bo(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Sg;const Sj=()=>(Sg||(Sg=new Kn(lW)),Sg);class tt{constructor(e,n=Sj()){this.value=e,this.children=n}static fromObject(e){let n=new tt(null);return Dr(e,(r,i)=>{n=n.set(new st(r),i)}),n}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,n){if(this.value!=null&&n(this.value))return{path:qe(),value:this.value};if(Ae(e))return null;{const r=ke(e),i=this.children.get(r);if(i!==null){const s=i.findRootMostMatchingPathAndValue(nt(e),n);return s!=null?{path:$t(new st(r),s.path),value:s.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(Ae(e))return this;{const n=ke(e),r=this.children.get(n);return r!==null?r.subtree(nt(e)):new tt(null)}}set(e,n){if(Ae(e))return new tt(n,this.children);{const r=ke(e),s=(this.children.get(r)||new tt(null)).set(nt(e),n),o=this.children.insert(r,s);return new tt(this.value,o)}}remove(e){if(Ae(e))return this.children.isEmpty()?new tt(null):new tt(null,this.children);{const n=ke(e),r=this.children.get(n);if(r){const i=r.remove(nt(e));let s;return i.isEmpty()?s=this.children.remove(n):s=this.children.insert(n,i),this.value===null&&s.isEmpty()?new tt(null):new tt(this.value,s)}else return this}}get(e){if(Ae(e))return this.value;{const n=ke(e),r=this.children.get(n);return r?r.get(nt(e)):null}}setTree(e,n){if(Ae(e))return n;{const r=ke(e),s=(this.children.get(r)||new tt(null)).setTree(nt(e),n);let o;return s.isEmpty()?o=this.children.remove(r):o=this.children.insert(r,s),new tt(this.value,o)}}fold(e){return this.fold_(qe(),e)}fold_(e,n){const r={};return this.children.inorderTraversal((i,s)=>{r[i]=s.fold_($t(e,i),n)}),n(e,this.value,r)}findOnPath(e,n){return this.findOnPath_(e,qe(),n)}findOnPath_(e,n,r){const i=this.value?r(n,this.value):!1;if(i)return i;if(Ae(e))return null;{const s=ke(e),o=this.children.get(s);return o?o.findOnPath_(nt(e),$t(n,s),r):null}}foreachOnPath(e,n){return this.foreachOnPath_(e,qe(),n)}foreachOnPath_(e,n,r){if(Ae(e))return this;{this.value&&r(n,this.value);const i=ke(e),s=this.children.get(i);return s?s.foreachOnPath_(nt(e),$t(n,i),r):new tt(null)}}foreach(e){this.foreach_(qe(),e)}foreach_(e,n){this.children.inorderTraversal((r,i)=>{i.foreach_($t(e,r),n)}),this.value&&n(e,this.value)}foreachChild(e){this.children.inorderTraversal((n,r)=>{r.value&&e(n,r.value)})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $r{constructor(e){this.writeTree_=e}static empty(){return new $r(new tt(null))}}function Ju(t,e,n){if(Ae(e))return new $r(new tt(n));{const r=t.writeTree_.findRootMostValueAndPath(e);if(r!=null){const i=r.path;let s=r.value;const o=Sr(i,e);return s=s.updateChild(o,n),new $r(t.writeTree_.set(i,s))}else{const i=new tt(n),s=t.writeTree_.setTree(e,i);return new $r(s)}}}function dE(t,e,n){let r=t;return Dr(n,(i,s)=>{r=Ju(r,$t(e,i),s)}),r}function fE(t,e){if(Ae(e))return $r.empty();{const n=t.writeTree_.setTree(e,new tt(null));return new $r(n)}}function qy(t,e){return ia(t,e)!=null}function ia(t,e){const n=t.writeTree_.findRootMostValueAndPath(e);return n!=null?t.writeTree_.get(n.path).getChild(Sr(n.path,e)):null}function pE(t){const e=[],n=t.writeTree_.value;return n!=null?n.isLeafNode()||n.forEachChild(kn,(r,i)=>{e.push(new Oe(r,i))}):t.writeTree_.children.inorderTraversal((r,i)=>{i.value!=null&&e.push(new Oe(r,i.value))}),e}function Ns(t,e){if(Ae(e))return t;{const n=ia(t,e);return n!=null?new $r(new tt(n)):new $r(t.writeTree_.subtree(e))}}function Gy(t){return t.writeTree_.isEmpty()}function gl(t,e){return iD(qe(),t.writeTree_,e)}function iD(t,e,n){if(e.value!=null)return n.updateChild(t,e.value);{let r=null;return e.children.inorderTraversal((i,s)=>{i===".priority"?(Y(s.value!==null,"Priority writes must always be leaf nodes"),r=s.value):n=iD($t(t,i),s,n)}),!n.getChild(t).isEmpty()&&r!==null&&(n=n.updateChild($t(t,".priority"),r)),n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sD(t,e){return cD(e,t)}function Ej(t,e,n,r,i){Y(r>t.lastWriteId,"Stacking an older write on top of newer ones"),i===void 0&&(i=!0),t.allWrites.push({path:e,snap:n,writeId:r,visible:i}),i&&(t.visibleWrites=Ju(t.visibleWrites,e,n)),t.lastWriteId=r}function Tj(t,e){for(let n=0;n<t.allWrites.length;n++){const r=t.allWrites[n];if(r.writeId===e)return r}return null}function kj(t,e){const n=t.allWrites.findIndex(a=>a.writeId===e);Y(n>=0,"removeWrite called with nonexistent writeId.");const r=t.allWrites[n];t.allWrites.splice(n,1);let i=r.visible,s=!1,o=t.allWrites.length-1;for(;i&&o>=0;){const a=t.allWrites[o];a.visible&&(o>=n&&Cj(a,r.path)?i=!1:Pr(r.path,a.path)&&(s=!0)),o--}if(i){if(s)return Nj(t),!0;if(r.snap)t.visibleWrites=fE(t.visibleWrites,r.path);else{const a=r.children;Dr(a,u=>{t.visibleWrites=fE(t.visibleWrites,$t(r.path,u))})}return!0}else return!1}function Cj(t,e){if(t.snap)return Pr(t.path,e);for(const n in t.children)if(t.children.hasOwnProperty(n)&&Pr($t(t.path,n),e))return!0;return!1}function Nj(t){t.visibleWrites=oD(t.allWrites,Dj,qe()),t.allWrites.length>0?t.lastWriteId=t.allWrites[t.allWrites.length-1].writeId:t.lastWriteId=-1}function Dj(t){return t.visible}function oD(t,e,n){let r=$r.empty();for(let i=0;i<t.length;++i){const s=t[i];if(e(s)){const o=s.path;let a;if(s.snap)Pr(n,o)?(a=Sr(n,o),r=Ju(r,a,s.snap)):Pr(o,n)&&(a=Sr(o,n),r=Ju(r,qe(),s.snap.getChild(a)));else if(s.children){if(Pr(n,o))a=Sr(n,o),r=dE(r,a,s.children);else if(Pr(o,n))if(a=Sr(o,n),Ae(a))r=dE(r,qe(),s.children);else{const u=dl(s.children,ke(a));if(u){const c=u.getChild(nt(a));r=Ju(r,qe(),c)}}}else throw xl("WriteRecord should have .snap or .children")}}return r}function aD(t,e,n,r,i){if(!r&&!i){const s=ia(t.visibleWrites,e);if(s!=null)return s;{const o=Ns(t.visibleWrites,e);if(Gy(o))return n;if(n==null&&!qy(o,qe()))return null;{const a=n||Ve.EMPTY_NODE;return gl(o,a)}}}else{const s=Ns(t.visibleWrites,e);if(!i&&Gy(s))return n;if(!i&&n==null&&!qy(s,qe()))return null;{const o=function(c){return(c.visible||i)&&(!r||!~r.indexOf(c.writeId))&&(Pr(c.path,e)||Pr(e,c.path))},a=oD(t.allWrites,o,e),u=n||Ve.EMPTY_NODE;return gl(a,u)}}}function bj(t,e,n){let r=Ve.EMPTY_NODE;const i=ia(t.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(kn,(s,o)=>{r=r.updateImmediateChild(s,o)}),r;if(n){const s=Ns(t.visibleWrites,e);return n.forEachChild(kn,(o,a)=>{const u=gl(Ns(s,new st(o)),a);r=r.updateImmediateChild(o,u)}),pE(s).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}else{const s=Ns(t.visibleWrites,e);return pE(s).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}}function Aj(t,e,n,r,i){Y(r||i,"Either existingEventSnap or existingServerSnap must exist");const s=$t(e,n);if(qy(t.visibleWrites,s))return null;{const o=Ns(t.visibleWrites,s);return Gy(o)?i.getChild(n):gl(o,i.getChild(n))}}function Rj(t,e,n,r){const i=$t(e,n),s=ia(t.visibleWrites,i);if(s!=null)return s;if(r.isCompleteForChild(n)){const o=Ns(t.visibleWrites,i);return gl(o,r.getNode().getImmediateChild(n))}else return null}function xj(t,e){return ia(t.visibleWrites,e)}function Oj(t,e,n,r,i,s,o){let a;const u=Ns(t.visibleWrites,e),c=ia(u,qe());if(c!=null)a=c;else if(n!=null)a=gl(u,n);else return[];if(a=a.withIndex(o),!a.isEmpty()&&!a.isLeafNode()){const d=[],f=o.getCompare(),g=s?a.getReverseIteratorFrom(r,o):a.getIteratorFrom(r,o);let v=g.getNext();for(;v&&d.length<i;)f(v,r)!==0&&d.push(v),v=g.getNext();return d}else return[]}function Mj(){return{visibleWrites:$r.empty(),allWrites:[],lastWriteId:-1}}function Hy(t,e,n,r){return aD(t.writeTree,t.treePath,e,n,r)}function lD(t,e){return bj(t.writeTree,t.treePath,e)}function mE(t,e,n,r){return Aj(t.writeTree,t.treePath,e,n,r)}function Af(t,e){return xj(t.writeTree,$t(t.treePath,e))}function Pj(t,e,n,r,i,s){return Oj(t.writeTree,t.treePath,e,n,r,i,s)}function X_(t,e,n){return Rj(t.writeTree,t.treePath,e,n)}function uD(t,e){return cD($t(t.treePath,e),t.writeTree)}function cD(t,e){return{treePath:t,writeTree:e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lj{constructor(){this.changeMap=new Map}trackChildChange(e){const n=e.type,r=e.childName;Y(n==="child_added"||n==="child_changed"||n==="child_removed","Only child changes supported for tracking"),Y(r!==".priority","Only non-priority child changes can be tracked.");const i=this.changeMap.get(r);if(i){const s=i.type;if(n==="child_added"&&s==="child_removed")this.changeMap.set(r,lE(r,e.snapshotNode,i.snapshotNode));else if(n==="child_removed"&&s==="child_added")this.changeMap.delete(r);else if(n==="child_removed"&&s==="child_changed")this.changeMap.set(r,hj(r,i.oldSnap));else if(n==="child_changed"&&s==="child_added")this.changeMap.set(r,cj(r,e.snapshotNode));else if(n==="child_changed"&&s==="child_changed")this.changeMap.set(r,lE(r,e.snapshotNode,i.oldSnap));else throw xl("Illegal combination of changes: "+e+" occurred after "+i)}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fj{getCompleteChild(e){return null}getChildAfterChild(e,n,r){return null}}const hD=new Fj;class J_{constructor(e,n,r=null){this.writes_=e,this.viewCache_=n,this.optCompleteServerCache_=r}getCompleteChild(e){const n=this.viewCache_.eventCache;if(n.isCompleteForChild(e))return n.getNode().getImmediateChild(e);{const r=this.optCompleteServerCache_!=null?new Q_(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return X_(this.writes_,e,r)}}getChildAfterChild(e,n,r){const i=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:Bo(this.viewCache_),s=Pj(this.writes_,i,n,1,r,e);return s.length===0?null:s[0]}}function Uj(t,e){Y(e.eventCache.getNode().isIndexed(t.filter.getIndex()),"Event snap not indexed"),Y(e.serverCache.getNode().isIndexed(t.filter.getIndex()),"Server snap not indexed")}function $j(t,e,n,r,i){const s=new Lj;let o,a;if(n.type===Xr.OVERWRITE){const c=n;c.source.fromUser?o=Yy(t,e,c.path,c.snap,r,i,s):(Y(c.source.fromServer,"Unknown source."),a=c.source.tagged||e.serverCache.isFiltered()&&!Ae(c.path),o=Rf(t,e,c.path,c.snap,r,i,a,s))}else if(n.type===Xr.MERGE){const c=n;c.source.fromUser?o=Bj(t,e,c.path,c.children,r,i,s):(Y(c.source.fromServer,"Unknown source."),a=c.source.tagged||e.serverCache.isFiltered(),o=Ky(t,e,c.path,c.children,r,i,a,s))}else if(n.type===Xr.ACK_USER_WRITE){const c=n;c.revert?o=zj(t,e,c.path,r,i,s):o=Wj(t,e,c.path,c.affectedTree,r,i,s)}else if(n.type===Xr.LISTEN_COMPLETE)o=jj(t,e,n.path,r,s);else throw xl("Unknown operation type: "+n.type);const u=s.getChanges();return Vj(e,o,u),{viewCache:o,changes:u}}function Vj(t,e,n){const r=e.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),s=zy(t);(n.length>0||!t.eventCache.isFullyInitialized()||i&&!r.getNode().equals(s)||!r.getNode().getPriority().equals(s.getPriority()))&&n.push(uj(zy(e)))}}function dD(t,e,n,r,i,s){const o=e.eventCache;if(Af(r,n)!=null)return e;{let a,u;if(Ae(n))if(Y(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const c=Bo(e),d=c instanceof Ve?c:Ve.EMPTY_NODE,f=lD(r,d);a=t.filter.updateFullNode(e.eventCache.getNode(),f,s)}else{const c=Hy(r,Bo(e));a=t.filter.updateFullNode(e.eventCache.getNode(),c,s)}else{const c=ke(n);if(c===".priority"){Y(xs(n)===1,"Can't have a priority with additional path components");const d=o.getNode();u=e.serverCache.getNode();const f=mE(r,n,d,u);f!=null?a=t.filter.updatePriority(d,f):a=o.getNode()}else{const d=nt(n);let f;if(o.isCompleteForChild(c)){u=e.serverCache.getNode();const g=mE(r,n,o.getNode(),u);g!=null?f=o.getNode().getImmediateChild(c).updateChild(d,g):f=o.getNode().getImmediateChild(c)}else f=X_(r,c,e.serverCache);f!=null?a=t.filter.updateChild(o.getNode(),c,f,d,i,s):a=o.getNode()}}return Xu(e,a,o.isFullyInitialized()||Ae(n),t.filter.filtersNodes())}}function Rf(t,e,n,r,i,s,o,a){const u=e.serverCache;let c;const d=o?t.filter:t.filter.getIndexedFilter();if(Ae(n))c=d.updateFullNode(u.getNode(),r,null);else if(d.filtersNodes()&&!u.isFiltered()){const v=u.getNode().updateChild(n,r);c=d.updateFullNode(u.getNode(),v,null)}else{const v=ke(n);if(!u.isCompleteForPath(n)&&xs(n)>1)return e;const _=nt(n),C=u.getNode().getImmediateChild(v).updateChild(_,r);v===".priority"?c=d.updatePriority(u.getNode(),C):c=d.updateChild(u.getNode(),v,C,_,hD,null)}const f=rD(e,c,u.isFullyInitialized()||Ae(n),d.filtersNodes()),g=new J_(i,f,s);return dD(t,f,n,i,g,a)}function Yy(t,e,n,r,i,s,o){const a=e.eventCache;let u,c;const d=new J_(i,e,s);if(Ae(n))c=t.filter.updateFullNode(e.eventCache.getNode(),r,o),u=Xu(e,c,!0,t.filter.filtersNodes());else{const f=ke(n);if(f===".priority")c=t.filter.updatePriority(e.eventCache.getNode(),r),u=Xu(e,c,a.isFullyInitialized(),a.isFiltered());else{const g=nt(n),v=a.getNode().getImmediateChild(f);let _;if(Ae(g))_=r;else{const T=d.getCompleteChild(f);T!=null?WN(g)===".priority"&&T.getChild(zN(g)).isEmpty()?_=T:_=T.updateChild(g,r):_=Ve.EMPTY_NODE}if(v.equals(_))u=e;else{const T=t.filter.updateChild(a.getNode(),f,_,g,d,o);u=Xu(e,T,a.isFullyInitialized(),t.filter.filtersNodes())}}}return u}function gE(t,e){return t.eventCache.isCompleteForChild(e)}function Bj(t,e,n,r,i,s,o){let a=e;return r.foreach((u,c)=>{const d=$t(n,u);gE(e,ke(d))&&(a=Yy(t,a,d,c,i,s,o))}),r.foreach((u,c)=>{const d=$t(n,u);gE(e,ke(d))||(a=Yy(t,a,d,c,i,s,o))}),a}function yE(t,e,n){return n.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function Ky(t,e,n,r,i,s,o,a){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let u=e,c;Ae(n)?c=r:c=new tt(null).setTree(n,r);const d=e.serverCache.getNode();return c.children.inorderTraversal((f,g)=>{if(d.hasChild(f)){const v=e.serverCache.getNode().getImmediateChild(f),_=yE(t,v,g);u=Rf(t,u,new st(f),_,i,s,o,a)}}),c.children.inorderTraversal((f,g)=>{const v=!e.serverCache.isCompleteForChild(f)&&g.value===null;if(!d.hasChild(f)&&!v){const _=e.serverCache.getNode().getImmediateChild(f),T=yE(t,_,g);u=Rf(t,u,new st(f),T,i,s,o,a)}}),u}function Wj(t,e,n,r,i,s,o){if(Af(i,n)!=null)return e;const a=e.serverCache.isFiltered(),u=e.serverCache;if(r.value!=null){if(Ae(n)&&u.isFullyInitialized()||u.isCompleteForPath(n))return Rf(t,e,n,u.getNode().getChild(n),i,s,a,o);if(Ae(n)){let c=new tt(null);return u.getNode().forEachChild(nl,(d,f)=>{c=c.set(new st(d),f)}),Ky(t,e,n,c,i,s,a,o)}else return e}else{let c=new tt(null);return r.foreach((d,f)=>{const g=$t(n,d);u.isCompleteForPath(g)&&(c=c.set(d,u.getNode().getChild(g)))}),Ky(t,e,n,c,i,s,a,o)}}function jj(t,e,n,r,i){const s=e.serverCache,o=rD(e,s.getNode(),s.isFullyInitialized()||Ae(n),s.isFiltered());return dD(t,o,n,r,hD,i)}function zj(t,e,n,r,i,s){let o;if(Af(r,n)!=null)return e;{const a=new J_(r,e,i),u=e.eventCache.getNode();let c;if(Ae(n)||ke(n)===".priority"){let d;if(e.serverCache.isFullyInitialized())d=Hy(r,Bo(e));else{const f=e.serverCache.getNode();Y(f instanceof Ve,"serverChildren would be complete if leaf node"),d=lD(r,f)}d=d,c=t.filter.updateFullNode(u,d,s)}else{const d=ke(n);let f=X_(r,d,e.serverCache);f==null&&e.serverCache.isCompleteForChild(d)&&(f=u.getImmediateChild(d)),f!=null?c=t.filter.updateChild(u,d,f,nt(n),a,s):e.eventCache.getNode().hasChild(d)?c=t.filter.updateChild(u,d,Ve.EMPTY_NODE,nt(n),a,s):c=u,c.isEmpty()&&e.serverCache.isFullyInitialized()&&(o=Hy(r,Bo(e)),o.isLeafNode()&&(c=t.filter.updateFullNode(c,o,s)))}return o=e.serverCache.isFullyInitialized()||Af(r,qe())!=null,Xu(e,c,o,t.filter.filtersNodes())}}function qj(t,e){const n=Bo(t.viewCache_);return n&&(t.query._queryParams.loadsAllData()||!Ae(e)&&!n.getImmediateChild(ke(e)).isEmpty())?n.getChild(e):null}function vE(t,e,n,r){e.type===Xr.MERGE&&e.source.queryId!==null&&(Y(Bo(t.viewCache_),"We should always have a full cache before handling merges"),Y(zy(t.viewCache_),"Missing event cache, even though we have a server cache"));const i=t.viewCache_,s=$j(t.processor_,i,e,n,r);return Uj(t.processor_,s.viewCache),Y(s.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=s.viewCache,Gj(t,s.changes,s.viewCache.eventCache.getNode(),null)}function Gj(t,e,n,r){const i=r?[r]:t.eventRegistrations_;return _j(t.eventGenerator_,e,n,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let _E;function Hj(t){Y(!_E,"__referenceConstructor has already been defined"),_E=t}function Z_(t,e,n,r){const i=e.source.queryId;if(i!==null){const s=t.views.get(i);return Y(s!=null,"SyncTree gave us an op for an invalid query."),vE(s,e,n,r)}else{let s=[];for(const o of t.views.values())s=s.concat(vE(o,e,n,r));return s}}function ew(t,e){let n=null;for(const r of t.views.values())n=n||qj(r,e);return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let wE;function Yj(t){Y(!wE,"__referenceConstructor has already been defined"),wE=t}class IE{constructor(e){this.listenProvider_=e,this.syncPointTree_=new tt(null),this.pendingWriteTree_=Mj(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function fD(t,e,n,r,i){return Ej(t.pendingWriteTree_,e,n,r,i),i?Rp(t,new Vo(ZN(),e,n)):[]}function So(t,e,n=!1){const r=Tj(t.pendingWriteTree_,e);if(kj(t.pendingWriteTree_,e)){let s=new tt(null);return r.snap!=null?s=s.set(qe(),!0):Dr(r.children,o=>{s=s.set(new st(o),!0)}),Rp(t,new bf(r.path,s,n))}else return[]}function Ap(t,e,n){return Rp(t,new Vo(eD(),e,n))}function Kj(t,e,n){const r=tt.fromObject(n);return Rp(t,new Ac(eD(),e,r))}function Qj(t,e,n,r){const i=gD(t,r);if(i!=null){const s=yD(i),o=s.path,a=s.queryId,u=Sr(o,e),c=new Vo(tD(a),u,n);return vD(t,o,c)}else return[]}function Xj(t,e,n,r){const i=gD(t,r);if(i){const s=yD(i),o=s.path,a=s.queryId,u=Sr(o,e),c=tt.fromObject(n),d=new Ac(tD(a),u,c);return vD(t,o,d)}else return[]}function tw(t,e,n){const i=t.pendingWriteTree_,s=t.syncPointTree_.findOnPath(e,(o,a)=>{const u=Sr(o,e),c=ew(a,u);if(c)return c});return aD(i,e,s,n,!0)}function Rp(t,e){return pD(e,t.syncPointTree_,null,sD(t.pendingWriteTree_,qe()))}function pD(t,e,n,r){if(Ae(t.path))return mD(t,e,n,r);{const i=e.get(qe());n==null&&i!=null&&(n=ew(i,qe()));let s=[];const o=ke(t.path),a=t.operationForChild(o),u=e.children.get(o);if(u&&a){const c=n?n.getImmediateChild(o):null,d=uD(r,o);s=s.concat(pD(a,u,c,d))}return i&&(s=s.concat(Z_(i,t,r,n))),s}}function mD(t,e,n,r){const i=e.get(qe());n==null&&i!=null&&(n=ew(i,qe()));let s=[];return e.children.inorderTraversal((o,a)=>{const u=n?n.getImmediateChild(o):null,c=uD(r,o),d=t.operationForChild(o);d&&(s=s.concat(mD(d,a,u,c)))}),i&&(s=s.concat(Z_(i,t,r,n))),s}function gD(t,e){return t.tagToQueryMap.get(e)}function yD(t){const e=t.indexOf("$");return Y(e!==-1&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new st(t.substr(0,e))}}function vD(t,e,n){const r=t.syncPointTree_.get(e);Y(r,"Missing sync point for query tag that we're tracking");const i=sD(t.pendingWriteTree_,e);return Z_(r,n,i,null)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nw{constructor(e){this.node_=e}getImmediateChild(e){const n=this.node_.getImmediateChild(e);return new nw(n)}node(){return this.node_}}class rw{constructor(e,n){this.syncTree_=e,this.path_=n}getImmediateChild(e){const n=$t(this.path_,e);return new rw(this.syncTree_,n)}node(){return tw(this.syncTree_,this.path_)}}const Jj=function(t){return t=t||{},t.timestamp=t.timestamp||new Date().getTime(),t},SE=function(t,e,n){if(!t||typeof t!="object")return t;if(Y(".sv"in t,"Unexpected leaf node or priority contents"),typeof t[".sv"]=="string")return Zj(t[".sv"],e,n);if(typeof t[".sv"]=="object")return ez(t[".sv"],e);Y(!1,"Unexpected server value: "+JSON.stringify(t,null,2))},Zj=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:Y(!1,"Unexpected server value: "+t)}},ez=function(t,e,n){t.hasOwnProperty("increment")||Y(!1,"Unexpected server value: "+JSON.stringify(t,null,2));const r=t.increment;typeof r!="number"&&Y(!1,"Unexpected increment value: "+r);const i=e.node();if(Y(i!==null&&typeof i<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;const o=i.getValue();return typeof o!="number"?r:o+r},tz=function(t,e,n,r){return iw(e,new rw(n,t),r)},_D=function(t,e,n){return iw(t,new nw(e),n)};function iw(t,e,n){const r=t.getPriority().val(),i=SE(r,e.getImmediateChild(".priority"),n);let s;if(t.isLeafNode()){const o=t,a=SE(o.getValue(),e,n);return a!==o.getValue()||i!==o.getPriority().val()?new Yt(a,ln(i)):t}else{const o=t;return s=o,i!==o.getPriority().val()&&(s=s.updatePriority(new Yt(i))),o.forEachChild(kn,(a,u)=>{const c=iw(u,e.getImmediateChild(a),n);c!==u&&(s=s.updateImmediateChild(a,c))}),s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sw{constructor(e="",n=null,r={children:{},childCount:0}){this.name=e,this.parent=n,this.node=r}}function ow(t,e){let n=e instanceof st?e:new st(e),r=t,i=ke(n);for(;i!==null;){const s=dl(r.node.children,i)||{children:{},childCount:0};r=new sw(i,r,s),n=nt(n),i=ke(n)}return r}function Bl(t){return t.node.value}function wD(t,e){t.node.value=e,Qy(t)}function ID(t){return t.node.childCount>0}function nz(t){return Bl(t)===void 0&&!ID(t)}function xp(t,e){Dr(t.node.children,(n,r)=>{e(new sw(n,t,r))})}function SD(t,e,n,r){n&&!r&&e(t),xp(t,i=>{SD(i,e,!0,r)}),n&&r&&e(t)}function rz(t,e,n){let r=n?t:t.parent;for(;r!==null;){if(e(r))return!0;r=r.parent}return!1}function ih(t){return new st(t.parent===null?t.name:ih(t.parent)+"/"+t.name)}function Qy(t){t.parent!==null&&iz(t.parent,t.name,t)}function iz(t,e,n){const r=nz(n),i=Vi(t.node.children,e);r&&i?(delete t.node.children[e],t.node.childCount--,Qy(t)):!r&&!i&&(t.node.children[e]=n.node,t.node.childCount++,Qy(t))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sz=/[\[\].#$\/\u0000-\u001F\u007F]/,oz=/[\[\].#$\u0000-\u001F\u007F]/,Eg=10*1024*1024,ED=function(t){return typeof t=="string"&&t.length!==0&&!sz.test(t)},TD=function(t){return typeof t=="string"&&t.length!==0&&!oz.test(t)},az=function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),TD(t)},lz=function(t,e,n,r){r&&e===void 0||aw(k_(t,"value"),e,n)},aw=function(t,e,n){const r=n instanceof st?new jW(n,t):n;if(e===void 0)throw new Error(t+"contains undefined "+co(r));if(typeof e=="function")throw new Error(t+"contains a function "+co(r)+" with contents = "+e.toString());if(IN(e))throw new Error(t+"contains "+e.toString()+" "+co(r));if(typeof e=="string"&&e.length>Eg/3&&gp(e)>Eg)throw new Error(t+"contains a string greater than "+Eg+" utf8 bytes "+co(r)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let i=!1,s=!1;if(Dr(e,(o,a)=>{if(o===".value")i=!0;else if(o!==".priority"&&o!==".sv"&&(s=!0,!ED(o)))throw new Error(t+" contains an invalid key ("+o+") "+co(r)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);zW(r,o),aw(t,a,r),qW(r)}),i&&s)throw new Error(t+' contains ".value" child '+co(r)+" in addition to actual children.")}},kD=function(t,e,n,r){if(!(r&&n===void 0)&&!TD(n))throw new Error(k_(t,e)+'was an invalid path = "'+n+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},uz=function(t,e,n,r){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),kD(t,e,n,r)},cz=function(t,e){if(ke(e)===".info")throw new Error(t+" failed = Can't modify data under /.info/")},hz=function(t,e){const n=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!ED(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||n.length!==0&&!az(n))throw new Error(k_(t,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dz{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function CD(t,e){let n=null;for(let r=0;r<e.length;r++){const i=e[r],s=i.getPath();n!==null&&!qN(s,n.path)&&(t.eventLists_.push(n),n=null),n===null&&(n={events:[],path:s}),n.events.push(i)}n&&t.eventLists_.push(n)}function Li(t,e,n){CD(t,n),fz(t,r=>Pr(r,e)||Pr(e,r))}function fz(t,e){t.recursionDepth_++;let n=!0;for(let r=0;r<t.eventLists_.length;r++){const i=t.eventLists_[r];if(i){const s=i.path;e(s)?(pz(t.eventLists_[r]),t.eventLists_[r]=null):n=!1}}n&&(t.eventLists_=[]),t.recursionDepth_--}function pz(t){for(let e=0;e<t.events.length;e++){const n=t.events[e];if(n!==null){t.events[e]=null;const r=n.getEventRunner();bo&&Tn("event: "+n.toString()),Vl(r)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mz="repo_interrupt",gz=25;class yz{constructor(e,n,r,i){this.repoInfo_=e,this.forceRestClient_=n,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new dz,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Df(),this.transactionQueueTree_=new sw,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function vz(t,e,n){if(t.stats_=q_(t.repoInfo_),t.forceRestClient_||pW())t.server_=new Nf(t.repoInfo_,(r,i,s,o)=>{EE(t,r,i,s,o)},t.authTokenProvider_,t.appCheckProvider_),setTimeout(()=>TE(t,!0),0);else{if(typeof n<"u"&&n!==null){if(typeof n!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{un(n)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}t.persistentConnection_=new Di(t.repoInfo_,e,(r,i,s,o)=>{EE(t,r,i,s,o)},r=>{TE(t,r)},r=>{wz(t,r)},t.authTokenProvider_,t.appCheckProvider_,n),t.server_=t.persistentConnection_}t.authTokenProvider_.addTokenChangeListener(r=>{t.server_.refreshAuthToken(r)}),t.appCheckProvider_.addTokenChangeListener(r=>{t.server_.refreshAppCheckToken(r.token)}),t.statsReporter_=_W(t.repoInfo_,()=>new vj(t.stats_,t.server_)),t.infoData_=new fj,t.infoSyncTree_=new IE({startListening:(r,i,s,o)=>{let a=[];const u=t.infoData_.getNode(r._path);return u.isEmpty()||(a=Ap(t.infoSyncTree_,r._path,u),setTimeout(()=>{o("ok")},0)),a},stopListening:()=>{}}),uw(t,"connected",!1),t.serverSyncTree_=new IE({startListening:(r,i,s,o)=>(t.server_.listen(r,s,i,(a,u)=>{const c=o(a,u);Li(t.eventQueue_,r._path,c)}),[]),stopListening:(r,i)=>{t.server_.unlisten(r,i)}})}function _z(t){const n=t.infoData_.getNode(new st(".info/serverTimeOffset")).val()||0;return new Date().getTime()+n}function lw(t){return Jj({timestamp:_z(t)})}function EE(t,e,n,r,i){t.dataUpdateCount++;const s=new st(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;let o=[];if(i)if(r){const u=yf(n,c=>ln(c));o=Xj(t.serverSyncTree_,s,u,i)}else{const u=ln(n);o=Qj(t.serverSyncTree_,s,u,i)}else if(r){const u=yf(n,c=>ln(c));o=Kj(t.serverSyncTree_,s,u)}else{const u=ln(n);o=Ap(t.serverSyncTree_,s,u)}let a=s;o.length>0&&(a=Op(t,s)),Li(t.eventQueue_,a,o)}function TE(t,e){uw(t,"connected",e),e===!1&&Sz(t)}function wz(t,e){Dr(e,(n,r)=>{uw(t,n,r)})}function uw(t,e,n){const r=new st("/.info/"+e),i=ln(n);t.infoData_.updateSnapshot(r,i);const s=Ap(t.infoSyncTree_,r,i);Li(t.eventQueue_,r,s)}function ND(t){return t.nextWriteId_++}function Iz(t,e,n,r,i){cw(t,"set",{path:e.toString(),value:n,priority:r});const s=lw(t),o=ln(n,r),a=tw(t.serverSyncTree_,e),u=_D(o,a,s),c=ND(t),d=fD(t.serverSyncTree_,e,u,c,!0);CD(t.eventQueue_,d),t.server_.put(e.toString(),o.val(!0),(g,v)=>{const _=g==="ok";_||nr("set at "+e+" failed: "+g);const T=So(t.serverSyncTree_,c,!_);Li(t.eventQueue_,e,T),Tz(t,i,g,v)});const f=xD(t,e);Op(t,f),Li(t.eventQueue_,f,[])}function Sz(t){cw(t,"onDisconnectEvents");const e=lw(t),n=Df();jy(t.onDisconnect_,qe(),(i,s)=>{const o=tz(i,s,t.serverSyncTree_,e);JN(n,i,o)});let r=[];jy(n,qe(),(i,s)=>{r=r.concat(Ap(t.serverSyncTree_,i,s));const o=xD(t,i);Op(t,o)}),t.onDisconnect_=Df(),Li(t.eventQueue_,qe(),r)}function Ez(t){t.persistentConnection_&&t.persistentConnection_.interrupt(mz)}function cw(t,...e){let n="";t.persistentConnection_&&(n=t.persistentConnection_.id+":"),Tn(n,...e)}function Tz(t,e,n,r){e&&Vl(()=>{if(n==="ok")e(null);else{const i=(n||"error").toUpperCase();let s=i;r&&(s+=": "+r);const o=new Error(s);o.code=i,e(o)}})}function DD(t,e,n){return tw(t.serverSyncTree_,e,n)||Ve.EMPTY_NODE}function hw(t,e=t.transactionQueueTree_){if(e||Mp(t,e),Bl(e)){const n=AD(t,e);Y(n.length>0,"Sending zero length transaction queue"),n.every(i=>i.status===0)&&kz(t,ih(e),n)}else ID(e)&&xp(e,n=>{hw(t,n)})}function kz(t,e,n){const r=n.map(c=>c.currentWriteId),i=DD(t,e,r);let s=i;const o=i.hash();for(let c=0;c<n.length;c++){const d=n[c];Y(d.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),d.status=1,d.retryCount++;const f=Sr(e,d.path);s=s.updateChild(f,d.currentOutputSnapshotRaw)}const a=s.val(!0),u=e;t.server_.put(u.toString(),a,c=>{cw(t,"transaction put response",{path:u.toString(),status:c});let d=[];if(c==="ok"){const f=[];for(let g=0;g<n.length;g++)n[g].status=2,d=d.concat(So(t.serverSyncTree_,n[g].currentWriteId)),n[g].onComplete&&f.push(()=>n[g].onComplete(null,!0,n[g].currentOutputSnapshotResolved)),n[g].unwatcher();Mp(t,ow(t.transactionQueueTree_,e)),hw(t,t.transactionQueueTree_),Li(t.eventQueue_,e,d);for(let g=0;g<f.length;g++)Vl(f[g])}else{if(c==="datastale")for(let f=0;f<n.length;f++)n[f].status===3?n[f].status=4:n[f].status=0;else{nr("transaction at "+u.toString()+" failed: "+c);for(let f=0;f<n.length;f++)n[f].status=4,n[f].abortReason=c}Op(t,e)}},o)}function Op(t,e){const n=bD(t,e),r=ih(n),i=AD(t,n);return Cz(t,i,r),r}function Cz(t,e,n){if(e.length===0)return;const r=[];let i=[];const o=e.filter(a=>a.status===0).map(a=>a.currentWriteId);for(let a=0;a<e.length;a++){const u=e[a],c=Sr(n,u.path);let d=!1,f;if(Y(c!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),u.status===4)d=!0,f=u.abortReason,i=i.concat(So(t.serverSyncTree_,u.currentWriteId,!0));else if(u.status===0)if(u.retryCount>=gz)d=!0,f="maxretry",i=i.concat(So(t.serverSyncTree_,u.currentWriteId,!0));else{const g=DD(t,u.path,o);u.currentInputSnapshot=g;const v=e[a].update(g.val());if(v!==void 0){aw("transaction failed: Data returned ",v,u.path);let _=ln(v);typeof v=="object"&&v!=null&&Vi(v,".priority")||(_=_.updatePriority(g.getPriority()));const C=u.currentWriteId,I=lw(t),w=_D(_,g,I);u.currentOutputSnapshotRaw=_,u.currentOutputSnapshotResolved=w,u.currentWriteId=ND(t),o.splice(o.indexOf(C),1),i=i.concat(fD(t.serverSyncTree_,u.path,w,u.currentWriteId,u.applyLocally)),i=i.concat(So(t.serverSyncTree_,C,!0))}else d=!0,f="nodata",i=i.concat(So(t.serverSyncTree_,u.currentWriteId,!0))}Li(t.eventQueue_,n,i),i=[],d&&(e[a].status=2,function(g){setTimeout(g,Math.floor(0))}(e[a].unwatcher),e[a].onComplete&&(f==="nodata"?r.push(()=>e[a].onComplete(null,!1,e[a].currentInputSnapshot)):r.push(()=>e[a].onComplete(new Error(f),!1,null))))}Mp(t,t.transactionQueueTree_);for(let a=0;a<r.length;a++)Vl(r[a]);hw(t,t.transactionQueueTree_)}function bD(t,e){let n,r=t.transactionQueueTree_;for(n=ke(e);n!==null&&Bl(r)===void 0;)r=ow(r,n),e=nt(e),n=ke(e);return r}function AD(t,e){const n=[];return RD(t,e,n),n.sort((r,i)=>r.order-i.order),n}function RD(t,e,n){const r=Bl(e);if(r)for(let i=0;i<r.length;i++)n.push(r[i]);xp(e,i=>{RD(t,i,n)})}function Mp(t,e){const n=Bl(e);if(n){let r=0;for(let i=0;i<n.length;i++)n[i].status!==2&&(n[r]=n[i],r++);n.length=r,wD(e,n.length>0?n:void 0)}xp(e,r=>{Mp(t,r)})}function xD(t,e){const n=ih(bD(t,e)),r=ow(t.transactionQueueTree_,e);return rz(r,i=>{Tg(t,i)}),Tg(t,r),SD(r,i=>{Tg(t,i)}),n}function Tg(t,e){const n=Bl(e);if(n){const r=[];let i=[],s=-1;for(let o=0;o<n.length;o++)n[o].status===3||(n[o].status===1?(Y(s===o-1,"All SENT items should be at beginning of queue."),s=o,n[o].status=3,n[o].abortReason="set"):(Y(n[o].status===0,"Unexpected transaction status in abort"),n[o].unwatcher(),i=i.concat(So(t.serverSyncTree_,n[o].currentWriteId,!0)),n[o].onComplete&&r.push(n[o].onComplete.bind(null,new Error("set"),!1,null))));s===-1?wD(e,void 0):n.length=s+1,Li(t.eventQueue_,ih(e),i);for(let o=0;o<r.length;o++)Vl(r[o])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nz(t){let e="";const n=t.split("/");for(let r=0;r<n.length;r++)if(n[r].length>0){let i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}e+="/"+i}return e}function Dz(t){const e={};t.charAt(0)==="?"&&(t=t.substring(1));for(const n of t.split("&")){if(n.length===0)continue;const r=n.split("=");r.length===2?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):nr(`Invalid query segment '${n}' in query '${t}'`)}return e}const kE=function(t,e){const n=bz(t),r=n.namespace;n.domain==="firebase.com"&&Pi(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||r==="undefined")&&n.domain!=="localhost"&&Pi("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||oW();const i=n.scheme==="ws"||n.scheme==="wss";return{repoInfo:new ON(n.host,n.secure,r,i,e,"",r!==n.subdomain),path:new st(n.pathString)}},bz=function(t){let e="",n="",r="",i="",s="",o=!0,a="https",u=443;if(typeof t=="string"){let c=t.indexOf("//");c>=0&&(a=t.substring(0,c-1),t=t.substring(c+2));let d=t.indexOf("/");d===-1&&(d=t.length);let f=t.indexOf("?");f===-1&&(f=t.length),e=t.substring(0,Math.min(d,f)),d<f&&(i=Nz(t.substring(d,f)));const g=Dz(t.substring(Math.min(t.length,f)));c=e.indexOf(":"),c>=0?(o=a==="https"||a==="wss",u=parseInt(e.substring(c+1),10)):c=e.length;const v=e.slice(0,c);if(v.toLowerCase()==="localhost")n="localhost";else if(v.split(".").length<=2)n=v;else{const _=e.indexOf(".");r=e.substring(0,_).toLowerCase(),n=e.substring(_+1),s=r}"ns"in g&&(s=g.ns)}return{host:e,port:u,domain:n,subdomain:r,secure:o,scheme:a,pathString:i,namespace:s}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dw{constructor(e,n,r,i){this._repo=e,this._path=n,this._queryParams=r,this._orderByCalled=i}get key(){return Ae(this._path)?null:WN(this._path)}get ref(){return new sa(this._repo,this._path)}get _queryIdentifier(){const e=cE(this._queryParams),n=j_(e);return n==="{}"?"default":n}get _queryObject(){return cE(this._queryParams)}isEqual(e){if(e=ne(e),!(e instanceof dw))return!1;const n=this._repo===e._repo,r=qN(this._path,e._path),i=this._queryIdentifier===e._queryIdentifier;return n&&r&&i}toJSON(){return this.toString()}toString(){return this._repo.toString()+WW(this._path)}}class sa extends dw{constructor(e,n){super(e,n,new K_,!1)}get parent(){const e=zN(this._path);return e===null?null:new sa(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}}function Az(t,e){return t=ne(t),t._checkNotDeleted("ref"),e!==void 0?Rz(t._root,e):t._root}function Rz(t,e){return t=ne(t),ke(t._path)===null?uz("child","path",e,!1):kD("child","path",e,!1),new sa(t._repo,$t(t._path,e))}function xz(t,e){t=ne(t),cz("set",t._path),lz("set",e,t._path,!1);const n=new mp;return Iz(t._repo,t._path,e,null,n.wrapCallback(()=>{})),n.promise}Hj(sa);Yj(sa);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oz="FIREBASE_DATABASE_EMULATOR_HOST",Xy={};let Mz=!1;function Pz(t,e,n,r){t.repoInfo_=new ON(`${e}:${n}`,!1,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams,!0),r&&(t.authTokenProvider_=r)}function Lz(t,e,n,r,i){let s=r||t.options.databaseURL;s===void 0&&(t.options.projectId||Pi("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Tn("Using default host for project ",t.options.projectId),s=`${t.options.projectId}-default-rtdb.firebaseio.com`);let o=kE(s,i),a=o.repoInfo,u,c;typeof process<"u"&&process.env&&(c=process.env[Oz]),c?(u=!0,s=`http://${c}?ns=${a.namespace}`,o=kE(s,i),a=o.repoInfo):u=!o.repoInfo.secure;const d=i&&u?new tl(tl.OWNER):new gW(t.name,t.options,e);hz("Invalid Firebase Database URL",o),Ae(o.path)||Pi("Database URL must point to the root of a Firebase Database (not including a child path).");const f=Uz(a,t,d,new mW(t.name,n));return new $z(f,t)}function Fz(t,e){const n=Xy[e];(!n||n[t.key]!==t)&&Pi(`Database ${e}(${t.repoInfo_}) has already been deleted.`),Ez(t),delete n[t.key]}function Uz(t,e,n,r){let i=Xy[e.name];i||(i={},Xy[e.name]=i);let s=i[t.toURLString()];return s&&Pi("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),s=new yz(t,Mz,n,r),i[t.toURLString()]=s,s}class $z{constructor(e,n){this._repoInternal=e,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(vz(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new sa(this._repo,qe())),this._rootInternal}_delete(){return this._rootInternal!==null&&(Fz(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&Pi("Cannot call "+e+" on a deleted database.")}}function Vz(t=N_(),e){const n=Ol(t,"database").getImmediate({identifier:e});if(!n._instanceStarted){const r=iC("database");r&&Bz(n,...r)}return n}function Bz(t,e,n,r={}){t=ne(t),t._checkNotDeleted("useEmulator"),t._instanceStarted&&Pi("Cannot call useEmulator() after instance has already been initialized.");const i=t._repoInternal;let s;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&Pi('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),s=new tl(tl.OWNER);else if(r.mockUserToken){const o=typeof r.mockUserToken=="string"?r.mockUserToken:oC(r.mockUserToken,t.app.options.projectId);s=new tl(o)}Pz(i,e,n,s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wz(t){tW(Ml),Uo(new Rs("database",(e,{instanceIdentifier:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),s=e.getProvider("app-check-internal");return Lz(r,i,s,n)},"PUBLIC").setMultipleInstances(!0)),ni(GS,HS,t),ni(GS,HS,"esm2017")}Di.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)};Di.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};Wz();var Nt={};const jz=jT(eW);Object.defineProperty(Nt,"__esModule",{value:!0});var zt=jz,ce=Sn;/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function Bn(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(d){try{c(r.next(d))}catch(f){o(f)}}function u(d){try{c(r.throw(d))}catch(f){o(f)}}function c(d){d.done?s(d.value):i(d.value).then(a,u)}c((r=r.apply(t,e||[])).next())})}function Wn(t,e){var n={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},r,i,s,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(c){return function(d){return u([c,d])}}function u(c){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,i&&(s=c[0]&2?i.return:c[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,c[1])).done)return s;switch(i=0,s&&(c=[c[0]&2,s.value]),c[0]){case 0:case 1:s=c;break;case 4:return n.label++,{value:c[1],done:!1};case 5:n.label++,i=c[1],c=[0];continue;case 7:c=n.ops.pop(),n.trys.pop();continue;default:if(s=n.trys,!(s=s.length>0&&s[s.length-1])&&(c[0]===6||c[0]===2)){n=0;continue}if(c[0]===3&&(!s||c[1]>s[0]&&c[1]<s[3])){n.label=c[1];break}if(c[0]===6&&n.label<s[1]){n.label=s[1],s=c;break}if(s&&n.label<s[2]){n.label=s[2],n.ops.push(c);break}s[2]&&n.ops.pop(),n.trys.pop();continue}c=e.call(t,n)}catch(d){c=[6,d],i=0}finally{r=s=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var ja=function(){return ja=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},ja.apply(this,arguments)},OD=function(t){return{loading:t==null,value:t}},zz=function(){return function(t,e){switch(e.type){case"error":return ja(ja({},t),{error:e.error,loading:!1,value:void 0});case"reset":return OD(e.defaultValue);case"value":return ja(ja({},t),{error:void 0,loading:!1,value:e.value});default:return t}}},MD=function(t){var e=t?t():void 0,n=ce.useReducer(zz(),OD(e)),r=n[0],i=n[1],s=ce.useCallback(function(){var u=t?t():void 0;i({type:"reset",defaultValue:u})},[t]),o=ce.useCallback(function(u){i({type:"error",error:u})},[]),a=ce.useCallback(function(u){i({type:"value",value:u})},[]);return ce.useMemo(function(){return{error:r.error,loading:r.loading,reset:s,setError:o,setValue:a,value:r.value}},[r.error,r.loading,s,o,a,r.value])},qz=function(t,e){var n=MD(function(){return t.currentUser}),r=n.error,i=n.loading,s=n.setError,o=n.setValue,a=n.value;return ce.useEffect(function(){var u=zt.onAuthStateChanged(t,function(c){return Bn(void 0,void 0,void 0,function(){var d;return Wn(this,function(f){switch(f.label){case 0:if(!(e!=null&&e.onUserChanged))return[3,4];f.label=1;case 1:return f.trys.push([1,3,,4]),[4,e.onUserChanged(c)];case 2:return f.sent(),[3,4];case 3:return d=f.sent(),s(d),[3,4];case 4:return o(c),[2]}})})},s);return function(){u()}},[t]),[a,i,r]},Gz=function(t,e){var n=ce.useState(),r=n[0],i=n[1],s=ce.useState(),o=s[0],a=s[1],u=ce.useState(!1),c=u[0],d=u[1],f=ce.useCallback(function(g,v){return Bn(void 0,void 0,void 0,function(){var _,T;return Wn(this,function(C){switch(C.label){case 0:d(!0),i(void 0),C.label=1;case 1:return C.trys.push([1,5,6,7]),[4,zt.createUserWithEmailAndPassword(t,g,v)];case 2:return _=C.sent(),e&&e.sendEmailVerification&&_.user?[4,zt.sendEmailVerification(_.user,e.emailVerificationOptions)]:[3,4];case 3:C.sent(),C.label=4;case 4:return a(_),[2,_];case 5:return T=C.sent(),i(T),[3,7];case 6:return d(!1),[7];case 7:return[2]}})})},[t,e]);return[f,o,c,r]},Hz=function(t){var e=ce.useState(),n=e[0],r=e[1],i=ce.useState(!1),s=i[0],o=i[1],a=ce.useCallback(function(){return Bn(void 0,void 0,void 0,function(){var u;return Wn(this,function(c){switch(c.label){case 0:o(!0),r(void 0),c.label=1;case 1:return c.trys.push([1,5,6,7]),t.currentUser?[4,t.currentUser.delete()]:[3,3];case 2:return c.sent(),[2,!0];case 3:throw new Error("No user is logged in");case 4:return[3,7];case 5:return u=c.sent(),r(u),[2,!1];case 6:return o(!1),[7];case 7:return[2]}})})},[t]);return[a,s,n]},Yz=function(t){var e=ce.useState(),n=e[0],r=e[1],i=ce.useState(!1),s=i[0],o=i[1],a=ce.useCallback(function(){return Bn(void 0,void 0,void 0,function(){var u;return Wn(this,function(c){switch(c.label){case 0:o(!0),r(void 0),c.label=1;case 1:return c.trys.push([1,5,6,7]),t.currentUser?[4,zt.sendEmailVerification(t.currentUser)]:[3,3];case 2:return c.sent(),[2,!0];case 3:throw new Error("No user is logged in");case 4:return[3,7];case 5:return u=c.sent(),r(u),[2,!1];case 6:return o(!1),[7];case 7:return[2]}})})},[t]);return[a,s,n]},Kz=function(t){var e=ce.useState(),n=e[0],r=e[1],i=ce.useState(!1),s=i[0],o=i[1],a=ce.useCallback(function(u,c){return Bn(void 0,void 0,void 0,function(){var d;return Wn(this,function(f){switch(f.label){case 0:o(!0),r(void 0),f.label=1;case 1:return f.trys.push([1,3,4,5]),[4,zt.sendPasswordResetEmail(t,u,c)];case 2:return f.sent(),[2,!0];case 3:return d=f.sent(),r(d),[2,!1];case 4:return o(!1),[7];case 5:return[2]}})})},[t]);return[a,s,n]},Qz=function(t){var e=ce.useState(),n=e[0],r=e[1],i=ce.useState(!1),s=i[0],o=i[1],a=ce.useCallback(function(u,c){return Bn(void 0,void 0,void 0,function(){var d;return Wn(this,function(f){switch(f.label){case 0:o(!0),r(void 0),f.label=1;case 1:return f.trys.push([1,3,4,5]),[4,zt.sendSignInLinkToEmail(t,u,c)];case 2:return f.sent(),[2,!0];case 3:return d=f.sent(),r(d),[2,!1];case 4:return o(!1),[7];case 5:return[2]}})})},[t]);return[a,s,n]},Xz=function(t){var e=ce.useState(),n=e[0],r=e[1],i=ce.useState(),s=i[0],o=i[1],a=ce.useState(!1),u=a[0],c=a[1],d=ce.useCallback(function(f,g){return Bn(void 0,void 0,void 0,function(){var v,_;return Wn(this,function(T){switch(T.label){case 0:c(!0),r(void 0),T.label=1;case 1:return T.trys.push([1,3,4,5]),[4,zt.signInWithEmailAndPassword(t,f,g)];case 2:return v=T.sent(),o(v),[2,v];case 3:return _=T.sent(),r(_),[3,5];case 4:return c(!1),[7];case 5:return[2]}})})},[t]);return[d,s,u,n]},Jz=function(t){var e=ce.useState(),n=e[0],r=e[1],i=ce.useState(),s=i[0],o=i[1],a=ce.useState(!1),u=a[0],c=a[1],d=ce.useCallback(function(f,g){return Bn(void 0,void 0,void 0,function(){var v,_;return Wn(this,function(T){switch(T.label){case 0:c(!0),r(void 0),T.label=1;case 1:return T.trys.push([1,3,4,5]),[4,zt.signInWithEmailLink(t,f,g)];case 2:return v=T.sent(),o(v),[2,v];case 3:return _=T.sent(),r(_),[3,5];case 4:return c(!1),[7];case 5:return[2]}})})},[t]);return[d,s,u,n]},Zz=function(t){return fw(t,"apple.com")},e3=function(t){var e=ce.useCallback(function(n,r){var i=new zt.FacebookAuthProvider;return n&&n.forEach(function(s){return i.addScope(s)}),r&&i.setCustomParameters(r),i},[]);return sh(t,e)},t3=function(t){var e=ce.useCallback(function(n,r){var i=new zt.GithubAuthProvider;return n&&n.forEach(function(s){return i.addScope(s)}),r&&i.setCustomParameters(r),i},[]);return sh(t,e)},n3=function(t){var e=ce.useCallback(function(n,r){var i=new zt.GoogleAuthProvider;return n&&n.forEach(function(s){return i.addScope(s)}),r&&i.setCustomParameters(r),i},[]);return sh(t,e)},r3=function(t){return fw(t,"microsoft.com")},i3=function(t){var e=ce.useCallback(function(n,r){var i=new zt.TwitterAuthProvider;return n&&n.forEach(function(s){return i.addScope(s)}),r&&i.setCustomParameters(r),i},[]);return sh(t,e)},s3=function(t){return fw(t,"yahoo.com")},fw=function(t,e){var n=ce.useCallback(function(r,i){var s=new zt.OAuthProvider(e);return r&&r.forEach(function(o){return s.addScope(o)}),i&&s.setCustomParameters(i),s},[e]);return sh(t,n)},sh=function(t,e){var n=ce.useState(),r=n[0],i=n[1],s=ce.useState(),o=s[0],a=s[1],u=ce.useState(!1),c=u[0],d=u[1],f=ce.useCallback(function(g,v){return Bn(void 0,void 0,void 0,function(){var _,T,C;return Wn(this,function(I){switch(I.label){case 0:d(!0),i(void 0),I.label=1;case 1:return I.trys.push([1,3,4,5]),_=e(g,v),[4,zt.signInWithPopup(t,_)];case 2:return T=I.sent(),a(T),[2,T];case 3:return C=I.sent(),i(C),[3,5];case 4:return d(!1),[7];case 5:return[2]}})})},[t,e]);return[f,o,c,r]},o3=function(t){var e=ce.useState(),n=e[0],r=e[1],i=ce.useState(!1),s=i[0],o=i[1],a=ce.useCallback(function(){return Bn(void 0,void 0,void 0,function(){var u;return Wn(this,function(c){switch(c.label){case 0:o(!0),r(void 0),c.label=1;case 1:return c.trys.push([1,3,4,5]),[4,t.signOut()];case 2:return c.sent(),[2,!0];case 3:return u=c.sent(),r(u),[2,!1];case 4:return o(!1),[7];case 5:return[2]}})})},[t]);return[a,s,n]},a3=function(t){var e=ce.useState(),n=e[0],r=e[1],i=ce.useState(!1),s=i[0],o=i[1],a=ce.useCallback(function(u){return Bn(void 0,void 0,void 0,function(){var c;return Wn(this,function(d){switch(d.label){case 0:o(!0),r(void 0),d.label=1;case 1:return d.trys.push([1,5,6,7]),t.currentUser?[4,zt.updateEmail(t.currentUser,u)]:[3,3];case 2:return d.sent(),[2,!0];case 3:throw new Error("No user is logged in");case 4:return[3,7];case 5:return c=d.sent(),r(c),[2,!1];case 6:return o(!1),[7];case 7:return[2]}})})},[t]);return[a,s,n]},l3=function(t){var e=ce.useState(),n=e[0],r=e[1],i=ce.useState(!1),s=i[0],o=i[1],a=ce.useCallback(function(u){return Bn(void 0,void 0,void 0,function(){var c;return Wn(this,function(d){switch(d.label){case 0:o(!0),r(void 0),d.label=1;case 1:return d.trys.push([1,5,6,7]),t.currentUser?[4,zt.updatePassword(t.currentUser,u)]:[3,3];case 2:return d.sent(),[2,!0];case 3:throw new Error("No user is logged in");case 4:return[3,7];case 5:return c=d.sent(),r(c),[2,!1];case 6:return o(!1),[7];case 7:return[2]}})})},[t]);return[a,s,n]},u3=function(t){var e=ce.useState(),n=e[0],r=e[1],i=ce.useState(!1),s=i[0],o=i[1],a=ce.useCallback(function(u){return Bn(void 0,void 0,void 0,function(){var c;return Wn(this,function(d){switch(d.label){case 0:o(!0),r(void 0),d.label=1;case 1:return d.trys.push([1,5,6,7]),t.currentUser?[4,zt.updateProfile(t.currentUser,u)]:[3,3];case 2:return d.sent(),[2,!0];case 3:throw new Error("No user is logged in");case 4:return[3,7];case 5:return c=d.sent(),r(c),[2,!1];case 6:return o(!1),[7];case 7:return[2]}})})},[t]);return[a,s,n]},c3=function(t){var e=ce.useState(),n=e[0],r=e[1],i=ce.useState(!1),s=i[0],o=i[1],a=ce.useCallback(function(u,c){return Bn(void 0,void 0,void 0,function(){var d;return Wn(this,function(f){switch(f.label){case 0:o(!0),r(void 0),f.label=1;case 1:return f.trys.push([1,5,6,7]),t.currentUser?[4,zt.verifyBeforeUpdateEmail(t.currentUser,u,c)]:[3,3];case 2:return f.sent(),[2,!0];case 3:throw new Error("No user is logged in");case 4:return[3,7];case 5:return d=f.sent(),r(d),[2,!1];case 6:return o(!1),[7];case 7:return[2]}})})},[t]);return[a,s,n]},h3=function(t,e){var n=MD(function(){return t.currentUser}),r=n.error,i=n.loading,s=n.setError,o=n.setValue,a=n.value;return ce.useEffect(function(){var u=zt.onIdTokenChanged(t,function(c){return Bn(void 0,void 0,void 0,function(){var d;return Wn(this,function(f){switch(f.label){case 0:if(!(e!=null&&e.onUserChanged))return[3,4];f.label=1;case 1:return f.trys.push([1,3,,4]),[4,e.onUserChanged(c)];case 2:return f.sent(),[3,4];case 3:return d=f.sent(),s(d),[3,4];case 4:return o(c),[2]}})})},s);return function(){u()}},[t]),[a,i,r]},d3=Nt.useAuthState=qz;Nt.useCreateUserWithEmailAndPassword=Gz;Nt.useDeleteUser=Hz;Nt.useIdToken=h3;Nt.useSendEmailVerification=Yz;Nt.useSendPasswordResetEmail=Kz;Nt.useSendSignInLinkToEmail=Qz;Nt.useSignInWithApple=Zz;Nt.useSignInWithEmailAndPassword=Xz;Nt.useSignInWithEmailLink=Jz;Nt.useSignInWithFacebook=e3;Nt.useSignInWithGithub=t3;Nt.useSignInWithGoogle=n3;Nt.useSignInWithMicrosoft=r3;Nt.useSignInWithTwitter=i3;Nt.useSignInWithYahoo=s3;Nt.useSignOut=o3;Nt.useUpdateEmail=a3;Nt.useUpdatePassword=l3;Nt.useUpdateProfile=u3;Nt.useVerifyBeforeUpdateEmail=c3;var ji={},f3=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},oe,pw=pw||{},ye=f3||self;function xf(){}function Pp(t){var e=typeof t;return e=e!="object"?e:t?Array.isArray(t)?"array":e:"null",e=="array"||e=="object"&&typeof t.length=="number"}function oh(t){var e=typeof t;return e=="object"&&t!=null||e=="function"}function p3(t){return Object.prototype.hasOwnProperty.call(t,kg)&&t[kg]||(t[kg]=++m3)}var kg="closure_uid_"+(1e9*Math.random()>>>0),m3=0;function g3(t,e,n){return t.call.apply(t.bind,arguments)}function y3(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),t.apply(e,i)}}return function(){return t.apply(e,arguments)}}function Cn(t,e,n){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?Cn=g3:Cn=y3,Cn.apply(null,arguments)}function cd(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var r=n.slice();return r.push.apply(r,arguments),t.apply(this,r)}}function pn(t,e){function n(){}n.prototype=e.prototype,t.X=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.Wb=function(r,i,s){for(var o=Array(arguments.length-2),a=2;a<arguments.length;a++)o[a-2]=arguments[a];return e.prototype[i].apply(r,o)}}function zs(){this.s=this.s,this.o=this.o}var v3=0;zs.prototype.s=!1;zs.prototype.na=function(){!this.s&&(this.s=!0,this.M(),v3!=0)&&p3(this)};zs.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const PD=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if(typeof t=="string")return typeof e!="string"||e.length!=1?-1:t.indexOf(e,0);for(let n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1};function mw(t){const e=t.length;if(0<e){const n=Array(e);for(let r=0;r<e;r++)n[r]=t[r];return n}return[]}function CE(t,e){for(let n=1;n<arguments.length;n++){const r=arguments[n];if(Pp(r)){const i=t.length||0,s=r.length||0;t.length=i+s;for(let o=0;o<s;o++)t[i+o]=r[o]}else t.push(r)}}function Nn(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}Nn.prototype.h=function(){this.defaultPrevented=!0};var _3=function(){if(!ye.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{ye.addEventListener("test",xf,e),ye.removeEventListener("test",xf,e)}catch{}return t}();function Of(t){return/^[\s\xa0]*$/.test(t)}var NE=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function Cg(t,e){return t<e?-1:t>e?1:0}function Lp(){var t=ye.navigator;return t&&(t=t.userAgent)?t:""}function Kr(t){return Lp().indexOf(t)!=-1}function gw(t){return gw[" "](t),t}gw[" "]=xf;function w3(t){var e=E3;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=t(9)}var I3=Kr("Opera"),yl=Kr("Trident")||Kr("MSIE"),LD=Kr("Edge"),Jy=LD||yl,FD=Kr("Gecko")&&!(Lp().toLowerCase().indexOf("webkit")!=-1&&!Kr("Edge"))&&!(Kr("Trident")||Kr("MSIE"))&&!Kr("Edge"),S3=Lp().toLowerCase().indexOf("webkit")!=-1&&!Kr("Edge");function UD(){var t=ye.document;return t?t.documentMode:void 0}var Mf;e:{var Ng="",Dg=function(){var t=Lp();if(FD)return/rv:([^\);]+)(\)|;)/.exec(t);if(LD)return/Edge\/([\d\.]+)/.exec(t);if(yl)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t);if(S3)return/WebKit\/(\S+)/.exec(t);if(I3)return/(?:Version)[ \/]?(\S+)/.exec(t)}();if(Dg&&(Ng=Dg?Dg[1]:""),yl){var bg=UD();if(bg!=null&&bg>parseFloat(Ng)){Mf=String(bg);break e}}Mf=Ng}var E3={};function T3(){return w3(function(){let t=0;const e=NE(String(Mf)).split("."),n=NE("9").split("."),r=Math.max(e.length,n.length);for(let o=0;t==0&&o<r;o++){var i=e[o]||"",s=n[o]||"";do{if(i=/(\d*)(\D*)(.*)/.exec(i)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],i[0].length==0&&s[0].length==0)break;t=Cg(i[1].length==0?0:parseInt(i[1],10),s[1].length==0?0:parseInt(s[1],10))||Cg(i[2].length==0,s[2].length==0)||Cg(i[2],s[2]),i=i[3],s=s[3]}while(t==0)}return 0<=t})}var Zy;if(ye.document&&yl){var DE=UD();Zy=DE||parseInt(Mf,10)||void 0}else Zy=void 0;var k3=Zy;function Rc(t,e){if(Nn.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(FD){e:{try{gw(e.nodeName);var i=!0;break e}catch{}i=!1}i||(e=null)}}else n=="mouseover"?e=t.fromElement:n=="mouseout"&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=r.clientX!==void 0?r.clientX:r.pageX,this.clientY=r.clientY!==void 0?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=t.clientX!==void 0?t.clientX:t.pageX,this.clientY=t.clientY!==void 0?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType=typeof t.pointerType=="string"?t.pointerType:C3[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&Rc.X.h.call(this)}}pn(Rc,Nn);var C3={2:"touch",3:"pen",4:"mouse"};Rc.prototype.h=function(){Rc.X.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var ah="closure_listenable_"+(1e6*Math.random()|0),N3=0;function D3(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.ha=i,this.key=++N3,this.ba=this.ea=!1}function Fp(t){t.ba=!0,t.listener=null,t.proxy=null,t.src=null,t.ha=null}function yw(t,e,n){for(const r in t)e.call(n,t[r],r,t)}function $D(t){const e={};for(const n in t)e[n]=t[n];return e}const bE="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function VD(t,e){let n,r;for(let i=1;i<arguments.length;i++){r=arguments[i];for(n in r)t[n]=r[n];for(let s=0;s<bE.length;s++)n=bE[s],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function Up(t){this.src=t,this.g={},this.h=0}Up.prototype.add=function(t,e,n,r,i){var s=t.toString();t=this.g[s],t||(t=this.g[s]=[],this.h++);var o=tv(t,e,r,i);return-1<o?(e=t[o],n||(e.ea=!1)):(e=new D3(e,this.src,s,!!r,i),e.ea=n,t.push(e)),e};function ev(t,e){var n=e.type;if(n in t.g){var r=t.g[n],i=PD(r,e),s;(s=0<=i)&&Array.prototype.splice.call(r,i,1),s&&(Fp(e),t.g[n].length==0&&(delete t.g[n],t.h--))}}function tv(t,e,n,r){for(var i=0;i<t.length;++i){var s=t[i];if(!s.ba&&s.listener==e&&s.capture==!!n&&s.ha==r)return i}return-1}var vw="closure_lm_"+(1e6*Math.random()|0),Ag={};function BD(t,e,n,r,i){if(r&&r.once)return jD(t,e,n,r,i);if(Array.isArray(e)){for(var s=0;s<e.length;s++)BD(t,e[s],n,r,i);return null}return n=Iw(n),t&&t[ah]?t.N(e,n,oh(r)?!!r.capture:!!r,i):WD(t,e,n,!1,r,i)}function WD(t,e,n,r,i,s){if(!e)throw Error("Invalid event type");var o=oh(i)?!!i.capture:!!i,a=ww(t);if(a||(t[vw]=a=new Up(t)),n=a.add(e,n,r,o,s),n.proxy)return n;if(r=b3(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)_3||(i=o),i===void 0&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(qD(e.toString()),r);else if(t.addListener&&t.removeListener)t.addListener(r);else throw Error("addEventListener and attachEvent are unavailable.");return n}function b3(){function t(n){return e.call(t.src,t.listener,n)}const e=A3;return t}function jD(t,e,n,r,i){if(Array.isArray(e)){for(var s=0;s<e.length;s++)jD(t,e[s],n,r,i);return null}return n=Iw(n),t&&t[ah]?t.O(e,n,oh(r)?!!r.capture:!!r,i):WD(t,e,n,!0,r,i)}function zD(t,e,n,r,i){if(Array.isArray(e))for(var s=0;s<e.length;s++)zD(t,e[s],n,r,i);else r=oh(r)?!!r.capture:!!r,n=Iw(n),t&&t[ah]?(t=t.i,e=String(e).toString(),e in t.g&&(s=t.g[e],n=tv(s,n,r,i),-1<n&&(Fp(s[n]),Array.prototype.splice.call(s,n,1),s.length==0&&(delete t.g[e],t.h--)))):t&&(t=ww(t))&&(e=t.g[e.toString()],t=-1,e&&(t=tv(e,n,r,i)),(n=-1<t?e[t]:null)&&_w(n))}function _w(t){if(typeof t!="number"&&t&&!t.ba){var e=t.src;if(e&&e[ah])ev(e.i,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(qD(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=ww(e))?(ev(n,t),n.h==0&&(n.src=null,e[vw]=null)):Fp(t)}}}function qD(t){return t in Ag?Ag[t]:Ag[t]="on"+t}function A3(t,e){if(t.ba)t=!0;else{e=new Rc(e,this);var n=t.listener,r=t.ha||t.src;t.ea&&_w(t),t=n.call(r,e)}return t}function ww(t){return t=t[vw],t instanceof Up?t:null}var Rg="__closure_events_fn_"+(1e9*Math.random()>>>0);function Iw(t){return typeof t=="function"?t:(t[Rg]||(t[Rg]=function(e){return t.handleEvent(e)}),t[Rg])}function en(){zs.call(this),this.i=new Up(this),this.P=this,this.I=null}pn(en,zs);en.prototype[ah]=!0;en.prototype.removeEventListener=function(t,e,n,r){zD(this,t,e,n,r)};function dn(t,e){var n,r=t.I;if(r)for(n=[];r;r=r.I)n.push(r);if(t=t.P,r=e.type||e,typeof e=="string")e=new Nn(e,t);else if(e instanceof Nn)e.target=e.target||t;else{var i=e;e=new Nn(r,t),VD(e,i)}if(i=!0,n)for(var s=n.length-1;0<=s;s--){var o=e.g=n[s];i=hd(o,r,!0,e)&&i}if(o=e.g=t,i=hd(o,r,!0,e)&&i,i=hd(o,r,!1,e)&&i,n)for(s=0;s<n.length;s++)o=e.g=n[s],i=hd(o,r,!1,e)&&i}en.prototype.M=function(){if(en.X.M.call(this),this.i){var t=this.i,e;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)Fp(n[r]);delete t.g[e],t.h--}}this.I=null};en.prototype.N=function(t,e,n,r){return this.i.add(String(t),e,!1,n,r)};en.prototype.O=function(t,e,n,r){return this.i.add(String(t),e,!0,n,r)};function hd(t,e,n,r){if(e=t.i.g[String(e)],!e)return!0;e=e.concat();for(var i=!0,s=0;s<e.length;++s){var o=e[s];if(o&&!o.ba&&o.capture==n){var a=o.listener,u=o.ha||o.src;o.ea&&ev(t.i,o),i=a.call(u,r)!==!1&&i}}return i&&!r.defaultPrevented}var Sw=ye.JSON.stringify;function R3(){var t=YD;let e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}class x3{constructor(){this.h=this.g=null}add(e,n){const r=GD.get();r.set(e,n),this.h?this.h.next=r:this.g=r,this.h=r}}var GD=new class{constructor(t,e){this.i=t,this.j=e,this.h=0,this.g=null}get(){let t;return 0<this.h?(this.h--,t=this.g,this.g=t.next,t.next=null):t=this.i(),t}}(()=>new O3,t=>t.reset());class O3{constructor(){this.next=this.g=this.h=null}set(e,n){this.h=e,this.g=n,this.next=null}reset(){this.next=this.g=this.h=null}}function M3(t){ye.setTimeout(()=>{throw t},0)}function HD(t,e){nv||P3(),rv||(nv(),rv=!0),YD.add(t,e)}var nv;function P3(){var t=ye.Promise.resolve(void 0);nv=function(){t.then(L3)}}var rv=!1,YD=new x3;function L3(){for(var t;t=R3();){try{t.h.call(t.g)}catch(n){M3(n)}var e=GD;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}rv=!1}function $p(t,e){en.call(this),this.h=t||1,this.g=e||ye,this.j=Cn(this.lb,this),this.l=Date.now()}pn($p,en);oe=$p.prototype;oe.ca=!1;oe.R=null;oe.lb=function(){if(this.ca){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.R=this.g.setTimeout(this.j,this.h-t):(this.R&&(this.g.clearTimeout(this.R),this.R=null),dn(this,"tick"),this.ca&&(Ew(this),this.start()))}};oe.start=function(){this.ca=!0,this.R||(this.R=this.g.setTimeout(this.j,this.h),this.l=Date.now())};function Ew(t){t.ca=!1,t.R&&(t.g.clearTimeout(t.R),t.R=null)}oe.M=function(){$p.X.M.call(this),Ew(this),delete this.g};function Tw(t,e,n){if(typeof t=="function")n&&(t=Cn(t,n));else if(t&&typeof t.handleEvent=="function")t=Cn(t.handleEvent,t);else throw Error("Invalid listener argument");return 2147483647<Number(e)?-1:ye.setTimeout(t,e||0)}function KD(t){t.g=Tw(()=>{t.g=null,t.i&&(t.i=!1,KD(t))},t.j);const e=t.h;t.h=null,t.m.apply(null,e)}class F3 extends zs{constructor(e,n){super(),this.m=e,this.j=n,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:KD(this)}M(){super.M(),this.g&&(ye.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function xc(t){zs.call(this),this.h=t,this.g={}}pn(xc,zs);var AE=[];function QD(t,e,n,r){Array.isArray(n)||(n&&(AE[0]=n.toString()),n=AE);for(var i=0;i<n.length;i++){var s=BD(e,n[i],r||t.handleEvent,!1,t.h||t);if(!s)break;t.g[s.key]=s}}function XD(t){yw(t.g,function(e,n){this.g.hasOwnProperty(n)&&_w(e)},t),t.g={}}xc.prototype.M=function(){xc.X.M.call(this),XD(this)};xc.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};function Vp(){this.g=!0}Vp.prototype.Aa=function(){this.g=!1};function U3(t,e,n,r,i,s){t.info(function(){if(t.g)if(s)for(var o="",a=s.split("&"),u=0;u<a.length;u++){var c=a[u].split("=");if(1<c.length){var d=c[0];c=c[1];var f=d.split("_");o=2<=f.length&&f[1]=="type"?o+(d+"="+c+"&"):o+(d+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+`
`+n+`
`+o})}function $3(t,e,n,r,i,s,o){t.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+`
`+n+`
`+s+" "+o})}function za(t,e,n,r){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+B3(t,n)+(r?" "+r:"")})}function V3(t,e){t.info(function(){return"TIMEOUT: "+e})}Vp.prototype.info=function(){};function B3(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n){for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if(s!="noop"&&s!="stop"&&s!="close")for(var o=1;o<i.length;o++)i[o]=""}}}}return Sw(n)}catch{return e}}var oa={},RE=null;function Bp(){return RE=RE||new en}oa.Pa="serverreachability";function JD(t){Nn.call(this,oa.Pa,t)}pn(JD,Nn);function Oc(t){const e=Bp();dn(e,new JD(e))}oa.STAT_EVENT="statevent";function ZD(t,e){Nn.call(this,oa.STAT_EVENT,t),this.stat=e}pn(ZD,Nn);function Mn(t){const e=Bp();dn(e,new ZD(e,t))}oa.Qa="timingevent";function eb(t,e){Nn.call(this,oa.Qa,t),this.size=e}pn(eb,Nn);function lh(t,e){if(typeof t!="function")throw Error("Fn must not be null and must be a function");return ye.setTimeout(function(){t()},e)}var Wp={NO_ERROR:0,mb:1,zb:2,yb:3,tb:4,xb:5,Ab:6,Ma:7,TIMEOUT:8,Db:9},tb={rb:"complete",Nb:"success",Na:"error",Ma:"abort",Fb:"ready",Gb:"readystatechange",TIMEOUT:"timeout",Bb:"incrementaldata",Eb:"progress",ub:"downloadprogress",Vb:"uploadprogress"};function kw(){}kw.prototype.h=null;function xE(t){return t.h||(t.h=t.i())}function nb(){}var uh={OPEN:"a",qb:"b",Na:"c",Cb:"d"};function Cw(){Nn.call(this,"d")}pn(Cw,Nn);function Nw(){Nn.call(this,"c")}pn(Nw,Nn);var iv;function jp(){}pn(jp,kw);jp.prototype.g=function(){return new XMLHttpRequest};jp.prototype.i=function(){return{}};iv=new jp;function ch(t,e,n,r){this.l=t,this.j=e,this.m=n,this.U=r||1,this.S=new xc(this),this.O=W3,t=Jy?125:void 0,this.T=new $p(t),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.V=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.Y=-1,this.I=!1,this.N=0,this.L=null,this.$=this.J=this.Z=this.P=!1,this.h=new rb}function rb(){this.i=null,this.g="",this.h=!1}var W3=45e3,sv={},Pf={};oe=ch.prototype;oe.setTimeout=function(t){this.O=t};function ov(t,e,n){t.K=1,t.v=qp(Fi(e)),t.s=n,t.P=!0,ib(t,null)}function ib(t,e){t.F=Date.now(),hh(t),t.A=Fi(t.v);var n=t.A,r=t.U;Array.isArray(r)||(r=[String(r)]),db(n.i,"t",r),t.C=0,n=t.l.H,t.h=new rb,t.g=Ob(t.l,n?e:null,!t.s),0<t.N&&(t.L=new F3(Cn(t.La,t,t.g),t.N)),QD(t.S,t.g,"readystatechange",t.ib),e=t.H?$D(t.H):{},t.s?(t.u||(t.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.da(t.A,t.u,t.s,e)):(t.u="GET",t.g.da(t.A,t.u,null,e)),Oc(),U3(t.j,t.u,t.A,t.m,t.U,t.s)}oe.ib=function(t){t=t.target;const e=this.L;e&&ki(t)==3?e.l():this.La(t)};oe.La=function(t){try{if(t==this.g)e:{const d=ki(this.g);var e=this.g.Ea();const f=this.g.aa();if(!(3>d)&&(d!=3||Jy||this.g&&(this.h.h||this.g.fa()||LE(this.g)))){this.I||d!=4||e==7||(e==8||0>=f?Oc(3):Oc(2)),zp(this);var n=this.g.aa();this.Y=n;t:if(sb(this)){var r=LE(this.g);t="";var i=r.length,s=ki(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Eo(this),Zu(this);var o="";break t}this.h.i=new ye.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,t+=this.h.i.decode(r[e],{stream:s&&e==i-1});r.splice(0,i),this.h.g+=t,this.C=0,o=this.h.g}else o=this.g.fa();if(this.i=n==200,$3(this.j,this.u,this.A,this.m,this.U,d,n),this.i){if(this.Z&&!this.J){t:{if(this.g){var a,u=this.g;if((a=u.g?u.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Of(a)){var c=a;break t}}c=null}if(n=c)za(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,av(this,n);else{this.i=!1,this.o=3,Mn(12),Eo(this),Zu(this);break e}}this.P?(ob(this,d,o),Jy&&this.i&&d==3&&(QD(this.S,this.T,"tick",this.hb),this.T.start())):(za(this.j,this.m,o,null),av(this,o)),d==4&&Eo(this),this.i&&!this.I&&(d==4?bb(this.l,this):(this.i=!1,hh(this)))}else n==400&&0<o.indexOf("Unknown SID")?(this.o=3,Mn(12)):(this.o=0,Mn(13)),Eo(this),Zu(this)}}}catch{}finally{}};function sb(t){return t.g?t.u=="GET"&&t.K!=2&&t.l.Da:!1}function ob(t,e,n){let r=!0,i;for(;!t.I&&t.C<n.length;)if(i=j3(t,n),i==Pf){e==4&&(t.o=4,Mn(14),r=!1),za(t.j,t.m,null,"[Incomplete Response]");break}else if(i==sv){t.o=4,Mn(15),za(t.j,t.m,n,"[Invalid Chunk]"),r=!1;break}else za(t.j,t.m,i,null),av(t,i);sb(t)&&i!=Pf&&i!=sv&&(t.h.g="",t.C=0),e!=4||n.length!=0||t.h.h||(t.o=1,Mn(16),r=!1),t.i=t.i&&r,r?0<n.length&&!t.$&&(t.$=!0,e=t.l,e.g==t&&e.$&&!e.K&&(e.j.info("Great, no buffering proxy detected. Bytes received: "+n.length),Mw(e),e.K=!0,Mn(11))):(za(t.j,t.m,n,"[Invalid Chunked Response]"),Eo(t),Zu(t))}oe.hb=function(){if(this.g){var t=ki(this.g),e=this.g.fa();this.C<e.length&&(zp(this),ob(this,t,e),this.i&&t!=4&&hh(this))}};function j3(t,e){var n=t.C,r=e.indexOf(`
`,n);return r==-1?Pf:(n=Number(e.substring(n,r)),isNaN(n)?sv:(r+=1,r+n>e.length?Pf:(e=e.substr(r,n),t.C=r+n,e)))}oe.cancel=function(){this.I=!0,Eo(this)};function hh(t){t.V=Date.now()+t.O,ab(t,t.O)}function ab(t,e){if(t.B!=null)throw Error("WatchDog timer not null");t.B=lh(Cn(t.gb,t),e)}function zp(t){t.B&&(ye.clearTimeout(t.B),t.B=null)}oe.gb=function(){this.B=null;const t=Date.now();0<=t-this.V?(V3(this.j,this.A),this.K!=2&&(Oc(),Mn(17)),Eo(this),this.o=2,Zu(this)):ab(this,this.V-t)};function Zu(t){t.l.G==0||t.I||bb(t.l,t)}function Eo(t){zp(t);var e=t.L;e&&typeof e.na=="function"&&e.na(),t.L=null,Ew(t.T),XD(t.S),t.g&&(e=t.g,t.g=null,e.abort(),e.na())}function av(t,e){try{var n=t.l;if(n.G!=0&&(n.g==t||lv(n.h,t))){if(!t.J&&lv(n.h,t)&&n.G==3){try{var r=n.Fa.g.parse(e)}catch{r=null}if(Array.isArray(r)&&r.length==3){var i=r;if(i[0]==0){e:if(!n.u){if(n.g)if(n.g.F+3e3<t.F)Uf(n),Yp(n);else break e;Ow(n),Mn(18)}}else n.Ba=i[1],0<n.Ba-n.T&&37500>i[2]&&n.L&&n.A==0&&!n.v&&(n.v=lh(Cn(n.cb,n),6e3));if(1>=mb(n.h)&&n.ja){try{n.ja()}catch{}n.ja=void 0}}else To(n,11)}else if((t.J||n.g==t)&&Uf(n),!Of(e))for(i=n.Fa.g.parse(e),e=0;e<i.length;e++){let c=i[e];if(n.T=c[0],c=c[1],n.G==2)if(c[0]=="c"){n.I=c[1],n.ka=c[2];const d=c[3];d!=null&&(n.ma=d,n.j.info("VER="+n.ma));const f=c[4];f!=null&&(n.Ca=f,n.j.info("SVER="+n.Ca));const g=c[5];g!=null&&typeof g=="number"&&0<g&&(r=1.5*g,n.J=r,n.j.info("backChannelRequestTimeoutMs_="+r)),r=n;const v=t.g;if(v){const _=v.g?v.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(_){var s=r.h;s.g||_.indexOf("spdy")==-1&&_.indexOf("quic")==-1&&_.indexOf("h2")==-1||(s.j=s.l,s.g=new Set,s.h&&(Dw(s,s.h),s.h=null))}if(r.D){const T=v.g?v.g.getResponseHeader("X-HTTP-Session-Id"):null;T&&(r.za=T,dt(r.F,r.D,T))}}n.G=3,n.l&&n.l.xa(),n.$&&(n.P=Date.now()-t.F,n.j.info("Handshake RTT: "+n.P+"ms")),r=n;var o=t;if(r.sa=xb(r,r.H?r.ka:null,r.V),o.J){gb(r.h,o);var a=o,u=r.J;u&&a.setTimeout(u),a.B&&(zp(a),hh(a)),r.g=o}else Nb(r);0<n.i.length&&Kp(n)}else c[0]!="stop"&&c[0]!="close"||To(n,7);else n.G==3&&(c[0]=="stop"||c[0]=="close"?c[0]=="stop"?To(n,7):xw(n):c[0]!="noop"&&n.l&&n.l.wa(c),n.A=0)}}Oc(4)}catch{}}function z3(t){if(t.W&&typeof t.W=="function")return t.W();if(typeof Map<"u"&&t instanceof Map||typeof Set<"u"&&t instanceof Set)return Array.from(t.values());if(typeof t=="string")return t.split("");if(Pp(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}e=[],n=0;for(r in t)e[n++]=t[r];return e}function q3(t){if(t.oa&&typeof t.oa=="function")return t.oa();if(!t.W||typeof t.W!="function"){if(typeof Map<"u"&&t instanceof Map)return Array.from(t.keys());if(!(typeof Set<"u"&&t instanceof Set)){if(Pp(t)||typeof t=="string"){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}e=[],n=0;for(const r in t)e[n++]=r;return e}}}function lb(t,e){if(t.forEach&&typeof t.forEach=="function")t.forEach(e,void 0);else if(Pp(t)||typeof t=="string")Array.prototype.forEach.call(t,e,void 0);else for(var n=q3(t),r=z3(t),i=r.length,s=0;s<i;s++)e.call(void 0,r[s],n&&n[s],t)}var ub=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function G3(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var s=t[n].substring(0,r);i=t[n].substring(r+1)}else s=t[n];e(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}function Ao(t,e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,t instanceof Ao){this.h=e!==void 0?e:t.h,Lf(this,t.j),this.s=t.s,this.g=t.g,Ff(this,t.m),this.l=t.l,e=t.i;var n=new Mc;n.i=e.i,e.g&&(n.g=new Map(e.g),n.h=e.h),OE(this,n),this.o=t.o}else t&&(n=String(t).match(ub))?(this.h=!!e,Lf(this,n[1]||"",!0),this.s=Pu(n[2]||""),this.g=Pu(n[3]||"",!0),Ff(this,n[4]),this.l=Pu(n[5]||"",!0),OE(this,n[6]||"",!0),this.o=Pu(n[7]||"")):(this.h=!!e,this.i=new Mc(null,this.h))}Ao.prototype.toString=function(){var t=[],e=this.j;e&&t.push(Lu(e,ME,!0),":");var n=this.g;return(n||e=="file")&&(t.push("//"),(e=this.s)&&t.push(Lu(e,ME,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n=this.m,n!=null&&t.push(":",String(n))),(n=this.l)&&(this.g&&n.charAt(0)!="/"&&t.push("/"),t.push(Lu(n,n.charAt(0)=="/"?K3:Y3,!0))),(n=this.i.toString())&&t.push("?",n),(n=this.o)&&t.push("#",Lu(n,X3)),t.join("")};function Fi(t){return new Ao(t)}function Lf(t,e,n){t.j=n?Pu(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function Ff(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function OE(t,e,n){e instanceof Mc?(t.i=e,J3(t.i,t.h)):(n||(e=Lu(e,Q3)),t.i=new Mc(e,t.h))}function dt(t,e,n){t.i.set(e,n)}function qp(t){return dt(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function Pu(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function Lu(t,e,n){return typeof t=="string"?(t=encodeURI(t).replace(e,H3),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function H3(t){return t=t.charCodeAt(0),"%"+(t>>4&15).toString(16)+(t&15).toString(16)}var ME=/[#\/\?@]/g,Y3=/[#\?:]/g,K3=/[#\?]/g,Q3=/[#\?@]/g,X3=/#/g;function Mc(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function qs(t){t.g||(t.g=new Map,t.h=0,t.i&&G3(t.i,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}oe=Mc.prototype;oe.add=function(t,e){qs(this),this.i=null,t=Wl(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this};function cb(t,e){qs(t),e=Wl(t,e),t.g.has(e)&&(t.i=null,t.h-=t.g.get(e).length,t.g.delete(e))}function hb(t,e){return qs(t),e=Wl(t,e),t.g.has(e)}oe.forEach=function(t,e){qs(this),this.g.forEach(function(n,r){n.forEach(function(i){t.call(e,i,r,this)},this)},this)};oe.oa=function(){qs(this);const t=Array.from(this.g.values()),e=Array.from(this.g.keys()),n=[];for(let r=0;r<e.length;r++){const i=t[r];for(let s=0;s<i.length;s++)n.push(e[r])}return n};oe.W=function(t){qs(this);let e=[];if(typeof t=="string")hb(this,t)&&(e=e.concat(this.g.get(Wl(this,t))));else{t=Array.from(this.g.values());for(let n=0;n<t.length;n++)e=e.concat(t[n])}return e};oe.set=function(t,e){return qs(this),this.i=null,t=Wl(this,t),hb(this,t)&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this};oe.get=function(t,e){return t?(t=this.W(t),0<t.length?String(t[0]):e):e};function db(t,e,n){cb(t,e),0<n.length&&(t.i=null,t.g.set(Wl(t,e),mw(n)),t.h+=n.length)}oe.toString=function(){if(this.i)return this.i;if(!this.g)return"";const t=[],e=Array.from(this.g.keys());for(var n=0;n<e.length;n++){var r=e[n];const s=encodeURIComponent(String(r)),o=this.W(r);for(r=0;r<o.length;r++){var i=s;o[r]!==""&&(i+="="+encodeURIComponent(String(o[r]))),t.push(i)}}return this.i=t.join("&")};function Wl(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}function J3(t,e){e&&!t.j&&(qs(t),t.i=null,t.g.forEach(function(n,r){var i=r.toLowerCase();r!=i&&(cb(this,r),db(this,i,n))},t)),t.j=e}var Z3=class{constructor(e,n){this.h=e,this.g=n}};function fb(t){this.l=t||eq,ye.PerformanceNavigationTiming?(t=ye.performance.getEntriesByType("navigation"),t=0<t.length&&(t[0].nextHopProtocol=="hq"||t[0].nextHopProtocol=="h2")):t=!!(ye.g&&ye.g.Ga&&ye.g.Ga()&&ye.g.Ga().$b),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var eq=10;function pb(t){return t.h?!0:t.g?t.g.size>=t.j:!1}function mb(t){return t.h?1:t.g?t.g.size:0}function lv(t,e){return t.h?t.h==e:t.g?t.g.has(e):!1}function Dw(t,e){t.g?t.g.add(e):t.h=e}function gb(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}fb.prototype.cancel=function(){if(this.i=yb(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const t of this.g.values())t.cancel();this.g.clear()}};function yb(t){if(t.h!=null)return t.i.concat(t.h.D);if(t.g!=null&&t.g.size!==0){let e=t.i;for(const n of t.g.values())e=e.concat(n.D);return e}return mw(t.i)}function bw(){}bw.prototype.stringify=function(t){return ye.JSON.stringify(t,void 0)};bw.prototype.parse=function(t){return ye.JSON.parse(t,void 0)};function tq(){this.g=new bw}function nq(t,e,n){const r=n||"";try{lb(t,function(i,s){let o=i;oh(i)&&(o=Sw(i)),e.push(r+s+"="+encodeURIComponent(o))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function rq(t,e){const n=new Vp;if(ye.Image){const r=new Image;r.onload=cd(dd,n,r,"TestLoadImage: loaded",!0,e),r.onerror=cd(dd,n,r,"TestLoadImage: error",!1,e),r.onabort=cd(dd,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=cd(dd,n,r,"TestLoadImage: timeout",!1,e),ye.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=t}else e(!1)}function dd(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch{}}function dh(t){this.l=t.ac||null,this.j=t.jb||!1}pn(dh,kw);dh.prototype.g=function(){return new Gp(this.l,this.j)};dh.prototype.i=function(t){return function(){return t}}({});function Gp(t,e){en.call(this),this.D=t,this.u=e,this.m=void 0,this.readyState=Aw,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}pn(Gp,en);var Aw=0;oe=Gp.prototype;oe.open=function(t,e){if(this.readyState!=Aw)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,Pc(this)};oe.send=function(t){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.D||ye).fetch(new Request(this.B,e)).then(this.Wa.bind(this),this.ga.bind(this))};oe.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,fh(this)),this.readyState=Aw};oe.Wa=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,Pc(this)),this.g&&(this.readyState=3,Pc(this),this.g)))if(this.responseType==="arraybuffer")t.arrayBuffer().then(this.Ua.bind(this),this.ga.bind(this));else if(typeof ye.ReadableStream<"u"&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;vb(this)}else t.text().then(this.Va.bind(this),this.ga.bind(this))};function vb(t){t.j.read().then(t.Ta.bind(t)).catch(t.ga.bind(t))}oe.Ta=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?fh(this):Pc(this),this.readyState==3&&vb(this)}};oe.Va=function(t){this.g&&(this.response=this.responseText=t,fh(this))};oe.Ua=function(t){this.g&&(this.response=t,fh(this))};oe.ga=function(){this.g&&fh(this)};function fh(t){t.readyState=4,t.l=null,t.j=null,t.A=null,Pc(t)}oe.setRequestHeader=function(t,e){this.v.append(t,e)};oe.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""};oe.getAllResponseHeaders=function(){if(!this.h)return"";const t=[],e=this.h.entries();for(var n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join(`\r
`)};function Pc(t){t.onreadystatechange&&t.onreadystatechange.call(t)}Object.defineProperty(Gp.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(t){this.m=t?"include":"same-origin"}});var iq=ye.JSON.parse;function kt(t){en.call(this),this.headers=new Map,this.u=t||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=_b,this.K=this.L=!1}pn(kt,en);var _b="",sq=/^https?$/i,oq=["POST","PUT"];oe=kt.prototype;oe.Ka=function(t){this.L=t};oe.da=function(t,e,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+t);e=e?e.toUpperCase():"GET",this.H=t,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():iv.g(),this.C=this.u?xE(this.u):xE(iv),this.g.onreadystatechange=Cn(this.Ha,this);try{this.F=!0,this.g.open(e,String(t),!0),this.F=!1}catch(s){PE(this,s);return}if(t=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else if(typeof r.keys=="function"&&typeof r.get=="function")for(const s of r.keys())n.set(s,r.get(s));else throw Error("Unknown input type for opt_headers: "+String(r));r=Array.from(n.keys()).find(s=>s.toLowerCase()=="content-type"),i=ye.FormData&&t instanceof ye.FormData,!(0<=PD(oq,e))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[s,o]of n)this.g.setRequestHeader(s,o);this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{Sb(this),0<this.B&&((this.K=aq(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Cn(this.qa,this)):this.A=Tw(this.qa,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(s){PE(this,s)}};function aq(t){return yl&&T3()&&typeof t.timeout=="number"&&t.ontimeout!==void 0}oe.qa=function(){typeof pw<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,dn(this,"timeout"),this.abort(8))};function PE(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,wb(t),Hp(t)}function wb(t){t.D||(t.D=!0,dn(t,"complete"),dn(t,"error"))}oe.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,dn(this,"complete"),dn(this,"abort"),Hp(this))};oe.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Hp(this,!0)),kt.X.M.call(this)};oe.Ha=function(){this.s||(this.F||this.v||this.l?Ib(this):this.fb())};oe.fb=function(){Ib(this)};function Ib(t){if(t.h&&typeof pw<"u"&&(!t.C[1]||ki(t)!=4||t.aa()!=2)){if(t.v&&ki(t)==4)Tw(t.Ha,0,t);else if(dn(t,"readystatechange"),ki(t)==4){t.h=!1;try{const a=t.aa();e:switch(a){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var n;if(!(n=e)){var r;if(r=a===0){var i=String(t.H).match(ub)[1]||null;if(!i&&ye.self&&ye.self.location){var s=ye.self.location.protocol;i=s.substr(0,s.length-1)}r=!sq.test(i?i.toLowerCase():"")}n=r}if(n)dn(t,"complete"),dn(t,"success");else{t.m=6;try{var o=2<ki(t)?t.g.statusText:""}catch{o=""}t.j=o+" ["+t.aa()+"]",wb(t)}}finally{Hp(t)}}}}function Hp(t,e){if(t.g){Sb(t);const n=t.g,r=t.C[0]?xf:null;t.g=null,t.C=null,e||dn(t,"ready");try{n.onreadystatechange=r}catch{}}}function Sb(t){t.g&&t.K&&(t.g.ontimeout=null),t.A&&(ye.clearTimeout(t.A),t.A=null)}function ki(t){return t.g?t.g.readyState:0}oe.aa=function(){try{return 2<ki(this)?this.g.status:-1}catch{return-1}};oe.fa=function(){try{return this.g?this.g.responseText:""}catch{return""}};oe.Sa=function(t){if(this.g){var e=this.g.responseText;return t&&e.indexOf(t)==0&&(e=e.substring(t.length)),iq(e)}};function LE(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.J){case _b:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch{return null}}oe.Ea=function(){return this.m};oe.Oa=function(){return typeof this.j=="string"?this.j:String(this.j)};function Eb(t){let e="";return yw(t,function(n,r){e+=r,e+=":",e+=n,e+=`\r
`}),e}function Rw(t,e,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=Eb(n),typeof t=="string"?n!=null&&encodeURIComponent(String(n)):dt(t,e,n))}function Iu(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function Tb(t){this.Ca=0,this.i=[],this.j=new Vp,this.ka=this.sa=this.F=this.V=this.g=this.za=this.D=this.ia=this.o=this.S=this.s=null,this.ab=this.U=0,this.Za=Iu("failFast",!1,t),this.L=this.v=this.u=this.m=this.l=null,this.Y=!0,this.pa=this.Ba=this.T=-1,this.Z=this.A=this.C=0,this.Xa=Iu("baseRetryDelayMs",5e3,t),this.bb=Iu("retryDelaySeedMs",1e4,t),this.$a=Iu("forwardChannelMaxRetries",2,t),this.ta=Iu("forwardChannelRequestTimeoutMs",2e4,t),this.ra=t&&t.xmlHttpFactory||void 0,this.Da=t&&t.Zb||!1,this.J=void 0,this.H=t&&t.supportsCrossDomainXhr||!1,this.I="",this.h=new fb(t&&t.concurrentRequestLimit),this.Fa=new tq,this.O=t&&t.fastHandshake||!1,this.N=t&&t.encodeInitMessageHeaders||!1,this.O&&this.N&&(this.N=!1),this.Ya=t&&t.Xb||!1,t&&t.Aa&&this.j.Aa(),t&&t.forceLongPolling&&(this.Y=!1),this.$=!this.O&&this.Y&&t&&t.detectBufferingProxy||!1,this.ja=void 0,this.P=0,this.K=!1,this.la=this.B=null}oe=Tb.prototype;oe.ma=8;oe.G=1;function xw(t){if(kb(t),t.G==3){var e=t.U++,n=Fi(t.F);dt(n,"SID",t.I),dt(n,"RID",e),dt(n,"TYPE","terminate"),ph(t,n),e=new ch(t,t.j,e,void 0),e.K=2,e.v=qp(Fi(n)),n=!1,ye.navigator&&ye.navigator.sendBeacon&&(n=ye.navigator.sendBeacon(e.v.toString(),"")),!n&&ye.Image&&(new Image().src=e.v,n=!0),n||(e.g=Ob(e.l,null),e.g.da(e.v)),e.F=Date.now(),hh(e)}Rb(t)}function Yp(t){t.g&&(Mw(t),t.g.cancel(),t.g=null)}function kb(t){Yp(t),t.u&&(ye.clearTimeout(t.u),t.u=null),Uf(t),t.h.cancel(),t.m&&(typeof t.m=="number"&&ye.clearTimeout(t.m),t.m=null)}function Kp(t){pb(t.h)||t.m||(t.m=!0,HD(t.Ja,t),t.C=0)}function lq(t,e){return mb(t.h)>=t.h.j-(t.m?1:0)?!1:t.m?(t.i=e.D.concat(t.i),!0):t.G==1||t.G==2||t.C>=(t.Za?0:t.$a)?!1:(t.m=lh(Cn(t.Ja,t,e),Ab(t,t.C)),t.C++,!0)}oe.Ja=function(t){if(this.m)if(this.m=null,this.G==1){if(!t){this.U=Math.floor(1e5*Math.random()),t=this.U++;const i=new ch(this,this.j,t,void 0);let s=this.s;if(this.S&&(s?(s=$D(s),VD(s,this.S)):s=this.S),this.o!==null||this.N||(i.H=s,s=null),this.O)e:{for(var e=0,n=0;n<this.i.length;n++){t:{var r=this.i[n];if("__data__"in r.g&&(r=r.g.__data__,typeof r=="string")){r=r.length;break t}r=void 0}if(r===void 0)break;if(e+=r,4096<e){e=n;break e}if(e===4096||n===this.i.length-1){e=n+1;break e}}e=1e3}else e=1e3;e=Cb(this,i,e),n=Fi(this.F),dt(n,"RID",t),dt(n,"CVER",22),this.D&&dt(n,"X-HTTP-Session-Id",this.D),ph(this,n),s&&(this.N?e="headers="+encodeURIComponent(String(Eb(s)))+"&"+e:this.o&&Rw(n,this.o,s)),Dw(this.h,i),this.Ya&&dt(n,"TYPE","init"),this.O?(dt(n,"$req",e),dt(n,"SID","null"),i.Z=!0,ov(i,n,null)):ov(i,n,e),this.G=2}}else this.G==3&&(t?FE(this,t):this.i.length==0||pb(this.h)||FE(this))};function FE(t,e){var n;e?n=e.m:n=t.U++;const r=Fi(t.F);dt(r,"SID",t.I),dt(r,"RID",n),dt(r,"AID",t.T),ph(t,r),t.o&&t.s&&Rw(r,t.o,t.s),n=new ch(t,t.j,n,t.C+1),t.o===null&&(n.H=t.s),e&&(t.i=e.D.concat(t.i)),e=Cb(t,n,1e3),n.setTimeout(Math.round(.5*t.ta)+Math.round(.5*t.ta*Math.random())),Dw(t.h,n),ov(n,r,e)}function ph(t,e){t.ia&&yw(t.ia,function(n,r){dt(e,r,n)}),t.l&&lb({},function(n,r){dt(e,r,n)})}function Cb(t,e,n){n=Math.min(t.i.length,n);var r=t.l?Cn(t.l.Ra,t.l,t):null;e:{var i=t.i;let s=-1;for(;;){const o=["count="+n];s==-1?0<n?(s=i[0].h,o.push("ofs="+s)):s=0:o.push("ofs="+s);let a=!0;for(let u=0;u<n;u++){let c=i[u].h;const d=i[u].g;if(c-=s,0>c)s=Math.max(0,i[u].h-100),a=!1;else try{nq(d,o,"req"+c+"_")}catch{r&&r(d)}}if(a){r=o.join("&");break e}}}return t=t.i.splice(0,n),e.D=t,r}function Nb(t){t.g||t.u||(t.Z=1,HD(t.Ia,t),t.A=0)}function Ow(t){return t.g||t.u||3<=t.A?!1:(t.Z++,t.u=lh(Cn(t.Ia,t),Ab(t,t.A)),t.A++,!0)}oe.Ia=function(){if(this.u=null,Db(this),this.$&&!(this.K||this.g==null||0>=this.P)){var t=2*this.P;this.j.info("BP detection timer enabled: "+t),this.B=lh(Cn(this.eb,this),t)}};oe.eb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.L=!1,this.K=!0,Mn(10),Yp(this),Db(this))};function Mw(t){t.B!=null&&(ye.clearTimeout(t.B),t.B=null)}function Db(t){t.g=new ch(t,t.j,"rpc",t.Z),t.o===null&&(t.g.H=t.s),t.g.N=0;var e=Fi(t.sa);dt(e,"RID","rpc"),dt(e,"SID",t.I),dt(e,"CI",t.L?"0":"1"),dt(e,"AID",t.T),dt(e,"TYPE","xmlhttp"),ph(t,e),t.o&&t.s&&Rw(e,t.o,t.s),t.J&&t.g.setTimeout(t.J);var n=t.g;t=t.ka,n.K=1,n.v=qp(Fi(e)),n.s=null,n.P=!0,ib(n,t)}oe.cb=function(){this.v!=null&&(this.v=null,Yp(this),Ow(this),Mn(19))};function Uf(t){t.v!=null&&(ye.clearTimeout(t.v),t.v=null)}function bb(t,e){var n=null;if(t.g==e){Uf(t),Mw(t),t.g=null;var r=2}else if(lv(t.h,e))n=e.D,gb(t.h,e),r=1;else return;if(t.G!=0){if(t.pa=e.Y,e.i)if(r==1){n=e.s?e.s.length:0,e=Date.now()-e.F;var i=t.C;r=Bp(),dn(r,new eb(r,n)),Kp(t)}else Nb(t);else if(i=e.o,i==3||i==0&&0<t.pa||!(r==1&&lq(t,e)||r==2&&Ow(t)))switch(n&&0<n.length&&(e=t.h,e.i=e.i.concat(n)),i){case 1:To(t,5);break;case 4:To(t,10);break;case 3:To(t,6);break;default:To(t,2)}}}function Ab(t,e){let n=t.Xa+Math.floor(Math.random()*t.bb);return t.l||(n*=2),n*e}function To(t,e){if(t.j.info("Error code "+e),e==2){var n=null;t.l&&(n=null);var r=Cn(t.kb,t);n||(n=new Ao("//www.google.com/images/cleardot.gif"),ye.location&&ye.location.protocol=="http"||Lf(n,"https"),qp(n)),rq(n.toString(),r)}else Mn(2);t.G=0,t.l&&t.l.va(e),Rb(t),kb(t)}oe.kb=function(t){t?(this.j.info("Successfully pinged google.com"),Mn(2)):(this.j.info("Failed to ping google.com"),Mn(1))};function Rb(t){if(t.G=0,t.la=[],t.l){const e=yb(t.h);(e.length!=0||t.i.length!=0)&&(CE(t.la,e),CE(t.la,t.i),t.h.i.length=0,mw(t.i),t.i.length=0),t.l.ua()}}function xb(t,e,n){var r=n instanceof Ao?Fi(n):new Ao(n,void 0);if(r.g!="")e&&(r.g=e+"."+r.g),Ff(r,r.m);else{var i=ye.location;r=i.protocol,e=e?e+"."+i.hostname:i.hostname,i=+i.port;var s=new Ao(null,void 0);r&&Lf(s,r),e&&(s.g=e),i&&Ff(s,i),n&&(s.l=n),r=s}return n=t.D,e=t.za,n&&e&&dt(r,n,e),dt(r,"VER",t.ma),ph(t,r),r}function Ob(t,e,n){if(e&&!t.H)throw Error("Can't create secondary domain capable XhrIo object.");return e=n&&t.Da&&!t.ra?new kt(new dh({jb:!0})):new kt(t.ra),e.Ka(t.H),e}function Mb(){}oe=Mb.prototype;oe.xa=function(){};oe.wa=function(){};oe.va=function(){};oe.ua=function(){};oe.Ra=function(){};function $f(){if(yl&&!(10<=Number(k3)))throw Error("Environmental error: no available transport.")}$f.prototype.g=function(t,e){return new fr(t,e)};function fr(t,e){en.call(this),this.g=new Tb(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(t?t["X-WebChannel-Client-Profile"]=e.ya:t={"X-WebChannel-Client-Profile":e.ya}),this.g.S=t,(t=e&&e.Yb)&&!Of(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Of(e)&&(this.g.D=e,t=this.h,t!==null&&e in t&&(t=this.h,e in t&&delete t[e])),this.j=new jl(this)}pn(fr,en);fr.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.H=!0);var t=this.g,e=this.l,n=this.h||void 0;Mn(0),t.V=e,t.ia=n||{},t.L=t.Y,t.F=xb(t,null,t.V),Kp(t)};fr.prototype.close=function(){xw(this.g)};fr.prototype.u=function(t){var e=this.g;if(typeof t=="string"){var n={};n.__data__=t,t=n}else this.v&&(n={},n.__data__=Sw(t),t=n);e.i.push(new Z3(e.ab++,t)),e.G==3&&Kp(e)};fr.prototype.M=function(){this.g.l=null,delete this.j,xw(this.g),delete this.g,fr.X.M.call(this)};function Pb(t){Cw.call(this);var e=t.__sm__;if(e){e:{for(const n in e){t=n;break e}t=void 0}(this.i=t)&&(t=this.i,e=e!==null&&t in e?e[t]:void 0),this.data=e}else this.data=t}pn(Pb,Cw);function Lb(){Nw.call(this),this.status=1}pn(Lb,Nw);function jl(t){this.g=t}pn(jl,Mb);jl.prototype.xa=function(){dn(this.g,"a")};jl.prototype.wa=function(t){dn(this.g,new Pb(t))};jl.prototype.va=function(t){dn(this.g,new Lb)};jl.prototype.ua=function(){dn(this.g,"b")};$f.prototype.createWebChannel=$f.prototype.g;fr.prototype.send=fr.prototype.u;fr.prototype.open=fr.prototype.m;fr.prototype.close=fr.prototype.close;Wp.NO_ERROR=0;Wp.TIMEOUT=8;Wp.HTTP_ERROR=6;tb.COMPLETE="complete";nb.EventType=uh;uh.OPEN="a";uh.CLOSE="b";uh.ERROR="c";uh.MESSAGE="d";en.prototype.listen=en.prototype.N;kt.prototype.listenOnce=kt.prototype.O;kt.prototype.getLastError=kt.prototype.Oa;kt.prototype.getLastErrorCode=kt.prototype.Ea;kt.prototype.getStatus=kt.prototype.aa;kt.prototype.getResponseJson=kt.prototype.Sa;kt.prototype.getResponseText=kt.prototype.fa;kt.prototype.send=kt.prototype.da;kt.prototype.setWithCredentials=kt.prototype.Ka;var uq=function(){return new $f},cq=function(){return Bp()},xg=Wp,hq=tb,dq=oa,UE={sb:0,vb:1,wb:2,Pb:3,Ub:4,Rb:5,Sb:6,Qb:7,Ob:8,Tb:9,PROXY:10,NOPROXY:11,Mb:12,Ib:13,Jb:14,Hb:15,Kb:16,Lb:17,ob:18,nb:19,pb:20},fq=dh,fd=nb,pq=kt;const $E="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Jt.UNAUTHENTICATED=new Jt(null),Jt.GOOGLE_CREDENTIALS=new Jt("google-credentials-uid"),Jt.FIRST_PARTY=new Jt("first-party-uid"),Jt.MOCK_USER=new Jt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let zl="9.17.1";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Os=new yp("@firebase/firestore");function uv(){return Os.logLevel}function mq(t){Os.setLogLevel(t)}function F(t,...e){if(Os.logLevel<=Le.DEBUG){const n=e.map(Pw);Os.debug(`Firestore (${zl}): ${t}`,...n)}}function bt(t,...e){if(Os.logLevel<=Le.ERROR){const n=e.map(Pw);Os.error(`Firestore (${zl}): ${t}`,...n)}}function Wo(t,...e){if(Os.logLevel<=Le.WARN){const n=e.map(Pw);Os.warn(`Firestore (${zl}): ${t}`,...n)}}function Pw(t){if(typeof t=="string")return t;try{return e=t,JSON.stringify(e)}catch{return t}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ee(t="Unexpected state"){const e=`FIRESTORE (${zl}) INTERNAL ASSERTION FAILED: `+t;throw bt(e),new Error(e)}function ie(t,e){t||ee()}function gq(t,e){t||ee()}function H(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class M extends $i{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wt{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fb{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Ub{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Jt.UNAUTHENTICATED))}shutdown(){}}class yq{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class vq{constructor(e){this.t=e,this.currentUser=Jt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){let r=this.i;const i=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve();let s=new Wt;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Wt,e.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const u=s;e.enqueueRetryable(async()=>{await u.promise,await i(this.currentUser)})},a=u=>{F("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(u=>a(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?a(u):(F("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Wt)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(F("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ie(typeof r.accessToken=="string"),new Fb(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return ie(e===null||typeof e=="string"),new Jt(e)}}class _q{constructor(e,n,r,i){this.h=e,this.l=n,this.m=r,this.g=i,this.type="FirstParty",this.user=Jt.FIRST_PARTY,this.p=new Map}I(){return this.g?this.g():(ie(!(typeof this.h!="object"||this.h===null||!this.h.auth||!this.h.auth.getAuthHeaderValueForFirstParty)),this.h.auth.getAuthHeaderValueForFirstParty([]))}get headers(){this.p.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.p.set("Authorization",e),this.m&&this.p.set("X-Goog-Iam-Authorization-Token",this.m),this.p}}class wq{constructor(e,n,r,i){this.h=e,this.l=n,this.m=r,this.g=i}getToken(){return Promise.resolve(new _q(this.h,this.l,this.m,this.g))}start(e,n){e.enqueueRetryable(()=>n(Jt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class $b{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Iq{constructor(e){this.T=e,this.forceRefresh=!1,this.appCheck=null,this.A=null}start(e,n){const r=s=>{s.error!=null&&F("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.A;return this.A=s.token,F("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{F("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.T.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.T.getImmediate({optional:!0});s?i(s):F("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(ie(typeof n.token=="string"),this.A=n.token,new $b(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}class Sq{getToken(){return Promise.resolve(new $b(""))}invalidateToken(){}start(e,n){}shutdown(){}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Eq(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vb{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=Eq(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%e.length))}return r}}function ge(t,e){return t<e?-1:t>e?1:0}function vl(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}function Bb(t){return t+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pt{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new M(D.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new M(D.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new M(D.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new M(D.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return pt.fromMillis(Date.now())}static fromDate(e){return pt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new pt(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?ge(this.nanoseconds,e.nanoseconds):ge(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ae{constructor(e){this.timestamp=e}static fromTimestamp(e){return new ae(e)}static min(){return new ae(new pt(0,0))}static max(){return new ae(new pt(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lc{constructor(e,n,r){n===void 0?n=0:n>e.length&&ee(),r===void 0?r=e.length-n:r>e.length-n&&ee(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Lc.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Lc?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const s=e.get(i),o=n.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class Me extends Lc{construct(e,n,r){return new Me(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new M(D.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new Me(n)}static emptyPath(){return new Me([])}}const Tq=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Et extends Lc{construct(e,n,r){return new Et(e,n,r)}static isValidIdentifier(e){return Tq.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Et.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Et(["__name__"])}static fromServerFormat(e){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new M(D.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<e.length;){const a=e[i];if(a==="\\"){if(i+1===e.length)throw new M(D.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new M(D.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new M(D.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Et(n)}static emptyPath(){return new Et([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G{constructor(e){this.path=e}static fromPath(e){return new G(Me.fromString(e))}static fromName(e){return new G(Me.fromString(e).popFirst(5))}static empty(){return new G(Me.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Me.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Me.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new G(new Me(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vf{constructor(e,n,r,i){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=i}}function cv(t){return t.fields.find(e=>e.kind===2)}function ho(t){return t.fields.filter(e=>e.kind!==2)}function kq(t,e){let n=ge(t.collectionGroup,e.collectionGroup);if(n!==0)return n;for(let r=0;r<Math.min(t.fields.length,e.fields.length);++r)if(n=Cq(t.fields[r],e.fields[r]),n!==0)return n;return ge(t.fields.length,e.fields.length)}Vf.UNKNOWN_ID=-1;class Pd{constructor(e,n){this.fieldPath=e,this.kind=n}}function Cq(t,e){const n=Et.comparator(t.fieldPath,e.fieldPath);return n!==0?n:ge(t.kind,e.kind)}class Fc{constructor(e,n){this.sequenceNumber=e,this.offset=n}static empty(){return new Fc(0,pr.min())}}function Wb(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=ae.fromTimestamp(r===1e9?new pt(n+1,0):new pt(n,r));return new pr(i,G.empty(),e)}function jb(t){return new pr(t.readTime,t.key,-1)}class pr{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new pr(ae.min(),G.empty(),-1)}static max(){return new pr(ae.max(),G.empty(),-1)}}function Lw(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=G.comparator(t.documentKey,e.documentKey),n!==0?n:ge(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zb="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class qb{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Gs(t){if(t.code!==D.FAILED_PRECONDITION||t.message!==zb)throw t;F("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&ee(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new N((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof N?n:N.resolve(n)}catch(n){return N.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):N.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):N.reject(n)}static resolve(e){return new N((n,r)=>{n(e)})}static reject(e){return new N((n,r)=>{r(e)})}static waitFor(e){return new N((n,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&n()},u=>r(u))}),o=!0,s===i&&n()})}static or(e){let n=N.resolve(!1);for(const r of e)n=n.next(i=>i?N.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new N((r,i)=>{const s=e.length,o=new Array(s);let a=0;for(let u=0;u<s;u++){const c=u;n(e[c]).next(d=>{o[c]=d,++a,a===s&&r(o)},d=>i(d))}})}static doWhile(e,n){return new N((r,i)=>{const s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qp{constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.P=new Wt,this.transaction.oncomplete=()=>{this.P.resolve()},this.transaction.onabort=()=>{n.error?this.P.reject(new ec(e,n.error)):this.P.resolve()},this.transaction.onerror=r=>{const i=Fw(r.target.error);this.P.reject(new ec(e,i))}}static open(e,n,r,i){try{return new Qp(n,e.transaction(i,r))}catch(s){throw new ec(n,s)}}get v(){return this.P.promise}abort(e){e&&this.P.reject(e),this.aborted||(F("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}V(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const n=this.transaction.objectStore(e);return new Dq(n)}}class Lr{constructor(e,n,r){this.name=e,this.version=n,this.S=r,Lr.D(jt())===12.2&&bt("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return F("SimpleDb","Removing database:",e),fo(window.indexedDB.deleteDatabase(e)).toPromise()}static C(){if(!uC())return!1;if(Lr.N())return!0;const e=jt(),n=Lr.D(e),r=0<n&&n<10,i=Lr.k(e),s=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||s)}static N(){var e;return typeof process<"u"&&((e=process.env)===null||e===void 0?void 0:e.O)==="YES"}static M(e,n){return e.store(n)}static D(e){const n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static k(e){const n=e.match(/Android ([\d.]+)/i),r=n?n[1].split(".").slice(0,2).join("."):"-1";return Number(r)}async F(e){return this.db||(F("SimpleDb","Opening database:",this.name),this.db=await new Promise((n,r)=>{const i=indexedDB.open(this.name,this.version);i.onsuccess=s=>{const o=s.target.result;n(o)},i.onblocked=()=>{r(new ec(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=s=>{const o=s.target.error;o.name==="VersionError"?r(new M(D.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):o.name==="InvalidStateError"?r(new M(D.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+o)):r(new ec(e,o))},i.onupgradeneeded=s=>{F("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',s.oldVersion);const o=s.target.result;this.S.$(o,i.transaction,s.oldVersion,this.version).next(()=>{F("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.B&&(this.db.onversionchange=n=>this.B(n)),this.db}L(e){this.B=e,this.db&&(this.db.onversionchange=n=>e(n))}async runTransaction(e,n,r,i){const s=n==="readonly";let o=0;for(;;){++o;try{this.db=await this.F(e);const a=Qp.open(this.db,e,s?"readonly":"readwrite",r),u=i(a).next(c=>(a.V(),c)).catch(c=>(a.abort(c),N.reject(c))).toPromise();return u.catch(()=>{}),await a.v,u}catch(a){const u=a,c=u.name!=="FirebaseError"&&o<3;if(F("SimpleDb","Transaction failed with error:",u.message,"Retrying:",c),this.close(),!c)return Promise.reject(u)}}}close(){this.db&&this.db.close(),this.db=void 0}}class Nq{constructor(e){this.q=e,this.U=!1,this.K=null}get isDone(){return this.U}get G(){return this.K}set cursor(e){this.q=e}done(){this.U=!0}j(e){this.K=e}delete(){return fo(this.q.delete())}}class ec extends M{constructor(e,n){super(D.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${n}`),this.name="IndexedDbTransactionError"}}function Hs(t){return t.name==="IndexedDbTransactionError"}class Dq{constructor(e){this.store=e}put(e,n){let r;return n!==void 0?(F("SimpleDb","PUT",this.store.name,e,n),r=this.store.put(n,e)):(F("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),fo(r)}add(e){return F("SimpleDb","ADD",this.store.name,e,e),fo(this.store.add(e))}get(e){return fo(this.store.get(e)).next(n=>(n===void 0&&(n=null),F("SimpleDb","GET",this.store.name,e,n),n))}delete(e){return F("SimpleDb","DELETE",this.store.name,e),fo(this.store.delete(e))}count(){return F("SimpleDb","COUNT",this.store.name),fo(this.store.count())}W(e,n){const r=this.options(e,n);if(r.index||typeof this.store.getAll!="function"){const i=this.cursor(r),s=[];return this.H(i,(o,a)=>{s.push(a)}).next(()=>s)}{const i=this.store.getAll(r.range);return new N((s,o)=>{i.onerror=a=>{o(a.target.error)},i.onsuccess=a=>{s(a.target.result)}})}}J(e,n){const r=this.store.getAll(e,n===null?void 0:n);return new N((i,s)=>{r.onerror=o=>{s(o.target.error)},r.onsuccess=o=>{i(o.target.result)}})}Y(e,n){F("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,n);r.X=!1;const i=this.cursor(r);return this.H(i,(s,o,a)=>a.delete())}Z(e,n){let r;n?r=e:(r={},n=e);const i=this.cursor(r);return this.H(i,n)}tt(e){const n=this.cursor({});return new N((r,i)=>{n.onerror=s=>{const o=Fw(s.target.error);i(o)},n.onsuccess=s=>{const o=s.target.result;o?e(o.primaryKey,o.value).next(a=>{a?o.continue():r()}):r()}})}H(e,n){const r=[];return new N((i,s)=>{e.onerror=o=>{s(o.target.error)},e.onsuccess=o=>{const a=o.target.result;if(!a)return void i();const u=new Nq(a),c=n(a.primaryKey,a.value,u);if(c instanceof N){const d=c.catch(f=>(u.done(),N.reject(f)));r.push(d)}u.isDone?i():u.G===null?a.continue():a.continue(u.G)}}).next(()=>N.waitFor(r))}options(e,n){let r;return e!==void 0&&(typeof e=="string"?r=e:n=e),{index:r,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){const r=this.store.index(e.index);return e.X?r.openKeyCursor(e.range,n):r.openCursor(e.range,n)}return this.store.openCursor(e.range,n)}}function fo(t){return new N((e,n)=>{t.onsuccess=r=>{const i=r.target.result;e(i)},t.onerror=r=>{const i=Fw(r.target.error);n(i)}})}let VE=!1;function Fw(t){const e=Lr.D(jt());if(e>=12.2&&e<13){const n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){const r=new M("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return VE||(VE=!0,setTimeout(()=>{throw r},0)),r}}return t}class bq{constructor(e,n){this.asyncQueue=e,this.et=n,this.task=null}start(){this.nt(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}nt(e){F("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,async()=>{this.task=null;try{F("IndexBackiller",`Documents written: ${await this.et.st()}`)}catch(n){Hs(n)?F("IndexBackiller","Ignoring IndexedDB error during index backfill: ",n):await Gs(n)}await this.nt(6e4)})}}class Aq{constructor(e,n){this.localStore=e,this.persistence=n}async st(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",n=>this.it(n,e))}it(e,n){const r=new Set;let i=n,s=!0;return N.doWhile(()=>s===!0&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(o=>{if(o!==null&&!r.has(o))return F("IndexBackiller",`Processing collection: ${o}`),this.rt(e,o,i).next(a=>{i-=a,r.add(o)});s=!1})).next(()=>n-i)}rt(e,n,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,n).next(i=>this.localStore.localDocuments.getNextDocuments(e,n,i,r).next(s=>{const o=s.changes;return this.localStore.indexManager.updateIndexEntries(e,o).next(()=>this.ot(i,s)).next(a=>(F("IndexBackiller",`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,n,a))).next(()=>o.size)}))}ot(e,n){let r=e;return n.changes.forEach((i,s)=>{const o=jb(s);Lw(o,r)>0&&(r=o)}),new pr(r.readTime,r.documentKey,Math.max(n.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qn{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ut(r),this.ct=r=>n.writeSequenceNumber(r))}ut(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ct&&this.ct(e),e}}Qn.at=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rq{constructor(e,n,r,i,s,o,a,u){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.useFetchStreams=u}}class Ms{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new Ms("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Ms&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BE(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function aa(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function Gb(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mh(t){return t==null}function Uc(t){return t===0&&1/t==-1/0}function Hb(t){return typeof t=="number"&&Number.isInteger(t)&&!Uc(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xq(){return typeof atob<"u"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=atob(e);return new qt(n)}static fromUint8Array(e){const n=function(r){let i="";for(let s=0;s<r.length;++s)i+=String.fromCharCode(r[s]);return i}(e);return new qt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return e=this.binaryString,btoa(e);var e}toUint8Array(){return function(e){const n=new Uint8Array(e.length);for(let r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return n}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ge(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}qt.EMPTY_BYTE_STRING=new qt("");const Oq=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ps(t){if(ie(!!t),typeof t=="string"){let e=0;const n=Oq.exec(t);if(ie(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:St(t.seconds),nanos:St(t.nanos)}}function St(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function jo(t){return typeof t=="string"?qt.fromBase64String(t):qt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uw(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function Yb(t){const e=t.mapValue.fields.__previous_value__;return Uw(e)?Yb(e):e}function $c(t){const e=Ps(t.mapValue.fields.__local_write_time__.timestampValue);return new pt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ps={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Ld={nullValue:"NULL_VALUE"};function zo(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Uw(t)?4:Kb(t)?9007199254740991:10:ee()}function si(t,e){if(t===e)return!0;const n=zo(t);if(n!==zo(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return $c(t).isEqual($c(e));case 3:return function(r,i){if(typeof r.timestampValue=="string"&&typeof i.timestampValue=="string"&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;const s=Ps(r.timestampValue),o=Ps(i.timestampValue);return s.seconds===o.seconds&&s.nanos===o.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(r,i){return jo(r.bytesValue).isEqual(jo(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(r,i){return St(r.geoPointValue.latitude)===St(i.geoPointValue.latitude)&&St(r.geoPointValue.longitude)===St(i.geoPointValue.longitude)}(t,e);case 2:return function(r,i){if("integerValue"in r&&"integerValue"in i)return St(r.integerValue)===St(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){const s=St(r.doubleValue),o=St(i.doubleValue);return s===o?Uc(s)===Uc(o):isNaN(s)&&isNaN(o)}return!1}(t,e);case 9:return vl(t.arrayValue.values||[],e.arrayValue.values||[],si);case 10:return function(r,i){const s=r.mapValue.fields||{},o=i.mapValue.fields||{};if(BE(s)!==BE(o))return!1;for(const a in s)if(s.hasOwnProperty(a)&&(o[a]===void 0||!si(s[a],o[a])))return!1;return!0}(t,e);default:return ee()}}function Vc(t,e){return(t.values||[]).find(n=>si(n,e))!==void 0}function Ls(t,e){if(t===e)return 0;const n=zo(t),r=zo(e);if(n!==r)return ge(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return ge(t.booleanValue,e.booleanValue);case 2:return function(i,s){const o=St(i.integerValue||i.doubleValue),a=St(s.integerValue||s.doubleValue);return o<a?-1:o>a?1:o===a?0:isNaN(o)?isNaN(a)?0:-1:1}(t,e);case 3:return WE(t.timestampValue,e.timestampValue);case 4:return WE($c(t),$c(e));case 5:return ge(t.stringValue,e.stringValue);case 6:return function(i,s){const o=jo(i),a=jo(s);return o.compareTo(a)}(t.bytesValue,e.bytesValue);case 7:return function(i,s){const o=i.split("/"),a=s.split("/");for(let u=0;u<o.length&&u<a.length;u++){const c=ge(o[u],a[u]);if(c!==0)return c}return ge(o.length,a.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,s){const o=ge(St(i.latitude),St(s.latitude));return o!==0?o:ge(St(i.longitude),St(s.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(i,s){const o=i.values||[],a=s.values||[];for(let u=0;u<o.length&&u<a.length;++u){const c=Ls(o[u],a[u]);if(c)return c}return ge(o.length,a.length)}(t.arrayValue,e.arrayValue);case 10:return function(i,s){if(i===ps.mapValue&&s===ps.mapValue)return 0;if(i===ps.mapValue)return 1;if(s===ps.mapValue)return-1;const o=i.fields||{},a=Object.keys(o),u=s.fields||{},c=Object.keys(u);a.sort(),c.sort();for(let d=0;d<a.length&&d<c.length;++d){const f=ge(a[d],c[d]);if(f!==0)return f;const g=Ls(o[a[d]],u[c[d]]);if(g!==0)return g}return ge(a.length,c.length)}(t.mapValue,e.mapValue);default:throw ee()}}function WE(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return ge(t,e);const n=Ps(t),r=Ps(e),i=ge(n.seconds,r.seconds);return i!==0?i:ge(n.nanos,r.nanos)}function _l(t){return hv(t)}function hv(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(r){const i=Ps(r);return`time(${i.seconds},${i.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?jo(t.bytesValue).toBase64():"referenceValue"in t?(n=t.referenceValue,G.fromName(n).toString()):"geoPointValue"in t?`geo(${(e=t.geoPointValue).latitude},${e.longitude})`:"arrayValue"in t?function(r){let i="[",s=!0;for(const o of r.values||[])s?s=!1:i+=",",i+=hv(o);return i+"]"}(t.arrayValue):"mapValue"in t?function(r){const i=Object.keys(r.fields||{}).sort();let s="{",o=!0;for(const a of i)o?o=!1:s+=",",s+=`${a}:${hv(r.fields[a])}`;return s+"}"}(t.mapValue):ee();var e,n}function qo(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function dv(t){return!!t&&"integerValue"in t}function Bc(t){return!!t&&"arrayValue"in t}function jE(t){return!!t&&"nullValue"in t}function zE(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Fd(t){return!!t&&"mapValue"in t}function tc(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return aa(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=tc(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=tc(t.arrayValue.values[n]);return e}return Object.assign({},t)}function Kb(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}function Mq(t){return"nullValue"in t?Ld:"booleanValue"in t?{booleanValue:!1}:"integerValue"in t||"doubleValue"in t?{doubleValue:NaN}:"timestampValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in t?{stringValue:""}:"bytesValue"in t?{bytesValue:""}:"referenceValue"in t?qo(Ms.empty(),G.empty()):"geoPointValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in t?{arrayValue:{}}:"mapValue"in t?{mapValue:{}}:ee()}function Pq(t){return"nullValue"in t?{booleanValue:!1}:"booleanValue"in t?{doubleValue:NaN}:"integerValue"in t||"doubleValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in t?{stringValue:""}:"stringValue"in t?{bytesValue:""}:"bytesValue"in t?qo(Ms.empty(),G.empty()):"referenceValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in t?{arrayValue:{}}:"arrayValue"in t?{mapValue:{}}:"mapValue"in t?ps:ee()}function qE(t,e){const n=Ls(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?-1:!t.inclusive&&e.inclusive?1:0}function GE(t,e){const n=Ls(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?1:!t.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fs{constructor(e,n){this.position=e,this.inclusive=n}}function HE(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],o=t.position[i];if(s.field.isKeyField()?r=G.comparator(G.fromName(o.referenceValue),n.key):r=Ls(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function YE(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!si(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qb{}class Ce extends Qb{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new Lq(e,n,r):n==="array-contains"?new $q(e,r):n==="in"?new nA(e,r):n==="not-in"?new Vq(e,r):n==="array-contains-any"?new Bq(e,r):new Ce(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new Fq(e,r):new Uq(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Ls(n,this.value)):n!==null&&zo(this.value)===zo(n)&&this.matchesComparison(Ls(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ee()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class Be extends Qb{constructor(e,n){super(),this.filters=e,this.op=n,this.ht=null}static create(e,n){return new Be(e,n)}matches(e){return wl(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ht!==null||(this.ht=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ht}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.lt(n=>n.isInequality());return e!==null?e.field:null}lt(e){for(const n of this.getFlattenedFilters())if(e(n))return n;return null}}function wl(t){return t.op==="and"}function fv(t){return t.op==="or"}function $w(t){return Xb(t)&&wl(t)}function Xb(t){for(const e of t.filters)if(e instanceof Be)return!1;return!0}function pv(t){if(t instanceof Ce)return t.field.canonicalString()+t.op.toString()+_l(t.value);if($w(t))return t.filters.map(e=>pv(e)).join(",");{const e=t.filters.map(n=>pv(n)).join(",");return`${t.op}(${e})`}}function Jb(t,e){return t instanceof Ce?function(n,r){return r instanceof Ce&&n.op===r.op&&n.field.isEqual(r.field)&&si(n.value,r.value)}(t,e):t instanceof Be?function(n,r){return r instanceof Be&&n.op===r.op&&n.filters.length===r.filters.length?n.filters.reduce((i,s,o)=>i&&Jb(s,r.filters[o]),!0):!1}(t,e):void ee()}function Zb(t,e){const n=t.filters.concat(e);return Be.create(n,t.op)}function eA(t){return t instanceof Ce?function(e){return`${e.field.canonicalString()} ${e.op} ${_l(e.value)}`}(t):t instanceof Be?function(e){return e.op.toString()+" {"+e.getFilters().map(eA).join(" ,")+"}"}(t):"Filter"}class Lq extends Ce{constructor(e,n,r){super(e,n,r),this.key=G.fromName(r.referenceValue)}matches(e){const n=G.comparator(e.key,this.key);return this.matchesComparison(n)}}class Fq extends Ce{constructor(e,n){super(e,"in",n),this.keys=tA("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class Uq extends Ce{constructor(e,n){super(e,"not-in",n),this.keys=tA("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function tA(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>G.fromName(r.referenceValue))}class $q extends Ce{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Bc(n)&&Vc(n.arrayValue,this.value)}}class nA extends Ce{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Vc(this.value.arrayValue,n)}}class Vq extends Ce{constructor(e,n){super(e,"not-in",n)}matches(e){if(Vc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!Vc(this.value.arrayValue,n)}}class Bq extends Ce{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Bc(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Vc(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rl{constructor(e,n="asc"){this.field=e,this.dir=n}}function Wq(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ct{constructor(e,n){this.comparator=e,this.root=n||an.EMPTY}insert(e,n){return new Ct(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,an.BLACK,null,null))}remove(e){return new Ct(this.comparator,this.root.remove(e,this.comparator).copy(null,null,an.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new pd(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new pd(this.root,e,this.comparator,!1)}getReverseIterator(){return new pd(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new pd(this.root,e,this.comparator,!0)}}class pd{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class an{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??an.RED,this.left=i??an.EMPTY,this.right=s??an.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new an(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return an.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return an.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,an.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,an.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ee();const e=this.left.check();if(e!==this.right.check())throw ee();return e+(this.isRed()?0:1)}}an.EMPTY=null,an.RED=!0,an.BLACK=!1;an.EMPTY=new class{constructor(){this.size=0}get key(){throw ee()}get value(){throw ee()}get color(){throw ee()}get left(){throw ee()}get right(){throw ee()}copy(t,e,n,r,i){return this}insert(t,e,n){return new an(t,e)}remove(t,e){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ge{constructor(e){this.comparator=e,this.data=new Ct(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new KE(this.data.getIterator())}getIteratorFrom(e){return new KE(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Ge)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Ge(this.comparator);return n.data=e,n}}class KE{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function ka(t){return t.hasNext()?t.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xn{constructor(e){this.fields=e,e.sort(Et.comparator)}static empty(){return new Xn([])}unionWith(e){let n=new Ge(Et.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Xn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return vl(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cn{constructor(e){this.value=e}static empty(){return new cn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Fd(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=tc(n)}setAll(e){let n=Et.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const u=this.getFieldsMap(n);this.applyChanges(u,r,i),r={},i=[],n=a.popLast()}o?r[a.lastSegment()]=tc(o):i.push(a.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){const n=this.field(e.popLast());Fd(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return si(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];Fd(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){aa(n,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new cn(tc(this.value))}}function rA(t){const e=[];return aa(t.fields,(n,r)=>{const i=new Et([n]);if(Fd(r)){const s=rA(r.mapValue).fields;if(s.length===0)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new Xn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rt{constructor(e,n,r,i,s,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new rt(e,0,ae.min(),ae.min(),ae.min(),cn.empty(),0)}static newFoundDocument(e,n,r,i){return new rt(e,1,n,ae.min(),r,i,0)}static newNoDocument(e,n){return new rt(e,2,n,ae.min(),ae.min(),cn.empty(),0)}static newUnknownDocument(e,n){return new rt(e,3,n,ae.min(),ae.min(),cn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ae.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=cn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=cn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ae.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof rt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new rt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jq{constructor(e,n=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.ft=null}}function mv(t,e=null,n=[],r=[],i=null,s=null,o=null){return new jq(t,e,n,r,i,s,o)}function Go(t){const e=H(t);if(e.ft===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>pv(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),mh(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>_l(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>_l(r)).join(",")),e.ft=n}return e.ft}function gh(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!Wq(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!Jb(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!YE(t.startAt,e.startAt)&&YE(t.endAt,e.endAt)}function Bf(t){return G.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function Wf(t,e){return t.filters.filter(n=>n instanceof Ce&&n.field.isEqual(e))}function QE(t,e,n){let r=Ld,i=!0;for(const s of Wf(t,e)){let o=Ld,a=!0;switch(s.op){case"<":case"<=":o=Mq(s.value);break;case"==":case"in":case">=":o=s.value;break;case">":o=s.value,a=!1;break;case"!=":case"not-in":o=Ld}qE({value:r,inclusive:i},{value:o,inclusive:a})<0&&(r=o,i=a)}if(n!==null){for(let s=0;s<t.orderBy.length;++s)if(t.orderBy[s].field.isEqual(e)){const o=n.position[s];qE({value:r,inclusive:i},{value:o,inclusive:n.inclusive})<0&&(r=o,i=n.inclusive);break}}return{value:r,inclusive:i}}function XE(t,e,n){let r=ps,i=!0;for(const s of Wf(t,e)){let o=ps,a=!0;switch(s.op){case">=":case">":o=Pq(s.value),a=!1;break;case"==":case"in":case"<=":o=s.value;break;case"<":o=s.value,a=!1;break;case"!=":case"not-in":o=ps}GE({value:r,inclusive:i},{value:o,inclusive:a})>0&&(r=o,i=a)}if(n!==null){for(let s=0;s<t.orderBy.length;++s)if(t.orderBy[s].field.isEqual(e)){const o=n.position[s];GE({value:r,inclusive:i},{value:o,inclusive:n.inclusive})>0&&(r=o,i=n.inclusive);break}}return{value:r,inclusive:i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zi{constructor(e,n=null,r=[],i=[],s=null,o="F",a=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=u,this.dt=null,this._t=null,this.startAt,this.endAt}}function iA(t,e,n,r,i,s,o,a){return new zi(t,e,n,r,i,s,o,a)}function ql(t){return new zi(t)}function JE(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function Vw(t){return t.explicitOrderBy.length>0?t.explicitOrderBy[0].field:null}function Xp(t){for(const e of t.filters){const n=e.getFirstInequalityField();if(n!==null)return n}return null}function Bw(t){return t.collectionGroup!==null}function Ro(t){const e=H(t);if(e.dt===null){e.dt=[];const n=Xp(e),r=Vw(e);if(n!==null&&r===null)n.isKeyField()||e.dt.push(new rl(n)),e.dt.push(new rl(Et.keyField(),"asc"));else{let i=!1;for(const s of e.explicitOrderBy)e.dt.push(s),s.field.isKeyField()&&(i=!0);if(!i){const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.dt.push(new rl(Et.keyField(),s))}}}return e.dt}function Fn(t){const e=H(t);if(!e._t)if(e.limitType==="F")e._t=mv(e.path,e.collectionGroup,Ro(e),e.filters,e.limit,e.startAt,e.endAt);else{const n=[];for(const s of Ro(e)){const o=s.dir==="desc"?"asc":"desc";n.push(new rl(s.field,o))}const r=e.endAt?new Fs(e.endAt.position,e.endAt.inclusive):null,i=e.startAt?new Fs(e.startAt.position,e.startAt.inclusive):null;e._t=mv(e.path,e.collectionGroup,n,e.filters,e.limit,r,i)}return e._t}function gv(t,e){e.getFirstInequalityField(),Xp(t);const n=t.filters.concat([e]);return new zi(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function jf(t,e,n){return new zi(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function yh(t,e){return gh(Fn(t),Fn(e))&&t.limitType===e.limitType}function sA(t){return`${Go(Fn(t))}|lt:${t.limitType}`}function yv(t){return`Query(target=${function(e){let n=e.path.canonicalString();return e.collectionGroup!==null&&(n+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(n+=`, filters: [${e.filters.map(r=>eA(r)).join(", ")}]`),mh(e.limit)||(n+=", limit: "+e.limit),e.orderBy.length>0&&(n+=`, orderBy: [${e.orderBy.map(r=>function(i){return`${i.field.canonicalString()} (${i.dir})`}(r)).join(", ")}]`),e.startAt&&(n+=", startAt: ",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>_l(r)).join(",")),e.endAt&&(n+=", endAt: ",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>_l(r)).join(",")),`Target(${n})`}(Fn(t))}; limitType=${t.limitType})`}function vh(t,e){return e.isFoundDocument()&&function(n,r){const i=r.key.path;return n.collectionGroup!==null?r.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(i):G.isDocumentKey(n.path)?n.path.isEqual(i):n.path.isImmediateParentOf(i)}(t,e)&&function(n,r){for(const i of Ro(n))if(!i.field.isKeyField()&&r.data.field(i.field)===null)return!1;return!0}(t,e)&&function(n,r){for(const i of n.filters)if(!i.matches(r))return!1;return!0}(t,e)&&function(n,r){return!(n.startAt&&!function(i,s,o){const a=HE(i,s,o);return i.inclusive?a<=0:a<0}(n.startAt,Ro(n),r)||n.endAt&&!function(i,s,o){const a=HE(i,s,o);return i.inclusive?a>=0:a>0}(n.endAt,Ro(n),r))}(t,e)}function oA(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function aA(t){return(e,n)=>{let r=!1;for(const i of Ro(t)){const s=zq(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function zq(t,e,n){const r=t.field.isKeyField()?G.comparator(e.key,n.key):function(i,s,o){const a=s.data.field(i),u=o.data.field(i);return a!==null&&u!==null?Ls(a,u):ee()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return ee()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lA(t,e){if(t.wt){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Uc(e)?"-0":e}}function uA(t){return{integerValue:""+t}}function cA(t,e){return Hb(e)?uA(e):lA(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jp{constructor(){this._=void 0}}function qq(t,e,n){return t instanceof Il?function(r,i){const s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&(s.fields.__previous_value__=i),{mapValue:s}}(n,e):t instanceof Ho?dA(t,e):t instanceof Yo?fA(t,e):function(r,i){const s=hA(r,i),o=ZE(s)+ZE(r.gt);return dv(s)&&dv(r.gt)?uA(o):lA(r.yt,o)}(t,e)}function Gq(t,e,n){return t instanceof Ho?dA(t,e):t instanceof Yo?fA(t,e):n}function hA(t,e){return t instanceof Sl?dv(n=e)||function(r){return!!r&&"doubleValue"in r}(n)?e:{integerValue:0}:null;var n}class Il extends Jp{}class Ho extends Jp{constructor(e){super(),this.elements=e}}function dA(t,e){const n=pA(e);for(const r of t.elements)n.some(i=>si(i,r))||n.push(r);return{arrayValue:{values:n}}}class Yo extends Jp{constructor(e){super(),this.elements=e}}function fA(t,e){let n=pA(e);for(const r of t.elements)n=n.filter(i=>!si(i,r));return{arrayValue:{values:n}}}class Sl extends Jp{constructor(e,n){super(),this.yt=e,this.gt=n}}function ZE(t){return St(t.integerValue||t.doubleValue)}function pA(t){return Bc(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _h{constructor(e,n){this.field=e,this.transform=n}}function Hq(t,e){return t.field.isEqual(e.field)&&function(n,r){return n instanceof Ho&&r instanceof Ho||n instanceof Yo&&r instanceof Yo?vl(n.elements,r.elements,si):n instanceof Sl&&r instanceof Sl?si(n.gt,r.gt):n instanceof Il&&r instanceof Il}(t.transform,e.transform)}class Yq{constructor(e,n){this.version=e,this.transformResults=n}}class ft{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new ft}static exists(e){return new ft(void 0,e)}static updateTime(e){return new ft(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Ud(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Zp{}function mA(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Hl(t.key,ft.none()):new Gl(t.key,t.data,ft.none());{const n=t.data,r=cn.empty();let i=new Ge(Et.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new qi(t.key,r,new Xn(i.toArray()),ft.none())}}function Kq(t,e,n){t instanceof Gl?function(r,i,s){const o=r.value.clone(),a=tT(r.fieldTransforms,i,s.transformResults);o.setAll(a),i.convertToFoundDocument(s.version,o).setHasCommittedMutations()}(t,e,n):t instanceof qi?function(r,i,s){if(!Ud(r.precondition,i))return void i.convertToUnknownDocument(s.version);const o=tT(r.fieldTransforms,i,s.transformResults),a=i.data;a.setAll(gA(r)),a.setAll(o),i.convertToFoundDocument(s.version,a).setHasCommittedMutations()}(t,e,n):function(r,i,s){i.convertToNoDocument(s.version).setHasCommittedMutations()}(0,e,n)}function nc(t,e,n,r){return t instanceof Gl?function(i,s,o,a){if(!Ud(i.precondition,s))return o;const u=i.value.clone(),c=nT(i.fieldTransforms,a,s);return u.setAll(c),s.convertToFoundDocument(s.version,u).setHasLocalMutations(),null}(t,e,n,r):t instanceof qi?function(i,s,o,a){if(!Ud(i.precondition,s))return o;const u=nT(i.fieldTransforms,a,s),c=s.data;return c.setAll(gA(i)),c.setAll(u),s.convertToFoundDocument(s.version,c).setHasLocalMutations(),o===null?null:o.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(d=>d.field))}(t,e,n,r):function(i,s,o){return Ud(i.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):o}(t,e,n)}function Qq(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),s=hA(r.transform,i||null);s!=null&&(n===null&&(n=cn.empty()),n.set(r.field,s))}return n||null}function eT(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(n,r){return n===void 0&&r===void 0||!(!n||!r)&&vl(n,r,(i,s)=>Hq(i,s))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Gl extends Zp{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class qi extends Zp{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function gA(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function tT(t,e,n){const r=new Map;ie(t.length===n.length);for(let i=0;i<n.length;i++){const s=t[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,Gq(o,a,n[i]))}return r}function nT(t,e,n){const r=new Map;for(const i of t){const s=i.transform,o=n.data.field(i.field);r.set(i.field,qq(s,o,e))}return r}class Hl extends Zp{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Ww extends Zp{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xq{constructor(e){this.count=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var xt,xe;function yA(t){switch(t){default:return ee();case D.CANCELLED:case D.UNKNOWN:case D.DEADLINE_EXCEEDED:case D.RESOURCE_EXHAUSTED:case D.INTERNAL:case D.UNAVAILABLE:case D.UNAUTHENTICATED:return!1;case D.INVALID_ARGUMENT:case D.NOT_FOUND:case D.ALREADY_EXISTS:case D.PERMISSION_DENIED:case D.FAILED_PRECONDITION:case D.ABORTED:case D.OUT_OF_RANGE:case D.UNIMPLEMENTED:case D.DATA_LOSS:return!0}}function vA(t){if(t===void 0)return bt("GRPC error has no .code"),D.UNKNOWN;switch(t){case xt.OK:return D.OK;case xt.CANCELLED:return D.CANCELLED;case xt.UNKNOWN:return D.UNKNOWN;case xt.DEADLINE_EXCEEDED:return D.DEADLINE_EXCEEDED;case xt.RESOURCE_EXHAUSTED:return D.RESOURCE_EXHAUSTED;case xt.INTERNAL:return D.INTERNAL;case xt.UNAVAILABLE:return D.UNAVAILABLE;case xt.UNAUTHENTICATED:return D.UNAUTHENTICATED;case xt.INVALID_ARGUMENT:return D.INVALID_ARGUMENT;case xt.NOT_FOUND:return D.NOT_FOUND;case xt.ALREADY_EXISTS:return D.ALREADY_EXISTS;case xt.PERMISSION_DENIED:return D.PERMISSION_DENIED;case xt.FAILED_PRECONDITION:return D.FAILED_PRECONDITION;case xt.ABORTED:return D.ABORTED;case xt.OUT_OF_RANGE:return D.OUT_OF_RANGE;case xt.UNIMPLEMENTED:return D.UNIMPLEMENTED;case xt.DATA_LOSS:return D.DATA_LOSS;default:return ee()}}(xe=xt||(xt={}))[xe.OK=0]="OK",xe[xe.CANCELLED=1]="CANCELLED",xe[xe.UNKNOWN=2]="UNKNOWN",xe[xe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",xe[xe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",xe[xe.NOT_FOUND=5]="NOT_FOUND",xe[xe.ALREADY_EXISTS=6]="ALREADY_EXISTS",xe[xe.PERMISSION_DENIED=7]="PERMISSION_DENIED",xe[xe.UNAUTHENTICATED=16]="UNAUTHENTICATED",xe[xe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",xe[xe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",xe[xe.ABORTED=10]="ABORTED",xe[xe.OUT_OF_RANGE=11]="OUT_OF_RANGE",xe[xe.UNIMPLEMENTED=12]="UNIMPLEMENTED",xe[xe.INTERNAL=13]="INTERNAL",xe[xe.UNAVAILABLE=14]="UNAVAILABLE",xe[xe.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ys{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){aa(this.inner,(n,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return Gb(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jq=new Ct(G.comparator);function Jn(){return Jq}const _A=new Ct(G.comparator);function Fu(...t){let e=_A;for(const n of t)e=e.insert(n.key,n);return e}function wA(t){let e=_A;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Jr(){return rc()}function IA(){return rc()}function rc(){return new Ys(t=>t.toString(),(t,e)=>t.isEqual(e))}const Zq=new Ct(G.comparator),e4=new Ge(G.comparator);function Ie(...t){let e=e4;for(const n of t)e=e.add(n);return e}const t4=new Ge(ge);function em(){return t4}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wh{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,Ih.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new wh(ae.min(),i,em(),Jn(),Ie())}}class Ih{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Ih(r,n,Ie(),Ie(),Ie())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $d{constructor(e,n,r,i){this.It=e,this.removedTargetIds=n,this.key=r,this.Tt=i}}class SA{constructor(e,n){this.targetId=e,this.Et=n}}class EA{constructor(e,n,r=qt.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class rT{constructor(){this.At=0,this.Rt=sT(),this.bt=qt.EMPTY_BYTE_STRING,this.Pt=!1,this.vt=!0}get current(){return this.Pt}get resumeToken(){return this.bt}get Vt(){return this.At!==0}get St(){return this.vt}Dt(e){e.approximateByteSize()>0&&(this.vt=!0,this.bt=e)}Ct(){let e=Ie(),n=Ie(),r=Ie();return this.Rt.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:ee()}}),new Ih(this.bt,this.Pt,e,n,r)}xt(){this.vt=!1,this.Rt=sT()}Nt(e,n){this.vt=!0,this.Rt=this.Rt.insert(e,n)}kt(e){this.vt=!0,this.Rt=this.Rt.remove(e)}Ot(){this.At+=1}Mt(){this.At-=1}Ft(){this.vt=!0,this.Pt=!0}}class n4{constructor(e){this.$t=e,this.Bt=new Map,this.Lt=Jn(),this.qt=iT(),this.Ut=new Ge(ge)}Kt(e){for(const n of e.It)e.Tt&&e.Tt.isFoundDocument()?this.Gt(n,e.Tt):this.Qt(n,e.key,e.Tt);for(const n of e.removedTargetIds)this.Qt(n,e.key,e.Tt)}jt(e){this.forEachTarget(e,n=>{const r=this.Wt(n);switch(e.state){case 0:this.zt(n)&&r.Dt(e.resumeToken);break;case 1:r.Mt(),r.Vt||r.xt(),r.Dt(e.resumeToken);break;case 2:r.Mt(),r.Vt||this.removeTarget(n);break;case 3:this.zt(n)&&(r.Ft(),r.Dt(e.resumeToken));break;case 4:this.zt(n)&&(this.Ht(n),r.Dt(e.resumeToken));break;default:ee()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Bt.forEach((r,i)=>{this.zt(i)&&n(i)})}Jt(e){const n=e.targetId,r=e.Et.count,i=this.Yt(n);if(i){const s=i.target;if(Bf(s))if(r===0){const o=new G(s.path);this.Qt(n,o,rt.newNoDocument(o,ae.min()))}else ie(r===1);else this.Xt(n)!==r&&(this.Ht(n),this.Ut=this.Ut.add(n))}}Zt(e){const n=new Map;this.Bt.forEach((s,o)=>{const a=this.Yt(o);if(a){if(s.current&&Bf(a.target)){const u=new G(a.target.path);this.Lt.get(u)!==null||this.te(o,u)||this.Qt(o,u,rt.newNoDocument(u,e))}s.St&&(n.set(o,s.Ct()),s.xt())}});let r=Ie();this.qt.forEach((s,o)=>{let a=!0;o.forEachWhile(u=>{const c=this.Yt(u);return!c||c.purpose===2||(a=!1,!1)}),a&&(r=r.add(s))}),this.Lt.forEach((s,o)=>o.setReadTime(e));const i=new wh(e,n,this.Ut,this.Lt,r);return this.Lt=Jn(),this.qt=iT(),this.Ut=new Ge(ge),i}Gt(e,n){if(!this.zt(e))return;const r=this.te(e,n.key)?2:0;this.Wt(e).Nt(n.key,r),this.Lt=this.Lt.insert(n.key,n),this.qt=this.qt.insert(n.key,this.ee(n.key).add(e))}Qt(e,n,r){if(!this.zt(e))return;const i=this.Wt(e);this.te(e,n)?i.Nt(n,1):i.kt(n),this.qt=this.qt.insert(n,this.ee(n).delete(e)),r&&(this.Lt=this.Lt.insert(n,r))}removeTarget(e){this.Bt.delete(e)}Xt(e){const n=this.Wt(e).Ct();return this.$t.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ot(e){this.Wt(e).Ot()}Wt(e){let n=this.Bt.get(e);return n||(n=new rT,this.Bt.set(e,n)),n}ee(e){let n=this.qt.get(e);return n||(n=new Ge(ge),this.qt=this.qt.insert(e,n)),n}zt(e){const n=this.Yt(e)!==null;return n||F("WatchChangeAggregator","Detected inactive target",e),n}Yt(e){const n=this.Bt.get(e);return n&&n.Vt?null:this.$t.ne(e)}Ht(e){this.Bt.set(e,new rT),this.$t.getRemoteKeysForTarget(e).forEach(n=>{this.Qt(e,n,null)})}te(e,n){return this.$t.getRemoteKeysForTarget(e).has(n)}}function iT(){return new Ct(G.comparator)}function sT(){return new Ct(G.comparator)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r4=(()=>({asc:"ASCENDING",desc:"DESCENDING"}))(),i4=(()=>({"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"}))(),s4=(()=>({and:"AND",or:"OR"}))();class o4{constructor(e,n){this.databaseId=e,this.wt=n}}function El(t,e){return t.wt?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function TA(t,e){return t.wt?e.toBase64():e.toUint8Array()}function a4(t,e){return El(t,e.toTimestamp())}function At(t){return ie(!!t),ae.fromTimestamp(function(e){const n=Ps(e);return new pt(n.seconds,n.nanos)}(t))}function jw(t,e){return function(n){return new Me(["projects",n.projectId,"databases",n.database])}(t).child("documents").child(e).canonicalString()}function kA(t){const e=Me.fromString(t);return ie(OA(e)),e}function Wc(t,e){return jw(t.databaseId,e.path)}function ri(t,e){const n=kA(e);if(n.get(1)!==t.databaseId.projectId)throw new M(D.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new M(D.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new G(NA(n))}function vv(t,e){return jw(t.databaseId,e)}function CA(t){const e=kA(t);return e.length===4?Me.emptyPath():NA(e)}function jc(t){return new Me(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function NA(t){return ie(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function oT(t,e,n){return{name:Wc(t,e),fields:n.value.mapValue.fields}}function DA(t,e,n){const r=ri(t,e.name),i=At(e.updateTime),s=e.createTime?At(e.createTime):ae.min(),o=new cn({mapValue:{fields:e.fields}}),a=rt.newFoundDocument(r,i,s,o);return n&&a.setHasCommittedMutations(),n?a.setHasCommittedMutations():a}function l4(t,e){return"found"in e?function(n,r){ie(!!r.found),r.found.name,r.found.updateTime;const i=ri(n,r.found.name),s=At(r.found.updateTime),o=r.found.createTime?At(r.found.createTime):ae.min(),a=new cn({mapValue:{fields:r.found.fields}});return rt.newFoundDocument(i,s,o,a)}(t,e):"missing"in e?function(n,r){ie(!!r.missing),ie(!!r.readTime);const i=ri(n,r.missing),s=At(r.readTime);return rt.newNoDocument(i,s)}(t,e):ee()}function u4(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:ee()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(u,c){return u.wt?(ie(c===void 0||typeof c=="string"),qt.fromBase64String(c||"")):(ie(c===void 0||c instanceof Uint8Array),qt.fromUint8Array(c||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(u){const c=u.code===void 0?D.UNKNOWN:vA(u.code);return new M(c,u.message||"")}(o);n=new EA(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=ri(t,r.document.name),s=At(r.document.updateTime),o=r.document.createTime?At(r.document.createTime):ae.min(),a=new cn({mapValue:{fields:r.document.fields}}),u=rt.newFoundDocument(i,s,o,a),c=r.targetIds||[],d=r.removedTargetIds||[];n=new $d(c,d,u.key,u)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=ri(t,r.document),s=r.readTime?At(r.readTime):ae.min(),o=rt.newNoDocument(i,s),a=r.removedTargetIds||[];n=new $d([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=ri(t,r.document),s=r.removedTargetIds||[];n=new $d([],s,i,null)}else{if(!("filter"in e))return ee();{e.filter;const r=e.filter;r.targetId;const i=r.count||0,s=new Xq(i),o=r.targetId;n=new SA(o,s)}}return n}function zc(t,e){let n;if(e instanceof Gl)n={update:oT(t,e.key,e.value)};else if(e instanceof Hl)n={delete:Wc(t,e.key)};else if(e instanceof qi)n={update:oT(t,e.key,e.data),updateMask:m4(e.fieldMask)};else{if(!(e instanceof Ww))return ee();n={verify:Wc(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,s){const o=s.transform;if(o instanceof Il)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(o instanceof Ho)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:o.elements}};if(o instanceof Yo)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:o.elements}};if(o instanceof Sl)return{fieldPath:s.field.canonicalString(),increment:o.gt};throw ee()}(0,r))),e.precondition.isNone||(n.currentDocument=function(r,i){return i.updateTime!==void 0?{updateTime:a4(r,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:ee()}(t,e.precondition)),n}function _v(t,e){const n=e.currentDocument?function(i){return i.updateTime!==void 0?ft.updateTime(At(i.updateTime)):i.exists!==void 0?ft.exists(i.exists):ft.none()}(e.currentDocument):ft.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(s,o){let a=null;if("setToServerValue"in o)ie(o.setToServerValue==="REQUEST_TIME"),a=new Il;else if("appendMissingElements"in o){const c=o.appendMissingElements.values||[];a=new Ho(c)}else if("removeAllFromArray"in o){const c=o.removeAllFromArray.values||[];a=new Yo(c)}else"increment"in o?a=new Sl(s,o.increment):ee();const u=Et.fromServerFormat(o.fieldPath);return new _h(u,a)}(t,i)):[];if(e.update){e.update.name;const i=ri(t,e.update.name),s=new cn({mapValue:{fields:e.update.fields}});if(e.updateMask){const o=function(a){const u=a.fieldPaths||[];return new Xn(u.map(c=>Et.fromServerFormat(c)))}(e.updateMask);return new qi(i,s,o,n,r)}return new Gl(i,s,n,r)}if(e.delete){const i=ri(t,e.delete);return new Hl(i,n)}if(e.verify){const i=ri(t,e.verify);return new Ww(i,n)}return ee()}function c4(t,e){return t&&t.length>0?(ie(e!==void 0),t.map(n=>function(r,i){let s=r.updateTime?At(r.updateTime):At(i);return s.isEqual(ae.min())&&(s=At(i)),new Yq(s,r.transformResults||[])}(n,e))):[]}function bA(t,e){return{documents:[vv(t,e.path)]}}function zw(t,e){const n={structuredQuery:{}},r=e.path;e.collectionGroup!==null?(n.parent=vv(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=vv(t,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(u){if(u.length!==0)return xA(Be.create(u,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const s=function(u){if(u.length!==0)return u.map(c=>function(d){return{field:Na(d.field),direction:d4(d.dir)}}(c))}(e.orderBy);s&&(n.structuredQuery.orderBy=s);const o=function(u,c){return u.wt||mh(c)?c:{value:c}}(t,e.limit);var a;return o!==null&&(n.structuredQuery.limit=o),e.startAt&&(n.structuredQuery.startAt={before:(a=e.startAt).inclusive,values:a.position}),e.endAt&&(n.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(e.endAt)),n}function AA(t){let e=CA(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){ie(r===1);const d=n.from[0];d.allDescendants?i=d.collectionId:e=e.child(d.collectionId)}let s=[];n.where&&(s=function(d){const f=RA(d);return f instanceof Be&&$w(f)?f.getFilters():[f]}(n.where));let o=[];n.orderBy&&(o=n.orderBy.map(d=>function(f){return new rl(Da(f.field),function(g){switch(g){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(f.direction))}(d)));let a=null;n.limit&&(a=function(d){let f;return f=typeof d=="object"?d.value:d,mh(f)?null:f}(n.limit));let u=null;n.startAt&&(u=function(d){const f=!!d.before,g=d.values||[];return new Fs(g,f)}(n.startAt));let c=null;return n.endAt&&(c=function(d){const f=!d.before,g=d.values||[];return new Fs(g,f)}(n.endAt)),iA(e,i,o,s,a,"F",u,c)}function h4(t,e){const n=function(r,i){switch(i){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return ee()}}(0,e.purpose);return n==null?null:{"goog-listen-tags":n}}function RA(t){return t.unaryFilter!==void 0?function(e){switch(e.unaryFilter.op){case"IS_NAN":const n=Da(e.unaryFilter.field);return Ce.create(n,"==",{doubleValue:NaN});case"IS_NULL":const r=Da(e.unaryFilter.field);return Ce.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=Da(e.unaryFilter.field);return Ce.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const s=Da(e.unaryFilter.field);return Ce.create(s,"!=",{nullValue:"NULL_VALUE"});default:return ee()}}(t):t.fieldFilter!==void 0?function(e){return Ce.create(Da(e.fieldFilter.field),function(n){switch(n){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ee()}}(e.fieldFilter.op),e.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(e){return Be.create(e.compositeFilter.filters.map(n=>RA(n)),function(n){switch(n){case"AND":return"and";case"OR":return"or";default:return ee()}}(e.compositeFilter.op))}(t):ee()}function d4(t){return r4[t]}function f4(t){return i4[t]}function p4(t){return s4[t]}function Na(t){return{fieldPath:t.canonicalString()}}function Da(t){return Et.fromServerFormat(t.fieldPath)}function xA(t){return t instanceof Ce?function(e){if(e.op==="=="){if(zE(e.value))return{unaryFilter:{field:Na(e.field),op:"IS_NAN"}};if(jE(e.value))return{unaryFilter:{field:Na(e.field),op:"IS_NULL"}}}else if(e.op==="!="){if(zE(e.value))return{unaryFilter:{field:Na(e.field),op:"IS_NOT_NAN"}};if(jE(e.value))return{unaryFilter:{field:Na(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Na(e.field),op:f4(e.op),value:e.value}}}(t):t instanceof Be?function(e){const n=e.getFilters().map(r=>xA(r));return n.length===1?n[0]:{compositeFilter:{op:p4(e.op),filters:n}}}(t):ee()}function m4(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function OA(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ln(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=aT(e)),e=g4(t.get(n),e);return aT(e)}function g4(t,e){let n=e;const r=t.length;for(let i=0;i<r;i++){const s=t.charAt(i);switch(s){case"\0":n+="";break;case"":n+="";break;default:n+=s}}return n}function aT(t){return t+""}function Zr(t){const e=t.length;if(ie(e>=2),e===2)return ie(t.charAt(0)===""&&t.charAt(1)===""),Me.emptyPath();const n=e-2,r=[];let i="";for(let s=0;s<e;){const o=t.indexOf("",s);switch((o<0||o>n)&&ee(),t.charAt(o+1)){case"":const a=t.substring(s,o);let u;i.length===0?u=a:(i+=a,u=i,i=""),r.push(u);break;case"":i+=t.substring(s,o),i+="\0";break;case"":i+=t.substring(s,o+1);break;default:ee()}s=o+2}return new Me(r)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lT=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vd(t,e){return[t,Ln(e)]}function MA(t,e,n){return[t,Ln(e),n]}const y4={},v4=["prefixPath","collectionGroup","readTime","documentId"],_4=["prefixPath","collectionGroup","documentId"],w4=["collectionGroup","readTime","prefixPath","documentId"],I4=["canonicalId","targetId"],S4=["targetId","path"],E4=["path","targetId"],T4=["collectionId","parent"],k4=["indexId","uid"],C4=["uid","sequenceNumber"],N4=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],D4=["indexId","uid","orderedDocumentKey"],b4=["userId","collectionPath","documentId"],A4=["userId","collectionPath","largestBatchId"],R4=["userId","collectionGroup","largestBatchId"],PA=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],x4=[...PA,"documentOverlays"],LA=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],FA=LA,O4=[...FA,"indexConfiguration","indexState","indexEntries"];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wv extends qb{constructor(e,n){super(),this.se=e,this.currentSequenceNumber=n}}function rn(t,e){const n=H(t);return Lr.M(n.se,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qw{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&Kq(s,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=nc(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=nc(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=IA();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=n.has(i.key)?null:a;const u=mA(o,a);u!==null&&r.set(i.key,u),o.isValidDocument()||o.convertToNoDocument(ae.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Ie())}isEqual(e){return this.batchId===e.batchId&&vl(this.mutations,e.mutations,(n,r)=>eT(n,r))&&vl(this.baseMutations,e.baseMutations,(n,r)=>eT(n,r))}}class Gw{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){ie(e.mutations.length===r.length);let i=Zq;const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new Gw(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hw{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ds{constructor(e,n,r,i,s=ae.min(),o=ae.min(),a=qt.EMPTY_BYTE_STRING){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a}withSequenceNumber(e){return new Ds(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,n){return new Ds(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new Ds(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UA{constructor(e){this.ie=e}}function M4(t,e){let n;if(e.document)n=DA(t.ie,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=G.fromSegments(e.noDocument.path),i=Qo(e.noDocument.readTime);n=rt.newNoDocument(r,i),e.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!e.unknownDocument)return ee();{const r=G.fromSegments(e.unknownDocument.path),i=Qo(e.unknownDocument.version);n=rt.newUnknownDocument(r,i)}}return e.readTime&&n.setReadTime(function(r){const i=new pt(r[0],r[1]);return ae.fromTimestamp(i)}(e.readTime)),n}function uT(t,e){const n=e.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:zf(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=function(i,s){return{name:Wc(i,s.key),fields:s.data.value.mapValue.fields,updateTime:El(i,s.version.toTimestamp()),createTime:El(i,s.createTime.toTimestamp())}}(t.ie,e);else if(e.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:Ko(e.version)};else{if(!e.isUnknownDocument())return ee();r.unknownDocument={path:n.path.toArray(),version:Ko(e.version)}}return r}function zf(t){const e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function Ko(t){const e=t.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Qo(t){const e=new pt(t.seconds,t.nanoseconds);return ae.fromTimestamp(e)}function po(t,e){const n=(e.baseMutations||[]).map(s=>_v(t.ie,s));for(let s=0;s<e.mutations.length-1;++s){const o=e.mutations[s];if(s+1<e.mutations.length&&e.mutations[s+1].transform!==void 0){const a=e.mutations[s+1];o.updateTransforms=a.transform.fieldTransforms,e.mutations.splice(s+1,1),++s}}const r=e.mutations.map(s=>_v(t.ie,s)),i=pt.fromMillis(e.localWriteTimeMs);return new qw(e.batchId,i,n,r)}function Uu(t){const e=Qo(t.readTime),n=t.lastLimboFreeSnapshotVersion!==void 0?Qo(t.lastLimboFreeSnapshotVersion):ae.min();let r;var i;return t.query.documents!==void 0?(ie((i=t.query).documents.length===1),r=Fn(ql(CA(i.documents[0])))):r=function(s){return Fn(AA(s))}(t.query),new Ds(r,t.targetId,0,t.lastListenSequenceNumber,e,n,qt.fromBase64String(t.resumeToken))}function $A(t,e){const n=Ko(e.snapshotVersion),r=Ko(e.lastLimboFreeSnapshotVersion);let i;i=Bf(e.target)?bA(t.ie,e.target):zw(t.ie,e.target);const s=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Go(e.target),readTime:n,resumeToken:s,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function Yw(t){const e=AA({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?jf(e,e.limit,"L"):e}function Og(t,e){return new Hw(e.largestBatchId,_v(t.ie,e.overlayMutation))}function cT(t,e){const n=e.path.lastSegment();return[t,Ln(e.path.popLast()),n]}function hT(t,e,n,r){return{indexId:t,uid:e.uid||"",sequenceNumber:n,readTime:Ko(r.readTime),documentKey:Ln(r.documentKey.path),largestBatchId:r.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P4{getBundleMetadata(e,n){return dT(e).get(n).next(r=>{if(r)return{id:(i=r).bundleId,createTime:Qo(i.createTime),version:i.version};var i})}saveBundleMetadata(e,n){return dT(e).put({bundleId:(r=n).id,createTime:Ko(At(r.createTime)),version:r.version});var r}getNamedQuery(e,n){return fT(e).get(n).next(r=>{if(r)return{name:(i=r).name,query:Yw(i.bundledQuery),readTime:Qo(i.readTime)};var i})}saveNamedQuery(e,n){return fT(e).put(function(r){return{name:r.name,readTime:Ko(At(r.readTime)),bundledQuery:r.bundledQuery}}(n))}}function dT(t){return rn(t,"bundles")}function fT(t){return rn(t,"namedQueries")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tm{constructor(e,n){this.yt=e,this.userId=n}static re(e,n){const r=n.uid||"";return new tm(e,r)}getOverlay(e,n){return Su(e).get(cT(this.userId,n)).next(r=>r?Og(this.yt,r):null)}getOverlays(e,n){const r=Jr();return N.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){const i=[];return r.forEach((s,o)=>{const a=new Hw(n,o);i.push(this.oe(e,a))}),N.waitFor(i)}removeOverlaysForBatchId(e,n,r){const i=new Set;n.forEach(o=>i.add(Ln(o.getCollectionPath())));const s=[];return i.forEach(o=>{const a=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,r+1],!1,!0);s.push(Su(e).Y("collectionPathOverlayIndex",a))}),N.waitFor(s)}getOverlaysForCollection(e,n,r){const i=Jr(),s=Ln(n),o=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,Number.POSITIVE_INFINITY],!0);return Su(e).W("collectionPathOverlayIndex",o).next(a=>{for(const u of a){const c=Og(this.yt,u);i.set(c.getKey(),c)}return i})}getOverlaysForCollectionGroup(e,n,r,i){const s=Jr();let o;const a=IDBKeyRange.bound([this.userId,n,r],[this.userId,n,Number.POSITIVE_INFINITY],!0);return Su(e).Z({index:"collectionGroupOverlayIndex",range:a},(u,c,d)=>{const f=Og(this.yt,c);s.size()<i||f.largestBatchId===o?(s.set(f.getKey(),f),o=f.largestBatchId):d.done()}).next(()=>s)}oe(e,n){return Su(e).put(function(r,i,s){const[o,a,u]=cT(i,s.mutation.key);return{userId:i,collectionPath:a,documentId:u,collectionGroup:s.mutation.key.getCollectionGroup(),largestBatchId:s.largestBatchId,overlayMutation:zc(r.ie,s.mutation)}}(this.yt,this.userId,n))}}function Su(t){return rn(t,"documentOverlays")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mo{constructor(){}ue(e,n){this.ce(e,n),n.ae()}ce(e,n){if("nullValue"in e)this.he(n,5);else if("booleanValue"in e)this.he(n,10),n.le(e.booleanValue?1:0);else if("integerValue"in e)this.he(n,15),n.le(St(e.integerValue));else if("doubleValue"in e){const r=St(e.doubleValue);isNaN(r)?this.he(n,13):(this.he(n,15),Uc(r)?n.le(0):n.le(r))}else if("timestampValue"in e){const r=e.timestampValue;this.he(n,20),typeof r=="string"?n.fe(r):(n.fe(`${r.seconds||""}`),n.le(r.nanos||0))}else if("stringValue"in e)this.de(e.stringValue,n),this._e(n);else if("bytesValue"in e)this.he(n,30),n.we(jo(e.bytesValue)),this._e(n);else if("referenceValue"in e)this.me(e.referenceValue,n);else if("geoPointValue"in e){const r=e.geoPointValue;this.he(n,45),n.le(r.latitude||0),n.le(r.longitude||0)}else"mapValue"in e?Kb(e)?this.he(n,Number.MAX_SAFE_INTEGER):(this.ge(e.mapValue,n),this._e(n)):"arrayValue"in e?(this.ye(e.arrayValue,n),this._e(n)):ee()}de(e,n){this.he(n,25),this.pe(e,n)}pe(e,n){n.fe(e)}ge(e,n){const r=e.fields||{};this.he(n,55);for(const i of Object.keys(r))this.de(i,n),this.ce(r[i],n)}ye(e,n){const r=e.values||[];this.he(n,50);for(const i of r)this.ce(i,n)}me(e,n){this.he(n,37),G.fromName(e).path.forEach(r=>{this.he(n,60),this.pe(r,n)})}he(e,n){e.le(n)}_e(e){e.le(2)}}mo.Ie=new mo;function L4(t){if(t===0)return 8;let e=0;return!(t>>4)&&(e+=4,t<<=4),!(t>>6)&&(e+=2,t<<=2),!(t>>7)&&(e+=1),e}function pT(t){const e=64-function(n){let r=0;for(let i=0;i<8;++i){const s=L4(255&n[i]);if(r+=s,s!==8)break}return r}(t);return Math.ceil(e/8)}class F4{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Te(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Ee(r.value),r=n.next();this.Ae()}Re(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.be(r.value),r=n.next();this.Pe()}ve(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Ee(r);else if(r<2048)this.Ee(960|r>>>6),this.Ee(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Ee(480|r>>>12),this.Ee(128|63&r>>>6),this.Ee(128|63&r);else{const i=n.codePointAt(0);this.Ee(240|i>>>18),this.Ee(128|63&i>>>12),this.Ee(128|63&i>>>6),this.Ee(128|63&i)}}this.Ae()}Ve(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.be(r);else if(r<2048)this.be(960|r>>>6),this.be(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.be(480|r>>>12),this.be(128|63&r>>>6),this.be(128|63&r);else{const i=n.codePointAt(0);this.be(240|i>>>18),this.be(128|63&i>>>12),this.be(128|63&i>>>6),this.be(128|63&i)}}this.Pe()}Se(e){const n=this.De(e),r=pT(n);this.Ce(1+r),this.buffer[this.position++]=255&r;for(let i=n.length-r;i<n.length;++i)this.buffer[this.position++]=255&n[i]}xe(e){const n=this.De(e),r=pT(n);this.Ce(1+r),this.buffer[this.position++]=~(255&r);for(let i=n.length-r;i<n.length;++i)this.buffer[this.position++]=~(255&n[i])}Ne(){this.ke(255),this.ke(255)}Oe(){this.Me(255),this.Me(255)}reset(){this.position=0}seed(e){this.Ce(e.length),this.buffer.set(e,this.position),this.position+=e.length}Fe(){return this.buffer.slice(0,this.position)}De(e){const n=function(i){const s=new DataView(new ArrayBuffer(8));return s.setFloat64(0,i,!1),new Uint8Array(s.buffer)}(e),r=(128&n[0])!=0;n[0]^=r?255:128;for(let i=1;i<n.length;++i)n[i]^=r?255:0;return n}Ee(e){const n=255&e;n===0?(this.ke(0),this.ke(255)):n===255?(this.ke(255),this.ke(0)):this.ke(n)}be(e){const n=255&e;n===0?(this.Me(0),this.Me(255)):n===255?(this.Me(255),this.Me(0)):this.Me(e)}Ae(){this.ke(0),this.ke(1)}Pe(){this.Me(0),this.Me(1)}ke(e){this.Ce(1),this.buffer[this.position++]=e}Me(e){this.Ce(1),this.buffer[this.position++]=~e}Ce(e){const n=e+this.position;if(n<=this.buffer.length)return;let r=2*this.buffer.length;r<n&&(r=n);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class U4{constructor(e){this.$e=e}we(e){this.$e.Te(e)}fe(e){this.$e.ve(e)}le(e){this.$e.Se(e)}ae(){this.$e.Ne()}}class $4{constructor(e){this.$e=e}we(e){this.$e.Re(e)}fe(e){this.$e.Ve(e)}le(e){this.$e.xe(e)}ae(){this.$e.Oe()}}class Eu{constructor(){this.$e=new F4,this.Be=new U4(this.$e),this.Le=new $4(this.$e)}seed(e){this.$e.seed(e)}qe(e){return e===0?this.Be:this.Le}Fe(){return this.$e.Fe()}reset(){this.$e.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class go{constructor(e,n,r,i){this.indexId=e,this.documentKey=n,this.arrayValue=r,this.directionalValue=i}Ue(){const e=this.directionalValue.length,n=e===0||this.directionalValue[e-1]===255?e+1:e,r=new Uint8Array(n);return r.set(this.directionalValue,0),n!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new go(this.indexId,this.documentKey,this.arrayValue,r)}}function is(t,e){let n=t.indexId-e.indexId;return n!==0?n:(n=mT(t.arrayValue,e.arrayValue),n!==0?n:(n=mT(t.directionalValue,e.directionalValue),n!==0?n:G.comparator(t.documentKey,e.documentKey)))}function mT(t,e){for(let n=0;n<t.length&&n<e.length;++n){const r=t[n]-e[n];if(r!==0)return r}return t.length-e.length}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V4{constructor(e){this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.Ke=e.orderBy,this.Ge=[];for(const n of e.filters){const r=n;r.isInequality()?this.Qe=r:this.Ge.push(r)}}je(e){ie(e.collectionGroup===this.collectionId);const n=cv(e);if(n!==void 0&&!this.We(n))return!1;const r=ho(e);let i=0,s=0;for(;i<r.length&&this.We(r[i]);++i);if(i===r.length)return!0;if(this.Qe!==void 0){const o=r[i];if(!this.ze(this.Qe,o)||!this.He(this.Ke[s++],o))return!1;++i}for(;i<r.length;++i){const o=r[i];if(s>=this.Ke.length||!this.He(this.Ke[s++],o))return!1}return!0}We(e){for(const n of this.Ge)if(this.ze(n,e))return!0;return!1}ze(e,n){if(e===void 0||!e.field.isEqual(n.fieldPath))return!1;const r=e.op==="array-contains"||e.op==="array-contains-any";return n.kind===2===r}He(e,n){return!!e.field.isEqual(n.fieldPath)&&(n.kind===0&&e.dir==="asc"||n.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VA(t){var e,n;if(ie(t instanceof Ce||t instanceof Be),t instanceof Ce){if(t instanceof nA){const i=((n=(e=t.value.arrayValue)===null||e===void 0?void 0:e.values)===null||n===void 0?void 0:n.map(s=>Ce.create(t.field,"==",s)))||[];return Be.create(i,"or")}return t}const r=t.filters.map(i=>VA(i));return Be.create(r,t.op)}function B4(t){if(t.getFilters().length===0)return[];const e=Ev(VA(t));return ie(BA(e)),Iv(e)||Sv(e)?[e]:e.getFilters()}function Iv(t){return t instanceof Ce}function Sv(t){return t instanceof Be&&$w(t)}function BA(t){return Iv(t)||Sv(t)||function(e){if(e instanceof Be&&fv(e)){for(const n of e.getFilters())if(!Iv(n)&&!Sv(n))return!1;return!0}return!1}(t)}function Ev(t){if(ie(t instanceof Ce||t instanceof Be),t instanceof Ce)return t;if(t.filters.length===1)return Ev(t.filters[0]);const e=t.filters.map(r=>Ev(r));let n=Be.create(e,t.op);return n=qf(n),BA(n)?n:(ie(n instanceof Be),ie(wl(n)),ie(n.filters.length>1),n.filters.reduce((r,i)=>Kw(r,i)))}function Kw(t,e){let n;return ie(t instanceof Ce||t instanceof Be),ie(e instanceof Ce||e instanceof Be),n=t instanceof Ce?e instanceof Ce?function(r,i){return Be.create([r,i],"and")}(t,e):gT(t,e):e instanceof Ce?gT(e,t):function(r,i){if(ie(r.filters.length>0&&i.filters.length>0),wl(r)&&wl(i))return Zb(r,i.getFilters());const s=fv(r)?r:i,o=fv(r)?i:r,a=s.filters.map(u=>Kw(u,o));return Be.create(a,"or")}(t,e),qf(n)}function gT(t,e){if(wl(e))return Zb(e,t.getFilters());{const n=e.filters.map(r=>Kw(t,r));return Be.create(n,"or")}}function qf(t){if(ie(t instanceof Ce||t instanceof Be),t instanceof Ce)return t;const e=t.getFilters();if(e.length===1)return qf(e[0]);if(Xb(t))return t;const n=e.map(i=>qf(i)),r=[];return n.forEach(i=>{i instanceof Ce?r.push(i):i instanceof Be&&(i.op===t.op?r.push(...i.filters):r.push(i))}),r.length===1?r[0]:Be.create(r,t.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W4{constructor(){this.Je=new Qw}addToCollectionParentIndex(e,n){return this.Je.add(n),N.resolve()}getCollectionParents(e,n){return N.resolve(this.Je.getEntries(n))}addFieldIndex(e,n){return N.resolve()}deleteFieldIndex(e,n){return N.resolve()}getDocumentsMatchingTarget(e,n){return N.resolve(null)}getIndexType(e,n){return N.resolve(0)}getFieldIndexes(e,n){return N.resolve([])}getNextCollectionGroupToUpdate(e){return N.resolve(null)}getMinOffset(e,n){return N.resolve(pr.min())}getMinOffsetFromCollectionGroup(e,n){return N.resolve(pr.min())}updateCollectionGroup(e,n,r){return N.resolve()}updateIndexEntries(e,n){return N.resolve()}}class Qw{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new Ge(Me.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Ge(Me.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const md=new Uint8Array(0);class j4{constructor(e,n){this.user=e,this.databaseId=n,this.Ye=new Qw,this.Xe=new Ys(r=>Go(r),(r,i)=>gh(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,n){if(!this.Ye.has(n)){const r=n.lastSegment(),i=n.popLast();e.addOnCommittedListener(()=>{this.Ye.add(n)});const s={collectionId:r,parent:Ln(i)};return yT(e).put(s)}return N.resolve()}getCollectionParents(e,n){const r=[],i=IDBKeyRange.bound([n,""],[Bb(n),""],!1,!0);return yT(e).W(i).next(s=>{for(const o of s){if(o.collectionId!==n)break;r.push(Zr(o.parent))}return r})}addFieldIndex(e,n){const r=gd(e),i=function(o){return{indexId:o.indexId,collectionGroup:o.collectionGroup,fields:o.fields.map(a=>[a.fieldPath.canonicalString(),a.kind])}}(n);delete i.indexId;const s=r.add(i);if(n.indexState){const o=ku(e);return s.next(a=>{o.put(hT(a,this.user,n.indexState.sequenceNumber,n.indexState.offset))})}return s.next()}deleteFieldIndex(e,n){const r=gd(e),i=ku(e),s=Tu(e);return r.delete(n.indexId).next(()=>i.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0))).next(()=>s.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,n){const r=Tu(e);let i=!0;const s=new Map;return N.forEach(this.Ze(n),o=>this.tn(e,o).next(a=>{i&&(i=!!a),s.set(o,a)})).next(()=>{if(i){let o=Ie();const a=[];return N.forEach(s,(u,c)=>{var d;F("IndexedDbIndexManager",`Using index ${d=u,`id=${d.indexId}|cg=${d.collectionGroup}|f=${d.fields.map(S=>`${S.fieldPath}:${S.kind}`).join(",")}`} to execute ${Go(n)}`);const f=function(S,A){const O=cv(A);if(O===void 0)return null;for(const L of Wf(S,O.fieldPath))switch(L.op){case"array-contains-any":return L.value.arrayValue.values||[];case"array-contains":return[L.value]}return null}(c,u),g=function(S,A){const O=new Map;for(const L of ho(A))for(const P of Wf(S,L.fieldPath))switch(P.op){case"==":case"in":O.set(L.fieldPath.canonicalString(),P.value);break;case"not-in":case"!=":return O.set(L.fieldPath.canonicalString(),P.value),Array.from(O.values())}return null}(c,u),v=function(S,A){const O=[];let L=!0;for(const P of ho(A)){const q=P.kind===0?QE(S,P.fieldPath,S.startAt):XE(S,P.fieldPath,S.startAt);O.push(q.value),L&&(L=q.inclusive)}return new Fs(O,L)}(c,u),_=function(S,A){const O=[];let L=!0;for(const P of ho(A)){const q=P.kind===0?XE(S,P.fieldPath,S.endAt):QE(S,P.fieldPath,S.endAt);O.push(q.value),L&&(L=q.inclusive)}return new Fs(O,L)}(c,u),T=this.en(u,c,v),C=this.en(u,c,_),I=this.nn(u,c,g),w=this.sn(u.indexId,f,T,v.inclusive,C,_.inclusive,I);return N.forEach(w,S=>r.J(S,n.limit).next(A=>{A.forEach(O=>{const L=G.fromSegments(O.documentKey);o.has(L)||(o=o.add(L),a.push(L))})}))}).next(()=>a)}return N.resolve(null)})}Ze(e){let n=this.Xe.get(e);return n||(e.filters.length===0?n=[e]:n=B4(Be.create(e.filters,"and")).map(r=>mv(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.Xe.set(e,n),n)}sn(e,n,r,i,s,o,a){const u=(n!=null?n.length:1)*Math.max(r.length,s.length),c=u/(n!=null?n.length:1),d=[];for(let f=0;f<u;++f){const g=n?this.rn(n[f/c]):md,v=this.on(e,g,r[f%c],i),_=this.un(e,g,s[f%c],o),T=a.map(C=>this.on(e,g,C,!0));d.push(...this.createRange(v,_,T))}return d}on(e,n,r,i){const s=new go(e,G.empty(),n,r);return i?s:s.Ue()}un(e,n,r,i){const s=new go(e,G.empty(),n,r);return i?s.Ue():s}tn(e,n){const r=new V4(n),i=n.collectionGroup!=null?n.collectionGroup:n.path.lastSegment();return this.getFieldIndexes(e,i).next(s=>{let o=null;for(const a of s)r.je(a)&&(!o||a.fields.length>o.fields.length)&&(o=a);return o})}getIndexType(e,n){let r=2;const i=this.Ze(n);return N.forEach(i,s=>this.tn(e,s).next(o=>{o?r!==0&&o.fields.length<function(a){let u=new Ge(Et.comparator),c=!1;for(const d of a.filters)for(const f of d.getFlattenedFilters())f.field.isKeyField()||(f.op==="array-contains"||f.op==="array-contains-any"?c=!0:u=u.add(f.field));for(const d of a.orderBy)d.field.isKeyField()||(u=u.add(d.field));return u.size+(c?1:0)}(s)&&(r=1):r=0})).next(()=>function(s){return s.limit!==null}(n)&&i.length>1&&r===2?1:r)}cn(e,n){const r=new Eu;for(const i of ho(e)){const s=n.data.field(i.fieldPath);if(s==null)return null;const o=r.qe(i.kind);mo.Ie.ue(s,o)}return r.Fe()}rn(e){const n=new Eu;return mo.Ie.ue(e,n.qe(0)),n.Fe()}an(e,n){const r=new Eu;return mo.Ie.ue(qo(this.databaseId,n),r.qe(function(i){const s=ho(i);return s.length===0?0:s[s.length-1].kind}(e))),r.Fe()}nn(e,n,r){if(r===null)return[];let i=[];i.push(new Eu);let s=0;for(const o of ho(e)){const a=r[s++];for(const u of i)if(this.hn(n,o.fieldPath)&&Bc(a))i=this.ln(i,o,a);else{const c=u.qe(o.kind);mo.Ie.ue(a,c)}}return this.fn(i)}en(e,n,r){return this.nn(e,n,r.position)}fn(e){const n=[];for(let r=0;r<e.length;++r)n[r]=e[r].Fe();return n}ln(e,n,r){const i=[...e],s=[];for(const o of r.arrayValue.values||[])for(const a of i){const u=new Eu;u.seed(a.Fe()),mo.Ie.ue(o,u.qe(n.kind)),s.push(u)}return s}hn(e,n){return!!e.filters.find(r=>r instanceof Ce&&r.field.isEqual(n)&&(r.op==="in"||r.op==="not-in"))}getFieldIndexes(e,n){const r=gd(e),i=ku(e);return(n?r.W("collectionGroupIndex",IDBKeyRange.bound(n,n)):r.W()).next(s=>{const o=[];return N.forEach(s,a=>i.get([a.indexId,this.uid]).next(u=>{o.push(function(c,d){const f=d?new Fc(d.sequenceNumber,new pr(Qo(d.readTime),new G(Zr(d.documentKey)),d.largestBatchId)):Fc.empty(),g=c.fields.map(([v,_])=>new Pd(Et.fromServerFormat(v),_));return new Vf(c.indexId,c.collectionGroup,g,f)}(a,u))})).next(()=>o)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(n=>n.length===0?null:(n.sort((r,i)=>{const s=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return s!==0?s:ge(r.collectionGroup,i.collectionGroup)}),n[0].collectionGroup))}updateCollectionGroup(e,n,r){const i=gd(e),s=ku(e);return this.dn(e).next(o=>i.W("collectionGroupIndex",IDBKeyRange.bound(n,n)).next(a=>N.forEach(a,u=>s.put(hT(u.indexId,this.user,o,r)))))}updateIndexEntries(e,n){const r=new Map;return N.forEach(n,(i,s)=>{const o=r.get(i.collectionGroup);return(o?N.resolve(o):this.getFieldIndexes(e,i.collectionGroup)).next(a=>(r.set(i.collectionGroup,a),N.forEach(a,u=>this._n(e,i,u).next(c=>{const d=this.wn(s,u);return c.isEqual(d)?N.resolve():this.mn(e,s,u,c,d)}))))})}gn(e,n,r,i){return Tu(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.an(r,n.key),documentKey:n.key.path.toArray()})}yn(e,n,r,i){return Tu(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.an(r,n.key),n.key.path.toArray()])}_n(e,n,r){const i=Tu(e);let s=new Ge(is);return i.Z({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.an(r,n)])},(o,a)=>{s=s.add(new go(r.indexId,n,a.arrayValue,a.directionalValue))}).next(()=>s)}wn(e,n){let r=new Ge(is);const i=this.cn(n,e);if(i==null)return r;const s=cv(n);if(s!=null){const o=e.data.field(s.fieldPath);if(Bc(o))for(const a of o.arrayValue.values||[])r=r.add(new go(n.indexId,e.key,this.rn(a),i))}else r=r.add(new go(n.indexId,e.key,md,i));return r}mn(e,n,r,i,s){F("IndexedDbIndexManager","Updating index entries for document '%s'",n.key);const o=[];return function(a,u,c,d,f){const g=a.getIterator(),v=u.getIterator();let _=ka(g),T=ka(v);for(;_||T;){let C=!1,I=!1;if(_&&T){const w=c(_,T);w<0?I=!0:w>0&&(C=!0)}else _!=null?I=!0:C=!0;C?(d(T),T=ka(v)):I?(f(_),_=ka(g)):(_=ka(g),T=ka(v))}}(i,s,is,a=>{o.push(this.gn(e,n,r,a))},a=>{o.push(this.yn(e,n,r,a))}),N.waitFor(o)}dn(e){let n=1;return ku(e).Z({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,s)=>{s.done(),n=i.sequenceNumber+1}).next(()=>n)}createRange(e,n,r){r=r.sort((o,a)=>is(o,a)).filter((o,a,u)=>!a||is(o,u[a-1])!==0);const i=[];i.push(e);for(const o of r){const a=is(o,e),u=is(o,n);if(a===0)i[0]=e.Ue();else if(a>0&&u<0)i.push(o),i.push(o.Ue());else if(u>0)break}i.push(n);const s=[];for(let o=0;o<i.length;o+=2){if(this.pn(i[o],i[o+1]))return[];const a=[i[o].indexId,this.uid,i[o].arrayValue,i[o].directionalValue,md,[]],u=[i[o+1].indexId,this.uid,i[o+1].arrayValue,i[o+1].directionalValue,md,[]];s.push(IDBKeyRange.bound(a,u))}return s}pn(e,n){return is(e,n)>0}getMinOffsetFromCollectionGroup(e,n){return this.getFieldIndexes(e,n).next(vT)}getMinOffset(e,n){return N.mapArray(this.Ze(n),r=>this.tn(e,r).next(i=>i||ee())).next(vT)}}function yT(t){return rn(t,"collectionParents")}function Tu(t){return rn(t,"indexEntries")}function gd(t){return rn(t,"indexConfiguration")}function ku(t){return rn(t,"indexState")}function vT(t){ie(t.length!==0);let e=t[0].indexState.offset,n=e.largestBatchId;for(let r=1;r<t.length;r++){const i=t[r].indexState.offset;Lw(i,e)<0&&(e=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new pr(e.readTime,e.documentKey,n)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _T={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Gn{constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new Gn(e,Gn.DEFAULT_COLLECTION_PERCENTILE,Gn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WA(t,e,n){const r=t.store("mutations"),i=t.store("documentMutations"),s=[],o=IDBKeyRange.only(n.batchId);let a=0;const u=r.Z({range:o},(d,f,g)=>(a++,g.delete()));s.push(u.next(()=>{ie(a===1)}));const c=[];for(const d of n.mutations){const f=MA(e,d.key.path,n.batchId);s.push(i.delete(f)),c.push(d.key)}return N.waitFor(s).next(()=>c)}function Gf(t){if(!t)return 0;let e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw ee();e=t.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Gn.DEFAULT_COLLECTION_PERCENTILE=10,Gn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Gn.DEFAULT=new Gn(41943040,Gn.DEFAULT_COLLECTION_PERCENTILE,Gn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Gn.DISABLED=new Gn(-1,0,0);class nm{constructor(e,n,r,i){this.userId=e,this.yt=n,this.indexManager=r,this.referenceDelegate=i,this.In={}}static re(e,n,r,i){ie(e.uid!=="");const s=e.isAuthenticated()?e.uid:"";return new nm(s,n,r,i)}checkEmpty(e){let n=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return ss(e).Z({index:"userMutationsIndex",range:r},(i,s,o)=>{n=!1,o.done()}).next(()=>n)}addMutationBatch(e,n,r,i){const s=ba(e),o=ss(e);return o.add({}).next(a=>{ie(typeof a=="number");const u=new qw(a,n,r,i),c=function(g,v,_){const T=_.baseMutations.map(I=>zc(g.ie,I)),C=_.mutations.map(I=>zc(g.ie,I));return{userId:v,batchId:_.batchId,localWriteTimeMs:_.localWriteTime.toMillis(),baseMutations:T,mutations:C}}(this.yt,this.userId,u),d=[];let f=new Ge((g,v)=>ge(g.canonicalString(),v.canonicalString()));for(const g of i){const v=MA(this.userId,g.key.path,a);f=f.add(g.key.path.popLast()),d.push(o.put(c)),d.push(s.put(v,y4))}return f.forEach(g=>{d.push(this.indexManager.addToCollectionParentIndex(e,g))}),e.addOnCommittedListener(()=>{this.In[a]=u.keys()}),N.waitFor(d).next(()=>u)})}lookupMutationBatch(e,n){return ss(e).get(n).next(r=>r?(ie(r.userId===this.userId),po(this.yt,r)):null)}Tn(e,n){return this.In[n]?N.resolve(this.In[n]):this.lookupMutationBatch(e,n).next(r=>{if(r){const i=r.keys();return this.In[n]=i,i}return null})}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=IDBKeyRange.lowerBound([this.userId,r]);let s=null;return ss(e).Z({index:"userMutationsIndex",range:i},(o,a,u)=>{a.userId===this.userId&&(ie(a.batchId>=r),s=po(this.yt,a)),u.done()}).next(()=>s)}getHighestUnacknowledgedBatchId(e){const n=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return ss(e).Z({index:"userMutationsIndex",range:n,reverse:!0},(i,s,o)=>{r=s.batchId,o.done()}).next(()=>r)}getAllMutationBatches(e){const n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return ss(e).W("userMutationsIndex",n).next(r=>r.map(i=>po(this.yt,i)))}getAllMutationBatchesAffectingDocumentKey(e,n){const r=Vd(this.userId,n.path),i=IDBKeyRange.lowerBound(r),s=[];return ba(e).Z({range:i},(o,a,u)=>{const[c,d,f]=o,g=Zr(d);if(c===this.userId&&n.path.isEqual(g))return ss(e).get(f).next(v=>{if(!v)throw ee();ie(v.userId===this.userId),s.push(po(this.yt,v))});u.done()}).next(()=>s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Ge(ge);const i=[];return n.forEach(s=>{const o=Vd(this.userId,s.path),a=IDBKeyRange.lowerBound(o),u=ba(e).Z({range:a},(c,d,f)=>{const[g,v,_]=c,T=Zr(v);g===this.userId&&s.path.isEqual(T)?r=r.add(_):f.done()});i.push(u)}),N.waitFor(i).next(()=>this.En(e,r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1,s=Vd(this.userId,r),o=IDBKeyRange.lowerBound(s);let a=new Ge(ge);return ba(e).Z({range:o},(u,c,d)=>{const[f,g,v]=u,_=Zr(g);f===this.userId&&r.isPrefixOf(_)?_.length===i&&(a=a.add(v)):d.done()}).next(()=>this.En(e,a))}En(e,n){const r=[],i=[];return n.forEach(s=>{i.push(ss(e).get(s).next(o=>{if(o===null)throw ee();ie(o.userId===this.userId),r.push(po(this.yt,o))}))}),N.waitFor(i).next(()=>r)}removeMutationBatch(e,n){return WA(e.se,this.userId,n).next(r=>(e.addOnCommittedListener(()=>{this.An(n.batchId)}),N.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}An(e){delete this.In[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(n=>{if(!n)return N.resolve();const r=IDBKeyRange.lowerBound([this.userId]),i=[];return ba(e).Z({range:r},(s,o,a)=>{if(s[0]===this.userId){const u=Zr(s[1]);i.push(u)}else a.done()}).next(()=>{ie(i.length===0)})})}containsKey(e,n){return jA(e,this.userId,n)}Rn(e){return zA(e).get(this.userId).next(n=>n||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function jA(t,e,n){const r=Vd(e,n.path),i=r[1],s=IDBKeyRange.lowerBound(r);let o=!1;return ba(t).Z({range:s,X:!0},(a,u,c)=>{const[d,f,g]=a;d===e&&f===i&&(o=!0),c.done()}).next(()=>o)}function ss(t){return rn(t,"mutations")}function ba(t){return rn(t,"documentMutations")}function zA(t){return rn(t,"mutationQueues")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xo{constructor(e){this.bn=e}next(){return this.bn+=2,this.bn}static Pn(){return new Xo(0)}static vn(){return new Xo(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z4{constructor(e,n){this.referenceDelegate=e,this.yt=n}allocateTargetId(e){return this.Vn(e).next(n=>{const r=new Xo(n.highestTargetId);return n.highestTargetId=r.next(),this.Sn(e,n).next(()=>n.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Vn(e).next(n=>ae.fromTimestamp(new pt(n.lastRemoteSnapshotVersion.seconds,n.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Vn(e).next(n=>n.highestListenSequenceNumber)}setTargetsMetadata(e,n,r){return this.Vn(e).next(i=>(i.highestListenSequenceNumber=n,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),n>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=n),this.Sn(e,i)))}addTargetData(e,n){return this.Dn(e,n).next(()=>this.Vn(e).next(r=>(r.targetCount+=1,this.Cn(n,r),this.Sn(e,r))))}updateTargetData(e,n){return this.Dn(e,n)}removeTargetData(e,n){return this.removeMatchingKeysForTargetId(e,n.targetId).next(()=>Ca(e).delete(n.targetId)).next(()=>this.Vn(e)).next(r=>(ie(r.targetCount>0),r.targetCount-=1,this.Sn(e,r)))}removeTargets(e,n,r){let i=0;const s=[];return Ca(e).Z((o,a)=>{const u=Uu(a);u.sequenceNumber<=n&&r.get(u.targetId)===null&&(i++,s.push(this.removeTargetData(e,u)))}).next(()=>N.waitFor(s)).next(()=>i)}forEachTarget(e,n){return Ca(e).Z((r,i)=>{const s=Uu(i);n(s)})}Vn(e){return wT(e).get("targetGlobalKey").next(n=>(ie(n!==null),n))}Sn(e,n){return wT(e).put("targetGlobalKey",n)}Dn(e,n){return Ca(e).put($A(this.yt,n))}Cn(e,n){let r=!1;return e.targetId>n.highestTargetId&&(n.highestTargetId=e.targetId,r=!0),e.sequenceNumber>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.Vn(e).next(n=>n.targetCount)}getTargetData(e,n){const r=Go(n),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let s=null;return Ca(e).Z({range:i,index:"queryTargetsIndex"},(o,a,u)=>{const c=Uu(a);gh(n,c.target)&&(s=c,u.done())}).next(()=>s)}addMatchingKeys(e,n,r){const i=[],s=cs(e);return n.forEach(o=>{const a=Ln(o.path);i.push(s.put({targetId:r,path:a})),i.push(this.referenceDelegate.addReference(e,r,o))}),N.waitFor(i)}removeMatchingKeys(e,n,r){const i=cs(e);return N.forEach(n,s=>{const o=Ln(s.path);return N.waitFor([i.delete([r,o]),this.referenceDelegate.removeReference(e,r,s)])})}removeMatchingKeysForTargetId(e,n){const r=cs(e),i=IDBKeyRange.bound([n],[n+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,n){const r=IDBKeyRange.bound([n],[n+1],!1,!0),i=cs(e);let s=Ie();return i.Z({range:r,X:!0},(o,a,u)=>{const c=Zr(o[1]),d=new G(c);s=s.add(d)}).next(()=>s)}containsKey(e,n){const r=Ln(n.path),i=IDBKeyRange.bound([r],[Bb(r)],!1,!0);let s=0;return cs(e).Z({index:"documentTargetsIndex",X:!0,range:i},([o,a],u,c)=>{o!==0&&(s++,c.done())}).next(()=>s>0)}ne(e,n){return Ca(e).get(n).next(r=>r?Uu(r):null)}}function Ca(t){return rn(t,"targets")}function wT(t){return rn(t,"targetGlobal")}function cs(t){return rn(t,"targetDocuments")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IT([t,e],[n,r]){const i=ge(t,n);return i===0?ge(e,r):i}class q4{constructor(e){this.xn=e,this.buffer=new Ge(IT),this.Nn=0}kn(){return++this.Nn}On(e){const n=[e,this.kn()];if(this.buffer.size<this.xn)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();IT(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class G4{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Mn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Fn(6e4)}stop(){this.Mn&&(this.Mn.cancel(),this.Mn=null)}get started(){return this.Mn!==null}Fn(e){F("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Mn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Mn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Hs(n)?F("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",n):await Gs(n)}await this.Fn(3e5)})}}class H4{constructor(e,n){this.$n=e,this.params=n}calculateTargetCount(e,n){return this.$n.Bn(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return N.resolve(Qn.at);const r=new q4(n);return this.$n.forEachTarget(e,i=>r.On(i.sequenceNumber)).next(()=>this.$n.Ln(e,i=>r.On(i))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.$n.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.$n.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(F("LruGarbageCollector","Garbage collection skipped; disabled"),N.resolve(_T)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(F("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),_T):this.qn(e,n))}getCacheSize(e){return this.$n.getCacheSize(e)}qn(e,n){let r,i,s,o,a,u,c;const d=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(f=>(f>this.params.maximumSequenceNumbersToCollect?(F("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${f}`),i=this.params.maximumSequenceNumbersToCollect):i=f,o=Date.now(),this.nthSequenceNumber(e,i))).next(f=>(r=f,a=Date.now(),this.removeTargets(e,r,n))).next(f=>(s=f,u=Date.now(),this.removeOrphanedDocuments(e,r))).next(f=>(c=Date.now(),uv()<=Le.DEBUG&&F("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-d}ms
	Determined least recently used ${i} in `+(a-o)+`ms
	Removed ${s} targets in `+(u-a)+`ms
	Removed ${f} documents in `+(c-u)+`ms
Total Duration: ${c-d}ms`),N.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:f})))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y4{constructor(e,n){this.db=e,this.garbageCollector=function(r,i){return new H4(r,i)}(this,n)}Bn(e){const n=this.Un(e);return this.db.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}Un(e){let n=0;return this.Ln(e,r=>{n++}).next(()=>n)}forEachTarget(e,n){return this.db.getTargetCache().forEachTarget(e,n)}Ln(e,n){return this.Kn(e,(r,i)=>n(i))}addReference(e,n,r){return yd(e,r)}removeReference(e,n,r){return yd(e,r)}removeTargets(e,n,r){return this.db.getTargetCache().removeTargets(e,n,r)}markPotentiallyOrphaned(e,n){return yd(e,n)}Gn(e,n){return function(r,i){let s=!1;return zA(r).tt(o=>jA(r,o,i).next(a=>(a&&(s=!0),N.resolve(!a)))).next(()=>s)}(e,n)}removeOrphanedDocuments(e,n){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let s=0;return this.Kn(e,(o,a)=>{if(a<=n){const u=this.Gn(e,o).next(c=>{if(!c)return s++,r.getEntry(e,o).next(()=>(r.removeEntry(o,ae.min()),cs(e).delete([0,Ln(o.path)])))});i.push(u)}}).next(()=>N.waitFor(i)).next(()=>r.apply(e)).next(()=>s)}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,n){return yd(e,n)}Kn(e,n){const r=cs(e);let i,s=Qn.at;return r.Z({index:"documentTargetsIndex"},([o,a],{path:u,sequenceNumber:c})=>{o===0?(s!==Qn.at&&n(new G(Zr(i)),s),s=c,i=u):s=Qn.at}).next(()=>{s!==Qn.at&&n(new G(Zr(i)),s)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function yd(t,e){return cs(t).put(function(n,r){return{targetId:0,path:Ln(n.path),sequenceNumber:r}}(e,t.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qA{constructor(){this.changes=new Ys(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,rt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?N.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K4{constructor(e){this.yt=e}setIndexManager(e){this.indexManager=e}addEntry(e,n,r){return oo(e).put(r)}removeEntry(e,n,r){return oo(e).delete(function(i,s){const o=i.path.toArray();return[o.slice(0,o.length-2),o[o.length-2],zf(s),o[o.length-1]]}(n,r))}updateMetadata(e,n){return this.getMetadata(e).next(r=>(r.byteSize+=n,this.Qn(e,r)))}getEntry(e,n){let r=rt.newInvalidDocument(n);return oo(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(Cu(n))},(i,s)=>{r=this.jn(n,s)}).next(()=>r)}Wn(e,n){let r={size:0,document:rt.newInvalidDocument(n)};return oo(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(Cu(n))},(i,s)=>{r={document:this.jn(n,s),size:Gf(s)}}).next(()=>r)}getEntries(e,n){let r=Jn();return this.zn(e,n,(i,s)=>{const o=this.jn(i,s);r=r.insert(i,o)}).next(()=>r)}Hn(e,n){let r=Jn(),i=new Ct(G.comparator);return this.zn(e,n,(s,o)=>{const a=this.jn(s,o);r=r.insert(s,a),i=i.insert(s,Gf(o))}).next(()=>({documents:r,Jn:i}))}zn(e,n,r){if(n.isEmpty())return N.resolve();let i=new Ge(TT);n.forEach(u=>i=i.add(u));const s=IDBKeyRange.bound(Cu(i.first()),Cu(i.last())),o=i.getIterator();let a=o.getNext();return oo(e).Z({index:"documentKeyIndex",range:s},(u,c,d)=>{const f=G.fromSegments([...c.prefixPath,c.collectionGroup,c.documentId]);for(;a&&TT(a,f)<0;)r(a,null),a=o.getNext();a&&a.isEqual(f)&&(r(a,c),a=o.hasNext()?o.getNext():null),a?d.j(Cu(a)):d.done()}).next(()=>{for(;a;)r(a,null),a=o.hasNext()?o.getNext():null})}getDocumentsMatchingQuery(e,n,r,i){const s=n.path,o=[s.popLast().toArray(),s.lastSegment(),zf(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],a=[s.popLast().toArray(),s.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return oo(e).W(IDBKeyRange.bound(o,a,!0)).next(u=>{let c=Jn();for(const d of u){const f=this.jn(G.fromSegments(d.prefixPath.concat(d.collectionGroup,d.documentId)),d);f.isFoundDocument()&&(vh(n,f)||i.has(f.key))&&(c=c.insert(f.key,f))}return c})}getAllFromCollectionGroup(e,n,r,i){let s=Jn();const o=ET(n,r),a=ET(n,pr.max());return oo(e).Z({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,a,!0)},(u,c,d)=>{const f=this.jn(G.fromSegments(c.prefixPath.concat(c.collectionGroup,c.documentId)),c);s=s.insert(f.key,f),s.size===i&&d.done()}).next(()=>s)}newChangeBuffer(e){return new Q4(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(n=>n.byteSize)}getMetadata(e){return ST(e).get("remoteDocumentGlobalKey").next(n=>(ie(!!n),n))}Qn(e,n){return ST(e).put("remoteDocumentGlobalKey",n)}jn(e,n){if(n){const r=M4(this.yt,n);if(!(r.isNoDocument()&&r.version.isEqual(ae.min())))return r}return rt.newInvalidDocument(e)}}function GA(t){return new K4(t)}class Q4 extends qA{constructor(e,n){super(),this.Yn=e,this.trackRemovals=n,this.Xn=new Ys(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const n=[];let r=0,i=new Ge((s,o)=>ge(s.canonicalString(),o.canonicalString()));return this.changes.forEach((s,o)=>{const a=this.Xn.get(s);if(n.push(this.Yn.removeEntry(e,s,a.readTime)),o.isValidDocument()){const u=uT(this.Yn.yt,o);i=i.add(s.path.popLast());const c=Gf(u);r+=c-a.size,n.push(this.Yn.addEntry(e,s,u))}else if(r-=a.size,this.trackRemovals){const u=uT(this.Yn.yt,o.convertToNoDocument(ae.min()));n.push(this.Yn.addEntry(e,s,u))}}),i.forEach(s=>{n.push(this.Yn.indexManager.addToCollectionParentIndex(e,s))}),n.push(this.Yn.updateMetadata(e,r)),N.waitFor(n)}getFromCache(e,n){return this.Yn.Wn(e,n).next(r=>(this.Xn.set(n,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,n){return this.Yn.Hn(e,n).next(({documents:r,Jn:i})=>(i.forEach((s,o)=>{this.Xn.set(s,{size:o,readTime:r.get(s).readTime})}),r))}}function ST(t){return rn(t,"remoteDocumentGlobal")}function oo(t){return rn(t,"remoteDocumentsV14")}function Cu(t){const e=t.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function ET(t,e){const n=e.documentKey.path.toArray();return[t,zf(e.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function TT(t,e){const n=t.path.toArray(),r=e.path.toArray();let i=0;for(let s=0;s<n.length-2&&s<r.length-2;++s)if(i=ge(n[s],r[s]),i)return i;return i=ge(n.length,r.length),i||(i=ge(n[n.length-2],r[r.length-2]),i||ge(n[n.length-1],r[r.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X4{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HA{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&nc(r.mutation,i,Xn.empty(),pt.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,Ie()).next(()=>r))}getLocalViewOfDocuments(e,n,r=Ie()){const i=Jr();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=Fu();return s.forEach((a,u)=>{o=o.insert(a,u.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=Jr();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,Ie()))}populateOverlays(e,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,i){let s=Jn();const o=rc(),a=rc();return n.forEach((u,c)=>{const d=r.get(c.key);i.has(c.key)&&(d===void 0||d.mutation instanceof qi)?s=s.insert(c.key,c):d!==void 0?(o.set(c.key,d.mutation.getFieldMask()),nc(d.mutation,c,d.mutation.getFieldMask(),pt.now())):o.set(c.key,Xn.empty())}),this.recalculateAndSaveOverlays(e,s).next(u=>(u.forEach((c,d)=>o.set(c,d)),n.forEach((c,d)=>{var f;return a.set(c,new X4(d,(f=o.get(c))!==null&&f!==void 0?f:null))}),a))}recalculateAndSaveOverlays(e,n){const r=rc();let i=new Ct((o,a)=>o-a),s=Ie();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(u=>{const c=n.get(u);if(c===null)return;let d=r.get(u)||Xn.empty();d=a.applyToLocalView(c,d),r.set(u,d);const f=(i.get(a.batchId)||Ie()).add(u);i=i.insert(a.batchId,f)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const u=a.getNext(),c=u.key,d=u.value,f=IA();d.forEach(g=>{if(!s.has(g)){const v=mA(n.get(g),r.get(g));v!==null&&f.set(g,v),s=s.add(g)}}),o.push(this.documentOverlayCache.saveOverlays(e,c,f))}return N.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r){return function(i){return G.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):Bw(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r):this.getDocumentsMatchingCollectionQuery(e,n,r)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):N.resolve(Jr());let a=-1,u=s;return o.next(c=>N.forEach(c,(d,f)=>(a<f.largestBatchId&&(a=f.largestBatchId),s.get(d)?N.resolve():this.remoteDocumentCache.getEntry(e,d).next(g=>{u=u.insert(d,g)}))).next(()=>this.populateOverlays(e,c,s)).next(()=>this.computeViews(e,u,c,Ie())).next(d=>({batchId:a,changes:wA(d)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new G(n)).next(r=>{let i=Fu();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r){const i=n.collectionGroup;let s=Fu();return this.indexManager.getCollectionParents(e,i).next(o=>N.forEach(o,a=>{const u=function(c,d){return new zi(d,null,c.explicitOrderBy.slice(),c.filters.slice(),c.limit,c.limitType,c.startAt,c.endAt)}(n,a.child(i));return this.getDocumentsMatchingCollectionQuery(e,u,r).next(c=>{c.forEach((d,f)=>{s=s.insert(d,f)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,n,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(s=>(i=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i))).next(s=>{i.forEach((a,u)=>{const c=u.getKey();s.get(c)===null&&(s=s.insert(c,rt.newInvalidDocument(c)))});let o=Fu();return s.forEach((a,u)=>{const c=i.get(a);c!==void 0&&nc(c.mutation,u,Xn.empty(),pt.now()),vh(n,u)&&(o=o.insert(a,u))}),o})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J4{constructor(e){this.yt=e,this.Zn=new Map,this.ts=new Map}getBundleMetadata(e,n){return N.resolve(this.Zn.get(n))}saveBundleMetadata(e,n){var r;return this.Zn.set(n.id,{id:(r=n).id,version:r.version,createTime:At(r.createTime)}),N.resolve()}getNamedQuery(e,n){return N.resolve(this.ts.get(n))}saveNamedQuery(e,n){return this.ts.set(n.name,function(r){return{name:r.name,query:Yw(r.bundledQuery),readTime:At(r.readTime)}}(n)),N.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z4{constructor(){this.overlays=new Ct(G.comparator),this.es=new Map}getOverlay(e,n){return N.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Jr();return N.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.oe(e,n,s)}),N.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.es.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.es.delete(r)),N.resolve()}getOverlaysForCollection(e,n,r){const i=Jr(),s=n.length+1,o=new G(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const u=a.getNext().value,c=u.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===s&&u.largestBatchId>r&&i.set(u.getKey(),u)}return N.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new Ct((c,d)=>c-d);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>r){let d=s.get(c.largestBatchId);d===null&&(d=Jr(),s=s.insert(c.largestBatchId,d)),d.set(c.getKey(),c)}}const a=Jr(),u=s.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((c,d)=>a.set(c,d)),!(a.size()>=i)););return N.resolve(a)}oe(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.es.get(i.largestBatchId).delete(r.key);this.es.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new Hw(n,r));let s=this.es.get(n);s===void 0&&(s=Ie(),this.es.set(n,s)),this.es.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xw{constructor(){this.ns=new Ge(Kt.ss),this.rs=new Ge(Kt.os)}isEmpty(){return this.ns.isEmpty()}addReference(e,n){const r=new Kt(e,n);this.ns=this.ns.add(r),this.rs=this.rs.add(r)}us(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.cs(new Kt(e,n))}hs(e,n){e.forEach(r=>this.removeReference(r,n))}ls(e){const n=new G(new Me([])),r=new Kt(n,e),i=new Kt(n,e+1),s=[];return this.rs.forEachInRange([r,i],o=>{this.cs(o),s.push(o.key)}),s}fs(){this.ns.forEach(e=>this.cs(e))}cs(e){this.ns=this.ns.delete(e),this.rs=this.rs.delete(e)}ds(e){const n=new G(new Me([])),r=new Kt(n,e),i=new Kt(n,e+1);let s=Ie();return this.rs.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const n=new Kt(e,0),r=this.ns.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Kt{constructor(e,n){this.key=e,this._s=n}static ss(e,n){return G.comparator(e.key,n.key)||ge(e._s,n._s)}static os(e,n){return ge(e._s,n._s)||G.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eG{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.ws=1,this.gs=new Ge(Kt.ss)}checkEmpty(e){return N.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const s=this.ws;this.ws++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new qw(s,n,r,i);this.mutationQueue.push(o);for(const a of i)this.gs=this.gs.add(new Kt(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return N.resolve(o)}lookupMutationBatch(e,n){return N.resolve(this.ys(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.ps(r),s=i<0?0:i;return N.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return N.resolve(this.mutationQueue.length===0?-1:this.ws-1)}getAllMutationBatches(e){return N.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Kt(n,0),i=new Kt(n,Number.POSITIVE_INFINITY),s=[];return this.gs.forEachInRange([r,i],o=>{const a=this.ys(o._s);s.push(a)}),N.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Ge(ge);return n.forEach(i=>{const s=new Kt(i,0),o=new Kt(i,Number.POSITIVE_INFINITY);this.gs.forEachInRange([s,o],a=>{r=r.add(a._s)})}),N.resolve(this.Is(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let s=r;G.isDocumentKey(s)||(s=s.child(""));const o=new Kt(new G(s),0);let a=new Ge(ge);return this.gs.forEachWhile(u=>{const c=u.key.path;return!!r.isPrefixOf(c)&&(c.length===i&&(a=a.add(u._s)),!0)},o),N.resolve(this.Is(a))}Is(e){const n=[];return e.forEach(r=>{const i=this.ys(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){ie(this.Ts(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.gs;return N.forEach(n.mutations,i=>{const s=new Kt(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.gs=r})}An(e){}containsKey(e,n){const r=new Kt(n,0),i=this.gs.firstAfterOrEqual(r);return N.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,N.resolve()}Ts(e,n){return this.ps(e)}ps(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}ys(e){const n=this.ps(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tG{constructor(e){this.Es=e,this.docs=new Ct(G.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.Es(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return N.resolve(r?r.document.mutableCopy():rt.newInvalidDocument(n))}getEntries(e,n){let r=Jn();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():rt.newInvalidDocument(i))}),N.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=Jn();const o=n.path,a=new G(o.child("")),u=this.docs.getIteratorFrom(a);for(;u.hasNext();){const{key:c,value:{document:d}}=u.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||Lw(jb(d),r)<=0||(i.has(d.key)||vh(n,d))&&(s=s.insert(d.key,d.mutableCopy()))}return N.resolve(s)}getAllFromCollectionGroup(e,n,r,i){ee()}As(e,n){return N.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new nG(this)}getSize(e){return N.resolve(this.size)}}class nG extends qA{constructor(e){super(),this.Yn=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.Yn.addEntry(e,i)):this.Yn.removeEntry(r)}),N.waitFor(n)}getFromCache(e,n){return this.Yn.getEntry(e,n)}getAllFromCache(e,n){return this.Yn.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rG{constructor(e){this.persistence=e,this.Rs=new Ys(n=>Go(n),gh),this.lastRemoteSnapshotVersion=ae.min(),this.highestTargetId=0,this.bs=0,this.Ps=new Xw,this.targetCount=0,this.vs=Xo.Pn()}forEachTarget(e,n){return this.Rs.forEach((r,i)=>n(i)),N.resolve()}getLastRemoteSnapshotVersion(e){return N.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return N.resolve(this.bs)}allocateTargetId(e){return this.highestTargetId=this.vs.next(),N.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.bs&&(this.bs=n),N.resolve()}Dn(e){this.Rs.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.vs=new Xo(n),this.highestTargetId=n),e.sequenceNumber>this.bs&&(this.bs=e.sequenceNumber)}addTargetData(e,n){return this.Dn(n),this.targetCount+=1,N.resolve()}updateTargetData(e,n){return this.Dn(n),N.resolve()}removeTargetData(e,n){return this.Rs.delete(n.target),this.Ps.ls(n.targetId),this.targetCount-=1,N.resolve()}removeTargets(e,n,r){let i=0;const s=[];return this.Rs.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Rs.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),N.waitFor(s).next(()=>i)}getTargetCount(e){return N.resolve(this.targetCount)}getTargetData(e,n){const r=this.Rs.get(n)||null;return N.resolve(r)}addMatchingKeys(e,n,r){return this.Ps.us(n,r),N.resolve()}removeMatchingKeys(e,n,r){this.Ps.hs(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),N.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.Ps.ls(n),N.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Ps.ds(n);return N.resolve(r)}containsKey(e,n){return N.resolve(this.Ps.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YA{constructor(e,n){this.Vs={},this.overlays={},this.Ss=new Qn(0),this.Ds=!1,this.Ds=!0,this.referenceDelegate=e(this),this.Cs=new rG(this),this.indexManager=new W4,this.remoteDocumentCache=function(r){return new tG(r)}(r=>this.referenceDelegate.xs(r)),this.yt=new UA(n),this.Ns=new J4(this.yt)}start(){return Promise.resolve()}shutdown(){return this.Ds=!1,Promise.resolve()}get started(){return this.Ds}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new Z4,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.Vs[e.toKey()];return r||(r=new eG(n,this.referenceDelegate),this.Vs[e.toKey()]=r),r}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ns}runTransaction(e,n,r){F("MemoryPersistence","Starting transaction:",e);const i=new iG(this.Ss.next());return this.referenceDelegate.ks(),r(i).next(s=>this.referenceDelegate.Os(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Ms(e,n){return N.or(Object.values(this.Vs).map(r=>()=>r.containsKey(e,n)))}}class iG extends qb{constructor(e){super(),this.currentSequenceNumber=e}}class rm{constructor(e){this.persistence=e,this.Fs=new Xw,this.$s=null}static Bs(e){return new rm(e)}get Ls(){if(this.$s)return this.$s;throw ee()}addReference(e,n,r){return this.Fs.addReference(r,n),this.Ls.delete(r.toString()),N.resolve()}removeReference(e,n,r){return this.Fs.removeReference(r,n),this.Ls.add(r.toString()),N.resolve()}markPotentiallyOrphaned(e,n){return this.Ls.add(n.toString()),N.resolve()}removeTarget(e,n){this.Fs.ls(n.targetId).forEach(i=>this.Ls.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.Ls.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}ks(){this.$s=new Set}Os(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return N.forEach(this.Ls,r=>{const i=G.fromPath(r);return this.qs(e,i).next(s=>{s||n.removeEntry(i,ae.min())})}).next(()=>(this.$s=null,n.apply(e)))}updateLimboDocument(e,n){return this.qs(e,n).next(r=>{r?this.Ls.delete(n.toString()):this.Ls.add(n.toString())})}xs(e){return 0}qs(e,n){return N.or([()=>N.resolve(this.Fs.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ms(e,n)])}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sG{constructor(e){this.yt=e}$(e,n,r,i){const s=new Qp("createOrUpgrade",n);r<1&&i>=1&&(function(a){a.createObjectStore("owner")}(e),function(a){a.createObjectStore("mutationQueues",{keyPath:"userId"}),a.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",lT,{unique:!0}),a.createObjectStore("documentMutations")}(e),kT(e),function(a){a.createObjectStore("remoteDocuments")}(e));let o=N.resolve();return r<3&&i>=3&&(r!==0&&(function(a){a.deleteObjectStore("targetDocuments"),a.deleteObjectStore("targets"),a.deleteObjectStore("targetGlobal")}(e),kT(e)),o=o.next(()=>function(a){const u=a.store("targetGlobal"),c={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:ae.min().toTimestamp(),targetCount:0};return u.put("targetGlobalKey",c)}(s))),r<4&&i>=4&&(r!==0&&(o=o.next(()=>function(a,u){return u.store("mutations").W().next(c=>{a.deleteObjectStore("mutations"),a.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",lT,{unique:!0});const d=u.store("mutations"),f=c.map(g=>d.put(g));return N.waitFor(f)})}(e,s))),o=o.next(()=>{(function(a){a.createObjectStore("clientMetadata",{keyPath:"clientId"})})(e)})),r<5&&i>=5&&(o=o.next(()=>this.Us(s))),r<6&&i>=6&&(o=o.next(()=>(function(a){a.createObjectStore("remoteDocumentGlobal")}(e),this.Ks(s)))),r<7&&i>=7&&(o=o.next(()=>this.Gs(s))),r<8&&i>=8&&(o=o.next(()=>this.Qs(e,s))),r<9&&i>=9&&(o=o.next(()=>{(function(a){a.objectStoreNames.contains("remoteDocumentChanges")&&a.deleteObjectStore("remoteDocumentChanges")})(e)})),r<10&&i>=10&&(o=o.next(()=>this.js(s))),r<11&&i>=11&&(o=o.next(()=>{(function(a){a.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(a){a.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(o=o.next(()=>{(function(a){const u=a.createObjectStore("documentOverlays",{keyPath:b4});u.createIndex("collectionPathOverlayIndex",A4,{unique:!1}),u.createIndex("collectionGroupOverlayIndex",R4,{unique:!1})})(e)})),r<13&&i>=13&&(o=o.next(()=>function(a){const u=a.createObjectStore("remoteDocumentsV14",{keyPath:v4});u.createIndex("documentKeyIndex",_4),u.createIndex("collectionGroupIndex",w4)}(e)).next(()=>this.Ws(e,s)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(o=o.next(()=>this.zs(e,s))),r<15&&i>=15&&(o=o.next(()=>function(a){a.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),a.createObjectStore("indexState",{keyPath:k4}).createIndex("sequenceNumberIndex",C4,{unique:!1}),a.createObjectStore("indexEntries",{keyPath:N4}).createIndex("documentKeyIndex",D4,{unique:!1})}(e))),o}Ks(e){let n=0;return e.store("remoteDocuments").Z((r,i)=>{n+=Gf(i)}).next(()=>{const r={byteSize:n};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Us(e){const n=e.store("mutationQueues"),r=e.store("mutations");return n.W().next(i=>N.forEach(i,s=>{const o=IDBKeyRange.bound([s.userId,-1],[s.userId,s.lastAcknowledgedBatchId]);return r.W("userMutationsIndex",o).next(a=>N.forEach(a,u=>{ie(u.userId===s.userId);const c=po(this.yt,u);return WA(e,s.userId,c).next(()=>{})}))}))}Gs(e){const n=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{const s=[];return r.Z((o,a)=>{const u=new Me(o),c=function(d){return[0,Ln(d)]}(u);s.push(n.get(c).next(d=>d?N.resolve():(f=>n.put({targetId:0,path:Ln(f),sequenceNumber:i.highestListenSequenceNumber}))(u)))}).next(()=>N.waitFor(s))})}Qs(e,n){e.createObjectStore("collectionParents",{keyPath:T4});const r=n.store("collectionParents"),i=new Qw,s=o=>{if(i.add(o)){const a=o.lastSegment(),u=o.popLast();return r.put({collectionId:a,parent:Ln(u)})}};return n.store("remoteDocuments").Z({X:!0},(o,a)=>{const u=new Me(o);return s(u.popLast())}).next(()=>n.store("documentMutations").Z({X:!0},([o,a,u],c)=>{const d=Zr(a);return s(d.popLast())}))}js(e){const n=e.store("targets");return n.Z((r,i)=>{const s=Uu(i),o=$A(this.yt,s);return n.put(o)})}Ws(e,n){const r=n.store("remoteDocuments"),i=[];return r.Z((s,o)=>{const a=n.store("remoteDocumentsV14"),u=(c=o,c.document?new G(Me.fromString(c.document.name).popFirst(5)):c.noDocument?G.fromSegments(c.noDocument.path):c.unknownDocument?G.fromSegments(c.unknownDocument.path):ee()).path.toArray();var c;/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const d={prefixPath:u.slice(0,u.length-2),collectionGroup:u[u.length-2],documentId:u[u.length-1],readTime:o.readTime||[0,0],unknownDocument:o.unknownDocument,noDocument:o.noDocument,document:o.document,hasCommittedMutations:!!o.hasCommittedMutations};i.push(a.put(d))}).next(()=>N.waitFor(i))}zs(e,n){const r=n.store("mutations"),i=GA(this.yt),s=new YA(rm.Bs,this.yt.ie);return r.W().next(o=>{const a=new Map;return o.forEach(u=>{var c;let d=(c=a.get(u.userId))!==null&&c!==void 0?c:Ie();po(this.yt,u).keys().forEach(f=>d=d.add(f)),a.set(u.userId,d)}),N.forEach(a,(u,c)=>{const d=new Jt(c),f=tm.re(this.yt,d),g=s.getIndexManager(d),v=nm.re(d,this.yt,g,s.referenceDelegate);return new HA(i,v,f,g).recalculateAndSaveOverlaysForDocumentKeys(new wv(n,Qn.at),u).next()})})}}function kT(t){t.createObjectStore("targetDocuments",{keyPath:S4}).createIndex("documentTargetsIndex",E4,{unique:!0}),t.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",I4,{unique:!0}),t.createObjectStore("targetGlobal")}const Mg="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class Jw{constructor(e,n,r,i,s,o,a,u,c,d,f=15){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.Hs=s,this.window=o,this.document=a,this.Js=c,this.Ys=d,this.Xs=f,this.Ss=null,this.Ds=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Zs=null,this.inForeground=!1,this.ti=null,this.ei=null,this.ni=Number.NEGATIVE_INFINITY,this.si=g=>Promise.resolve(),!Jw.C())throw new M(D.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Y4(this,i),this.ii=n+"main",this.yt=new UA(u),this.ri=new Lr(this.ii,this.Xs,new sG(this.yt)),this.Cs=new z4(this.referenceDelegate,this.yt),this.remoteDocumentCache=GA(this.yt),this.Ns=new P4,this.window&&this.window.localStorage?this.oi=this.window.localStorage:(this.oi=null,d===!1&&bt("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.ui().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new M(D.FAILED_PRECONDITION,Mg);return this.ci(),this.ai(),this.hi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Cs.getHighestSequenceNumber(e))}).then(e=>{this.Ss=new Qn(e,this.Js)}).then(()=>{this.Ds=!0}).catch(e=>(this.ri&&this.ri.close(),Promise.reject(e)))}li(e){return this.si=async n=>{if(this.started)return e(n)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.ri.L(async n=>{n.newVersion===null&&await e()})}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.Hs.enqueueAndForget(async()=>{this.started&&await this.ui()}))}ui(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>vd(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.fi(e).next(n=>{n||(this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)))})}).next(()=>this.di(e)).next(n=>this.isPrimary&&!n?this._i(e).next(()=>!1):!!n&&this.wi(e).next(()=>!0))).catch(e=>{if(Hs(e))return F("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return F("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Hs.enqueueRetryable(()=>this.si(e)),this.isPrimary=e})}fi(e){return Nu(e).get("owner").next(n=>N.resolve(this.mi(n)))}gi(e){return vd(e).delete(this.clientId)}async yi(){if(this.isPrimary&&!this.pi(this.ni,18e5)){this.ni=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",n=>{const r=rn(n,"clientMetadata");return r.W().next(i=>{const s=this.Ii(i,18e5),o=i.filter(a=>s.indexOf(a)===-1);return N.forEach(o,a=>r.delete(a.clientId)).next(()=>o)})}).catch(()=>[]);if(this.oi)for(const n of e)this.oi.removeItem(this.Ti(n.clientId))}}hi(){this.ei=this.Hs.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.ui().then(()=>this.yi()).then(()=>this.hi()))}mi(e){return!!e&&e.ownerId===this.clientId}di(e){return this.Ys?N.resolve(!0):Nu(e).get("owner").next(n=>{if(n!==null&&this.pi(n.leaseTimestampMs,5e3)&&!this.Ei(n.ownerId)){if(this.mi(n)&&this.networkEnabled)return!0;if(!this.mi(n)){if(!n.allowTabSynchronization)throw new M(D.FAILED_PRECONDITION,Mg);return!1}}return!(!this.networkEnabled||!this.inForeground)||vd(e).W().next(r=>this.Ii(r,5e3).find(i=>{if(this.clientId!==i.clientId){const s=!this.networkEnabled&&i.networkEnabled,o=!this.inForeground&&i.inForeground,a=this.networkEnabled===i.networkEnabled;if(s||o&&a)return!0}return!1})===void 0)}).next(n=>(this.isPrimary!==n&&F("IndexedDbPersistence",`Client ${n?"is":"is not"} eligible for a primary lease.`),n))}async shutdown(){this.Ds=!1,this.Ai(),this.ei&&(this.ei.cancel(),this.ei=null),this.Ri(),this.bi(),await this.ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],e=>{const n=new wv(e,Qn.at);return this._i(n).next(()=>this.gi(n))}),this.ri.close(),this.Pi()}Ii(e,n){return e.filter(r=>this.pi(r.updateTimeMs,n)&&!this.Ei(r.clientId))}vi(){return this.runTransaction("getActiveClients","readonly",e=>vd(e).W().next(n=>this.Ii(n,18e5).map(r=>r.clientId)))}get started(){return this.Ds}getMutationQueue(e,n){return nm.re(e,this.yt,n,this.referenceDelegate)}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new j4(e,this.yt.ie.databaseId)}getDocumentOverlayCache(e){return tm.re(this.yt,e)}getBundleCache(){return this.Ns}runTransaction(e,n,r){F("IndexedDbPersistence","Starting transaction:",e);const i=n==="readonly"?"readonly":"readwrite",s=(o=this.Xs)===15?O4:o===14?FA:o===13?LA:o===12?x4:o===11?PA:void ee();var o;let a;return this.ri.runTransaction(e,i,s,u=>(a=new wv(u,this.Ss?this.Ss.next():Qn.at),n==="readwrite-primary"?this.fi(a).next(c=>!!c||this.di(a)).next(c=>{if(!c)throw bt(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)),new M(D.FAILED_PRECONDITION,zb);return r(a)}).next(c=>this.wi(a).next(()=>c)):this.Vi(a).next(()=>r(a)))).then(u=>(a.raiseOnCommittedEvent(),u))}Vi(e){return Nu(e).get("owner").next(n=>{if(n!==null&&this.pi(n.leaseTimestampMs,5e3)&&!this.Ei(n.ownerId)&&!this.mi(n)&&!(this.Ys||this.allowTabSynchronization&&n.allowTabSynchronization))throw new M(D.FAILED_PRECONDITION,Mg)})}wi(e){const n={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Nu(e).put("owner",n)}static C(){return Lr.C()}_i(e){const n=Nu(e);return n.get("owner").next(r=>this.mi(r)?(F("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):N.resolve())}pi(e,n){const r=Date.now();return!(e<r-n)&&(!(e>r)||(bt(`Detected an update time that is in the future: ${e} > ${r}`),!1))}ci(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.ti=()=>{this.Hs.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.ui()))},this.document.addEventListener("visibilitychange",this.ti),this.inForeground=this.document.visibilityState==="visible")}Ri(){this.ti&&(this.document.removeEventListener("visibilitychange",this.ti),this.ti=null)}ai(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.Zs=()=>{this.Ai(),_U()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Hs.enterRestrictedMode(!0),this.Hs.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Zs))}bi(){this.Zs&&(this.window.removeEventListener("pagehide",this.Zs),this.Zs=null)}Ei(e){var n;try{const r=((n=this.oi)===null||n===void 0?void 0:n.getItem(this.Ti(e)))!==null;return F("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return bt("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Ai(){if(this.oi)try{this.oi.setItem(this.Ti(this.clientId),String(Date.now()))}catch(e){bt("Failed to set zombie client id.",e)}}Pi(){if(this.oi)try{this.oi.removeItem(this.Ti(this.clientId))}catch{}}Ti(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Nu(t){return rn(t,"owner")}function vd(t){return rn(t,"clientMetadata")}function Zw(t,e){let n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e0{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.Si=r,this.Di=i}static Ci(e,n){let r=Ie(),i=Ie();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new e0(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KA{constructor(){this.xi=!1}initialize(e,n){this.Ni=e,this.indexManager=n,this.xi=!0}getDocumentsMatchingQuery(e,n,r,i){return this.ki(e,n).next(s=>s||this.Oi(e,n,i,r)).next(s=>s||this.Mi(e,n))}ki(e,n){if(JE(n))return N.resolve(null);let r=Fn(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=jf(n,null,"F"),r=Fn(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=Ie(...s);return this.Ni.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(u=>{const c=this.Fi(n,a);return this.$i(n,c,o,u.readTime)?this.ki(e,jf(n,null,"F")):this.Bi(e,c,n,u)}))})))}Oi(e,n,r,i){return JE(n)||i.isEqual(ae.min())?this.Mi(e,n):this.Ni.getDocuments(e,r).next(s=>{const o=this.Fi(n,s);return this.$i(n,o,r,i)?this.Mi(e,n):(uv()<=Le.DEBUG&&F("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),yv(n)),this.Bi(e,o,n,Wb(i,-1)))})}Fi(e,n){let r=new Ge(aA(e));return n.forEach((i,s)=>{vh(e,s)&&(r=r.add(s))}),r}$i(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Mi(e,n){return uv()<=Le.DEBUG&&F("QueryEngine","Using full collection scan to execute query:",yv(n)),this.Ni.getDocumentsMatchingQuery(e,n,pr.min())}Bi(e,n,r,i){return this.Ni.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oG{constructor(e,n,r,i){this.persistence=e,this.Li=n,this.yt=i,this.qi=new Ct(ge),this.Ui=new Ys(s=>Go(s),gh),this.Ki=new Map,this.Gi=e.getRemoteDocumentCache(),this.Cs=e.getTargetCache(),this.Ns=e.getBundleCache(),this.Qi(r)}Qi(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new HA(this.Gi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Gi.setIndexManager(this.indexManager),this.Li.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.qi))}}function QA(t,e,n,r){return new oG(t,e,n,r)}async function XA(t,e){const n=H(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n.Qi(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],a=[];let u=Ie();for(const c of i){o.push(c.batchId);for(const d of c.mutations)u=u.add(d.key)}for(const c of s){a.push(c.batchId);for(const d of c.mutations)u=u.add(d.key)}return n.localDocuments.getDocuments(r,u).next(c=>({ji:c,removedBatchIds:o,addedBatchIds:a}))})})}function aG(t,e){const n=H(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=n.Gi.newChangeBuffer({trackRemovals:!0});return function(o,a,u,c){const d=u.batch,f=d.keys();let g=N.resolve();return f.forEach(v=>{g=g.next(()=>c.getEntry(a,v)).next(_=>{const T=u.docVersions.get(v);ie(T!==null),_.version.compareTo(T)<0&&(d.applyToRemoteDocument(_,u),_.isValidDocument()&&(_.setReadTime(u.commitVersion),c.addEntry(_)))})}),g.next(()=>o.mutationQueue.removeMutationBatch(a,d))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(o){let a=Ie();for(let u=0;u<o.mutationResults.length;++u)o.mutationResults[u].transformResults.length>0&&(a=a.add(o.batch.mutations[u].key));return a}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function JA(t){const e=H(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Cs.getLastRemoteSnapshotVersion(n))}function lG(t,e){const n=H(t),r=e.snapshotVersion;let i=n.qi;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.Gi.newChangeBuffer({trackRemovals:!0});i=n.qi;const a=[];e.targetChanges.forEach((d,f)=>{const g=i.get(f);if(!g)return;a.push(n.Cs.removeMatchingKeys(s,d.removedDocuments,f).next(()=>n.Cs.addMatchingKeys(s,d.addedDocuments,f)));let v=g.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.has(f)?v=v.withResumeToken(qt.EMPTY_BYTE_STRING,ae.min()).withLastLimboFreeSnapshotVersion(ae.min()):d.resumeToken.approximateByteSize()>0&&(v=v.withResumeToken(d.resumeToken,r)),i=i.insert(f,v),function(_,T,C){return _.resumeToken.approximateByteSize()===0||T.snapshotVersion.toMicroseconds()-_.snapshotVersion.toMicroseconds()>=3e8?!0:C.addedDocuments.size+C.modifiedDocuments.size+C.removedDocuments.size>0}(g,v,d)&&a.push(n.Cs.updateTargetData(s,v))});let u=Jn(),c=Ie();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,d))}),a.push(ZA(s,o,e.documentUpdates).next(d=>{u=d.Wi,c=d.zi})),!r.isEqual(ae.min())){const d=n.Cs.getLastRemoteSnapshotVersion(s).next(f=>n.Cs.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(d)}return N.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,u,c)).next(()=>u)}).then(s=>(n.qi=i,s))}function ZA(t,e,n){let r=Ie(),i=Ie();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let o=Jn();return n.forEach((a,u)=>{const c=s.get(a);u.isFoundDocument()!==c.isFoundDocument()&&(i=i.add(a)),u.isNoDocument()&&u.version.isEqual(ae.min())?(e.removeEntry(a,u.readTime),o=o.insert(a,u)):!c.isValidDocument()||u.version.compareTo(c.version)>0||u.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(u),o=o.insert(a,u)):F("LocalStore","Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",u.version)}),{Wi:o,zi:i}})}function uG(t,e){const n=H(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Tl(t,e){const n=H(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Cs.getTargetData(r,e).next(s=>s?(i=s,N.resolve(i)):n.Cs.allocateTargetId(r).next(o=>(i=new Ds(e,o,0,r.currentSequenceNumber),n.Cs.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.qi.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.qi=n.qi.insert(r.targetId,r),n.Ui.set(e,r.targetId)),r})}async function kl(t,e,n){const r=H(t),i=r.qi.get(e),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!Hs(o))throw o;F("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.qi=r.qi.remove(e),r.Ui.delete(i.target)}function Hf(t,e,n){const r=H(t);let i=ae.min(),s=Ie();return r.persistence.runTransaction("Execute query","readonly",o=>function(a,u,c){const d=H(a),f=d.Ui.get(c);return f!==void 0?N.resolve(d.qi.get(f)):d.Cs.getTargetData(u,c)}(r,o,Fn(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Cs.getMatchingKeysForTargetId(o,a.targetId).next(u=>{s=u})}).next(()=>r.Li.getDocumentsMatchingQuery(o,e,n?i:ae.min(),n?s:Ie())).next(a=>(nR(r,oA(e),a),{documents:a,Hi:s})))}function eR(t,e){const n=H(t),r=H(n.Cs),i=n.qi.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",s=>r.ne(s,e).next(o=>o?o.target:null))}function tR(t,e){const n=H(t),r=n.Ki.get(e)||ae.min();return n.persistence.runTransaction("Get new document changes","readonly",i=>n.Gi.getAllFromCollectionGroup(i,e,Wb(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(nR(n,e,i),i))}function nR(t,e,n){let r=t.Ki.get(e)||ae.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.Ki.set(e,r)}async function cG(t,e,n,r){const i=H(t);let s=Ie(),o=Jn();for(const c of n){const d=e.Ji(c.metadata.name);c.document&&(s=s.add(d));const f=e.Yi(c);f.setReadTime(e.Xi(c.metadata.readTime)),o=o.insert(d,f)}const a=i.Gi.newChangeBuffer({trackRemovals:!0}),u=await Tl(i,function(c){return Fn(ql(Me.fromString(`__bundle__/docs/${c}`)))}(r));return i.persistence.runTransaction("Apply bundle documents","readwrite",c=>ZA(c,a,o).next(d=>(a.apply(c),d)).next(d=>i.Cs.removeMatchingKeysForTargetId(c,u.targetId).next(()=>i.Cs.addMatchingKeys(c,s,u.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(c,d.Wi,d.zi)).next(()=>d.Wi)))}async function hG(t,e,n=Ie()){const r=await Tl(t,Fn(Yw(e.bundledQuery))),i=H(t);return i.persistence.runTransaction("Save named query","readwrite",s=>{const o=At(e.readTime);if(r.snapshotVersion.compareTo(o)>=0)return i.Ns.saveNamedQuery(s,e);const a=r.withResumeToken(qt.EMPTY_BYTE_STRING,o);return i.qi=i.qi.insert(a.targetId,a),i.Cs.updateTargetData(s,a).next(()=>i.Cs.removeMatchingKeysForTargetId(s,r.targetId)).next(()=>i.Cs.addMatchingKeys(s,n,r.targetId)).next(()=>i.Ns.saveNamedQuery(s,e))})}function CT(t,e){return`firestore_clients_${t}_${e}`}function NT(t,e,n){let r=`firestore_mutations_${t}_${n}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function Pg(t,e){return`firestore_targets_${t}_${e}`}class Yf{constructor(e,n,r,i){this.user=e,this.batchId=n,this.state=r,this.error=i}static Zi(e,n,r){const i=JSON.parse(r);let s,o=typeof i=="object"&&["pending","acknowledged","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return o&&i.error&&(o=typeof i.error.message=="string"&&typeof i.error.code=="string",o&&(s=new M(i.error.code,i.error.message))),o?new Yf(e,n,i.state,s):(bt("SharedClientState",`Failed to parse mutation state for ID '${n}': ${r}`),null)}tr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class ic{constructor(e,n,r){this.targetId=e,this.state=n,this.error=r}static Zi(e,n){const r=JSON.parse(n);let i,s=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return s&&r.error&&(s=typeof r.error.message=="string"&&typeof r.error.code=="string",s&&(i=new M(r.error.code,r.error.message))),s?new ic(e,r.state,i):(bt("SharedClientState",`Failed to parse target state for ID '${e}': ${n}`),null)}tr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Kf{constructor(e,n){this.clientId=e,this.activeTargetIds=n}static Zi(e,n){const r=JSON.parse(n);let i=typeof r=="object"&&r.activeTargetIds instanceof Array,s=em();for(let o=0;i&&o<r.activeTargetIds.length;++o)i=Hb(r.activeTargetIds[o]),s=s.add(r.activeTargetIds[o]);return i?new Kf(e,s):(bt("SharedClientState",`Failed to parse client data for instance '${e}': ${n}`),null)}}class t0{constructor(e,n){this.clientId=e,this.onlineState=n}static Zi(e){const n=JSON.parse(e);return typeof n=="object"&&["Unknown","Online","Offline"].indexOf(n.onlineState)!==-1&&typeof n.clientId=="string"?new t0(n.clientId,n.onlineState):(bt("SharedClientState",`Failed to parse online state: ${e}`),null)}}class Tv{constructor(){this.activeTargetIds=em()}er(e){this.activeTargetIds=this.activeTargetIds.add(e)}nr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}tr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Lg{constructor(e,n,r,i,s){this.window=e,this.Hs=n,this.persistenceKey=r,this.sr=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ir=this.rr.bind(this),this.ur=new Ct(ge),this.started=!1,this.cr=[];const o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=s,this.ar=CT(this.persistenceKey,this.sr),this.hr=function(a){return`firestore_sequence_number_${a}`}(this.persistenceKey),this.ur=this.ur.insert(this.sr,new Tv),this.lr=new RegExp(`^firestore_clients_${o}_([^_]*)$`),this.dr=new RegExp(`^firestore_mutations_${o}_(\\d+)(?:_(.*))?$`),this._r=new RegExp(`^firestore_targets_${o}_(\\d+)$`),this.wr=function(a){return`firestore_online_state_${a}`}(this.persistenceKey),this.mr=function(a){return`firestore_bundle_loaded_v2_${a}`}(this.persistenceKey),this.window.addEventListener("storage",this.ir)}static C(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.vi();for(const r of e){if(r===this.sr)continue;const i=this.getItem(CT(this.persistenceKey,r));if(i){const s=Kf.Zi(r,i);s&&(this.ur=this.ur.insert(s.clientId,s))}}this.gr();const n=this.storage.getItem(this.wr);if(n){const r=this.yr(n);r&&this.pr(r)}for(const r of this.cr)this.rr(r);this.cr=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0}writeSequenceNumber(e){this.setItem(this.hr,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Ir(this.ur)}isActiveQueryTarget(e){let n=!1;return this.ur.forEach((r,i)=>{i.activeTargetIds.has(e)&&(n=!0)}),n}addPendingMutation(e){this.Tr(e,"pending")}updateMutationState(e,n,r){this.Tr(e,n,r),this.Er(e)}addLocalQueryTarget(e){let n="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(Pg(this.persistenceKey,e));if(r){const i=ic.Zi(e,r);i&&(n=i.state)}}return this.Ar.er(e),this.gr(),n}removeLocalQueryTarget(e){this.Ar.nr(e),this.gr()}isLocalQueryTarget(e){return this.Ar.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Pg(this.persistenceKey,e))}updateQueryState(e,n,r){this.Rr(e,n,r)}handleUserChange(e,n,r){n.forEach(i=>{this.Er(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.br(e)}notifyBundleLoaded(e){this.Pr(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ir),this.removeItem(this.ar),this.started=!1)}getItem(e){const n=this.storage.getItem(e);return F("SharedClientState","READ",e,n),n}setItem(e,n){F("SharedClientState","SET",e,n),this.storage.setItem(e,n)}removeItem(e){F("SharedClientState","REMOVE",e),this.storage.removeItem(e)}rr(e){const n=e;if(n.storageArea===this.storage){if(F("SharedClientState","EVENT",n.key,n.newValue),n.key===this.ar)return void bt("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Hs.enqueueRetryable(async()=>{if(this.started){if(n.key!==null){if(this.lr.test(n.key)){if(n.newValue==null){const r=this.vr(n.key);return this.Vr(r,null)}{const r=this.Sr(n.key,n.newValue);if(r)return this.Vr(r.clientId,r)}}else if(this.dr.test(n.key)){if(n.newValue!==null){const r=this.Dr(n.key,n.newValue);if(r)return this.Cr(r)}}else if(this._r.test(n.key)){if(n.newValue!==null){const r=this.Nr(n.key,n.newValue);if(r)return this.kr(r)}}else if(n.key===this.wr){if(n.newValue!==null){const r=this.yr(n.newValue);if(r)return this.pr(r)}}else if(n.key===this.hr){const r=function(i){let s=Qn.at;if(i!=null)try{const o=JSON.parse(i);ie(typeof o=="number"),s=o}catch(o){bt("SharedClientState","Failed to read sequence number from WebStorage",o)}return s}(n.newValue);r!==Qn.at&&this.sequenceNumberHandler(r)}else if(n.key===this.mr){const r=this.Or(n.newValue);await Promise.all(r.map(i=>this.syncEngine.Mr(i)))}}}else this.cr.push(n)})}}get Ar(){return this.ur.get(this.sr)}gr(){this.setItem(this.ar,this.Ar.tr())}Tr(e,n,r){const i=new Yf(this.currentUser,e,n,r),s=NT(this.persistenceKey,this.currentUser,e);this.setItem(s,i.tr())}Er(e){const n=NT(this.persistenceKey,this.currentUser,e);this.removeItem(n)}br(e){const n={clientId:this.sr,onlineState:e};this.storage.setItem(this.wr,JSON.stringify(n))}Rr(e,n,r){const i=Pg(this.persistenceKey,e),s=new ic(e,n,r);this.setItem(i,s.tr())}Pr(e){const n=JSON.stringify(Array.from(e));this.setItem(this.mr,n)}vr(e){const n=this.lr.exec(e);return n?n[1]:null}Sr(e,n){const r=this.vr(e);return Kf.Zi(r,n)}Dr(e,n){const r=this.dr.exec(e),i=Number(r[1]),s=r[2]!==void 0?r[2]:null;return Yf.Zi(new Jt(s),i,n)}Nr(e,n){const r=this._r.exec(e),i=Number(r[1]);return ic.Zi(i,n)}yr(e){return t0.Zi(e)}Or(e){return JSON.parse(e)}async Cr(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.Fr(e.batchId,e.state,e.error);F("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)}kr(e){return this.syncEngine.$r(e.targetId,e.state,e.error)}Vr(e,n){const r=n?this.ur.insert(e,n):this.ur.remove(e),i=this.Ir(this.ur),s=this.Ir(r),o=[],a=[];return s.forEach(u=>{i.has(u)||o.push(u)}),i.forEach(u=>{s.has(u)||a.push(u)}),this.syncEngine.Br(o,a).then(()=>{this.ur=r})}pr(e){this.ur.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Ir(e){let n=em();return e.forEach((r,i)=>{n=n.unionWith(i.activeTargetIds)}),n}}class rR{constructor(){this.Lr=new Tv,this.qr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e){return this.Lr.er(e),this.qr[e]||"not-current"}updateQueryState(e,n,r){this.qr[e]=n}removeLocalQueryTarget(e){this.Lr.nr(e)}isLocalQueryTarget(e){return this.Lr.activeTargetIds.has(e)}clearQueryState(e){delete this.qr[e]}getAllActiveQueryTargets(){return this.Lr.activeTargetIds}isActiveQueryTarget(e){return this.Lr.activeTargetIds.has(e)}start(){return this.Lr=new Tv,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dG{Ur(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DT{constructor(){this.Kr=()=>this.Gr(),this.Qr=()=>this.jr(),this.Wr=[],this.zr()}Ur(e){this.Wr.push(e)}shutdown(){window.removeEventListener("online",this.Kr),window.removeEventListener("offline",this.Qr)}zr(){window.addEventListener("online",this.Kr),window.addEventListener("offline",this.Qr)}Gr(){F("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Wr)e(0)}jr(){F("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Wr)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fG={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pG{constructor(e){this.Hr=e.Hr,this.Jr=e.Jr}Yr(e){this.Xr=e}Zr(e){this.eo=e}onMessage(e){this.no=e}close(){this.Jr()}send(e){this.Hr(e)}so(){this.Xr()}io(e){this.eo(e)}ro(e){this.no(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mG extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http";this.oo=n+"://"+e.host,this.uo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get co(){return!1}ao(e,n,r,i,s){const o=this.ho(e,n);F("RestConnection","Sending: ",o,r);const a={};return this.lo(a,i,s),this.fo(e,o,a,r).then(u=>(F("RestConnection","Received: ",u),u),u=>{throw Wo("RestConnection",`${e} failed with error: `,u,"url: ",o,"request:",r),u})}_o(e,n,r,i,s,o){return this.ao(e,n,r,i,s)}lo(e,n,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+zl,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((i,s)=>e[s]=i),r&&r.headers.forEach((i,s)=>e[s]=i)}ho(e,n){const r=fG[e];return`${this.oo}/v1/${n}:${r}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}fo(e,n,r,i){return new Promise((s,o)=>{const a=new pq;a.setWithCredentials(!0),a.listenOnce(hq.COMPLETE,()=>{try{switch(a.getLastErrorCode()){case xg.NO_ERROR:const c=a.getResponseJson();F("Connection","XHR received:",JSON.stringify(c)),s(c);break;case xg.TIMEOUT:F("Connection",'RPC "'+e+'" timed out'),o(new M(D.DEADLINE_EXCEEDED,"Request time out"));break;case xg.HTTP_ERROR:const d=a.getStatus();if(F("Connection",'RPC "'+e+'" failed with status:',d,"response text:",a.getResponseText()),d>0){let f=a.getResponseJson();Array.isArray(f)&&(f=f[0]);const g=f==null?void 0:f.error;if(g&&g.status&&g.message){const v=function(_){const T=_.toLowerCase().replace(/_/g,"-");return Object.values(D).indexOf(T)>=0?T:D.UNKNOWN}(g.status);o(new M(v,g.message))}else o(new M(D.UNKNOWN,"Server responded with status "+a.getStatus()))}else o(new M(D.UNAVAILABLE,"Connection failed."));break;default:ee()}}finally{F("Connection",'RPC "'+e+'" completed.')}});const u=JSON.stringify(i);a.send(n,"POST",u,r,15)})}wo(e,n,r){const i=[this.oo,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=uq(),o=cq(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(a.xmlHttpFactory=new fq({})),this.lo(a.initMessageHeaders,n,r),a.encodeInitMessageHeaders=!0;const u=i.join("");F("Connection","Creating WebChannel: "+u,a);const c=s.createWebChannel(u,a);let d=!1,f=!1;const g=new pG({Hr:_=>{f?F("Connection","Not sending because WebChannel is closed:",_):(d||(F("Connection","Opening WebChannel transport."),c.open(),d=!0),F("Connection","WebChannel sending:",_),c.send(_))},Jr:()=>c.close()}),v=(_,T,C)=>{_.listen(T,I=>{try{C(I)}catch(w){setTimeout(()=>{throw w},0)}})};return v(c,fd.EventType.OPEN,()=>{f||F("Connection","WebChannel transport opened.")}),v(c,fd.EventType.CLOSE,()=>{f||(f=!0,F("Connection","WebChannel transport closed"),g.io())}),v(c,fd.EventType.ERROR,_=>{f||(f=!0,Wo("Connection","WebChannel transport errored:",_),g.io(new M(D.UNAVAILABLE,"The operation could not be completed")))}),v(c,fd.EventType.MESSAGE,_=>{var T;if(!f){const C=_.data[0];ie(!!C);const I=C,w=I.error||((T=I[0])===null||T===void 0?void 0:T.error);if(w){F("Connection","WebChannel received error:",w);const S=w.status;let A=function(L){const P=xt[L];if(P!==void 0)return vA(P)}(S),O=w.message;A===void 0&&(A=D.INTERNAL,O="Unknown error status: "+S+" with message "+w.message),f=!0,g.io(new M(A,O)),c.close()}else F("Connection","WebChannel received:",C),g.ro(C)}}),v(o,dq.STAT_EVENT,_=>{_.stat===UE.PROXY?F("Connection","Detected buffering proxy"):_.stat===UE.NOPROXY&&F("Connection","Detected no buffering proxy")}),setTimeout(()=>{g.so()},0),g}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iR(){return typeof window<"u"?window:null}function Bd(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sh(t){return new o4(t,!0)}class n0{constructor(e,n,r=1e3,i=1.5,s=6e4){this.Hs=e,this.timerId=n,this.mo=r,this.yo=i,this.po=s,this.Io=0,this.To=null,this.Eo=Date.now(),this.reset()}reset(){this.Io=0}Ao(){this.Io=this.po}Ro(e){this.cancel();const n=Math.floor(this.Io+this.bo()),r=Math.max(0,Date.now()-this.Eo),i=Math.max(0,n-r);i>0&&F("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Io} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.To=this.Hs.enqueueAfterDelay(this.timerId,i,()=>(this.Eo=Date.now(),e())),this.Io*=this.yo,this.Io<this.mo&&(this.Io=this.mo),this.Io>this.po&&(this.Io=this.po)}Po(){this.To!==null&&(this.To.skipDelay(),this.To=null)}cancel(){this.To!==null&&(this.To.cancel(),this.To=null)}bo(){return(Math.random()-.5)*this.Io}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sR{constructor(e,n,r,i,s,o,a,u){this.Hs=e,this.vo=r,this.Vo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=u,this.state=0,this.So=0,this.Do=null,this.Co=null,this.stream=null,this.xo=new n0(e,n)}No(){return this.state===1||this.state===5||this.ko()}ko(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.Oo()}async stop(){this.No()&&await this.close(0)}Mo(){this.state=0,this.xo.reset()}Fo(){this.ko()&&this.Do===null&&(this.Do=this.Hs.enqueueAfterDelay(this.vo,6e4,()=>this.$o()))}Bo(e){this.Lo(),this.stream.send(e)}async $o(){if(this.ko())return this.close(0)}Lo(){this.Do&&(this.Do.cancel(),this.Do=null)}qo(){this.Co&&(this.Co.cancel(),this.Co=null)}async close(e,n){this.Lo(),this.qo(),this.xo.cancel(),this.So++,e!==4?this.xo.reset():n&&n.code===D.RESOURCE_EXHAUSTED?(bt(n.toString()),bt("Using maximum backoff delay to prevent overloading the backend."),this.xo.Ao()):n&&n.code===D.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.Uo(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Zr(n)}Uo(){}auth(){this.state=1;const e=this.Ko(this.So),n=this.So;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.So===n&&this.Go(r,i)},r=>{e(()=>{const i=new M(D.UNKNOWN,"Fetching auth token failed: "+r.message);return this.Qo(i)})})}Go(e,n){const r=this.Ko(this.So);this.stream=this.jo(e,n),this.stream.Yr(()=>{r(()=>(this.state=2,this.Co=this.Hs.enqueueAfterDelay(this.Vo,1e4,()=>(this.ko()&&(this.state=3),Promise.resolve())),this.listener.Yr()))}),this.stream.Zr(i=>{r(()=>this.Qo(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}Oo(){this.state=5,this.xo.Ro(async()=>{this.state=0,this.start()})}Qo(e){return F("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Ko(e){return n=>{this.Hs.enqueueAndForget(()=>this.So===e?n():(F("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class gG extends sR{constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.yt=s}jo(e,n){return this.connection.wo("Listen",e,n)}onMessage(e){this.xo.reset();const n=u4(this.yt,e),r=function(i){if(!("targetChange"in i))return ae.min();const s=i.targetChange;return s.targetIds&&s.targetIds.length?ae.min():s.readTime?At(s.readTime):ae.min()}(e);return this.listener.Wo(n,r)}zo(e){const n={};n.database=jc(this.yt),n.addTarget=function(i,s){let o;const a=s.target;return o=Bf(a)?{documents:bA(i,a)}:{query:zw(i,a)},o.targetId=s.targetId,s.resumeToken.approximateByteSize()>0?o.resumeToken=TA(i,s.resumeToken):s.snapshotVersion.compareTo(ae.min())>0&&(o.readTime=El(i,s.snapshotVersion.toTimestamp())),o}(this.yt,e);const r=h4(this.yt,e);r&&(n.labels=r),this.Bo(n)}Ho(e){const n={};n.database=jc(this.yt),n.removeTarget=e,this.Bo(n)}}class yG extends sR{constructor(e,n,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.yt=s,this.Jo=!1}get Yo(){return this.Jo}start(){this.Jo=!1,this.lastStreamToken=void 0,super.start()}Uo(){this.Jo&&this.Xo([])}jo(e,n){return this.connection.wo("Write",e,n)}onMessage(e){if(ie(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Jo){this.xo.reset();const n=c4(e.writeResults,e.commitTime),r=At(e.commitTime);return this.listener.Zo(r,n)}return ie(!e.writeResults||e.writeResults.length===0),this.Jo=!0,this.listener.tu()}eu(){const e={};e.database=jc(this.yt),this.Bo(e)}Xo(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>zc(this.yt,r))};this.Bo(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vG extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.yt=i,this.nu=!1}su(){if(this.nu)throw new M(D.FAILED_PRECONDITION,"The client has already been terminated.")}ao(e,n,r){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,s])=>this.connection.ao(e,n,r,i,s)).catch(i=>{throw i.name==="FirebaseError"?(i.code===D.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new M(D.UNKNOWN,i.toString())})}_o(e,n,r,i){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection._o(e,n,r,s,o,i)).catch(s=>{throw s.name==="FirebaseError"?(s.code===D.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new M(D.UNKNOWN,s.toString())})}terminate(){this.nu=!0}}async function _G(t,e){const n=H(t),r=function(s,o){const a=zw(s,o);return{structuredAggregationQuery:{aggregations:[{count:{},alias:"count_alias"}],structuredQuery:a.structuredQuery},parent:a.parent}}(n.yt,Fn(e)),i=r.parent;return n.connection.co||delete r.parent,(await n._o("RunAggregationQuery",i,r,1)).filter(s=>!!s.result).map(s=>s.result.aggregateFields)}class wG{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.iu=0,this.ru=null,this.ou=!0}uu(){this.iu===0&&(this.cu("Unknown"),this.ru=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.ru=null,this.au("Backend didn't respond within 10 seconds."),this.cu("Offline"),Promise.resolve())))}hu(e){this.state==="Online"?this.cu("Unknown"):(this.iu++,this.iu>=1&&(this.lu(),this.au(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.cu("Offline")))}set(e){this.lu(),this.iu=0,e==="Online"&&(this.ou=!1),this.cu(e)}cu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}au(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ou?(bt(n),this.ou=!1):F("OnlineStateTracker",n)}lu(){this.ru!==null&&(this.ru.cancel(),this.ru=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IG{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.fu=[],this.du=new Map,this._u=new Set,this.wu=[],this.mu=s,this.mu.Ur(o=>{r.enqueueAndForget(async()=>{Gi(this)&&(F("RemoteStore","Restarting streams for network reachability change."),await async function(a){const u=H(a);u._u.add(4),await Yl(u),u.gu.set("Unknown"),u._u.delete(4),await Eh(u)}(this))})}),this.gu=new wG(r,i)}}async function Eh(t){if(Gi(t))for(const e of t.wu)await e(!0)}async function Yl(t){for(const e of t.wu)await e(!1)}function im(t,e){const n=H(t);n.du.has(e.targetId)||(n.du.set(e.targetId,e),s0(n)?i0(n):Ql(n).ko()&&r0(n,e))}function qc(t,e){const n=H(t),r=Ql(n);n.du.delete(e),r.ko()&&oR(n,e),n.du.size===0&&(r.ko()?r.Fo():Gi(n)&&n.gu.set("Unknown"))}function r0(t,e){t.yu.Ot(e.targetId),Ql(t).zo(e)}function oR(t,e){t.yu.Ot(e),Ql(t).Ho(e)}function i0(t){t.yu=new n4({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ne:e=>t.du.get(e)||null}),Ql(t).start(),t.gu.uu()}function s0(t){return Gi(t)&&!Ql(t).No()&&t.du.size>0}function Gi(t){return H(t)._u.size===0}function aR(t){t.yu=void 0}async function SG(t){t.du.forEach((e,n)=>{r0(t,e)})}async function EG(t,e){aR(t),s0(t)?(t.gu.hu(e),i0(t)):t.gu.set("Unknown")}async function TG(t,e,n){if(t.gu.set("Online"),e instanceof EA&&e.state===2&&e.cause)try{await async function(r,i){const s=i.cause;for(const o of i.targetIds)r.du.has(o)&&(await r.remoteSyncer.rejectListen(o,s),r.du.delete(o),r.yu.removeTarget(o))}(t,e)}catch(r){F("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Qf(t,r)}else if(e instanceof $d?t.yu.Kt(e):e instanceof SA?t.yu.Jt(e):t.yu.jt(e),!n.isEqual(ae.min()))try{const r=await JA(t.localStore);n.compareTo(r)>=0&&await function(i,s){const o=i.yu.Zt(s);return o.targetChanges.forEach((a,u)=>{if(a.resumeToken.approximateByteSize()>0){const c=i.du.get(u);c&&i.du.set(u,c.withResumeToken(a.resumeToken,s))}}),o.targetMismatches.forEach(a=>{const u=i.du.get(a);if(!u)return;i.du.set(a,u.withResumeToken(qt.EMPTY_BYTE_STRING,u.snapshotVersion)),oR(i,a);const c=new Ds(u.target,a,1,u.sequenceNumber);r0(i,c)}),i.remoteSyncer.applyRemoteEvent(o)}(t,n)}catch(r){F("RemoteStore","Failed to raise snapshot:",r),await Qf(t,r)}}async function Qf(t,e,n){if(!Hs(e))throw e;t._u.add(1),await Yl(t),t.gu.set("Offline"),n||(n=()=>JA(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{F("RemoteStore","Retrying IndexedDB access"),await n(),t._u.delete(1),await Eh(t)})}function lR(t,e){return e().catch(n=>Qf(t,n,e))}async function Kl(t){const e=H(t),n=Us(e);let r=e.fu.length>0?e.fu[e.fu.length-1].batchId:-1;for(;kG(e);)try{const i=await uG(e.localStore,r);if(i===null){e.fu.length===0&&n.Fo();break}r=i.batchId,CG(e,i)}catch(i){await Qf(e,i)}uR(e)&&cR(e)}function kG(t){return Gi(t)&&t.fu.length<10}function CG(t,e){t.fu.push(e);const n=Us(t);n.ko()&&n.Yo&&n.Xo(e.mutations)}function uR(t){return Gi(t)&&!Us(t).No()&&t.fu.length>0}function cR(t){Us(t).start()}async function NG(t){Us(t).eu()}async function DG(t){const e=Us(t);for(const n of t.fu)e.Xo(n.mutations)}async function bG(t,e,n){const r=t.fu.shift(),i=Gw.from(r,e,n);await lR(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await Kl(t)}async function AG(t,e){e&&Us(t).Yo&&await async function(n,r){if(i=r.code,yA(i)&&i!==D.ABORTED){const s=n.fu.shift();Us(n).Mo(),await lR(n,()=>n.remoteSyncer.rejectFailedWrite(s.batchId,r)),await Kl(n)}var i}(t,e),uR(t)&&cR(t)}async function bT(t,e){const n=H(t);n.asyncQueue.verifyOperationInProgress(),F("RemoteStore","RemoteStore received new credentials");const r=Gi(n);n._u.add(3),await Yl(n),r&&n.gu.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n._u.delete(3),await Eh(n)}async function kv(t,e){const n=H(t);e?(n._u.delete(2),await Eh(n)):e||(n._u.add(2),await Yl(n),n.gu.set("Unknown"))}function Ql(t){return t.pu||(t.pu=function(e,n,r){const i=H(e);return i.su(),new gG(n,i.connection,i.authCredentials,i.appCheckCredentials,i.yt,r)}(t.datastore,t.asyncQueue,{Yr:SG.bind(null,t),Zr:EG.bind(null,t),Wo:TG.bind(null,t)}),t.wu.push(async e=>{e?(t.pu.Mo(),s0(t)?i0(t):t.gu.set("Unknown")):(await t.pu.stop(),aR(t))})),t.pu}function Us(t){return t.Iu||(t.Iu=function(e,n,r){const i=H(e);return i.su(),new yG(n,i.connection,i.authCredentials,i.appCheckCredentials,i.yt,r)}(t.datastore,t.asyncQueue,{Yr:NG.bind(null,t),Zr:AG.bind(null,t),tu:DG.bind(null,t),Zo:bG.bind(null,t)}),t.wu.push(async e=>{e?(t.Iu.Mo(),await Kl(t)):(await t.Iu.stop(),t.fu.length>0&&(F("RemoteStore",`Stopping write stream with ${t.fu.length} pending writes`),t.fu=[]))})),t.Iu}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o0{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Wt,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}static createAndSchedule(e,n,r,i,s){const o=Date.now()+r,a=new o0(e,n,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new M(D.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Xl(t,e){if(bt("AsyncQueue",`${e}: ${t}`),Hs(t))return new M(D.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class il{constructor(e){this.comparator=e?(n,r)=>e(n,r)||G.comparator(n.key,r.key):(n,r)=>G.comparator(n.key,r.key),this.keyedMap=Fu(),this.sortedSet=new Ct(this.comparator)}static emptySet(e){return new il(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof il)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new il;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AT{constructor(){this.Tu=new Ct(G.comparator)}track(e){const n=e.doc.key,r=this.Tu.get(n);r?e.type!==0&&r.type===3?this.Tu=this.Tu.insert(n,e):e.type===3&&r.type!==1?this.Tu=this.Tu.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.Tu=this.Tu.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.Tu=this.Tu.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.Tu=this.Tu.remove(n):e.type===1&&r.type===2?this.Tu=this.Tu.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.Tu=this.Tu.insert(n,{type:2,doc:e.doc}):ee():this.Tu=this.Tu.insert(n,e)}Eu(){const e=[];return this.Tu.inorderTraversal((n,r)=>{e.push(r)}),e}}class Cl{constructor(e,n,r,i,s,o,a,u,c){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=u,this.hasCachedResults=c}static fromInitialDocuments(e,n,r,i,s){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new Cl(e,n,il.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&yh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RG{constructor(){this.Au=void 0,this.listeners=[]}}class xG{constructor(){this.queries=new Ys(e=>sA(e),yh),this.onlineState="Unknown",this.Ru=new Set}}async function a0(t,e){const n=H(t),r=e.query;let i=!1,s=n.queries.get(r);if(s||(i=!0,s=new RG),i)try{s.Au=await n.onListen(r)}catch(o){const a=Xl(o,`Initialization of query '${yv(e.query)}' failed`);return void e.onError(a)}n.queries.set(r,s),s.listeners.push(e),e.bu(n.onlineState),s.Au&&e.Pu(s.Au)&&u0(n)}async function l0(t,e){const n=H(t),r=e.query;let i=!1;const s=n.queries.get(r);if(s){const o=s.listeners.indexOf(e);o>=0&&(s.listeners.splice(o,1),i=s.listeners.length===0)}if(i)return n.queries.delete(r),n.onUnlisten(r)}function OG(t,e){const n=H(t);let r=!1;for(const i of e){const s=i.query,o=n.queries.get(s);if(o){for(const a of o.listeners)a.Pu(i)&&(r=!0);o.Au=i}}r&&u0(n)}function MG(t,e,n){const r=H(t),i=r.queries.get(e);if(i)for(const s of i.listeners)s.onError(n);r.queries.delete(e)}function u0(t){t.Ru.forEach(e=>{e.next()})}class c0{constructor(e,n,r){this.query=e,this.vu=n,this.Vu=!1,this.Su=null,this.onlineState="Unknown",this.options=r||{}}Pu(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new Cl(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Vu?this.Du(e)&&(this.vu.next(e),n=!0):this.Cu(e,this.onlineState)&&(this.xu(e),n=!0),this.Su=e,n}onError(e){this.vu.error(e)}bu(e){this.onlineState=e;let n=!1;return this.Su&&!this.Vu&&this.Cu(this.Su,e)&&(this.xu(this.Su),n=!0),n}Cu(e,n){if(!e.fromCache)return!0;const r=n!=="Offline";return(!this.options.Nu||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Du(e){if(e.docChanges.length>0)return!0;const n=this.Su&&this.Su.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}xu(e){e=Cl.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Vu=!0,this.vu.next(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PG{constructor(e,n){this.ku=e,this.byteLength=n}Ou(){return"metadata"in this.ku}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RT{constructor(e){this.yt=e}Ji(e){return ri(this.yt,e)}Yi(e){return e.metadata.exists?DA(this.yt,e.document,!1):rt.newNoDocument(this.Ji(e.metadata.name),this.Xi(e.metadata.readTime))}Xi(e){return At(e)}}class LG{constructor(e,n,r){this.Mu=e,this.localStore=n,this.yt=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=hR(e)}Fu(e){this.progress.bytesLoaded+=e.byteLength;let n=this.progress.documentsLoaded;if(e.ku.namedQuery)this.queries.push(e.ku.namedQuery);else if(e.ku.documentMetadata){this.documents.push({metadata:e.ku.documentMetadata}),e.ku.documentMetadata.exists||++n;const r=Me.fromString(e.ku.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.ku.document&&(this.documents[this.documents.length-1].document=e.ku.document,++n);return n!==this.progress.documentsLoaded?(this.progress.documentsLoaded=n,Object.assign({},this.progress)):null}$u(e){const n=new Map,r=new RT(this.yt);for(const i of e)if(i.metadata.queries){const s=r.Ji(i.metadata.name);for(const o of i.metadata.queries){const a=(n.get(o)||Ie()).add(s);n.set(o,a)}}return n}async complete(){const e=await cG(this.localStore,new RT(this.yt),this.documents,this.Mu.id),n=this.$u(this.documents);for(const r of this.queries)await hG(this.localStore,r,n.get(r.name));return this.progress.taskState="Success",{progress:this.progress,Bu:this.collectionGroups,Lu:e}}}function hR(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dR{constructor(e){this.key=e}}class fR{constructor(e){this.key=e}}class pR{constructor(e,n){this.query=e,this.qu=n,this.Uu=null,this.hasCachedResults=!1,this.current=!1,this.Ku=Ie(),this.mutatedKeys=Ie(),this.Gu=aA(e),this.Qu=new il(this.Gu)}get ju(){return this.qu}Wu(e,n){const r=n?n.zu:new AT,i=n?n.Qu:this.Qu;let s=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1;const u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,c=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((d,f)=>{const g=i.get(d),v=vh(this.query,f)?f:null,_=!!g&&this.mutatedKeys.has(g.key),T=!!v&&(v.hasLocalMutations||this.mutatedKeys.has(v.key)&&v.hasCommittedMutations);let C=!1;g&&v?g.data.isEqual(v.data)?_!==T&&(r.track({type:3,doc:v}),C=!0):this.Hu(g,v)||(r.track({type:2,doc:v}),C=!0,(u&&this.Gu(v,u)>0||c&&this.Gu(v,c)<0)&&(a=!0)):!g&&v?(r.track({type:0,doc:v}),C=!0):g&&!v&&(r.track({type:1,doc:g}),C=!0,(u||c)&&(a=!0)),C&&(v?(o=o.add(v),s=T?s.add(d):s.delete(d)):(o=o.delete(d),s=s.delete(d)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const d=this.query.limitType==="F"?o.last():o.first();o=o.delete(d.key),s=s.delete(d.key),r.track({type:1,doc:d})}return{Qu:o,zu:r,$i:a,mutatedKeys:s}}Hu(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r){const i=this.Qu;this.Qu=e.Qu,this.mutatedKeys=e.mutatedKeys;const s=e.zu.Eu();s.sort((c,d)=>function(f,g){const v=_=>{switch(_){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ee()}};return v(f)-v(g)}(c.type,d.type)||this.Gu(c.doc,d.doc)),this.Ju(r);const o=n?this.Yu():[],a=this.Ku.size===0&&this.current?1:0,u=a!==this.Uu;return this.Uu=a,s.length!==0||u?{snapshot:new Cl(this.query,e.Qu,i,s,e.mutatedKeys,a===0,u,!1,!!r&&r.resumeToken.approximateByteSize()>0),Xu:o}:{Xu:o}}bu(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Qu:this.Qu,zu:new AT,mutatedKeys:this.mutatedKeys,$i:!1},!1)):{Xu:[]}}Zu(e){return!this.qu.has(e)&&!!this.Qu.has(e)&&!this.Qu.get(e).hasLocalMutations}Ju(e){e&&(e.addedDocuments.forEach(n=>this.qu=this.qu.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.qu=this.qu.delete(n)),this.current=e.current)}Yu(){if(!this.current)return[];const e=this.Ku;this.Ku=Ie(),this.Qu.forEach(r=>{this.Zu(r.key)&&(this.Ku=this.Ku.add(r.key))});const n=[];return e.forEach(r=>{this.Ku.has(r)||n.push(new fR(r))}),this.Ku.forEach(r=>{e.has(r)||n.push(new dR(r))}),n}tc(e){this.qu=e.Hi,this.Ku=Ie();const n=this.Wu(e.documents);return this.applyChanges(n,!0)}ec(){return Cl.fromInitialDocuments(this.query,this.Qu,this.mutatedKeys,this.Uu===0,this.hasCachedResults)}}class FG{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class UG{constructor(e){this.key=e,this.nc=!1}}class $G{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.sc={},this.ic=new Ys(a=>sA(a),yh),this.rc=new Map,this.oc=new Set,this.uc=new Ct(G.comparator),this.cc=new Map,this.ac=new Xw,this.hc={},this.lc=new Map,this.fc=Xo.vn(),this.onlineState="Unknown",this.dc=void 0}get isPrimaryClient(){return this.dc===!0}}async function VG(t,e){const n=m0(t);let r,i;const s=n.ic.get(e);if(s)r=s.targetId,n.sharedClientState.addLocalQueryTarget(r),i=s.view.ec();else{const o=await Tl(n.localStore,Fn(e));n.isPrimaryClient&&im(n.remoteStore,o);const a=n.sharedClientState.addLocalQueryTarget(o.targetId);r=o.targetId,i=await h0(n,e,r,a==="current",o.resumeToken)}return i}async function h0(t,e,n,r,i){t._c=(f,g,v)=>async function(_,T,C,I){let w=T.view.Wu(C);w.$i&&(w=await Hf(_.localStore,T.query,!1).then(({documents:O})=>T.view.Wu(O,w)));const S=I&&I.targetChanges.get(T.targetId),A=T.view.applyChanges(w,_.isPrimaryClient,S);return Cv(_,T.targetId,A.Xu),A.snapshot}(t,f,g,v);const s=await Hf(t.localStore,e,!0),o=new pR(e,s.Hi),a=o.Wu(s.documents),u=Ih.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),c=o.applyChanges(a,t.isPrimaryClient,u);Cv(t,n,c.Xu);const d=new FG(e,n,o);return t.ic.set(e,d),t.rc.has(n)?t.rc.get(n).push(e):t.rc.set(n,[e]),c.snapshot}async function BG(t,e){const n=H(t),r=n.ic.get(e),i=n.rc.get(r.targetId);if(i.length>1)return n.rc.set(r.targetId,i.filter(s=>!yh(s,e))),void n.ic.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)||await kl(n.localStore,r.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(r.targetId),qc(n.remoteStore,r.targetId),Nl(n,r.targetId)}).catch(Gs)):(Nl(n,r.targetId),await kl(n.localStore,r.targetId,!0))}async function WG(t,e,n){const r=g0(t);try{const i=await function(s,o){const a=H(s),u=pt.now(),c=o.reduce((g,v)=>g.add(v.key),Ie());let d,f;return a.persistence.runTransaction("Locally write mutations","readwrite",g=>{let v=Jn(),_=Ie();return a.Gi.getEntries(g,c).next(T=>{v=T,v.forEach((C,I)=>{I.isValidDocument()||(_=_.add(C))})}).next(()=>a.localDocuments.getOverlayedDocuments(g,v)).next(T=>{d=T;const C=[];for(const I of o){const w=Qq(I,d.get(I.key).overlayedDocument);w!=null&&C.push(new qi(I.key,w,rA(w.value.mapValue),ft.exists(!0)))}return a.mutationQueue.addMutationBatch(g,u,C,o)}).next(T=>{f=T;const C=T.applyToLocalDocumentSet(d,_);return a.documentOverlayCache.saveOverlays(g,T.batchId,C)})}).then(()=>({batchId:f.batchId,changes:wA(d)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(s,o,a){let u=s.hc[s.currentUser.toKey()];u||(u=new Ct(ge)),u=u.insert(o,a),s.hc[s.currentUser.toKey()]=u}(r,i.batchId,n),await Hi(r,i.changes),await Kl(r.remoteStore)}catch(i){const s=Xl(i,"Failed to persist write");n.reject(s)}}async function mR(t,e){const n=H(t);try{const r=await lG(n.localStore,e);e.targetChanges.forEach((i,s)=>{const o=n.cc.get(s);o&&(ie(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.nc=!0:i.modifiedDocuments.size>0?ie(o.nc):i.removedDocuments.size>0&&(ie(o.nc),o.nc=!1))}),await Hi(n,r,e)}catch(r){await Gs(r)}}function xT(t,e,n){const r=H(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.ic.forEach((s,o)=>{const a=o.view.bu(e);a.snapshot&&i.push(a.snapshot)}),function(s,o){const a=H(s);a.onlineState=o;let u=!1;a.queries.forEach((c,d)=>{for(const f of d.listeners)f.bu(o)&&(u=!0)}),u&&u0(a)}(r.eventManager,e),i.length&&r.sc.Wo(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function jG(t,e,n){const r=H(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.cc.get(e),s=i&&i.key;if(s){let o=new Ct(G.comparator);o=o.insert(s,rt.newNoDocument(s,ae.min()));const a=Ie().add(s),u=new wh(ae.min(),new Map,new Ge(ge),o,a);await mR(r,u),r.uc=r.uc.remove(s),r.cc.delete(e),p0(r)}else await kl(r.localStore,e,!1).then(()=>Nl(r,e,n)).catch(Gs)}async function zG(t,e){const n=H(t),r=e.batch.batchId;try{const i=await aG(n.localStore,e);f0(n,r,null),d0(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Hi(n,i)}catch(i){await Gs(i)}}async function qG(t,e,n){const r=H(t);try{const i=await function(s,o){const a=H(s);return a.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let c;return a.mutationQueue.lookupMutationBatch(u,o).next(d=>(ie(d!==null),c=d.keys(),a.mutationQueue.removeMutationBatch(u,d))).next(()=>a.mutationQueue.performConsistencyCheck(u)).next(()=>a.documentOverlayCache.removeOverlaysForBatchId(u,c,o)).next(()=>a.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,c)).next(()=>a.localDocuments.getDocuments(u,c))})}(r.localStore,e);f0(r,e,n),d0(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Hi(r,i)}catch(i){await Gs(i)}}async function GG(t,e){const n=H(t);Gi(n.remoteStore)||F("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=await function(s){const o=H(s);return o.persistence.runTransaction("Get highest unacknowledged batch id","readonly",a=>o.mutationQueue.getHighestUnacknowledgedBatchId(a))}(n.localStore);if(r===-1)return void e.resolve();const i=n.lc.get(r)||[];i.push(e),n.lc.set(r,i)}catch(r){const i=Xl(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}}function d0(t,e){(t.lc.get(e)||[]).forEach(n=>{n.resolve()}),t.lc.delete(e)}function f0(t,e,n){const r=H(t);let i=r.hc[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.hc[r.currentUser.toKey()]=i}}function Nl(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.rc.get(e))t.ic.delete(r),n&&t.sc.wc(r,n);t.rc.delete(e),t.isPrimaryClient&&t.ac.ls(e).forEach(r=>{t.ac.containsKey(r)||gR(t,r)})}function gR(t,e){t.oc.delete(e.path.canonicalString());const n=t.uc.get(e);n!==null&&(qc(t.remoteStore,n),t.uc=t.uc.remove(e),t.cc.delete(n),p0(t))}function Cv(t,e,n){for(const r of n)r instanceof dR?(t.ac.addReference(r.key,e),HG(t,r)):r instanceof fR?(F("SyncEngine","Document no longer in limbo: "+r.key),t.ac.removeReference(r.key,e),t.ac.containsKey(r.key)||gR(t,r.key)):ee()}function HG(t,e){const n=e.key,r=n.path.canonicalString();t.uc.get(n)||t.oc.has(r)||(F("SyncEngine","New document in limbo: "+n),t.oc.add(r),p0(t))}function p0(t){for(;t.oc.size>0&&t.uc.size<t.maxConcurrentLimboResolutions;){const e=t.oc.values().next().value;t.oc.delete(e);const n=new G(Me.fromString(e)),r=t.fc.next();t.cc.set(r,new UG(n)),t.uc=t.uc.insert(n,r),im(t.remoteStore,new Ds(Fn(ql(n.path)),r,2,Qn.at))}}async function Hi(t,e,n){const r=H(t),i=[],s=[],o=[];r.ic.isEmpty()||(r.ic.forEach((a,u)=>{o.push(r._c(u,e,n).then(c=>{if((c||n)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(u.targetId,c!=null&&c.fromCache?"not-current":"current"),c){i.push(c);const d=e0.Ci(u.targetId,c);s.push(d)}}))}),await Promise.all(o),r.sc.Wo(i),await async function(a,u){const c=H(a);try{await c.persistence.runTransaction("notifyLocalViewChanges","readwrite",d=>N.forEach(u,f=>N.forEach(f.Si,g=>c.persistence.referenceDelegate.addReference(d,f.targetId,g)).next(()=>N.forEach(f.Di,g=>c.persistence.referenceDelegate.removeReference(d,f.targetId,g)))))}catch(d){if(!Hs(d))throw d;F("LocalStore","Failed to update sequence numbers: "+d)}for(const d of u){const f=d.targetId;if(!d.fromCache){const g=c.qi.get(f),v=g.snapshotVersion,_=g.withLastLimboFreeSnapshotVersion(v);c.qi=c.qi.insert(f,_)}}}(r.localStore,s))}async function YG(t,e){const n=H(t);if(!n.currentUser.isEqual(e)){F("SyncEngine","User change. New user:",e.toKey());const r=await XA(n.localStore,e);n.currentUser=e,function(i,s){i.lc.forEach(o=>{o.forEach(a=>{a.reject(new M(D.CANCELLED,s))})}),i.lc.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Hi(n,r.ji)}}function KG(t,e){const n=H(t),r=n.cc.get(e);if(r&&r.nc)return Ie().add(r.key);{let i=Ie();const s=n.rc.get(e);if(!s)return i;for(const o of s){const a=n.ic.get(o);i=i.unionWith(a.view.ju)}return i}}async function QG(t,e){const n=H(t),r=await Hf(n.localStore,e.query,!0),i=e.view.tc(r);return n.isPrimaryClient&&Cv(n,e.targetId,i.Xu),i}async function XG(t,e){const n=H(t);return tR(n.localStore,e).then(r=>Hi(n,r))}async function JG(t,e,n,r){const i=H(t),s=await function(o,a){const u=H(o),c=H(u.mutationQueue);return u.persistence.runTransaction("Lookup mutation documents","readonly",d=>c.Tn(d,a).next(f=>f?u.localDocuments.getDocuments(d,f):N.resolve(null)))}(i.localStore,e);s!==null?(n==="pending"?await Kl(i.remoteStore):n==="acknowledged"||n==="rejected"?(f0(i,e,r||null),d0(i,e),function(o,a){H(H(o).mutationQueue).An(a)}(i.localStore,e)):ee(),await Hi(i,s)):F("SyncEngine","Cannot apply mutation batch with id: "+e)}async function ZG(t,e){const n=H(t);if(m0(n),g0(n),e===!0&&n.dc!==!0){const r=n.sharedClientState.getAllActiveQueryTargets(),i=await OT(n,r.toArray());n.dc=!0,await kv(n.remoteStore,!0);for(const s of i)im(n.remoteStore,s)}else if(e===!1&&n.dc!==!1){const r=[];let i=Promise.resolve();n.rc.forEach((s,o)=>{n.sharedClientState.isLocalQueryTarget(o)?r.push(o):i=i.then(()=>(Nl(n,o),kl(n.localStore,o,!0))),qc(n.remoteStore,o)}),await i,await OT(n,r),function(s){const o=H(s);o.cc.forEach((a,u)=>{qc(o.remoteStore,u)}),o.ac.fs(),o.cc=new Map,o.uc=new Ct(G.comparator)}(n),n.dc=!1,await kv(n.remoteStore,!1)}}async function OT(t,e,n){const r=H(t),i=[],s=[];for(const o of e){let a;const u=r.rc.get(o);if(u&&u.length!==0){a=await Tl(r.localStore,Fn(u[0]));for(const c of u){const d=r.ic.get(c),f=await QG(r,d);f.snapshot&&s.push(f.snapshot)}}else{const c=await eR(r.localStore,o);a=await Tl(r.localStore,c),await h0(r,yR(c),o,!1,a.resumeToken)}i.push(a)}return r.sc.Wo(s),i}function yR(t){return iA(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function eH(t){const e=H(t);return H(H(e.localStore).persistence).vi()}async function tH(t,e,n,r){const i=H(t);if(i.dc)return void F("SyncEngine","Ignoring unexpected query state notification.");const s=i.rc.get(e);if(s&&s.length>0)switch(n){case"current":case"not-current":{const o=await tR(i.localStore,oA(s[0])),a=wh.createSynthesizedRemoteEventForCurrentChange(e,n==="current",qt.EMPTY_BYTE_STRING);await Hi(i,o,a);break}case"rejected":await kl(i.localStore,e,!0),Nl(i,e,r);break;default:ee()}}async function nH(t,e,n){const r=m0(t);if(r.dc){for(const i of e){if(r.rc.has(i)){F("SyncEngine","Adding an already active target "+i);continue}const s=await eR(r.localStore,i),o=await Tl(r.localStore,s);await h0(r,yR(s),o.targetId,!1,o.resumeToken),im(r.remoteStore,o)}for(const i of n)r.rc.has(i)&&await kl(r.localStore,i,!1).then(()=>{qc(r.remoteStore,i),Nl(r,i)}).catch(Gs)}}function m0(t){const e=H(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=mR.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=KG.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=jG.bind(null,e),e.sc.Wo=OG.bind(null,e.eventManager),e.sc.wc=MG.bind(null,e.eventManager),e}function g0(t){const e=H(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=zG.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=qG.bind(null,e),e}function rH(t,e,n){const r=H(t);(async function(i,s,o){try{const a=await s.getMetadata();if(await function(f,g){const v=H(f),_=At(g.createTime);return v.persistence.runTransaction("hasNewerBundle","readonly",T=>v.Ns.getBundleMetadata(T,g.id)).then(T=>!!T&&T.createTime.compareTo(_)>=0)}(i.localStore,a))return await s.close(),o._completeWith(function(f){return{taskState:"Success",documentsLoaded:f.totalDocuments,bytesLoaded:f.totalBytes,totalDocuments:f.totalDocuments,totalBytes:f.totalBytes}}(a)),Promise.resolve(new Set);o._updateProgress(hR(a));const u=new LG(a,i.localStore,s.yt);let c=await s.mc();for(;c;){const f=await u.Fu(c);f&&o._updateProgress(f),c=await s.mc()}const d=await u.complete();return await Hi(i,d.Lu,void 0),await function(f,g){const v=H(f);return v.persistence.runTransaction("Save bundle","readwrite",_=>v.Ns.saveBundleMetadata(_,g))}(i.localStore,a),o._completeWith(d.progress),Promise.resolve(d.Bu)}catch(a){return Wo("SyncEngine",`Loading bundle failed with ${a}`),o._failWith(a),Promise.resolve(new Set)}})(r,e,n).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}class vR{constructor(){this.synchronizeTabs=!1}async initialize(e){this.yt=Sh(e.databaseInfo.databaseId),this.sharedClientState=this.gc(e),this.persistence=this.yc(e),await this.persistence.start(),this.localStore=this.Ic(e),this.gcScheduler=this.Tc(e,this.localStore),this.indexBackfillerScheduler=this.Ec(e,this.localStore)}Tc(e,n){return null}Ec(e,n){return null}Ic(e){return QA(this.persistence,new KA,e.initialUser,this.yt)}yc(e){return new YA(rm.Bs,this.yt)}gc(e){return new rR}async terminate(){this.gcScheduler&&this.gcScheduler.stop(),await this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class _R extends vR{constructor(e,n,r){super(),this.Ac=e,this.cacheSizeBytes=n,this.forceOwnership=r,this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.Ac.initialize(this,e),await g0(this.Ac.syncEngine),await Kl(this.Ac.remoteStore),await this.persistence.li(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))}Ic(e){return QA(this.persistence,new KA,e.initialUser,this.yt)}Tc(e,n){const r=this.persistence.referenceDelegate.garbageCollector;return new G4(r,e.asyncQueue,n)}Ec(e,n){const r=new Aq(n,this.persistence);return new bq(e.asyncQueue,r)}yc(e){const n=Zw(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?Gn.withCacheSize(this.cacheSizeBytes):Gn.DEFAULT;return new Jw(this.synchronizeTabs,n,e.clientId,r,e.asyncQueue,iR(),Bd(),this.yt,this.sharedClientState,!!this.forceOwnership)}gc(e){return new rR}}class iH extends _R{constructor(e,n){super(e,n,!1),this.Ac=e,this.cacheSizeBytes=n,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const n=this.Ac.syncEngine;this.sharedClientState instanceof Lg&&(this.sharedClientState.syncEngine={Fr:JG.bind(null,n),$r:tH.bind(null,n),Br:nH.bind(null,n),vi:eH.bind(null,n),Mr:XG.bind(null,n)},await this.sharedClientState.start()),await this.persistence.li(async r=>{await ZG(this.Ac.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())})}gc(e){const n=iR();if(!Lg.C(n))throw new M(D.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=Zw(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Lg(n,e.asyncQueue,r,e.clientId,e.initialUser)}}class y0{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>xT(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=YG.bind(null,this.syncEngine),await kv(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new xG}createDatastore(e){const n=Sh(e.databaseInfo.databaseId),r=(i=e.databaseInfo,new mG(i));var i;return function(s,o,a,u){return new vG(s,o,a,u)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return n=this.localStore,r=this.datastore,i=e.asyncQueue,s=a=>xT(this.syncEngine,a,0),o=DT.C()?new DT:new dG,new IG(n,r,i,s,o);var n,r,i,s,o}createSyncEngine(e,n){return function(r,i,s,o,a,u,c){const d=new $G(r,i,s,o,a,u);return c&&(d.dc=!0),d}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}terminate(){return async function(e){const n=H(e);F("RemoteStore","RemoteStore shutting down."),n._u.add(5),await Yl(n),n.mu.shutdown(),n.gu.set("Unknown")}(this.remoteStore)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v0(t,e,n){if(!n)throw new M(D.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function wR(t,e,n,r){if(e===!0&&r===!0)throw new M(D.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function MT(t){if(!G.isDocumentKey(t))throw new M(D.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function PT(t){if(G.isDocumentKey(t))throw new M(D.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function sm(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(n){return n.constructor?n.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":ee()}function Ne(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new M(D.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=sm(t);throw new M(D.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function IR(t,e){if(e<=0)throw new M(D.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LT=new Map;class FT{constructor(e){var n;if(e.host===void 0){if(e.ssl!==void 0)throw new M(D.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new M(D.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,wR("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Th{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new FT({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new M(D.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new M(D.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new FT(e),e.credentials!==void 0&&(this._authCredentials=function(n){if(!n)return new Ub;switch(n.type){case"gapi":const r=n.client;return new wq(r,n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new M(D.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const n=LT.get(e);n&&(F("ComponentProvider","Removing Datastore"),LT.delete(e),n.terminate())}(this),Promise.resolve()}}function SR(t,e,n,r={}){var i;const s=(t=Ne(t,Th))._getSettings();if(s.host!=="firestore.googleapis.com"&&s.host!==e&&Wo("Host has been set in both settings() and useEmulator(), emulator host will be used"),t._setSettings(Object.assign(Object.assign({},s),{host:`${e}:${n}`,ssl:!1})),r.mockUserToken){let o,a;if(typeof r.mockUserToken=="string")o=r.mockUserToken,a=Jt.MOCK_USER;else{o=oC(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);const u=r.mockUserToken.sub||r.mockUserToken.user_id;if(!u)throw new M(D.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");a=new Jt(u)}t._authCredentials=new yq(new Fb(o,a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tt{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Vr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Tt(this.firestore,e,this._key)}}class tn{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new tn(this.firestore,e,this._query)}}class Vr extends tn{constructor(e,n,r){super(e,n,ql(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Tt(this.firestore,null,new G(e))}withConverter(e){return new Vr(this.firestore,e,this._path)}}function sH(t,e,...n){if(t=ne(t),v0("collection","path",e),t instanceof Th){const r=Me.fromString(e,...n);return PT(r),new Vr(t,null,r)}{if(!(t instanceof Tt||t instanceof Vr))throw new M(D.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Me.fromString(e,...n));return PT(r),new Vr(t.firestore,null,r)}}function oH(t,e){if(t=Ne(t,Th),v0("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new M(D.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new tn(t,null,function(n){return new zi(Me.emptyPath(),n)}(e))}function ER(t,e,...n){if(t=ne(t),arguments.length===1&&(e=Vb.R()),v0("doc","path",e),t instanceof Th){const r=Me.fromString(e,...n);return MT(r),new Tt(t,null,new G(r))}{if(!(t instanceof Tt||t instanceof Vr))throw new M(D.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Me.fromString(e,...n));return MT(r),new Tt(t.firestore,t instanceof Vr?t.converter:null,new G(r))}}function aH(t,e){return t=ne(t),e=ne(e),(t instanceof Tt||t instanceof Vr)&&(e instanceof Tt||e instanceof Vr)&&t.firestore===e.firestore&&t.path===e.path&&t.converter===e.converter}function _0(t,e){return t=ne(t),e=ne(e),t instanceof tn&&e instanceof tn&&t.firestore===e.firestore&&yh(t._query,e._query)&&t.converter===e.converter}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UT(t,e=10240){let n=0;return{async read(){if(n<t.byteLength){const r={value:t.slice(n,n+e),done:!1};return n+=e,r}return{done:!0}},async cancel(){},releaseLock(){},closed:Promise.reject("unimplemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class om{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Rc(this.observer.next,e)}error(e){this.observer.error?this.Rc(this.observer.error,e):bt("Uncaught Error in snapshot listener:",e.toString())}bc(){this.muted=!0}Rc(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lH{constructor(e,n){this.Pc=e,this.yt=n,this.metadata=new Wt,this.buffer=new Uint8Array,this.vc=new TextDecoder("utf-8"),this.Vc().then(r=>{r&&r.Ou()?this.metadata.resolve(r.ku.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(r==null?void 0:r.ku)}`))},r=>this.metadata.reject(r))}close(){return this.Pc.cancel()}async getMetadata(){return this.metadata.promise}async mc(){return await this.getMetadata(),this.Vc()}async Vc(){const e=await this.Sc();if(e===null)return null;const n=this.vc.decode(e),r=Number(n);isNaN(r)&&this.Dc(`length string (${n}) is not valid number`);const i=await this.Cc(r);return new PG(JSON.parse(i),e.length+r)}xc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}async Sc(){for(;this.xc()<0&&!await this.Nc(););if(this.buffer.length===0)return null;const e=this.xc();e<0&&this.Dc("Reached the end of bundle when a length string is expected.");const n=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),n}async Cc(e){for(;this.buffer.length<e;)await this.Nc()&&this.Dc("Reached the end of bundle when more is expected.");const n=this.vc.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),n}Dc(e){throw this.Pc.cancel(),new Error(`Invalid bundle format: ${e}`)}async Nc(){const e=await this.Pc.read();if(!e.done){const n=new Uint8Array(this.buffer.length+e.value.length);n.set(this.buffer),n.set(e.value,this.buffer.length),this.buffer=n}return e.done}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uH{constructor(){this.type="AggregateField"}}class TR{constructor(e,n){this._data=n,this.type="AggregateQuerySnapshot",this.query=e}data(){return this._data}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cH{constructor(e,n,r){this.query=e,this.datastore=n,this.userDataWriter=r}run(){return _G(this.datastore,this.query._query).then(e=>{ie(e[0]!==void 0);const n=Object.entries(e[0]).filter(([r,i])=>r==="count_alias").map(([r,i])=>this.userDataWriter.convertValue(i))[0];return ie(typeof n=="number"),Promise.resolve(new TR(this.query,{count:n}))})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hH{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw new M(D.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const n=await async function(r,i){const s=H(r),o=jc(s.yt)+"/documents",a={documents:i.map(f=>Wc(s.yt,f))},u=await s._o("BatchGetDocuments",o,a,i.length),c=new Map;u.forEach(f=>{const g=l4(s.yt,f);c.set(g.key.toString(),g)});const d=[];return i.forEach(f=>{const g=c.get(f.toString());ie(!!g),d.push(g)}),d}(this.datastore,e);return n.forEach(r=>this.recordVersion(r)),n}set(e,n){this.write(n.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,n){try{this.write(n.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Hl(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastWriteError)throw this.lastWriteError;const e=this.readVersions;this.mutations.forEach(n=>{e.delete(n.key.toString())}),e.forEach((n,r)=>{const i=G.fromPath(r);this.mutations.push(new Ww(i,this.precondition(i)))}),await async function(n,r){const i=H(n),s=jc(i.yt)+"/documents",o={writes:r.map(a=>zc(i.yt,a))};await i.ao("Commit",s,o)}(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let n;if(e.isFoundDocument())n=e.version;else{if(!e.isNoDocument())throw ee();n=ae.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!n.isEqual(r))throw new M(D.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),n)}precondition(e){const n=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&n?n.isEqual(ae.min())?ft.exists(!1):ft.updateTime(n):ft.none()}preconditionForUpdate(e){const n=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&n){if(n.isEqual(ae.min()))throw new M(D.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return ft.updateTime(n)}return ft.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dH{constructor(e,n,r,i,s){this.asyncQueue=e,this.datastore=n,this.options=r,this.updateFunction=i,this.deferred=s,this.kc=r.maxAttempts,this.xo=new n0(this.asyncQueue,"transaction_retry")}run(){this.kc-=1,this.Oc()}Oc(){this.xo.Ro(async()=>{const e=new hH(this.datastore),n=this.Mc(e);n&&n.then(r=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(r)}).catch(i=>{this.Fc(i)}))}).catch(r=>{this.Fc(r)})})}Mc(e){try{const n=this.updateFunction(e);return!mh(n)&&n.catch&&n.then?n:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(n){return this.deferred.reject(n),null}}Fc(e){this.kc>0&&this.$c(e)?(this.kc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Oc(),Promise.resolve()))):this.deferred.reject(e)}$c(e){if(e.name==="FirebaseError"){const n=e.code;return n==="aborted"||n==="failed-precondition"||n==="already-exists"||!yA(n)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fH{constructor(e,n,r,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=Jt.UNAUTHENTICATED,this.clientId=Vb.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,async s=>{F("FirestoreClient","Received user=",s.uid),await this.authCredentialListener(s),this.user=s}),this.appCheckCredentials.start(r,s=>(F("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}async getConfiguration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new M(D.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Wt;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this.onlineComponents&&await this.onlineComponents.terminate(),this.offlineComponents&&await this.offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Xl(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function kR(t,e){t.asyncQueue.verifyOperationInProgress(),F("FirestoreClient","Initializing OfflineComponentProvider");const n=await t.getConfiguration();await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await XA(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t.offlineComponents=e}async function CR(t,e){t.asyncQueue.verifyOperationInProgress();const n=await w0(t);F("FirestoreClient","Initializing OnlineComponentProvider");const r=await t.getConfiguration();await e.initialize(n,r),t.setCredentialChangeListener(i=>bT(e.remoteStore,i)),t.setAppCheckTokenChangeListener((i,s)=>bT(e.remoteStore,s)),t.onlineComponents=e}async function w0(t){return t.offlineComponents||(F("FirestoreClient","Using default OfflineComponentProvider"),await kR(t,new vR)),t.offlineComponents}async function am(t){return t.onlineComponents||(F("FirestoreClient","Using default OnlineComponentProvider"),await CR(t,new y0)),t.onlineComponents}function NR(t){return w0(t).then(e=>e.persistence)}function lm(t){return w0(t).then(e=>e.localStore)}function I0(t){return am(t).then(e=>e.remoteStore)}function S0(t){return am(t).then(e=>e.syncEngine)}function DR(t){return am(t).then(e=>e.datastore)}async function Dl(t){const e=await am(t),n=e.eventManager;return n.onListen=VG.bind(null,e.syncEngine),n.onUnlisten=BG.bind(null,e.syncEngine),n}function pH(t){return t.asyncQueue.enqueue(async()=>{const e=await NR(t),n=await I0(t);return e.setNetworkEnabled(!0),function(r){const i=H(r);return i._u.delete(0),Eh(i)}(n)})}function mH(t){return t.asyncQueue.enqueue(async()=>{const e=await NR(t),n=await I0(t);return e.setNetworkEnabled(!1),async function(r){const i=H(r);i._u.add(0),await Yl(i),i.gu.set("Offline")}(n)})}function gH(t,e){const n=new Wt;return t.asyncQueue.enqueueAndForget(async()=>async function(r,i,s){try{const o=await function(a,u){const c=H(a);return c.persistence.runTransaction("read document","readonly",d=>c.localDocuments.getDocument(d,u))}(r,i);o.isFoundDocument()?s.resolve(o):o.isNoDocument()?s.resolve(null):s.reject(new M(D.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(o){const a=Xl(o,`Failed to get document '${i} from cache`);s.reject(a)}}(await lm(t),e,n)),n.promise}function bR(t,e,n={}){const r=new Wt;return t.asyncQueue.enqueueAndForget(async()=>function(i,s,o,a,u){const c=new om({next:f=>{s.enqueueAndForget(()=>l0(i,d));const g=f.docs.has(o);!g&&f.fromCache?u.reject(new M(D.UNAVAILABLE,"Failed to get document because the client is offline.")):g&&f.fromCache&&a&&a.source==="server"?u.reject(new M(D.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(f)},error:f=>u.reject(f)}),d=new c0(ql(o.path),c,{includeMetadataChanges:!0,Nu:!0});return a0(i,d)}(await Dl(t),t.asyncQueue,e,n,r)),r.promise}function yH(t,e){const n=new Wt;return t.asyncQueue.enqueueAndForget(async()=>async function(r,i,s){try{const o=await Hf(r,i,!0),a=new pR(i,o.Hi),u=a.Wu(o.documents),c=a.applyChanges(u,!1);s.resolve(c.snapshot)}catch(o){const a=Xl(o,`Failed to execute query '${i} against cache`);s.reject(a)}}(await lm(t),e,n)),n.promise}function AR(t,e,n={}){const r=new Wt;return t.asyncQueue.enqueueAndForget(async()=>function(i,s,o,a,u){const c=new om({next:f=>{s.enqueueAndForget(()=>l0(i,d)),f.fromCache&&a.source==="server"?u.reject(new M(D.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(f)},error:f=>u.reject(f)}),d=new c0(o,c,{includeMetadataChanges:!0,Nu:!0});return a0(i,d)}(await Dl(t),t.asyncQueue,e,n,r)),r.promise}function vH(t,e){const n=new om(e);return t.asyncQueue.enqueueAndForget(async()=>function(r,i){H(r).Ru.add(i),i.next()}(await Dl(t),n)),()=>{n.bc(),t.asyncQueue.enqueueAndForget(async()=>function(r,i){H(r).Ru.delete(i)}(await Dl(t),n))}}function _H(t,e,n,r){const i=function(s,o){let a;return a=typeof s=="string"?new TextEncoder().encode(s):s,function(u,c){return new lH(u,c)}(function(u,c){if(u instanceof Uint8Array)return UT(u,c);if(u instanceof ArrayBuffer)return UT(new Uint8Array(u),c);if(u instanceof ReadableStream)return u.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(a),o)}(n,Sh(e));t.asyncQueue.enqueueAndForget(async()=>{rH(await S0(t),i,r)})}function wH(t,e){return t.asyncQueue.enqueue(async()=>function(n,r){const i=H(n);return i.persistence.runTransaction("Get named query","readonly",s=>i.Ns.getNamedQuery(s,r))}(await lm(t),e))}class IH{constructor(){this.Bc=Promise.resolve(),this.Lc=[],this.qc=!1,this.Uc=[],this.Kc=null,this.Gc=!1,this.Qc=!1,this.jc=[],this.xo=new n0(this,"async_queue_retry"),this.Wc=()=>{const n=Bd();n&&F("AsyncQueue","Visibility state changed to "+n.visibilityState),this.xo.Po()};const e=Bd();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.Wc)}get isShuttingDown(){return this.qc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.zc(),this.Hc(e)}enterRestrictedMode(e){if(!this.qc){this.qc=!0,this.Qc=e||!1;const n=Bd();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Wc)}}enqueue(e){if(this.zc(),this.qc)return new Promise(()=>{});const n=new Wt;return this.Hc(()=>this.qc&&this.Qc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Lc.push(e),this.Jc()))}async Jc(){if(this.Lc.length!==0){try{await this.Lc[0](),this.Lc.shift(),this.xo.reset()}catch(e){if(!Hs(e))throw e;F("AsyncQueue","Operation failed with retryable error: "+e)}this.Lc.length>0&&this.xo.Ro(()=>this.Jc())}}Hc(e){const n=this.Bc.then(()=>(this.Gc=!0,e().catch(r=>{this.Kc=r,this.Gc=!1;const i=function(s){let o=s.message||"";return s.stack&&(o=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),o}(r);throw bt("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.Gc=!1,r))));return this.Bc=n,n}enqueueAfterDelay(e,n,r){this.zc(),this.jc.indexOf(e)>-1&&(n=0);const i=o0.createAndSchedule(this,e,n,r,s=>this.Yc(s));return this.Uc.push(i),i}zc(){this.Kc&&ee()}verifyOperationInProgress(){}async Xc(){let e;do e=this.Bc,await e;while(e!==this.Bc)}Zc(e){for(const n of this.Uc)if(n.timerId===e)return!0;return!1}ta(e){return this.Xc().then(()=>{this.Uc.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Uc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Xc()})}ea(e){this.jc.push(e)}Yc(e){const n=this.Uc.indexOf(e);this.Uc.splice(n,1)}}function Nv(t){return function(e,n){if(typeof e!="object"||e===null)return!1;const r=e;for(const i of n)if(i in r&&typeof r[i]=="function")return!0;return!1}(t,["next","error","complete"])}class RR{constructor(){this._progressObserver={},this._taskCompletionResolver=new Wt,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,n,r){this._progressObserver={next:e,error:n,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,n){return this._taskCompletionResolver.promise.then(e,n)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SH=-1;class Ke extends Th{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new IH,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||xR(this),this._firestoreClient.terminate()}}function EH(t,e,n){n||(n="(default)");const r=Ol(t,"firestore");if(r.isInitialized(n)){const i=r.getImmediate({identifier:n}),s=r.getOptions(n);if(fl(s,e))return i;throw new M(D.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(e.cacheSizeBytes!==void 0&&e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new M(D.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return r.initialize({options:e,instanceIdentifier:n})}function TH(t,e){const n=typeof t=="object"?t:N_(),r=typeof t=="string"?t:e||"(default)",i=Ol(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const s=iC("firestore");s&&SR(i,...s)}return i}function Rt(t){return t._firestoreClient||xR(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function xR(t){var e;const n=t._freezeSettings(),r=function(i,s,o,a){return new Rq(i,s,o,a.host,a.ssl,a.experimentalForceLongPolling,a.experimentalAutoDetectLongPolling,a.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,n);t._firestoreClient=new fH(t._authCredentials,t._appCheckCredentials,t._queue,r)}function kH(t,e){MR(t=Ne(t,Ke));const n=Rt(t),r=t._freezeSettings(),i=new y0;return OR(n,i,new _R(i,r.cacheSizeBytes,e==null?void 0:e.forceOwnership))}function CH(t){MR(t=Ne(t,Ke));const e=Rt(t),n=t._freezeSettings(),r=new y0;return OR(e,r,new iH(r,n.cacheSizeBytes))}function OR(t,e,n){const r=new Wt;return t.asyncQueue.enqueue(async()=>{try{await kR(t,n),await CR(t,e),r.resolve()}catch(i){const s=i;if(!function(o){return o.name==="FirebaseError"?o.code===D.FAILED_PRECONDITION||o.code===D.UNIMPLEMENTED:typeof DOMException<"u"&&o instanceof DOMException?o.code===22||o.code===20||o.code===11:!0}(s))throw s;Wo("Error enabling offline persistence. Falling back to persistence disabled: "+s),r.reject(s)}}).then(()=>r.promise)}function NH(t){if(t._initialized&&!t._terminated)throw new M(D.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Wt;return t._queue.enqueueAndForgetEvenWhileRestricted(async()=>{try{await async function(n){if(!Lr.C())return Promise.resolve();const r=n+"main";await Lr.delete(r)}(Zw(t._databaseId,t._persistenceKey)),e.resolve()}catch(n){e.reject(n)}}),e.promise}function DH(t){return function(e){const n=new Wt;return e.asyncQueue.enqueueAndForget(async()=>GG(await S0(e),n)),n.promise}(Rt(t=Ne(t,Ke)))}function bH(t){return pH(Rt(t=Ne(t,Ke)))}function AH(t){return mH(Rt(t=Ne(t,Ke)))}function RH(t){return k2(t.app,"firestore",t._databaseId.database),t._delete()}function xH(t,e){const n=Rt(t=Ne(t,Ke)),r=new RR;return _H(n,t._databaseId,e,r),r}function OH(t,e){return wH(Rt(t=Ne(t,Ke)),e).then(n=>n?new tn(t,null,n.query):null)}function MR(t){if(t._initialized||t._terminated)throw new M(D.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $s{constructor(e){this._byteString=e}static fromBase64String(e){try{return new $s(qt.fromBase64String(e))}catch(n){throw new M(D.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new $s(qt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ks{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new M(D.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Et(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}function MH(){return new Ks("__name__")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qs{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class um{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new M(D.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new M(D.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return ge(this._lat,e._lat)||ge(this._long,e._long)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PH=/^__.*__$/;class LH{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new qi(e,this.data,this.fieldMask,n,this.fieldTransforms):new Gl(e,this.data,n,this.fieldTransforms)}}class PR{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new qi(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function LR(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ee()}}class cm{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.yt=r,this.ignoreUndefinedProperties=i,s===void 0&&this.na(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get sa(){return this.settings.sa}ia(e){return new cm(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.yt,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ra(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.ia({path:r,oa:!1});return i.ua(e),i}ca(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.ia({path:r,oa:!1});return i.na(),i}aa(e){return this.ia({path:void 0,oa:!0})}ha(e){return Xf(e,this.settings.methodName,this.settings.la||!1,this.path,this.settings.fa)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}na(){if(this.path)for(let e=0;e<this.path.length;e++)this.ua(this.path.get(e))}ua(e){if(e.length===0)throw this.ha("Document fields must not be empty");if(LR(this.sa)&&PH.test(e))throw this.ha('Document fields cannot begin and end with "__"')}}class FH{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.yt=r||Sh(e)}da(e,n,r,i=!1){return new cm({sa:e,methodName:n,fa:r,path:Et.emptyPath(),oa:!1,la:i},this.databaseId,this.yt,this.ignoreUndefinedProperties)}}function la(t){const e=t._freezeSettings(),n=Sh(t._databaseId);return new FH(t._databaseId,!!e.ignoreUndefinedProperties,n)}function hm(t,e,n,r,i,s={}){const o=t.da(s.merge||s.mergeFields?2:0,e,n,i);C0("Data must be an object, but it was:",o,r);const a=$R(r,o);let u,c;if(s.merge)u=new Xn(o.fieldMask),c=o.fieldTransforms;else if(s.mergeFields){const d=[];for(const f of s.mergeFields){const g=Dv(e,f,n);if(!o.contains(g))throw new M(D.INVALID_ARGUMENT,`Field '${g}' is specified in your field mask but missing from your input data.`);BR(d,g)||d.push(g)}u=new Xn(d),c=o.fieldTransforms.filter(f=>u.covers(f.field))}else u=null,c=o.fieldTransforms;return new LH(new cn(a),u,c)}class kh extends Qs{_toFieldTransform(e){if(e.sa!==2)throw e.sa===1?e.ha(`${this._methodName}() can only appear at the top level of your update data`):e.ha(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof kh}}function FR(t,e,n){return new cm({sa:3,fa:e.settings.fa,methodName:t._methodName,oa:n},e.databaseId,e.yt,e.ignoreUndefinedProperties)}class E0 extends Qs{_toFieldTransform(e){return new _h(e.path,new Il)}isEqual(e){return e instanceof E0}}class UH extends Qs{constructor(e,n){super(e),this._a=n}_toFieldTransform(e){const n=FR(this,e,!0),r=this._a.map(s=>ua(s,n)),i=new Ho(r);return new _h(e.path,i)}isEqual(e){return this===e}}class $H extends Qs{constructor(e,n){super(e),this._a=n}_toFieldTransform(e){const n=FR(this,e,!0),r=this._a.map(s=>ua(s,n)),i=new Yo(r);return new _h(e.path,i)}isEqual(e){return this===e}}class VH extends Qs{constructor(e,n){super(e),this.wa=n}_toFieldTransform(e){const n=new Sl(e.yt,cA(e.yt,this.wa));return new _h(e.path,n)}isEqual(e){return this===e}}function T0(t,e,n,r){const i=t.da(1,e,n);C0("Data must be an object, but it was:",i,r);const s=[],o=cn.empty();aa(r,(u,c)=>{const d=dm(e,u,n);c=ne(c);const f=i.ca(d);if(c instanceof kh)s.push(d);else{const g=ua(c,f);g!=null&&(s.push(d),o.set(d,g))}});const a=new Xn(s);return new PR(o,a,i.fieldTransforms)}function k0(t,e,n,r,i,s){const o=t.da(1,e,n),a=[Dv(e,r,n)],u=[i];if(s.length%2!=0)throw new M(D.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let g=0;g<s.length;g+=2)a.push(Dv(e,s[g])),u.push(s[g+1]);const c=[],d=cn.empty();for(let g=a.length-1;g>=0;--g)if(!BR(c,a[g])){const v=a[g];let _=u[g];_=ne(_);const T=o.ca(v);if(_ instanceof kh)c.push(v);else{const C=ua(_,T);C!=null&&(c.push(v),d.set(v,C))}}const f=new Xn(c);return new PR(d,f,o.fieldTransforms)}function UR(t,e,n,r=!1){return ua(n,t.da(r?4:3,e))}function ua(t,e){if(VR(t=ne(t)))return C0("Unsupported field value:",e,t),$R(t,e);if(t instanceof Qs)return function(n,r){if(!LR(r.sa))throw r.ha(`${n._methodName}() can only be used with update() and set()`);if(!r.path)throw r.ha(`${n._methodName}() is not currently supported inside arrays`);const i=n._toFieldTransform(r);i&&r.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.oa&&e.sa!==4)throw e.ha("Nested arrays are not supported");return function(n,r){const i=[];let s=0;for(const o of n){let a=ua(o,r.aa(s));a==null&&(a={nullValue:"NULL_VALUE"}),i.push(a),s++}return{arrayValue:{values:i}}}(t,e)}return function(n,r){if((n=ne(n))===null)return{nullValue:"NULL_VALUE"};if(typeof n=="number")return cA(r.yt,n);if(typeof n=="boolean")return{booleanValue:n};if(typeof n=="string")return{stringValue:n};if(n instanceof Date){const i=pt.fromDate(n);return{timestampValue:El(r.yt,i)}}if(n instanceof pt){const i=new pt(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:El(r.yt,i)}}if(n instanceof um)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof $s)return{bytesValue:TA(r.yt,n._byteString)};if(n instanceof Tt){const i=r.databaseId,s=n.firestore._databaseId;if(!s.isEqual(i))throw r.ha(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:jw(n.firestore._databaseId||r.databaseId,n._key.path)}}throw r.ha(`Unsupported field value: ${sm(n)}`)}(t,e)}function $R(t,e){const n={};return Gb(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):aa(t,(r,i)=>{const s=ua(i,e.ra(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function VR(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof pt||t instanceof um||t instanceof $s||t instanceof Tt||t instanceof Qs)}function C0(t,e,n){if(!VR(n)||!function(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}(n)){const r=sm(n);throw r==="an object"?e.ha(t+" a custom object"):e.ha(t+" "+r)}}function Dv(t,e,n){if((e=ne(e))instanceof Ks)return e._internalPath;if(typeof e=="string")return dm(t,e);throw Xf("Field path arguments must be of type string or ",t,!1,void 0,n)}const BH=new RegExp("[~\\*/\\[\\]]");function dm(t,e,n){if(e.search(BH)>=0)throw Xf(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Ks(...e.split("."))._internalPath}catch{throw Xf(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Xf(t,e,n,r,i){const s=r&&!r.isEmpty(),o=i!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let u="";return(s||o)&&(u+=" (found",s&&(u+=` in field ${r}`),o&&(u+=` in document ${i}`),u+=")"),new M(D.INVALID_ARGUMENT,a+t+u)}function BR(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gc{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Tt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new WH(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(fm("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class WH extends Gc{data(){return super.data()}}function fm(t,e){return typeof e=="string"?dm(t,e):e instanceof Ks?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WR(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new M(D.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class N0{}class Jl extends N0{}function jH(t,e,...n){let r=[];e instanceof N0&&r.push(e),r=r.concat(n),function(i){const s=i.filter(a=>a instanceof ca).length,o=i.filter(a=>a instanceof Zl).length;if(s>1||s>0&&o>0)throw new M(D.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)t=i._apply(t);return t}class Zl extends Jl{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new Zl(e,n,r)}_apply(e){const n=this._parse(e);return zR(e._query,n),new tn(e.firestore,e.converter,gv(e._query,n))}_parse(e){const n=la(e.firestore);return function(i,s,o,a,u,c,d){let f;if(u.isKeyField()){if(c==="array-contains"||c==="array-contains-any")throw new M(D.INVALID_ARGUMENT,`Invalid Query. You can't perform '${c}' queries on documentId().`);if(c==="in"||c==="not-in"){VT(d,c);const g=[];for(const v of d)g.push($T(a,i,v));f={arrayValue:{values:g}}}else f=$T(a,i,d)}else c!=="in"&&c!=="not-in"&&c!=="array-contains-any"||VT(d,c),f=UR(o,s,d,c==="in"||c==="not-in");return Ce.create(u,c,f)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function zH(t,e,n){const r=e,i=fm("where",t);return Zl._create(i,r,n)}class ca extends N0{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new ca(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Be.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(r,i){let s=r;const o=i.getFlattenedFilters();for(const a of o)zR(s,a),s=gv(s,a)}(e._query,n),new tn(e.firestore,e.converter,gv(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function qH(...t){return t.forEach(e=>GR("or",e)),ca._create("or",t)}function GH(...t){return t.forEach(e=>GR("and",e)),ca._create("and",t)}class pm extends Jl{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new pm(e,n)}_apply(e){const n=function(r,i,s){if(r.startAt!==null)throw new M(D.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(r.endAt!==null)throw new M(D.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const o=new rl(i,s);return function(a,u){if(Vw(a)===null){const c=Xp(a);c!==null&&qR(a,c,u.field)}}(r,o),o}(e._query,this._field,this._direction);return new tn(e.firestore,e.converter,function(r,i){const s=r.explicitOrderBy.concat([i]);return new zi(r.path,r.collectionGroup,s,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,n))}}function HH(t,e="asc"){const n=e,r=fm("orderBy",t);return pm._create(r,n)}class Ch extends Jl{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new Ch(e,n,r)}_apply(e){return new tn(e.firestore,e.converter,jf(e._query,this._limit,this._limitType))}}function YH(t){return IR("limit",t),Ch._create("limit",t,"F")}function KH(t){return IR("limitToLast",t),Ch._create("limitToLast",t,"L")}class Nh extends Jl{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new Nh(e,n,r)}_apply(e){const n=jR(e,this.type,this._docOrFields,this._inclusive);return new tn(e.firestore,e.converter,function(r,i){return new zi(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,i,r.endAt)}(e._query,n))}}function QH(...t){return Nh._create("startAt",t,!0)}function XH(...t){return Nh._create("startAfter",t,!1)}class Dh extends Jl{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new Dh(e,n,r)}_apply(e){const n=jR(e,this.type,this._docOrFields,this._inclusive);return new tn(e.firestore,e.converter,function(r,i){return new zi(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,i)}(e._query,n))}}function JH(...t){return Dh._create("endBefore",t,!1)}function ZH(...t){return Dh._create("endAt",t,!0)}function jR(t,e,n,r){if(n[0]=ne(n[0]),n[0]instanceof Gc)return function(i,s,o,a,u){if(!a)throw new M(D.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${o}().`);const c=[];for(const d of Ro(i))if(d.field.isKeyField())c.push(qo(s,a.key));else{const f=a.data.field(d.field);if(Uw(f))throw new M(D.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+d.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(f===null){const g=d.field.canonicalString();throw new M(D.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${g}' (used as the orderBy) does not exist.`)}c.push(f)}return new Fs(c,u)}(t._query,t.firestore._databaseId,e,n[0]._document,r);{const i=la(t.firestore);return function(s,o,a,u,c,d){const f=s.explicitOrderBy;if(c.length>f.length)throw new M(D.INVALID_ARGUMENT,`Too many arguments provided to ${u}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const g=[];for(let v=0;v<c.length;v++){const _=c[v];if(f[v].field.isKeyField()){if(typeof _!="string")throw new M(D.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${u}(), but got a ${typeof _}`);if(!Bw(s)&&_.indexOf("/")!==-1)throw new M(D.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${u}() must be a plain document ID, but '${_}' contains a slash.`);const T=s.path.child(Me.fromString(_));if(!G.isDocumentKey(T))throw new M(D.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${u}() must result in a valid document path, but '${T}' is not because it contains an odd number of segments.`);const C=new G(T);g.push(qo(o,C))}else{const T=UR(a,u,_);g.push(T)}}return new Fs(g,d)}(t._query,t.firestore._databaseId,i,e,n,r)}}function $T(t,e,n){if(typeof(n=ne(n))=="string"){if(n==="")throw new M(D.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Bw(e)&&n.indexOf("/")!==-1)throw new M(D.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(Me.fromString(n));if(!G.isDocumentKey(r))throw new M(D.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return qo(t,new G(r))}if(n instanceof Tt)return qo(t,n._key);throw new M(D.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${sm(n)}.`)}function VT(t,e){if(!Array.isArray(t)||t.length===0)throw new M(D.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(t.length>10)throw new M(D.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function zR(t,e){if(e.isInequality()){const r=Xp(t),i=e.field;if(r!==null&&!r.isEqual(i))throw new M(D.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${r.toString()}' and '${i.toString()}'`);const s=Vw(t);s!==null&&qR(t,i,s)}const n=function(r,i){for(const s of r)for(const o of s.getFlattenedFilters())if(i.indexOf(o.op)>=0)return o.op;return null}(t.filters,function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new M(D.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new M(D.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}function qR(t,e,n){if(!n.isEqual(e))throw new M(D.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${n.toString()}' instead.`)}function GR(t,e){if(!(e instanceof Zl||e instanceof ca))throw new M(D.INVALID_ARGUMENT,`Function ${t}() requires AppliableConstraints created with a call to 'where(...)', 'or(...)', or 'and(...)'.`)}class D0{convertValue(e,n="none"){switch(zo(e)){case 0:return null;case 1:return e.booleanValue;case 2:return St(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(jo(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 10:return this.convertObject(e.mapValue,n);default:throw ee()}}convertObject(e,n){const r={};return aa(e.fields,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertGeoPoint(e){return new um(St(e.latitude),St(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Yb(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp($c(e));default:return null}}convertTimestamp(e){const n=Ps(e);return new pt(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Me.fromString(e);ie(OA(r));const i=new Ms(r.get(1),r.get(3)),s=new G(r.popFirst(5));return i.isEqual(n)||bt(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mm(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class eY extends D0{constructor(e){super(),this.firestore=e}convertBytes(e){return new $s(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Tt(this.firestore,null,n)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ms{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Jo extends Gc{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new sc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(fm("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class sc extends Jo{data(e={}){return super.data(e)}}class Zo{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new ms(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new sc(this._firestore,this._userDataWriter,r.key,r,new ms(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new M(D.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(r,i){if(r._snapshot.oldDocs.isEmpty()){let s=0;return r._snapshot.docChanges.map(o=>{const a=new sc(r._firestore,r._userDataWriter,o.doc.key,o.doc,new ms(r._snapshot.mutatedKeys.has(o.doc.key),r._snapshot.fromCache),r.query.converter);return o.doc,{type:"added",doc:a,oldIndex:-1,newIndex:s++}})}{let s=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(o=>i||o.type!==3).map(o=>{const a=new sc(r._firestore,r._userDataWriter,o.doc.key,o.doc,new ms(r._snapshot.mutatedKeys.has(o.doc.key),r._snapshot.fromCache),r.query.converter);let u=-1,c=-1;return o.type!==0&&(u=s.indexOf(o.doc.key),s=s.delete(o.doc.key)),o.type!==1&&(s=s.add(o.doc),c=s.indexOf(o.doc.key)),{type:tY(o.type),doc:a,oldIndex:u,newIndex:c}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function tY(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ee()}}function nY(t,e){return t instanceof Jo&&e instanceof Jo?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(t._document===null?e._document===null:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof Zo&&e instanceof Zo&&t._firestore===e._firestore&&_0(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rY(t){t=Ne(t,Tt);const e=Ne(t.firestore,Ke);return bR(Rt(e),t._key).then(n=>b0(e,t,n))}class Xs extends D0{constructor(e){super(),this.firestore=e}convertBytes(e){return new $s(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Tt(this.firestore,null,n)}}function iY(t){t=Ne(t,Tt);const e=Ne(t.firestore,Ke),n=Rt(e),r=new Xs(e);return gH(n,t._key).then(i=>new Jo(e,r,t._key,i,new ms(i!==null&&i.hasLocalMutations,!0),t.converter))}function sY(t){t=Ne(t,Tt);const e=Ne(t.firestore,Ke);return bR(Rt(e),t._key,{source:"server"}).then(n=>b0(e,t,n))}function oY(t){t=Ne(t,tn);const e=Ne(t.firestore,Ke),n=Rt(e),r=new Xs(e);return WR(t._query),AR(n,t._query).then(i=>new Zo(e,r,t,i))}function aY(t){t=Ne(t,tn);const e=Ne(t.firestore,Ke),n=Rt(e),r=new Xs(e);return yH(n,t._query).then(i=>new Zo(e,r,t,i))}function lY(t){t=Ne(t,tn);const e=Ne(t.firestore,Ke),n=Rt(e),r=new Xs(e);return AR(n,t._query,{source:"server"}).then(i=>new Zo(e,r,t,i))}function uY(t,e,n){t=Ne(t,Tt);const r=Ne(t.firestore,Ke),i=mm(t.converter,e,n);return eu(r,[hm(la(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,ft.none())])}function cY(t,e,n,...r){t=Ne(t,Tt);const i=Ne(t.firestore,Ke),s=la(i);let o;return o=typeof(e=ne(e))=="string"||e instanceof Ks?k0(s,"updateDoc",t._key,e,n,r):T0(s,"updateDoc",t._key,e),eu(i,[o.toMutation(t._key,ft.exists(!0))])}function hY(t){return eu(Ne(t.firestore,Ke),[new Hl(t._key,ft.none())])}function dY(t,e){const n=Ne(t.firestore,Ke),r=ER(t),i=mm(t.converter,e);return eu(n,[hm(la(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,ft.exists(!1))]).then(()=>r)}function fY(t,...e){var n,r,i;t=ne(t);let s={includeMetadataChanges:!1},o=0;typeof e[o]!="object"||Nv(e[o])||(s=e[o],o++);const a={includeMetadataChanges:s.includeMetadataChanges};if(Nv(e[o])){const f=e[o];e[o]=(n=f.next)===null||n===void 0?void 0:n.bind(f),e[o+1]=(r=f.error)===null||r===void 0?void 0:r.bind(f),e[o+2]=(i=f.complete)===null||i===void 0?void 0:i.bind(f)}let u,c,d;if(t instanceof Tt)c=Ne(t.firestore,Ke),d=ql(t._key.path),u={next:f=>{e[o]&&e[o](b0(c,t,f))},error:e[o+1],complete:e[o+2]};else{const f=Ne(t,tn);c=Ne(f.firestore,Ke),d=f._query;const g=new Xs(c);u={next:v=>{e[o]&&e[o](new Zo(c,g,f,v))},error:e[o+1],complete:e[o+2]},WR(t._query)}return function(f,g,v,_){const T=new om(_),C=new c0(g,T,v);return f.asyncQueue.enqueueAndForget(async()=>a0(await Dl(f),C)),()=>{T.bc(),f.asyncQueue.enqueueAndForget(async()=>l0(await Dl(f),C))}}(Rt(c),d,a,u)}function pY(t,e){return vH(Rt(t=Ne(t,Ke)),Nv(e)?e:{next:e})}function eu(t,e){return function(n,r){const i=new Wt;return n.asyncQueue.enqueueAndForget(async()=>WG(await S0(n),r,i)),i.promise}(Rt(t),e)}function b0(t,e,n){const r=n.docs.get(e._key),i=new Xs(t);return new Jo(t,i,e._key,r,new ms(n.hasPendingWrites,n.fromCache),e.converter)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mY(t,e){return _0(t.query,e.query)&&fl(t.data(),e.data())}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gY(t){const e=Ne(t.firestore,Ke);return function(n,r,i){const s=new Wt;return n.asyncQueue.enqueueAndForget(async()=>{try{if(Gi(await I0(n))){const o=await DR(n),a=new cH(r,o,i).run();s.resolve(a)}else s.reject(new M(D.UNAVAILABLE,"Failed to get count result because the client is offline."))}catch(o){s.reject(o)}}),s.promise}(Rt(e),t,new Xs(e))}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yY={maxAttempts:5};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HR{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=la(e)}set(e,n,r){this._verifyNotCommitted();const i=hs(e,this._firestore),s=mm(i.converter,n,r),o=hm(this._dataReader,"WriteBatch.set",i._key,s,i.converter!==null,r);return this._mutations.push(o.toMutation(i._key,ft.none())),this}update(e,n,r,...i){this._verifyNotCommitted();const s=hs(e,this._firestore);let o;return o=typeof(n=ne(n))=="string"||n instanceof Ks?k0(this._dataReader,"WriteBatch.update",s._key,n,r,i):T0(this._dataReader,"WriteBatch.update",s._key,n),this._mutations.push(o.toMutation(s._key,ft.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=hs(e,this._firestore);return this._mutations=this._mutations.concat(new Hl(n._key,ft.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new M(D.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function hs(t,e){if((t=ne(t)).firestore!==e)throw new M(D.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YR extends class{constructor(e,n){this._firestore=e,this._transaction=n,this._dataReader=la(e)}get(e){const n=hs(e,this._firestore),r=new eY(this._firestore);return this._transaction.lookup([n._key]).then(i=>{if(!i||i.length!==1)return ee();const s=i[0];if(s.isFoundDocument())return new Gc(this._firestore,r,s.key,s,n.converter);if(s.isNoDocument())return new Gc(this._firestore,r,n._key,null,n.converter);throw ee()})}set(e,n,r){const i=hs(e,this._firestore),s=mm(i.converter,n,r),o=hm(this._dataReader,"Transaction.set",i._key,s,i.converter!==null,r);return this._transaction.set(i._key,o),this}update(e,n,r,...i){const s=hs(e,this._firestore);let o;return o=typeof(n=ne(n))=="string"||n instanceof Ks?k0(this._dataReader,"Transaction.update",s._key,n,r,i):T0(this._dataReader,"Transaction.update",s._key,n),this._transaction.update(s._key,o),this}delete(e){const n=hs(e,this._firestore);return this._transaction.delete(n._key),this}}{constructor(e,n){super(e,n),this._firestore=e}get(e){const n=hs(e,this._firestore),r=new Xs(this._firestore);return super.get(e).then(i=>new Jo(this._firestore,r,n._key,i._document,new ms(!1,!1),n.converter))}}function vY(t,e,n){t=Ne(t,Ke);const r=Object.assign(Object.assign({},yY),n);return function(i){if(i.maxAttempts<1)throw new M(D.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(i,s,o){const a=new Wt;return i.asyncQueue.enqueueAndForget(async()=>{const u=await DR(i);new dH(i.asyncQueue,u,o,s,a).run()}),a.promise}(Rt(t),i=>e(new YR(t,i)),r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _Y(){return new kh("deleteField")}function wY(){return new E0("serverTimestamp")}function IY(...t){return new UH("arrayUnion",t)}function SY(...t){return new $H("arrayRemove",t)}function EY(t){return new VH("increment",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TY(t){return Rt(t=Ne(t,Ke)),new HR(t,e=>eu(t,e))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kY(t,e){var n;const r=Rt(t=Ne(t,Ke));if(!(!((n=r.offlineComponents)===null||n===void 0)&&n.indexBackfillerScheduler))return Wo("Cannot enable indexes when persistence is disabled"),Promise.resolve();const i=function(s){const o=typeof s=="string"?function(u){try{return JSON.parse(u)}catch(c){throw new M(D.INVALID_ARGUMENT,"Failed to parse JSON: "+(c==null?void 0:c.message))}}(s):s,a=[];if(Array.isArray(o.indexes))for(const u of o.indexes){const c=BT(u,"collectionGroup"),d=[];if(Array.isArray(u.fields))for(const f of u.fields){const g=dm("setIndexConfiguration",BT(f,"fieldPath"));f.arrayConfig==="CONTAINS"?d.push(new Pd(g,2)):f.order==="ASCENDING"?d.push(new Pd(g,0)):f.order==="DESCENDING"&&d.push(new Pd(g,1))}a.push(new Vf(Vf.UNKNOWN_ID,c,d,Fc.empty()))}return a}(e);return lm(r).then(s=>async function(o,a){const u=H(o),c=u.indexManager,d=[];return u.persistence.runTransaction("Configure indexes","readwrite",f=>c.getFieldIndexes(f).next(g=>function(v,_,T,C,I){v=[...v],_=[..._],v.sort(T),_.sort(T);const w=v.length,S=_.length;let A=0,O=0;for(;A<S&&O<w;){const L=T(v[O],_[A]);L<0?I(v[O++]):L>0?C(_[A++]):(A++,O++)}for(;A<S;)C(_[A++]);for(;O<w;)I(v[O++])}(g,a,kq,v=>{d.push(c.addFieldIndex(f,v))},v=>{d.push(c.deleteFieldIndex(f,v))})).next(()=>N.waitFor(d)))}(s,i))}function BT(t,e){if(typeof t[e]!="string")throw new M(D.INVALID_ARGUMENT,"Missing string value for: "+e);return t[e]}(function(t,e=!0){(function(n){zl=n})(Ml),Uo(new Rs("firestore",(n,{instanceIdentifier:r,options:i})=>{const s=n.getProvider("app").getImmediate(),o=new Ke(new vq(n.getProvider("auth-internal")),new Iq(n.getProvider("app-check-internal")),function(a,u){if(!Object.prototype.hasOwnProperty.apply(a.options,["projectId"]))throw new M(D.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ms(a.options.projectId,u)}(s,r),s);return i=Object.assign({useFetchStreams:e},i),o._setSettings(i),o},"PUBLIC").setMultipleInstances(!0)),ni($E,"3.8.3",t),ni($E,"3.8.3","esm2017")})();const CY=Object.freeze(Object.defineProperty({__proto__:null,AbstractUserDataWriter:D0,AggregateField:uH,AggregateQuerySnapshot:TR,Bytes:$s,CACHE_SIZE_UNLIMITED:SH,CollectionReference:Vr,DocumentReference:Tt,DocumentSnapshot:Jo,FieldPath:Ks,FieldValue:Qs,Firestore:Ke,FirestoreError:M,GeoPoint:um,LoadBundleTask:RR,Query:tn,QueryCompositeFilterConstraint:ca,QueryConstraint:Jl,QueryDocumentSnapshot:sc,QueryEndAtConstraint:Dh,QueryFieldFilterConstraint:Zl,QueryLimitConstraint:Ch,QueryOrderByConstraint:pm,QuerySnapshot:Zo,QueryStartAtConstraint:Nh,SnapshotMetadata:ms,Timestamp:pt,Transaction:YR,WriteBatch:HR,_DatabaseId:Ms,_DocumentKey:G,_EmptyAppCheckTokenProvider:Sq,_EmptyAuthCredentialsProvider:Ub,_FieldPath:Et,_cast:Ne,_debugAssert:gq,_isBase64Available:xq,_logWarn:Wo,_validateIsNotUsedTogether:wR,addDoc:dY,aggregateQuerySnapshotEqual:mY,and:GH,arrayRemove:SY,arrayUnion:IY,clearIndexedDbPersistence:NH,collection:sH,collectionGroup:oH,connectFirestoreEmulator:SR,deleteDoc:hY,deleteField:_Y,disableNetwork:AH,doc:ER,documentId:MH,enableIndexedDbPersistence:kH,enableMultiTabIndexedDbPersistence:CH,enableNetwork:bH,endAt:ZH,endBefore:JH,ensureFirestoreConfigured:Rt,executeWrite:eu,getCountFromServer:gY,getDoc:rY,getDocFromCache:iY,getDocFromServer:sY,getDocs:oY,getDocsFromCache:aY,getDocsFromServer:lY,getFirestore:TH,increment:EY,initializeFirestore:EH,limit:YH,limitToLast:KH,loadBundle:xH,namedQuery:OH,onSnapshot:fY,onSnapshotsInSync:pY,or:qH,orderBy:HH,query:jH,queryEqual:_0,refEqual:aH,runTransaction:vY,serverTimestamp:wY,setDoc:uY,setIndexConfiguration:kY,setLogLevel:mq,snapshotEqual:nY,startAfter:XH,startAt:QH,terminate:RH,updateDoc:cY,waitForPendingWrites:DH,where:zH,writeBatch:TY},Symbol.toStringTag,{value:"Module"})),NY=jT(CY);Object.defineProperty(ji,"__esModule",{value:!0});var Tr=NY,Vt=Sn;/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function KR(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(d){try{c(r.next(d))}catch(f){o(f)}}function u(d){try{c(r.throw(d))}catch(f){o(f)}}function c(d){d.done?s(d.value):i(d.value).then(a,u)}c((r=r.apply(t,e||[])).next())})}function QR(t,e){var n={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},r,i,s,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(c){return function(d){return u([c,d])}}function u(c){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,i&&(s=c[0]&2?i.return:c[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,c[1])).done)return s;switch(i=0,s&&(c=[c[0]&2,s.value]),c[0]){case 0:case 1:s=c;break;case 4:return n.label++,{value:c[1],done:!1};case 5:n.label++,i=c[1],c=[0];continue;case 7:c=n.ops.pop(),n.trys.pop();continue;default:if(s=n.trys,!(s=s.length>0&&s[s.length-1])&&(c[0]===6||c[0]===2)){n=0;continue}if(c[0]===3&&(!s||c[1]>s[0]&&c[1]<s[3])){n.label=c[1];break}if(c[0]===6&&n.label<s[1]){n.label=s[1],s=c;break}if(s&&n.label<s[2]){n.label=s[2],n.ops.push(c);break}s[2]&&n.ops.pop(),n.trys.pop();continue}c=e.call(t,n)}catch(d){c=[6,d],i=0}finally{r=s=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var qa=function(){return qa=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},qa.apply(this,arguments)},XR=function(t){return{loading:t==null,value:t}},DY=function(){return function(t,e){switch(e.type){case"error":return qa(qa({},t),{error:e.error,loading:!1,value:void 0});case"reset":return XR(e.defaultValue);case"value":return qa(qa({},t),{error:void 0,loading:!1,value:e.value});default:return t}}},gm=function(t){var e=t?t():void 0,n=Vt.useReducer(DY(),XR(e)),r=n[0],i=n[1],s=Vt.useCallback(function(){var u=t?t():void 0;i({type:"reset",defaultValue:u})},[t]),o=Vt.useCallback(function(u){i({type:"error",error:u})},[]),a=Vt.useCallback(function(u){i({type:"value",value:u})},[]);return Vt.useMemo(function(){return{error:r.error,loading:r.loading,reset:s,setError:o,setValue:a,value:r.value}},[r.error,r.loading,s,o,a,r.value])},JR=function(t,e,n){var r=Vt.useRef(t);return Vt.useEffect(function(){e(t,r.current)||(r.current=t,n&&n())}),r},ZR=function(){var t=Vt.useState(!0),e=t[0],n=t[1];return Vt.useEffect(function(){return function(){n(!1)}},[]),e},bY=function(t,e){var n=!t&&!e,r=!!t&&!!e&&Tr.refEqual(t,e);return n||r},ex=function(t,e){return JR(t,bY,e)},AY=function(t,e){var n=!t&&!e,r=!!t&&!!e&&Tr.queryEqual(t,e);return n||r},tx=function(t,e){return JR(t,AY,e)},nx=function(t,e){var n=gm(),r=n.error,i=n.loading,s=n.reset,o=n.setError,a=n.setValue,u=n.value,c=tx(t,s);return Vt.useEffect(function(){if(!c.current){a(void 0);return}var d=e!=null&&e.snapshotListenOptions?Tr.onSnapshot(c.current,e.snapshotListenOptions,a,o):Tr.onSnapshot(c.current,a,o);return function(){d()}},[c.current]),[u,i,r]},rx=function(t,e){var n=gm(),r=n.error,i=n.loading,s=n.reset,o=n.setError,a=n.setValue,u=n.value,c=ZR(),d=tx(t,s),f=Vt.useCallback(function(v,_){return KR(void 0,void 0,void 0,function(){var T,C,I;return QR(this,function(w){switch(w.label){case 0:if(!v)return a(void 0),[2];T=OY(_==null?void 0:_.getOptions),w.label=1;case 1:return w.trys.push([1,3,,4]),[4,T(v)];case 2:return C=w.sent(),c&&a(C),[3,4];case 3:return I=w.sent(),c&&o(I),[3,4];case 4:return[2]}})})},[]),g=Vt.useCallback(function(){return f(d.current,e)},[f,d.current]);return Vt.useEffect(function(){f(d.current,e)},[d.current]),[u,i,r,g]},RY=function(t,e){var n=nx(t,e),r=n[0],i=n[1],s=n[2],o=ix(r,e==null?void 0:e.snapshotOptions,e==null?void 0:e.initialValue);return[o,i,s,r]},xY=function(t,e){var n=rx(t,e),r=n[0],i=n[1],s=n[2],o=n[3],a=ix(r,e==null?void 0:e.snapshotOptions,e==null?void 0:e.initialValue);return[a,i,s,r,o]},ix=function(t,e,n){return Vt.useMemo(function(){var r;return(r=t==null?void 0:t.docs.map(function(i){return i.data(e)}))!==null&&r!==void 0?r:n},[t,e])},OY=function(t){var e=t===void 0?{source:"default"}:t,n=e.source;switch(n){default:case"default":return Tr.getDocs;case"cache":return Tr.getDocsFromCache;case"server":return Tr.getDocsFromServer}},sx=function(t,e){var n=gm(),r=n.error,i=n.loading,s=n.reset,o=n.setError,a=n.setValue,u=n.value,c=ex(t,s);return Vt.useEffect(function(){if(!c.current){a(void 0);return}var d=e!=null&&e.snapshotListenOptions?Tr.onSnapshot(c.current,e.snapshotListenOptions,a,o):Tr.onSnapshot(c.current,a,o);return function(){d()}},[c.current]),[u,i,r]},ox=function(t,e){var n=gm(),r=n.error,i=n.loading,s=n.reset,o=n.setError,a=n.setValue,u=n.value,c=ZR(),d=ex(t,s),f=Vt.useCallback(function(v,_){return KR(void 0,void 0,void 0,function(){var T,C,I;return QR(this,function(w){switch(w.label){case 0:if(!v)return a(void 0),[2];T=LY(_==null?void 0:_.getOptions),w.label=1;case 1:return w.trys.push([1,3,,4]),[4,T(v)];case 2:return C=w.sent(),c&&a(C),[3,4];case 3:return I=w.sent(),c&&o(I),[3,4];case 4:return[2]}})})},[]),g=Vt.useCallback(function(){return f(d.current,e)},[f,d.current]);return Vt.useEffect(function(){if(!d.current){a(void 0);return}f(d.current,e)},[d.current]),[u,i,r,g]},MY=function(t,e){var n=sx(t,e),r=n[0],i=n[1],s=n[2],o=ax(r,e==null?void 0:e.snapshotOptions,e==null?void 0:e.initialValue);return[o,i,s,r]},PY=function(t,e){var n=ox(t,e),r=n[0],i=n[1],s=n[2],o=n[3],a=ax(r,e==null?void 0:e.snapshotOptions,e==null?void 0:e.initialValue);return[a,i,s,r,o]},LY=function(t){var e=t===void 0?{source:"default"}:t,n=e.source;switch(n){default:case"default":return Tr.getDoc;case"cache":return Tr.getDocFromCache;case"server":return Tr.getDocFromServer}},ax=function(t,e,n){return Vt.useMemo(function(){var r;return(r=t==null?void 0:t.data(e))!==null&&r!==void 0?r:n},[t,e,n])};ji.useCollection=nx;ji.useCollectionData=RY;ji.useCollectionDataOnce=xY;ji.useCollectionOnce=rx;ji.useDocument=sx;ji.useDocumentData=MY;ji.useDocumentDataOnce=PY;ji.useDocumentOnce=ox;const lx=fC({apiKey:"AIzaSyC2D0ck265uZEPfbUhZ2XcR6g6mJCxyfac",authDomain:"pie-chart-demo.firebaseapp.com",databaseURL:"https://pie-chart-demo-default-rtdb.firebaseio.com",projectId:"pie-chart-demo",storageBucket:"pie-chart-demo.appspot.com",messagingSenderId:"164237282596",appId:"1:164237282596:web:dc8c7ead80c411e36137b1"}),FY=yN(lx),UY=Vz(lx);function $Y(){const{brightness:t}=Sn.useContext(Jk);d3(FY),Sn.useState("...");const[e,n]=Sn.useState(0),[r,i]=Sn.useState(0),[s,o]=Sn.useState(0),a=[e,r,s],u=a.reduce((v,_)=>v+_),c={".pieA":e,".pieB":r,".pieC":s},d=f(a);function f(v){if(v.every(w=>w===0))return["calc(1px/3) calc(2px/3) 0 0","0 calc(1px/3) calc(1px/3) calc(1px/3)","0 calc(2px/3) calc(1px/3), 0"];const _=[],T=v[0],C=v[v.length-1],I=v.slice(1,v.length-1);return _.push(`calc(${T}px/${u}) calc(${u-T}px/${u})`),I.forEach(w=>{let S="0",A=`calc(${T}px/${u})`,O=`calc(${w}px/${u})`,P=`calc(${u-(T+w)}px/${u})`;_.push([S,A,O,P].join(" "))}),_.push(`0 calc(${u-C}px/${u}) calc(${C}px/${u})`),_}function g(v){return v?Math.floor((v/u).toFixed(2)*100):0}return Sn.useEffect(()=>{Object.keys(c).forEach((v,_)=>{let T=document.querySelector(`${v}`);T.style.strokeDasharray=`${d[_]}`})}),Sn.useEffect(()=>{xz(Az(UY,"points"),{red:0,blue:0,purple:0})},[]),ts("div",{className:"App",children:[qn("div",{className:"chartDisplay",children:ts("svg",{width:"400",height:"400",className:"chart",children:[ts("defs",{children:[qn("filter",{id:"blur",width:"3",height:"3",x:"-1",y:"-1",children:qn("feGaussianBlur",{in:"SourceGraphic",stdDeviation:"2"})}),ts("filter",{id:"lighting",width:"3",height:"3",x:"-1",y:"-1",children:[qn("feDiffuseLighting",{in:"SourceGraphic",result:"light",lightingColor:"white",children:qn("fePointLight",{x:"-20",y:"200",z:`${t}`})}),qn("feComposite",{in:"SourceGraphic",in2:"light",operator:"arithmetic",k1:"1",k2:"0",k3:"0",k4:"0"})]})]}),qn("circle",{r:"100",cx:"200",cy:"200",className:"pieA",pathLength:"1",filter:"url(#lighting)"}),qn("circle",{r:"100",cx:"200",cy:"200",className:"pieB",pathLength:"1",filter:"url(#lighting)"}),qn("circle",{r:"100",cx:"200",cy:"200",className:"pieC",pathLength:"1",filter:"url(#lighting)"})]})}),qn("h1",{children:"VOTE TIME"}),ts("div",{className:"card",children:[ts("button",{onClick:()=>{n(v=>v+1)},children:["Red is ",g(e),"%"]}),ts("button",{onClick:()=>{i(v=>v+1)},children:["Purple is ",g(r),"%"]}),ts("button",{onClick:()=>{o(v=>v+1)},children:["Blue is ",g(s),"%"]})]})]})}Fg.createRoot(document.getElementById("root")).render(qn(GP.StrictMode,{children:qn(rU,{children:qn($Y,{})})}));
